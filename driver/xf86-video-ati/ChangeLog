commit 99cb8c3faf1a4ce368b7500f17a2a7868c15e8e8
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Nov 12 13:38:14 2015 +0900

    Set version for 7.6.1 release

commit 4a2114a717ec8d78cacd8fe158e132d62013faac
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Nov 12 13:32:25 2015 +0900

    Remove duplicate free(output_ids) call
    
    Fixes double-free regression introduced by commit 875ad48e ("Simplify
    drmmode_set_mode_major() and avoid leaking memory.").

commit 960a9f37096b53ec9603a99c7b1f3679f915e03f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Nov 12 13:20:18 2015 +0900

    Post 7.6.0 release version bump

commit 9aae4b71fb402841439e3267fcb7f410d8429c3a
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Nov 12 11:56:48 2015 +0900

    Bump version for 7.6.0 release

commit 98291869ac4a542a0b478920586407ff9d2c8ef0
Author: Tom St Denis <tom.stdenis@amd.com>
Date:   Wed Nov 11 16:01:41 2015 +0900

    Clean up radeon_dri2_create_buffer2()
    
    Remove the depth_pixmap variable from the function and clear
    out any dead/odd behaviour that results.
    
    Signed-off-by: Tom St Denis <tom.stdenis@amd.com>
    (ported from amdgpu commit 6000aef4e2f0a121b94023484406fb6f04688f74)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit c6fc7e309a8a922f94a1f5f3e8bfb9058cff7ad1
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Nov 11 15:59:06 2015 +0900

    Properly handle drmModeAddFB failure in drmmode_crtc_scanout_allocate
    
    We were printing an error message, but not propagating the failure. That
    would probably lead to trouble down the road.
    
    (ported from amdgpu commit 21e72fb2418b5cc7fc849a9cf951186e209036b0)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 4e4f4d53da0539ef9feb8766230a6e9927ae005b
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Nov 11 15:57:21 2015 +0900

    Eliminate redundant data parameter from drmmode_crtc_scanout_create
    
    drmmode_crtc_scanout_create just needs to call
    drmmode_crtc_scanout_allocate when scanout->bo is NULL.
    
    This makes it clearer to the reader / compiler that
    drmmode_crtc_scanout_create doesn't dereference scanout->bo when it's
    NULL.
    
    (ported from amdgpu commit 8da1d0c870e1081d77925807d6e3bbc61a23f54f)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 421a7e797bdd58d83e81af7a6512cc715a3df514
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Nov 11 15:51:58 2015 +0900

    Don't advertise rotation support without hardware acceleration v2
    
    Rotation currently doesn't work without acceleration (doesn't actually
    rotate with Option "NoAccel", crashes with Option "AccelMethod" "none"
    or when glamor fails to initialize) and would probably be too slow
    anyway.
    
    v2: Also remove now dead code checking for ShadowFB from
        drmmode_crtc_scanout_allocate().
    
    (ported from amdgpu commit dc40582d5ff94d812cbc08f95cf14b80cd0f410d)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 875ad48e7b5cdb7beefbf18dddcbee3ed22b5446
Author: Tom St Denis <tom.stdenis@amd.com>
Date:   Wed Nov 11 15:51:19 2015 +0900

    Simplify drmmode_set_mode_major() and avoid leaking memory.
    
    The function would leak the memory allocated for output_ids.  This
    patch addresses that as well as simplifies the logic somewhat.
    
    Signed-off-by: Tom St Denis <tom.stdenis@amd.com>
    (ported from amdgpu commit 460560502a1bdf26d06f3c30df46fa9f28ffb9e5)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 789d7d6a04cca6b36fb088a074027807ccb8dd61
Author: Tom St Denis <tom.stdenis@amd.com>
Date:   Wed Nov 11 15:48:51 2015 +0900

    Clean up allocation in RADEONInitVideo()
    
    The allocation of the adapters should use the correct sizeof (even if
    allocating an array of pointers).
    
    Signed-off-by: Tom St Denis <tom.stdenis@amd.com>
    (ported from amdgpu commit db3bb2061b9ac16b0922d9afae99874820356a04)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit d88fa0dd5d37604de8efb05853738cfaca6a3166
Author: Tom St Denis <tom.stdenis@amd.com>
Date:   Wed Nov 11 15:46:50 2015 +0900

    Simplify pick best crtc to fold two loops into one
    
    This patch folds the two for loops from radeon_pick_best_crtc() into
    one to reduce the LOC and make the routine easier to read.
    
    Signed-off-by: Tom St Denis <tom.stdenis@amd.com>
    (ported from amdgpu commit 3055724aef76a624718f26d5f0f9e9d567ffbcfb)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit dbbcd75b3c80aba77673904d46bca97779fd8a8d
Author: Tom St Denis <tom.stdenis@amd.com>
Date:   Wed Nov 11 12:54:54 2015 +0900

    dri2: Avoid calculation with undefined msc value
    
    If the get_msc() call fails for any reason we should avoid updating the
    vblank counter delta with undefined data.
    
    Signed-off-by: Tom St Denis <tom.stdenis@amd.com>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com> (minor fixups)
    (ported from amdgpu commit 8823c3d4c6db70cff7699b31088f2d92db8faaf4)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 7186a8713ba004de4991f21c1a9fc4abc62aeff4
Author: Stephen Chandler Paul <cpaul@redhat.com>
Date:   Fri Oct 23 09:59:36 2015 -0400

    Handle failures in setting a CRTC to a DRM mode properly
    
    This fixes a bug where running the card out of PPLL's when hotplugging
    another monitor would result in all of the displays going blank and
    failing to work properly until X was restarted or the user switched to
    another VT.
    
    [Michel Dänzer: Pass errno instead of -ret to strerror()]
    
    Signed-off-by: Stephen Chandler Paul <cpaul@redhat.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 548e97b3b7d1e94075a54ca2bb4eb683025098a7
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Oct 16 16:26:58 2015 +0900

    Call xf86CrtcRotate from initial drmmode_set_desired_modes call
    
    Fixes various problems when rotation is specified in xorg.conf.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=92475
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit ce9914af8d8d5243977023ec7b09c605f9cca8b4
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Oct 2 18:07:18 2015 +0900

    Only align screen / scanout pixmap height where necessary
    
    When using glamor acceleration, the pixmap's header has to have a height
    that matches exactly what the actual height is minus the GPU memory
    alignment. Otherwise CRTCs scanning out from the main scanout buffer
    (e.g. every CRTC that isn't rotated or transformed in some way) won't
    always work. This results in a bug where rotating one monitor in a
    multi-monitor setup won't always work properly. Easiest way to reproduce
    this:
    
    - Have two monitors (I've gotten this working with a 1920x1080 and
      1280x1024, along with two 1920x1080s)
    - Rotate one of them from 0° to 90°, then rotate the same monitor from
      90° to 180°. The monitor that hasn't been rotated won't properly
      update, and will stay on a blank screen
    
    This doesn't seem to make any difference when using EXA for
    acceleration.
    
    Compared to Stephen Chandler's patch, this drops the height alignment
    in most places and only keeps it where it's really necessary.
    
    Reported-and-Tested-by: Stephen Chandler Paul <cpaul@redhat.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 0288a4b87b65ba54f37fbeeea3cb32238deee92e
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Aug 19 16:54:14 2015 +0900

    DRI2: Keep MSC monotonic when moving window between CRTCs
    
    This mirrors the DRI3 implementation in xserver. Fixes VDPAU video
    playback hanging when moving the window between CRTCs.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=66384
    
    (Ported from amdgpu commit 63948ea091a9b324327ade7ec4fc5d67ca7e6f6f)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 1d886b526dc49f32dc6744b7a882894bdac4e846
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Aug 19 18:11:45 2015 +0900

    DRI2: Don't ignore rotated CRTCs in amdgpu_dri2_drawable_crtc
    
    Waiting for vblank interrupts works fine with rotated CRTCs. The only
    case we can't handle with rotation is page flipping, which is handled
    in can_exchange().
    
    This fixes gnome-shell hanging on rotation, probably because
    amdgpu_dri2_get_msc returned MSC/UST 0 for rotated CRTCs.
    
    (Ported from amdgpu commit 7b3212e33cd36fb6f122774df27b56ec4e1a22b8)
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 270da55340766074cabff8af4258e29fe2f0fc81
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Aug 10 15:32:34 2015 -0400

    add new OLAND pci id
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit f123096877f0a0044f3d0315285441f2b5790c29
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Mon Aug 10 23:34:39 2015 +0200

    Make selection between DRI2 and DRI3 consistent with other drivers. (v2)
    
    Add Option "DRI" to allow selection of maximum DRI level.
    
    This allows the user to select the maximum level of DRI
    implementation to use, DRI2 or DRI3. It replaces the old
    option "DRI3" which had exactly the same purpose, but
    differs from the method used in both intel ddx and nouveau ddx.
    Make this consistent before a new stable driver is released.
    
    v2: Retain handling of old Option "DRI3" for backwards
        compatibility, but Option "DRI" will take precedence
        over "DRI3" if both are provided.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 3791fceabf2cb037467dc41c15364e9f9ec1e47e
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Aug 6 16:27:01 2015 +0900

    Wait for scanout BO initialization to finish before setting mode
    
    This should avoid intermittent artifacts which could sometimes be visible
    when setting a new scanout pixmap, e.g. on server startup or when
    changing resolutions.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 4e3dfa69e4630df2e0ec0f5b81d61159757c4664
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Aug 6 16:16:38 2015 +0900

    Only call drmmode_copy_fb (at most) once on server startup
    
    It doesn't make sense to copy the screen contents from console when VT
    switching back to Xorg or when Xorg resets.
    
    Fixes intermittent artifacts when VT switching back from console to the
    gdm login screen.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 09c7cdb923965f9a1ea11d2f449bc02114408938
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jul 30 15:58:54 2015 +0900

    glamor: Move declaration of struct radeon_pixmap out of #if/#else blocks
    
    Reviewed-by: Dave Airlie <airlied@redhat.com>

commit 936582fde0db461c5c3d78ce4f5f4c93a88a489d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jul 30 15:56:36 2015 +0900

    Remove unused local variable pRADEONEnt
    
    ../../src/radeon_probe.c: In function 'radeon_get_scrninfo':
    ../../src/radeon_probe.c:157:22: warning: variable 'pRADEONEnt' set but not used [-Wunused-but-set-variable]
             RADEONEntPtr pRADEONEnt;
                          ^
    
    Reviewed-by: Dave Airlie <airlied@redhat.com>

commit 5510cd6027d2387efdf33575e3bfc424cb11bfd8
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jul 27 09:22:57 2015 +1000

    radeon: move radeon_pixmap forward declaration into other block
    
    There is already a radeon_pixmap forward decl here, the #else
    block is missing one.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b32a0a3de84a44b9af4f1ca8be19f10d7fa31b12
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Jul 22 13:35:07 2015 +1000

    radeon: cleanup the entity rec
    
    Some of these were set, some of them were
    always opposites, so clean things up.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit fcb32231a38f9461d12720cbf72f63502197a711
Author: Emil Velikov <emil.l.velikov@gmail.com>
Date:   Tue Jul 21 23:55:20 2015 +0100

    Do not link radeon_drv.so against libpciaccess
    
    It's only used/needed by ati_drv.so
    
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit b6d871bf299c7d0f106c07ee4d8bd3b2337f53cc
Author: Dave Airlie <airlied@gmail.com>
Date:   Thu Jul 9 19:25:36 2015 +1000

    radeon: adopt for new X server dirty tracking APIs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 95f5d09e3667ded027ae648c97eb4737d8bf67c5
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu May 28 11:24:42 2015 +0900

    present: Handle DPMS off in radeon_present_get_ust_msc
    
    The DRM_IOCTL_WAIT_VBLANK ioctl may return an error during DPMS off,
    which would trigger an error message in drmmode_crtc_get_ust_msc.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 211862b777d0be251a4662f5dd24f2d400544c09
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri May 1 18:20:01 2015 +0900

    present: Look at all CRTCs to determine if we can flip
    
    Inspired by modesetting driver change by Kenneth Graunke.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 802d33e474a82262d9cdf11b03568b0c4929cd0d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri May 1 18:54:16 2015 +0900

    present: Fall back to modeset for unflip operation
    
    It's not always possible to use the page flip ioctl for this, e.g.
    during DPMS off. We were previously just skipping the unflip in that
    case, which could result in hangs when setting DPMS off while a
    fullscreen Present app is running, e.g. at the GNOME3 lock screen.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit a8ed62010d5012dfb27773595c446b217f3c00c5
Author: Piotr Redlewski <predlewski@gmail.com>
Date:   Mon Jul 6 19:57:07 2015 +0200

    Do not try to enable already enabled CRTCs in DPMS hook
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=91227
    
    Signed-off-by: Piotr Redlewski <predlewski@gmail.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit fc07c370dac4649511eb7322d05a61605a539f39
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Sun Jun 28 02:45:58 2015 +0200

    Fix inconsistent default eg_tile_split in evergreen_accel.c
    
    eg_tile_split() maps the default: switch-case to tile split
    flag 6, like for a tile split size of 4096 Bytes. All other
    instances of tile split mappings or reverse mappings in both
    the ddx and in Mesa's radeon gallium drivers assign the default:
    case to tile split flag 4, consistent with a default of 1024
    Bytes.
    
    Make this one outlier consistent with other instances of
    mappings in the code to avoid surprises.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>

commit ddaba449e8d6fe9fc0d97085e4045843fd8d7af9
Author: Piotr Redlewski <predlewski@gmail.com>
Date:   Wed Jun 24 18:44:39 2015 +0200

    Disable CRTCs when disabling the outputs
    
    When turning the outputs off (DPMSModeOff), CRTCs stayed enabled. This led
    to higher gpu temperatures than with fglrx driver.
    
    v2: when entering DPMS also disable active CRTCs
    v3: use drmmode_set_mode_major() for enabling CRTCs when leaving DPMS
    
    Signed-off-by: Piotr Redlewski <predlewski@gmail.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit acc11877423ecd81a6e0a7f38466f80e43efee20
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Jun 16 17:34:57 2015 +0900

    Skip disabled CRTCs in radeon_scanout_(do_)update
    
    The vblank / page flip ioctls don't work as expected for a disabled CRTC.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit fc9fadaebbc8aead6e030d93a9ccd84561f8f59e
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Mon Jun 22 00:09:17 2015 +0200

    Don't set TILE_SPLIT flags if surface.tile_split == 0.
    
    On pre-Evergreen hw, libdrm's r6_surface_best() helper
    for the surface managers radeon_surface_best() routine
    is a no-op and therefore doesn't assign any tile_split
    settings to created surfaces, so it leaves
    surface.tile_split on its "undefined" value of 0.
    
    Mesa's DRI3/Present backend creates DRI3 Pixmaps via
    the DRIImage extension and the radeon gallium driver
    implementation of that extension uses the libdrm
    surface manager for backing bo creation and treats
    an undefined surface.tile_split==0, as returned by
    the surface manager for pre-evergreen, as a signal
    to not assign any tile_split flags to the DRI3 Pixmaps
    bo.
    
    The ddx also uses libdrm surface manager to create the
    x-screen pixmap, but so far treated the returned undefined
    surface.tile_split==0 by mapping it to eg_tile_split()'s
    default tile_split flags, which are different from Mesa's
    tiling flags for DRI3 pixmaps. Under DRI3/Present this
    causes a mismatch of src pixmap and destination root
    pixmaps tiling flags and thereby prevents page flipping
    for pixmap presents.
    
    Change the ddx code to treat surface.tile_split==0 the
    same way as the radeon gallium driver to avoid mismatched
    tiling flags and thereby allow DRI3/Present page-flip to
    work on pre-Evergreen hw.
    
    Tested on RV730 and Evergreen "Juniper".
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>

commit 49f5b0bc301414df049e00d226034e3d6e56421b
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri May 1 19:02:36 2015 +0900

    Don't attempt a DRI2/Present page flip while the other one is flipping
    
    Fixes corrupted display and hangs when switching between DRI2 and DRI3
    fullscreen apps, e.g. a compositor using DRI3 and a fullscreen app using
    DRI2 or vice versa.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit afab7839fc15722dbaa7203d00fe7f6ce5336b9d
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Wed Jun 10 20:55:08 2015 +0200

    Allow/Fix use of multiple ZaphodHead outputs per x-screen. (v2)
    
    Defining multiple ZaphodHead outputs per x-screen in a
    multiple x-screen's per gpu configuration caused all
    outputs except one per x-screen to go dark, because
    there was a fixed mapping x-screen number -> crtc number,
    limiting the number of crtc's per x-screen to one.
    
    On a ZaphodHead's setup, be more clever and assign
    as many crtc's to a given x-screen as there are
    ZaphodHeads defined for that screen, assuming
    there are enough unused crtc's available.
    
    Tested on a triple display setup with different combos
    of one, two or three ZaphodHeads per one, two or three
    x-screens.
    
    This is a port of similar code from xf86-video-nouveau.
    
    v2: Implement suggestions by Michel Dänzer: Less verbose
        debug output, more clear warning message on crtc allocation
        failure. Move clearing of per gpu assigned_crtc mask to
        CloseScreen, indeed testing shows no need for the more
        complex new server generation check from v1.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>
    (v1) Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit d7c82731a8bf3d381bc571b94d80d9bb2dd6e40d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu May 21 16:01:16 2015 +0900

    DRI2: Fix handling of drmmode_crtc_get_ust_msc return code
    
    Fixes regression introduced in commit
    76c2923ac5c7230a8b2f9f8329c308d28b44d9c0 ("DRI2: Split out helper for
    getting UST and MSC of a specific CRTC").
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit e58fc380ccf2a581d28f041fd74b963626ca5404
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu May 28 10:59:22 2015 +0900

    glamor: Only wait for GPU writes in radeon_glamor_prepare_access_cpu_ro
    
    We don't need to wait for GPU reads to finish before reading with the
    CPU.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 5f82a720374c9c1caebb42bfbeea1f0cf8847d28
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu May 21 15:46:32 2015 +0900

    present: Remove get_drmmode_crtc helper
    
    It was getting the drmmode_crtc_private_ptr in a roundabout way.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit d64a13ebe0ecd241ee3260dbffd8f4a01e254183
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed May 20 09:58:38 2015 +0900

    Replace SyncFence typedef with declaration of struct _SyncFence
    
    Fixes build failure in some environments:
    
      CC     radeon_sync.lo
    In file included from radeon_sync.c:28:
    /home/tinderbox/xorg-build/include/xorg/misync.h:31: error: redefinition of typedef 'SyncFence'
    radeon.h:93: note: previous declaration of 'SyncFence' was here
    make[2]: *** [radeon_sync.lo] Error 1
    
    Reported-Tested-and-Acked-by: David Airlie <airlied@redhat.com>

commit 818c180c8932233b214a35ba0647af82f7bcec3d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue May 12 17:43:57 2015 +0900

    glamor: Deal with glamor_glyphs_init being removed from xserver
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 7c4b78ab10b82c6dba9f72034ff7583859cca63d
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue May 12 13:21:24 2015 -0400

    add new bonaire pci id
    
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 80eede245d1eda27eaba108b0761a24bfd69aff6
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Sat May 9 07:24:36 2015 +0200

    present: Fix present notify timestamps and counts.
    
    Invalid (msc,ust)=(0,0) were returned to the server
    because a wrong crtc_id was used to specify which
    crtc should deliver pageflip completion data. Fix
    it in accordance with the dri2 implementation.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>

commit e3be8b0a8cf484ff16597413a6172788178e80c8
Author: Mario Kleiner <mario.kleiner.de@gmail.com>
Date:   Sat May 9 07:24:35 2015 +0200

    present: Move check for async flips
    
    Check for and reject currently unsupported async_flip
    inside radeon_present_check_flip() instead of inside
    radeon_present_flip().
    
    This way the server can detect early that async flips
    aren't supported by the ddx and can deal with this
    correctly by using its non-vsync'ed CopyRegion fallback.
    
    Signed-off-by: Mario Kleiner <mario.kleiner.de@gmail.com>

commit 1584dc545c78e0bce8d4b4b9f26b568e2c211453
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Apr 28 17:14:11 2015 +0900

    Skip disabled CRTCs in drmmode_set_desired_modes() even if set_hw == FALSE
    
    Not skipping a disabled CRTC results in a crash.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90187
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 340baf3804b7d9de8082badfc715a9bee7856e8f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Apr 27 15:07:06 2015 +0900

    Don't call radeon_get_pixmap_private() when using EXA
    
    It only works when using glamor.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90169
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 80f3d727f93cb6efedd2b39338d2301035965fe2
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Apr 22 13:33:15 2015 +0900

    On screen resize, clear the new buffer before displaying it
    
    Fixes garbage being intermittently visible during a screen resize.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=27757#c7
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 3999bf88cdb192fe2f30b03bd2ed6f6a3f9f9057
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 2 18:29:38 2015 +0900

    Make drmmode_copy_fb() work with glamor as well
    
    Needed for Xorg -background none.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit a4a8cdbcc10c1c5f07485a2af9e9e81e490c3e1d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 2 17:46:34 2015 +0900

    Update scanout pixmap contents before setting a mode with it
    
    This ensures the scanout pixmaps used for Option "TearFree" and Option
    "ShadowPrimary" have been initialized when their initial mode is set.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 673e1c7637687c74fc9bdeeeffb7ace0d04b734f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 2 17:54:33 2015 +0900

    Defer initial modeset until the first BlockHandler invocation
    
    This ensures that the screen pixmap contents have been initialized when
    the initial modes are set.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=27757
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 37874a4eeace5df04b02c8fc28f67b824e3f0f5f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Apr 21 17:19:15 2015 +0900

    Defer initial drmmode_copy_fb call until root window creation
    
    That's late enough for acceleration to be fully initialized, but still
    early enough to set pScreen->canDoBGNoneRoot.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 39c497f3efca5ca08343b884f44c93215dcdef31
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 2 18:10:42 2015 +0900

    Only copy fbcon BO contents if bgNoneRoot is TRUE
    
    Otherwise, the X server will initialize the screen pixmap contents
    anyway.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 1af044d7eee211fd4b248c236280274a68334da5
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Apr 22 18:43:02 2015 +0900

    DRI2: Clear old->devPrivate.ptr in fixup_glamor
    
    It doesn't point to the memory of the newly allocated BO. Fixes crash
    running piglit with Option "ShadowPrimary" enabled.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 43159ef400c3b18b9f4d3e6fa1c4aef2d60d38fe
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Apr 20 18:44:36 2015 +0900

    Add Option "TearFree" v4
    
    Avoids tearing by flipping between two scanout BOs per (non-rotated) CRTC
    
    v2:
    * Fix condition for TearFree log message (Richard Wilbur)
    * Log warning message about DRI page flipping being enabled because of
      TearFree (or ShadowPrimary) also when building without glamor support
    
    v3:
    * Only override fb_id/x/y if all scanout pixmaps have been successfully
      allocated
    
    v4:
    * Make log warning clearer if drmModePageFlip returns an error
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com> (v1)

commit ed401f5b4f07375db17ff05e294907ec95fc946d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Apr 3 12:11:00 2015 +0900

    glamor: Remove the stride member of struct radeon_pixmap
    
    Its value was always the same as that of the PixmapRec devKind member.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit ae92d1765fa370a8d94c2856ad6c45d273ec3c69
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 18 16:23:24 2015 +0900

    glamor: Add Option "ShadowPrimary" v2
    
    When this option is enabled, most pixmaps (including the screen pixmap)
    are allocated in system RAM and mostly accessed by the CPU. Changed areas
    of the screen pixmap are copied to dedicated per-CRTC scanout pixmaps
    regularly, triggered by the vblank interrupt.
    
    v2:
    * Set region data pointer to NULL for keeping only the extents
    * Move pRegion and pBox local variable declarations closer to their uses
      in drmmode_set_mode_major()

commit eea79472a84672ee4dc7adc4487cec6a4037048a
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Apr 1 15:51:52 2015 +0900

    glamor: Add wrappers for the X server rendering hooks
    
    They can choose between using the GPU or CPU for the operation.

commit 051d46382656ffc3e6cac1aab3aee7efdf5b623a
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 19 17:34:27 2015 +0900

    glamor: Add radeon_pixmap parameter to radeon_glamor_create_textured_pixmap

commit 2fa021f77372ca93375a3d13a0c43a9089674899
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 19 17:38:47 2015 +0900

    glamor: Remove unused function radeon_glamor_pixmap_is_offscreen

commit e96349ba6281fd18b8bf9c76629128276b065e6c
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Apr 1 16:04:13 2015 +0900

    Add RADEON_CREATE_PIXMAP_SCANOUT flag
    
    It means that the pixmap is used for scanout exclusively.

commit 9be7dd382e86d2b804de81d4e2af7431b2e16843
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Apr 1 12:40:16 2015 +0900

    Split out struct drmmode_scanout for rotation shadow buffer information
    
    Will be used for other kinds of dedicated scanout buffers as well.

commit c32b0530302739f6512755bccf281c2300617376
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 19 17:46:48 2015 +0900

    Rename scanout_pixmap_x field to prime_pixmap_x
    
    To avoid confusion with upcoming changes.

commit 5921ba4ca705a0d919515626088f3948cc4848c1
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 31 15:14:52 2015 +0900

    present: Don't flip between BOs with different tiling parameters
    
    The kernel driver doesn't handle that correctly yet.
    
    Fixes or at least avoids issues with OpenGL fullscreen apps with DRI3
    enabled and using PRIME or with (2D) tiling disabled.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89720
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 428e416e7cb04a1e0527da39cfebf70218879a77
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 2 10:34:03 2015 +0900

    Add radeon_get_pixmap_tiling_flags helper
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 98fb4199e63fedd4607cddee64bf602d6398df81
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 31 12:25:18 2015 +0900

    Only enable SYNC extension fences and the Present extension along with DRI3
    
    This avoids some trouble with the Gallium nine state tracker, which uses
    the Present extension even when DRI3 is disabled.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89772
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit f8b0f23e9f4af9f9097ee5e72d53b45173163c41
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Mar 27 12:34:55 2015 +0900

    DRI2: Use radeon_get_pixmap_handle
    
    Now we can share pixmaps with no struct radeon_bo via DRI2.
    
    Fixes VDPAU video playback freezing when using an OpenGL compositor with
    DRI3 enabled.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89755
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Tested-by: Nick Sarnie <commendsarnex@gmail.com>

commit ccbda955ebae1d457d35293833f12791e0f9fb0b
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Mar 27 12:16:44 2015 +0900

    Move get_pixmap_handle helper to radeon_bo_helper.c
    
    No functional change.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Tested-by: Nick Sarnie <commendsarnex@gmail.com>

commit de5ddd09db82141b263338dcf0c28e01f58268ee
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 26 16:33:02 2015 +0900

    Move radeon_drm_handler/abort_proc fields to drmmode_flipdata_rec
    
    Their values are the same for all DRM flip ioctl calls within a single
    radeon_do_pageflip() call.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit e8c0f6319fbf4c3ea11e22ab1a68837031bdec8c
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 26 16:27:35 2015 +0900

    Simplify radeon_do_pageflip() error handling slightly more
    
    We don't need the local variable old_fb_id.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 8fc22360d5520469c82092ccb0fcf2af330c573f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 26 15:58:01 2015 +0900

    Increase robustness against DRM page flip ioctl failures v3
    
    Centralize cleanup, only clean up things that have been allocated for
    the failed ioctl call.
    
    Fixes double-free after a flip ioctl failure.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89681
    
    v2: Only call drmModeRmFB for flipdata->old_fb_id on receipt of last DRM
        page flip event. Fixes Black screen on making glxgears fullscreen with
        DRI3 enabled.
    v3: Avoid double-free of flipdata in the unlikely case that calloc fails
        for flipcarrier, but only for the second or later CRTC.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com> (v2)

commit b16609b453bb1a181198cf27778f205dc23fb642
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 26 17:15:21 2015 +0900

    glamor: Handle GLAMOR_* flags removed from xserver
    
    The behaviour is the same as when the removed flags were passed in.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 391900a670addec39515f924265bfa9f8bfa9ec0
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 18 12:56:07 2015 +0900

    glamor: Avoid generating GEM flink names for BOs shared via DRI3 v2
    
    We can't create our own struct radeon_bo representation in this case
    because destroying that would make the GEM handle inaccessible to glamor
    as well. So just get the handle directly via dma-buf.
    
    v2: Close dma-buf file descriptor, pointed out by Axel Davy.
    
    Reviewed-by: Axel Davy <axel.davy@ens.fr>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit dfad91fffb5bd013785223b42d78886df839eacf
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 19 12:37:01 2015 +0900

    Present: Add radeon_present_get_pixmap_handle helper
    
    Reviewed-by: Axel Davy <axel.davy@ens.fr>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 7b4fc4a677d252d01c2bf80d162bc35814059eaa
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 19 12:15:52 2015 +0900

    Make radeon_do_pageflip take a BO handle directly
    
    Reviewed-by: Axel Davy <axel.davy@ens.fr>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit af6076241c0d322b295a4e898407ae2472bd8eb4
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 24 13:37:01 2015 +0900

    Adapt radeon_sync.c for misyncshm.h vs misync.h as well
    
    This should have been part of the previous commit. Without this, SYNC
    extension fences (and by extension DRI3) were disabled because it checked
    for HAVE_MISYNC_H, but configure now only defines HAVE_MISYNCSHM_H.

commit aa7825eb29cdf6ac9d7b28ad18186807ff384687
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Mar 23 10:12:17 2015 +0900

    configure.ac: Check for misyncshm.h again
    
    We need this header, which was added after the other misync*.h headers,
    along with DRI3 support.

commit 6291baaed261e36a63dc001307427fe00ba82259
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 19 00:12:06 2015 +0900

    EXA: Return NULL from radeon_get_pixmap_bo if there is no driver private
    
    This mirrors what the glamor part of the function does. Fixes a crash
    running glxgears_pixmap with DRI3 enabled, reported by "marvin24" on IRC.

commit f68d9b5ba0c91a725b5eec9386c61bea8824c299
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 18 18:29:27 2015 +0900

    dri3: Use screen->CreatePixmap instead of fbCreatePixmap directly
    
    Fixes crash with EXA reported by "marvin24" on IRC.

commit 4b0997e56dec0053cb2cb793e0f4ae35055ff7e6
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 18 12:30:09 2015 +0900

    glamor: Add glamor_fd_from_pixmap define for standalone glamor tree

commit af1862a37570fa512a525ab47d72b30400d2e2d6
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 18 11:05:40 2015 +0900

    Always include misync.h before other misync headers
    
    Older versions of xserver didn't include misync.h from other misync
    headers as needed.

commit fcd37f65f485291084c174666bd605e215bf1398
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 18 10:39:03 2015 +0900

    DRI3: Use open hook instead of open_client
    
    We don't need the client pointer, and this allows it to work with older
    versions of xserver as well.

commit f940fd741b15f03393037c5bb904cd74f012de9d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 18 10:06:47 2015 +0900

    Initialize boolean variable before calling xf86GetOptValBool
    
    We were just lucky that it contained 0 in most cases.

commit 4a98f60117c387a228d5cbaadb6e298fb4e865df
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 17 16:47:11 2015 +0900

    Add xorg_list_for_each_entry_safe fallback in radeon_list.h
    
    Fixes another build failure against older versions of xserver reported
    by "Pali" on IRC.

commit 694e04720b886060fe3eefdce59741f218c8269f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 17 16:32:09 2015 +0900

    Simplify includes in radeon_{dri3,present}.c
    
    Just include radeon.h first. Fixes build failures against older versions
    of xserver because compat-api.h wasn't getting picked up. Reported by
    "Pali" on IRC.

commit 64e1e4dbdd3caee6f5d8f6b6c094b4533fa94953
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 10 16:53:11 2015 +0900

    Add DRI3 support v2
    
    Must be enabled with
    
    	Option	"DRI3"
    
    in xorg.conf.
    
    v2: Adapt to v2 of patches 11/12.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 69ae0194778fe4276895839db92383f63f0b5de4
Author: David Heidelberger <david.heidelberger@ixit.cz>
Date:   Fri Mar 6 17:57:22 2015 +0900

    Handle tiling in radeon_set_shared_pixmap_backing
    
    [ Michel Dänzer: Fixups for glamor ]
    Signed-off-by: David Heidelberger <david.heidelberger@ixit.cz>
    Signed-off-by: Axel Davy <axel.davy@ens.fr>
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 3c65fb849e1ba9fb6454bcaa55b696548902f3fc
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 10 16:52:54 2015 +0900

    Add support for the Present extension v2
    
    v2: Fix up for struct radeon_drm_queue -> radeon_drm_queue_entry.
        Swapped order of patches 11 & 12 because the Present extension uses
        SYNC fences.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 8fc9a241ab59ffbcdc178d6415332c88a54e85fe
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 5 18:18:56 2015 +0900

    Add support for SYNC extension fences v2
    
    v2: Swapped order of patches 11 & 12 because the Present extension uses
        SYNC fences.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 4a35e2f33d9cdfb608423046391311109f96fb6b
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 5 18:34:07 2015 +0900

    Fold radeon_glamor_flush into radeon_cs_flush_indirect
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 4b8adebb80158bcf81ada83bb88517febe931b12
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 5 18:40:23 2015 +0900

    Move #include "radeon_glamor.h" from radeon.h to where it's needed
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 76c2923ac5c7230a8b2f9f8329c308d28b44d9c0
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 4 10:30:19 2015 +0900

    DRI2: Split out helper for getting UST and MSC of a specific CRTC
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 6c3a721cde9317233072b573f9502348dcd21b16
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 10 16:52:18 2015 +0900

    DRI2: Use helper functions for DRM event queue management v3
    
    This is mostly in preparation for Present support, but it also simplifies
    the DRI2 specific code a little.
    
    v2: Fix up for struct radeon_drm_queue -> radeon_drm_queue_entry.
    v3: Removed excess 0s from conversion from microseconds to seconds,
        thanks to Richard Wilbur <richard.wilbur@gmail.com> for the catch!
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit c3fa22a479e61d1899fa9d327d9c4e2a7f64b0c1
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 11 17:47:59 2015 +0900

    DRI2: Move radeon_dri2_flip_event_handler
    
    In preparation for the next change, which will modify it to a static
    function which needs to be in the new place. No functional change.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 65045112fdc8a9fa36e0e00f46739a6152b775ff
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 11 17:33:54 2015 +0900

    DRI2: Remove superfluous assignments to *_info->frame
    
    That field is only used for page flipping.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit ad27f16f308079d06a2b1c788b3cb0947531253a
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 11 17:30:11 2015 +0900

    DRI2: Simplify blit fallback handling for scheduled swaps
    
    Also use radeon_dri2_schedule_event when possible.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit b4af8a327ed8420f0ff4ea0f113f4a59406ed4d3
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Mar 2 18:59:54 2015 +0900

    Add DRM event queue helpers v2
    
    v2: Rename struct radeon_drm_queue to struct radeon_drm_queue_event,
    thanks to Richard Wilbur <richard.wilbur@gmail.com> for the suggestion.
    Also changed the corresponding parameter and local variable names from
    'q' to 'e'.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 7c3470f4b659206ed23f761948936ede3a2dba3d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Mar 6 18:51:29 2015 +0900

    Move xorg_list backwards compatibility to new radeon_list.h header
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 7388d0b6c54b9d536fdb161e3aa61b326627b939
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 5 17:35:06 2015 +0900

    Require at least xserver 1.8
    
    So we can rely on the list.h header.
    
    xserver 1.8 was released in April 2010.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit b8ec9ed4fe86952763b963c86f0af0dcae69aa6c
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Thu Feb 19 14:47:41 2015 -0500

    Proper leak fix, previous leak fix was bogus.
    
    Signed-off-by: Jérôme Glisse <jglisse@redhat.com>

commit 63dc36dc49f93cb00111b497ab6805194bc9d240
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Thu Feb 19 11:43:08 2015 -0500

    Avoid leaking memory on output.
    
    Signed-off-by: Jérôme Glisse <jglisse@redhat.com>

commit c80ea1e3e8c5f155cedadbe4588870fb1f410ab4
Author: Rolf Eike Beer <eb@emlix.com>
Date:   Tue Jan 13 12:11:26 2015 +0100

    radeon: remove unneeded inclusion of sarea.h
    
    None of the structs or defines from that header is used.
    
    Signed-off-by: Rolf Eike Beer <eb@emlix.com>

commit 04da199231bb3f11cf17f94574a8df05855a7b82
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Dec 17 14:03:58 2014 -0500

    Remove dead accelDFS flag
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit c9f8f642fd495937400618a4fc25ecae3f8888fc
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Nov 17 12:32:29 2014 +0900

    Prefer drmModeSetCursor2 over drmModeSetCursor
    
    The former includes information about the position of the hotspot within
    the cursor image.
    
    Copied from xf86-video-modesetting.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 2f11dcd43966cf2ee26e61960fd72e6644f5e037
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 10 13:49:29 2014 +1000

    radeon: add support for DP 1.2 display hotplug (v2)
    
    This allows for dynamic creation of conneectors when the
    kernel tells us.
    
    v2: fix dpms off crash
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit c88424d1f4aaa78b569e5d44f0b4a47de2f422f4
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 10 14:17:54 2014 +1000

    radeon: move output name creation to its own function
    
    The secondary indent is deliberate to make the next patch more
    parseable for mst support.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 32b003cb7657e07d5af6338ad44d768eda87fd33
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 10 14:12:34 2014 +1000

    radeon: stop caching mode resources
    
    This is step one towards MST connector hotplug support,
    it stop caching the mode resources structure, and
    just passes a pointer to it around.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 7c7b38e0b375b6e8853ad2d1092302ea83f6f570
Author: David Heidelberger <david.heidelberger@ixit.cz>
Date:   Sun Oct 12 16:34:21 2014 +0200

    radeon/vdpau: don't report VDPAU for < r300
    
    Signed-off-by: David Heidelberger <david.heidelberger@ixit.cz>

commit c74de9fec13fac2c836bb2a07ae6f90e1d61e667
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Aug 6 11:08:00 2014 +0900

    PRIME: Don't advertise offload capabilities when acceleration is disabled
    
    Xorg tends to crash if the user tries to actually use the offload
    capabilities with acceleration disabled.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=57200
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 636a6382f80412ae4e28abe0cd9f98f84cd52291
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Oct 15 12:02:17 2014 +0900

    Remove duplicate OPTION_PAGE_FLIP entry
    
    Reported by 'amanual' on IRC

commit c854b4479ec5122390ede81b655b259efd9b1800
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Oct 2 10:22:22 2014 -0400

    radeon: bump version post release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 068a59e010ce6bfcd54f5a18cc08c55c54b8618d
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Wed Oct 1 23:38:52 2014 -0400

    radeon: bump version for release
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 5fee565e420d3efbf72fdf4f63c3d5d93d8ceddb
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Wed Oct 1 23:36:31 2014 -0400

    radeon: require libdrm_radeon 2.4.58 for latest SI/CI pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 56c7fb8ada4cd9cf096c6b06a8d368d286d74e68
Author: Thomas DeRensis <tderensis@gmail.com>
Date:   Wed Sep 10 21:20:32 2014 -0400

    radeon: fix build warnings regarding const qualifier
    
    Signed-off-by: Thomas DeRensis <tderensis@gmail.com>

commit b9a9b244336ed50d7df4f36135f875a3bb6ca948
Author: Thomas DeRensis <tderensis@gmail.com>
Date:   Thu Sep 4 21:45:19 2014 -0400

    radeon: fix a leak in radeon_vbo_get_bo()
    
    The dma_bo struct was never freed in the error path. Reported by cppcheck.
    
    Signed-off-by: Thomas DeRensis <tderensis@gmail.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit ba5fcc4d6b6eae3f2c55c6229a53d24d160789c1
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Aug 21 11:32:45 2014 -0400

    radeon/kms: fix mullins pci id
    
    strange errant change from:
    39fef269f521c92a2a31c80447e9401bacb3797a
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit efef34930650d6d80f7b527f4cee76d9e5954ace
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Aug 21 11:30:17 2014 -0400

    radeon/kms: add new SI pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 39fef269f521c92a2a31c80447e9401bacb3797a
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Aug 21 11:27:49 2014 -0400

    radeon/kms: add new CIK pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 7dab6b2fe9cf690b0dae1c127d0374322bd8278e
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Aug 20 17:51:35 2014 +0900

    Revert "glamor: Set environment variable RADEON_THREAD=0"
    
    This reverts commit 4b5060f357a3cb248c9359c92c1e9c42ef6434c8.
    
    Further testing shows that disabling the thread is only a moderate win in
    some cases, but a much bigger loss in some other cases.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 1ff383360886c5cee1bb75abcc20675aca0336a6
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Aug 12 12:27:12 2014 -0400

    radeon: fix warnings when building against older xservers
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 94202cbfbca05a503acdc1cca2f8409d141173af
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Aug 1 21:55:40 2014 +0200

    radeon: enable hawaii accel conditionally (v3)
    
    Only if the kernel has the new CP firmware.
    
    v2: check value of ACCEL_WORKING2
    v3 (Andreas Boll):
     - check for value 2 or 3 of ACCEL_WORKING2
     - update man page
    
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com> (v2)
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Andreas Boll <andreas.boll.dev@gmail.com>

commit 03930edd49f6b8a8d79910c7be5408b47db9649b
Author: Andreas Boll <andreas.boll.dev@gmail.com>
Date:   Mon Aug 4 16:23:13 2014 +0200

    radeon: remove definitions already present in radeon_drm.h
    
    Signed-off-by: Andreas Boll <andreas.boll.dev@gmail.com>

commit 91849fba0742ef61ba327e71fc3ce8f754af0a6f
Author: Andreas Boll <andreas.boll.dev@gmail.com>
Date:   Mon Aug 4 16:23:12 2014 +0200

    radeon: drop radeon_drm.h
    
    Now we use libdrm's radeon_drm.h.
    
    Signed-off-by: Andreas Boll <andreas.boll.dev@gmail.com>

commit b4658901bf1d619f8ff9b5f94344894f935ee6c8
Author: Andreas Boll <andreas.boll.dev@gmail.com>
Date:   Mon Aug 4 16:23:11 2014 +0200

    radeon: move RADEON_TILING_{MASK, LINEAR} from radeon_drm.h to radeon.h
    
    This allows us to drop radeon_drm.h from xf86-video-ati and use instead
    radeon_drm.h from libdrm.
    
    Signed-off-by: Andreas Boll <andreas.boll.dev@gmail.com>

commit 656bae7361c1e018553ef6d6d8c9efad616a4513
Author: Andreas Boll <andreas.boll.dev@gmail.com>
Date:   Mon Aug 4 16:23:10 2014 +0200

    radeon: drop redundant radeon_drm.h includes
    
    Already included via radeon.h.
    
    Signed-off-by: Andreas Boll <andreas.boll.dev@gmail.com>

commit fbf575cb010e558a87fad0de45660738c8180896
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jul 30 17:03:24 2014 +0900

    Add Emacs .dir-local.el file
    
    Based on the one from the Gallium radeon winsys, but enabling tabs for
    indentation.

commit 4b5060f357a3cb248c9359c92c1e9c42ef6434c8
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jun 19 18:27:59 2014 +0900

    glamor: Set environment variable RADEON_THREAD=0
    
    Reviewed-by: Marek Olšák <marek.olsak@amd.com>

commit 9b54caf6509a9c02dd17c9c43d6be8f7ddc98054
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Mon Jul 28 15:55:12 2014 +0200

    configure: Include xorg-server.h before glamor.h
    
    glamor.h cannot be included without first including xorg-server.h, this also
    applies to including it from configure snippets.
    
    Without this the configure glamor checks fail on systems with the latest
    glibc, throwing this error:
    
    In file included from /usr/include/xorg/misc.h:115:0,
                     from /usr/include/xorg/screenint.h:50,
                     from /usr/include/xorg/scrnintstr.h:50,
                     from /usr/include/xorg/glamor.h:32,
                     from conftest.c:61:
    /usr/include/xorg/os.h:579:2: error: expected identifier or '(' before
    '__exten
     strndup(const char *str, size_t n);
      ^
    
    This is caused by HAVE_STRNDUP not being set (it is set from xorg-server.h),
    causing os.h to redefine it.
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>

commit c4ae0e2cbcc0e2ebf9f13ee92d59b5120254a1dc
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Jun 30 10:20:12 2014 +0900

    Handle CRTC DPMS from output DPMS hooks
    
    This fixes at least two issues:
    
    The CRTC DPMS hook isn't called after a modeset, so the vertical blank
    interrupt emulation code considered the CRTC disabled after a modeset. As
    a side effect, page flipping was no longer used after a modeset.
    
    This change also makes sure the vertical blank interrupt emulation code
    runs before the hardware CRTC is disabled and after it's enabled from the
    output DPMS hook. The wrong order could cause gnome-shell to hang after
    a suspend/resume and/or DPMS off/on cycle.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit c0c3cac8613e31e310242695d0955b452f116e25
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Jun 25 16:21:57 2014 +0200

    bump version post release

commit 906a0ec9224146098bb4581486129d2934d36495
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Jun 25 16:10:21 2014 +0200

    bump version for release

commit cc615d06db0332fc6e673b55632bcc7bf957b44b
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jun 4 16:58:53 2014 +0900

    Rename Option "NoAccel" to "Accel"
    
    Removes the need for a double negation when forcing acceleration on.
    
    Note that this change is backwards compatible, as the option parser
    automagically handles the 'No' prefix.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 851b2cf8714618843725f6d067915375485ade9d
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed May 21 09:34:32 2014 -0400

    kms: Use own thunk function instead of shadowUpdatePackedWeak
    
    I plan to delete the Weak functions from a future server.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit b2dba2906f0b2284f17f53fd5251ba0f03d52a8b
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu May 15 16:07:53 2014 +0900

    Don't disable acceleration on >= SI on attempts to force EXA
    
    Also make this case clear in the log file:
    
     (WW) RADEON(0): EXA not supported, using glamor
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit be1469cc23aba46daf3293b3d09c5f2e792e7f42
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri May 2 17:48:07 2014 -0400

    radeon: enable tiling for mullins
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 2ae8e4b8d12f5c9bab6655eb8cd3c5c1d5cfb10e
Author: Samuel Li <samuel.li@amd.com>
Date:   Tue Nov 12 15:30:42 2013 -0500

    radeon: add Mullins pci ids.
    
    Signed-off-by: Samuel Li <samuel.li@amd.com>
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 5c86a3461597647224c33d5190b4531aeeb2655f
Author: Samuel Li <samuel.li@amd.com>
Date:   Thu Apr 17 15:17:28 2014 -0400

    radeon: add support for Mullins.
    
    Signed-off-by: Samuel Li <samuel.li@amd.com>
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit fdb90ffc50acbb7d5ba0598470f9feeac6ce55fc
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri May 2 17:45:45 2014 -0400

    radeon: require libdrm_radeon 2.4.54 for mullins support
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 06e3c8c53ef4bd159f5864eabf726438d008b49a
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Apr 23 13:39:42 2014 +1000

    radeon: fix use-after-free in modesetting cleanup
    
    noticed while looking at something else.
    
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit dbac18c361f9e514ecb40d0617f9d68b65a542e0
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Apr 28 17:51:56 2014 +0900

    Revert "Adapt to load_cursor_argb signature change in xserver 1.15.99.902"
    
    This reverts commit 48d3dbc8a0d3bfde88f46e402e530438f9317715.
    
    xserver Git has been updated to be backwards compatible with the
    previous API.

commit c84230d686c078aac1dc98d82153f8b02521b2e1
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Apr 25 09:17:51 2014 +0900

    dri2: Handle PRIME for source buffer as well in radeon_dri2_copy_region2
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=77810
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 48d3dbc8a0d3bfde88f46e402e530438f9317715
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Apr 15 17:45:35 2014 +0900

    Adapt to load_cursor_argb signature change in xserver 1.15.99.902
    
    Apart from the compiler warning below, not doing this may result in
    accidentally using software cursors.
    
    ../../src/drmmode_display.c:808:5: warning: initialization from incompatible pointer type [enabled by default]
         .load_cursor_argb = drmmode_load_cursor_argb,
         ^
    ../../src/drmmode_display.c:808:5: warning: (near initialization for 'drmmode_crtc_funcs.load_cursor_argb') [enabled by default]
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 409786a8f780d78a83bf0bddea5d37117ff6fa39
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 10 11:43:04 2014 +0900

    glamor: Fix test for creating shared pixmaps
    
    The pixmap usage hint is not a bitmask in general. The test for
    CREATE_PIXMAP_USAGE_SHARED was incorrectly triggering for a glamor internal
    usage hint being added in the xserver tree.
    
    Tested-by: Ed Tomlinson <edtoml@gmail.com>

commit aecf1c4e5f4718adcfb85836830d065d3f4f97a5
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 10 15:10:56 2014 +0900

    dri2: Fix conflicting CreatePixmap usage flag definitions
    
    RADEON_CREATE_PIXMAP_TILING_MICRO_SQUARE was the same as
    RADEON_CREATE_PIXMAP_DRI2.
    
    Disambiguate the definitions and rearrange them to try and prevent this
    from happening again.
    
    Tested-by: Ed Tomlinson <edtoml@gmail.com>

commit b50da3b96c212086cb58501dbe988d64f1f35b6d
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Fri Apr 11 09:44:37 2014 +0200

    Fix building on older servers without xf86platformBus.h
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>

commit ed0cfbb4fe77146b0b38f777bc28f3a4ea6da07f
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Fri Mar 7 13:27:30 2014 +0100

    Add support for server managed fds
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>

commit 3d7861fe112f25874319d4cdc12b745fbcd359cf
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Mon Mar 17 10:38:13 2014 +0100

    Add radeon_get_drm_master_fd helper function
    
    This is a preparation patch for adding server-managed-fd support without it
    turning into a goto fest.
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>

commit a63342ad15408071437c80b411d14196f3288aed
Author: Hans de Goede <hdegoede@redhat.com>
Date:   Mon Mar 17 10:36:55 2014 +0100

    radeon_open_drm_master get rid of unnecessary goto
    
    Signed-off-by: Hans de Goede <hdegoede@redhat.com>

commit bdc412044f6ced056cd57320d1b2ee0d967c2191
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Mar 13 16:40:19 2014 +0900

    Build against glamor in the xserver tree if available

commit 921a153f9964ca452e1241f76c7f7d653f42ceaf
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Mar 11 12:24:13 2014 -0400

    update man page to reflect tiling changes for CI parts
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 5eee8a4d5c86bb1cc34d8caf2f2b64b53c241fa5
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Mar 10 16:20:09 2014 -0400

    radeon: enable tiling by default on CIK
    
    Now that mesa 10.1 is released, we can enable this by
    default for CIK parts.  Tiling improves memory bandwidth
    utilization.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 691ec3d99c30111a4789830dfccb6eb5d3c40187
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Mar 10 16:17:34 2014 -0400

    radeon: require libdrm 2.4.51
    
    Required for proper tiling support on CIK parts.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 515bcf14d514f9dcaaf30fd0bf1ef6dd6ba9a0cd
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 4 12:34:26 2014 +0900

    Allow enabling glamor on R500 (and R300) class 3D engines as well.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75709
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit ea6d0affe52d82becadab6fb1c87f9261b0605a2
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Feb 24 13:12:21 2014 +0900

    Only log debugging output about initializing colormaps when we're doing so
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 8da17f30c70f4494ce22ad781a1cee17041812f3
Author: Jérôme Glisse <jglisse@redhat.com>
Date:   Mon Feb 24 14:50:25 2014 -0500

    evergreen: fix shader constant upload on ppc
    
    The number of dword we have to swap is (16*4) ie 16 vectors of
    4 floats each not 16 floats. Never hit this issue before because
    we never had more than 4 constant vector.
    
    Signed-off-by: Jérôme Glisse <jglisse@redhat.com>

commit cadb6b493942a84bfeb298751dce0dee39257a06
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Feb 21 08:33:21 2014 -0500

    radeon: don't install colormap handling if there are no crtcs
    
    Fixes a crash on cards with 0 crtcs.
    
    Discussion:
    http://lists.freedesktop.org/archives/dri-devel/2014-February/054186.html
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 7cd972a85705341dd8306eefc558ed9e5def05d7
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Thu Feb 20 11:14:03 2014 +0100

    return immediately in preinit when called with PROBE_DETECT
    
    This fixes a crash with Xorg -configure.
    
    Bug:
    https://bugs.launchpad.net/ubuntu/+source/xorg/+bug/1278046
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 8de6f7b2f476d3baa9c7e2bb3544e4bafaad46b7
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Jan 24 11:04:30 2014 -0500

    bump version post release
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 0333f5bda27dc0ec2edc180c7a4dc9a432f13f97
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Jan 24 10:19:49 2014 -0500

    radeon: bump version for release
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit fc4167f2a85d9cba65078d8fc6f08c7a619ad66e
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Jan 24 10:17:08 2014 -0500

    Require glamor 0.6.0
    
    This is required for Xv support and a number of important
    performance improvements.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit f2a0a5cf6c5a21e2a02280e110a4eb8e6609dace
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jan 22 11:04:42 2014 +0900

    Don't require the glamoregl module to be pre-loaded with xserver >= 1.15
    
    The issues with loading it on demand have been fixed in xserver 1.15.
    
    Inspired by Jérôme Glisse on IRC.

commit 3213df16d61302148be0088c8f93c6a5a88558f1
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jan 8 11:30:59 2014 +0900

    dri2: Make last_vblank_seq local unsigned to match dpms_last_seq
    
    Without this, I was occasionally running into gnome-shell hangs due to
    wildly off vblank sequence values. Doesn't seem to happen anymore with
    this change.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit bcc454ea2fb239e13942270faec7801270615b9c
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Jan 6 09:52:50 2014 -0500

    radeon/exa: Always use a scratch surface for UTS to vram
    
    If we don't, we may hit a buffer that crosses the
    visible vram boundary resulting in a sigbus when the
    CPU accesses the buffer beyond the PCI aperture.
    This will introduce an extra copy in certain cases.
    
    This is based on Michel's patch from bug 44099 updated
    for all asic families.
    
    Bug:
    https://bugs.freedesktop.org/show_bug.cgi?id=44099
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 04ef035c9315b4a6fbf1b14720be87cee4099a9f
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Dec 24 15:14:35 2013 -0500

    drm/radeon: fix SUMO2 pci id
    
    0x9649 is sumo2, not sumo.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit bfbff3b246db509c820df17b8fcf5899882ffcfa
Author: Robert Millan <rmh@freebsd.org>
Date:   Fri Dec 20 11:03:14 2013 +0000

    radeon: Restore kernel module load on FreeBSD.
    
    Since the introduction of a call to drmCheckModesettingSupported()
    in radeon_kernel_mode_enabled(), with abort condition if such call
    fails, the drmOpen() call in radeon_open_drm_master() no longer
    takes the responsibility of loading the radeon kernel module.
    
    However at least on FreeBSD (and GNU/kFreeBSD), X is still relied
    on to load the modules it needs. This commit restores the old
    behaviour of loading kernel modules on these systems.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=72852
    Signed-off-by: Robert Millan <rmh@freebsd.org>

commit 796c9a0cb587f528326bede11fa3f3eb7d3edaf1
Author: Robert Millan <rmh@freebsd.org>
Date:   Fri Dec 20 10:55:09 2013 +0000

    radeon: Set first parameter of drmOpen() to NULL
    
    Since the introduction of a call to drmCheckModesettingSupported()
    in radeon_kernel_mode_enabled(), with abort condition if such call
    fails, the first argument to drmOpen() call in radeon_open_drm_master()
    has become a no-op red herring.
    
    Such argument (a kernel module name) is supposed to result in load
    of specified kernel module. However, this will never happen. The
    problem is that if the code containing drmOpen() call is reached, it
    means that drmCheckModesettingSupported() check has previously
    succeeded, which implies the module is already loaded.
    
    So, drmOpen() will never load a kernel module. But it gives the
    impression that it will.
    
    In order to avoid this confusion, this commit replaces it with NULL,
    like xf86-video-intel driver does.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=72849
    Signed-off-by: Robert Millan <rmh@freebsd.org>

commit d571d6af70ef27efd1ed6420eb892bdde963ed7a
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Sep 24 11:39:10 2013 -0400

    radeon/kms: add Hawaii pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit e38a92e00d015a6b80a1f3a16d58c61f084b066f
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Sep 24 11:35:00 2013 -0400

    radeon: add support for Hawaii
    
    Disabled by default until the acceleration code stablizes.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit e4cd0f4392ea11c93088ad429f36eaaf9bcbf505
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Wed Oct 30 15:21:26 2013 -0400

    radeon: enable tiling on SI by default (v2)
    
    Now that mesa 9.2 is out with support for tiling
    on SI asics, we can enable it here. Tiling improves
    memory bandwidth utilization.
    
    V2: update man page
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 3b38701a72fa1cad1e4610a2f4330b3da4cc6391
Author: Vadim Girlin <vadimgirlin@gmail.com>
Date:   Fri Nov 1 10:36:39 2013 -0400

    radeon: disable 2D tiling on buffers < 128 pixels
    
    Seems to run into alignment problems with certain
    card configurations.
    
    bug:
    https://bugs.freedesktop.org/show_bug.cgi?id=70675
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 0c921edf0162fed616cea9d02e168b719243bcd2
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Wed Oct 30 13:01:02 2013 -0400

    radeon/glamor: with new pixmap for dri2 drawable no need to create new texture
    
    When creating a new pixmap/bo for dri2 drawable there is no need to create a
    new texture, instead the texture associated with the new pixmap should be use
    otherwise there is a missmatch between the bo backing the texture for the
    drawable and the bo used by dri2 client.
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit f1dc677e79cd7a88d7379a934ebc7d87a3b18805
Author: Christopher James Halse Rogers <raof@ubuntu.com>
Date:   Mon Sep 23 12:25:29 2013 -0700

    EXA/evergreen: Paranoia around linear tiling. (v2)
    
    The last two bytes of tiling_mode contain the actual tiling mode; the rest are
    extra tiling configuration bits. These configuration bits are not necessarily
    zero for a linear buffer, so mask them out before checking for linearity
    
    v2: Also fix up evergreen_textured_videofuncs.c
    
    agd5f: remove trailing whitespace
    
    Signed-off-by: Christopher James Halse Rogers <raof@ubuntu.com>
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 67fb82a3f0759b171fea21b475a70fa825693570
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Oct 1 09:35:30 2013 -0400

    radeon: fix the non-glamor build harder...
    
    I need to stop pushing patches first thing in the morning.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit afc0374fdec3e24ece25805724459463e9a19f5e
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Oct 1 09:32:02 2013 -0400

    drm/radeon: fix non-glamor build
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 2d791370dfc5570eb74d7a1fb3baf4d4c8ecf243
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 23 07:57:15 2013 +0100

    radeon: use glamor Xv support if present.
    
    This creates adaptors using glamor if possible.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit cbb99f659ee7b18ded0008a606e41ded38c1a194
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Sep 30 08:55:16 2013 -0400

    Revert "radeon: add glamor Xv support (v2)"
    
    This causes problems if glamor doesn't have Xv support
    enabled.  I just noticed that Dave has a better version,
    so use that instead.
    
    This reverts commit 4fc1fa920584ace2c84d75af82d06962d0c84ec8.

commit 4fc1fa920584ace2c84d75af82d06962d0c84ec8
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Sep 26 11:02:55 2013 -0400

    radeon: add glamor Xv support (v2)
    
    v2: guard new glamor Xv bits with USE_GLAMOR
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 41dfe327ac8740ac2cd84def96b5947224e422e7
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Sep 26 11:00:49 2013 -0400

    radeon: fix limit handling for cards with >4G of ram
    
    We can overflow the 32-bit limit.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit c45e728107269c6f51599dad4f6a02ccfef703f1
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Sep 18 10:57:52 2013 +0200

    DRI2: Install client callback only once
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=60182
    Acked-by: Alex Deucher <alexander.deucher@amd.com>

commit b955ddd0d41801e4ca0c30a70a5d0b27c3f366c8
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Sep 16 10:58:22 2013 -0400

    glamor: require 0.5.1 or newer
    
    0.5.1 fixes a number of issues.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 282587cd0709850e7bacb1d8307065d95dc2c97d
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Sep 16 09:41:13 2013 -0400

    radeon: enable glamor by default (v4)
    
    It's required for newer asics, so enable it by
    default.
    
    v2: update the autoconf help.  Require --disable-glamor
    to build without glamor support.
    v3: default to yes rather than auto
    v4: fix help text
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit fdb7563a5cbc736b09c2864b67a93b475c98b2bd
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Jan 24 21:17:11 2013 -0500

    radeon/kms: add berlin pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 8927d33f76ee12bc618fecfc59fc7ff1fcedcd5e
Author: Mark Kettenis <kettenis@openbsd.org>
Date:   Thu Aug 22 10:32:46 2013 -0400

    Fix shadowfb on big-endian machines
    
    For shadowfb, the framebuffer needs to have the RADEON_TILING_SURFACE
    flag set, otherwise the appropriate byte swapping won't happen.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=66663
    
    Signed-off-by: Mark Kettenis <kettenis@openbsd.org>
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit fa83d3d1636c315bc43dd622d407eb058e3ef976
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Aug 20 09:29:23 2013 -0400

    radeon: disallow glamor on pre-R600 asics
    
    I'm not sure they can handle the shaders properly, especially
    only older parts like r300.
    
    This will avoid display corruption problems reported by people
    using glamor on older asics by falling back to EXA if they try
    and enable glamor.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit d0323622ee9b97a5f246baffbb2c65930a78ed14
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Aug 7 11:27:07 2013 +0200

    bump version post release
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 9c97cca5c24409ca8447c99f051a12fd2d494e79
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Aug 7 10:48:17 2013 +0200

    radeon: bump version for release
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 16270cfb202ab67dd152644ef019b2f1ee4d0341
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Aug 7 10:29:33 2013 +0200

    add bicubic_table.py to EXTRA_DIST
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 2cb9197ca7a337c911f38b5de562a2364b922b86
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Aug 7 10:28:52 2013 +0200

    kill unused radeon_driver.c
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit c5cbfcf575b0b4aea6f797558ae974c1453c8e07
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Jul 30 10:08:25 2013 -0400

    drmmode: add support for multi-screen reverse optimus
    
    Initial reverse optimus didn't consider multiple screens, so
    this overhauls the code to use the new X server interface,
    and allows for multiple outputs on the dGPU to be used with
    the iGPU doing the rendering.  Ported from Dave's nouveau
    patch.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 429d5b797769895eb4f5fef816ce4e2f3a342031
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jan 8 15:56:37 2013 +1000

    radeon: add support for reverse prime (v2)
    
    This adds support for reverse prime configurations
    
    v2: fix compilation with older xservers
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 4de9356a2900ae0fb380a2350791ef045629cd05
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Aug 5 17:57:16 2013 -0400

    radeon: fix naming clashes with multiple GPUs (v3)
    
    The compat naming code for UMS causes problems
    with multiple GPU as you may end up with the same
    output name on multiple GPUs.  Adjust the naming on
    secondary GPUs to avoid conflicts.
    
    v2: integrate Dave's fixes for nouveau
    v3: keep compat with existing naming on primary GPU
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 2ae6bb18fefddb309920fa69c9b56c3a7f3db7b4
Author: Grigori Goronzy <greg@chown.ath.cx>
Date:   Wed Jul 31 12:01:20 2013 +0200

    EXA/evergreen/ni: replace magic number
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 6a278369c05a298a4367306d986467a9ceacae8c
Author: Raul Fernandes <rgfernandes@gmail.com>
Date:   Tue Jul 30 09:26:05 2013 -0400

    EXA/6xx/7xx: optimize non-overlapping Copy
    
    In case dst and src rectangles of a Copy operation in the same surface
    don't overlap, it is safe to skip the scratch surface. This is a
    common case.
    
    Based on evergreen/ni patch from Grigori Goronzy.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 4375a6e75e5d41139be7031a0dee58c057ecbd07
Author: Grigori Goronzy <greg@chown.ath.cx>
Date:   Mon Jul 22 02:30:28 2013 +0200

    EXA/evergreen/ni: accelerate PictOpOver with component alpha
    
    Subpixel text rendering is typically done with a solid src and a
    pixmap mask. Traditionally, this cannot be accelerated in a single
    pass and requires two passes [1]. However, we can cheat a little
    with a constant blend color.
    
    We can use:
    
    const.A = src.A / src.A
    const.R = src.R / src.A
    const.G = src.G / src.A
    const.B = src.B / src.A
    
    dst.A = const.A * (src.A * mask.A) + (1 - (src.A * mask.A)) * dst.A
    dst.R = const.R * (src.A * mask.R) + (1 - (src.A * mask.R)) * dst.R
    dst.G = const.G * (src.A * mask.G) + (1 - (src.A * mask.G)) * dst.G
    dst.B = const.B * (src.A * mask.B) + (1 - (src.A * mask.B)) * dst.B
    
    This only needs a single source value. src.A is cancelled down in
    the right places.
    
    [1] http://anholt.livejournal.com/32058.html

commit 94d0d14914a025525a0766669b556eaa6681def7
Author: Grigori Goronzy <greg@chown.ath.cx>
Date:   Thu Jul 18 16:06:23 2013 +0200

    EXA/evergreen/ni: fast solid pixmap support
    
    Solid pixmaps are currently implemented with scratch pixmaps, which
    is slow. This replaces the hack with a proper implementation. The
    Composite shader can now either sample a src/mask or use a constant
    value.

commit 5bb04351c43a91a1d60348b7293544da05d75e72
Author: Grigori Goronzy <greg@chown.ath.cx>
Date:   Fri Jul 27 17:31:53 2012 +0200

    EXA/evergreen/ni: optimize non-overlapping Copy
    
    In case dst and src rectangles of a Copy operation in the same surface
    don't overlap, it is safe to skip the scratch surface. This is a
    common case.

commit c08e09b7bec441c4bf93b4cae4de1260754bf940
Author: Grigori Goronzy <greg@chown.ath.cx>
Date:   Sat May 18 13:46:03 2013 +0200

    Fix RADEON_FALLBACK logging

commit c16c59f8f9b6aa7a4a6a6465582ad98f02a3606a
Author: Mark Kettenis <kettenis@openbsd.org>
Date:   Sun Jul 7 13:44:13 2013 +0200

    Always go through DFS/UTS when byte swapping is needed.
    
    Before commit ef9bfb262db7004bef3704e5d914687e50d3fca4 and
    e5bd99faa3b6629a55168386d5dfa936ee4e97ae, byte swapping for the front buffer
    used to be done in hardware.  Now that this no longer happens we need to let
    DFS/UTS ihandle the byte swapping.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=66663 .
    
    Signed-off-by: Mark Kettenis <kettenis@openbsd.org>

commit 1239dbbd8c8d9b55756c1de52cad353171a06522
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Sun Jul 7 20:22:10 2013 -0400

    radeon: bump libdrm requirement to 2.4.46 for CIK support
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 869e0b187b2d07e637c4482fe50d9f1b0c09f4e4
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Jan 24 21:12:28 2013 -0500

    radeon/kms: add kabini pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 0edcefc4c97e4572431c38fe170032470e22e0b7
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Jun 7 14:56:26 2013 -0400

    radeon/kms: add bonaire pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit ebc32b27af25b23604e725eb50d844a8d26116bb
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Aug 31 18:17:24 2012 -0400

    radeon: update cursor handling for CIK
    
    CIK asics have 128x128 hw cursors
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 4adaea996454b1ad5185f9c0f37667dbfc266495
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Jun 7 14:47:36 2013 -0400

    radeon: add family ids for CIK
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 3626ab147b6749a355e7d21710447f13b9796c77
Author: Leo Liu <leo.liu@amd.com>
Date:   Fri Jun 14 10:27:20 2013 -0400

    radeon: fix a memory leak in get_modes() callback.
    
    leak happens when looping xrandr prop.
    
    Signed-off-by: Leo Liu <leo.liu@amd.com>
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit c0f7d03cb29166c6c00dd6fb698ba3f70c59dbdf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jun 17 11:38:27 2013 -0400

    man: fix up previous commit
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 03b5edc9dd3859eed2504155970613aaf88df852
Author: Eric S. Raymond <esr@thyrsus.com>
Date:   Fri Jun 7 13:23:14 2013 -0400

    Fix some incomplete list entries.
    
    This necessarily involved adding some content, which I was able to
    Google for.  Please review, correct, and make more specific.
    
    Bodiless .TP entries screw up doclifter's page parsing.  Please
    don't do that anymore.

commit 7ce43639a8e53eefb94e5255a39c1232b6bdbf66
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jun 6 09:58:27 2013 +0200

    autogen.sh: Restore passing --enable-maintainer-mode to configure
    
    Looks like this was accidentally dropped when the GNOME Build API was
    implemented.

commit 365e571d9de0b5979425c34210789afca4ea5f68
Author: Samuel Li <samuel.li@amd.com>
Date:   Wed Mar 20 11:59:58 2013 -0400

    radeon: use direct mapping for fast fb access.
    
    Signed-off-by: Samuel Li <samuel.li@amd.com>

commit bd2557ea5ef84b975060e929d5ece53ec464336f
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:48 2013 -0400

    DRI2: add interpolated blanks to frame number in event handlers
    
    The 'frame' argument passed to event handlers is the plain
    CRTC vblank counter that stops progressing when the
    associated display is in DPMS-off mode. If we have a
    DPMS-off period the frame counter and MSC will
    diverge, which can cause some higher-level functions
    to return incorrect values.
    
    This patch fixes the problem by adding interpolated
    vblanks to the frame counter before using it in handler
    functions.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 385a92b4fbe8f53b359ef6c463704414d00476fa
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:47 2013 -0400

    DRI2: support scheduling emulated events with zero delay
    
    Now that we fully emulating a running CRTC through DPMS-off state
    it is possible to come up with a zero delay when scheduling
    a swap or MSC-wait (e.g., if a call into respective wait function
    was entered very late). This patch wraps the TimerSet function
    into our own radeon_dri2_schedule_event such that the latter
    calls the event right away if zero delay is specified.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit e87b52e6ad41ad7a87e43b818d80e7d522d9c68d
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:46 2013 -0400

    DRI2: make wait_msc and get_msc work on disabled CRTCs
    
    Now that the running CRTC is emulated through DPMS-off
    states, wait_msc and get_msc must also work on disabled
    CRTCs. When CRTC is disabled, we must extrapolate the
    MSC count from present time and last MSC when CRTC was
    running and also use timers facility in wait_msc.
    
    v2: CRTC-private now stores frame rate instead of nominal
        vblank period.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit f1584152bbeda98cc1907359f1c7954a84c8837d
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:45 2013 -0400

    DRI2: move rename and rework radeon_dri2_deferred_swap
    
    radeon_dri2_deferred_swap will be used to generate
    real events (not just fallbacks) so now it needs to
    generate real timestamp and frame counter. Also
    this function will be used both by schedule_swap
    and wait_msc, so give it a more generic name:
    radeon_dri2_deferred_event
    
    v2: - Extrapolate the frame number from the time
          of actual execution of the function instead
          of using the MSC calculated (extrapolated)
          at event scheduling time.
        - CRTC-private now stores frame rate instead of
          nominal vblank period.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 84bce7943b735aee19e26be4d47fdf140564f3f5
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:44 2013 -0400

    DRI2: track CRTC in event record
    
    Tracking the CRTC associated with an event will save us
    some lookups later in event handlers.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit e40d5390b3efdea3e02267413350410d8e6a2970
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:43 2013 -0400

    DRI2: hook up vblank extrapolation to schedule_swap
    
    This patch hooks up swap-scheduling function with
    vblank-extrapolation function. Rather than waiting for
    fixed time, we calculate exactly how much we should wait
    and what we should update target_msc to using
    radeon_dri2_extrapolate_msc_delay helper function
    and schedule the swap completion using DIX's timer facility.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit ffaa5abf207415159cdb28e90da49b95f497ef61
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:42 2013 -0400

    DRI2: add vblank extrapolation function
    
    Implement a helper function that will be called when emulating
    the running CRTC. The function should be called only when CRTC
    is in DPMS-off state. It will look at the vblank count and the
    time that was recorded last time the CRTC was running and
    calculate how long one must wait (from present time) until
    the target_msc is reached if the CRTC were running.
    
    v2: - CRTC-private now stores frame rate instead of nominal
          vblank period.
        - DIX's timer facility can sometimes wake up the scheduled
          functions more than a millisecond earlier. To avoid
          generating an old MSC, we have to add more margin when
          converting the delay in microseconds to milliseconds.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 80ae2291d082b57c70d27a80182f00d760fb3d3a
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:41 2013 -0400

    DRI2: adjust MSC by the number of interpolated vblanks
    
    Normally, MSC value equals the vblank count of the CRTC
    on which the drawable resides. However, we are now interpolating
    vblanks through DPMS-off state, so if the CRTC is turned
    off at some point, the vlbank count does not change, but
    MSC does change by the amount that equals the cumulative
    number of interpolated vblanks.
    
    So each time we interact with the CRTC's vblank facility,
    we have to adjust the vblank counter: in the request, we
    have to subtract the number of interpolated vblanks from
    MSC and in the reply we have to add the number of interpolated
    vblanks to the MSC.
    
    This patch only makes the MSC correct when CRTC is on.
    The subsequent patch will construct the MSC when CRTC is not
    running.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 5fd2eb5d12cea32927a9e6c6ce4afd18aa7d046a
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:40 2013 -0400

    drmmode: calculate interpolated vblanks while in dpms-off state
    
    This adds provisions for interpolating vblanks while the CRTC
    is in DPMS-off state. When entering DPMS-off state, we
    record the last vblank time, sequence number and frame rate
    in CRTC-private structure.
    
    When going back to DPMS-on state we read the current
    time and calculate how long we have been off. Then we derive
    how many vblanks that would have been had the CRTC remained
    running. These are the interpolated vblanks.
    
    Finally, we accumulate the number of interpolated vblanks
    in CRTC-private structure to get the number of interpolated
    vblanks over the system lifetime.
    
    v2: Track frame rate instead of vblank period. The former
        eliminates some roundoff errors.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit e41ad30d09be4962cfb1942b0b9f63875dbb2d2a
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:39 2013 -0400

    drmmode: remove dead code from drmmode_crtc_dpms
    
    We are about to modify this function, so let's clean it
    up first.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 373671d2eed30e30b3bdee7e40426cf58c127234
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:38 2013 -0400

    drmmode: add drmmode_get_current_ust function
    
    The new helper function retrieves current time in the format
    that is compatible with vblank timestamps.
    
    v2: - fix an incorrect statement in a comment
        - add a #define so that don't depend on libdrm patches that
          have not yet been accepted upstream
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 006fbbd1d38a089b50ab3197d32815689ed249fa
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:37 2013 -0400

    DRI2: make populate_vbl_request_type external
    
    We'll need to use this function in other .c files so
    remove static annotation from it. Also, add radeon_
    prefix because this function is now part of global namespace,
    so it would be nice to know where it is coming from.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 34660d8757ff16acd1686ff2872f4600d92a68bf
Author: Ilija Hadzic <ilijahadzic@gmail.com>
Date:   Wed May 8 22:39:36 2013 -0400

    DRI2: change signature of populate_vbl_request_type
    
    This function no longer uses info argument, so nuke it.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit ab6e85d1f5dd4657591b314b85fd2453f99c3712
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Mar 22 10:51:05 2013 +0100

    glamor: Keep old private in radeon_pixmap_set_bo

commit 0a84f2760eccf07781ae6c3f55d2d246c155c9ce
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon May 13 17:06:00 2013 -0400

    radeon: add Hainan pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 6cee1eaebfcef2b2d2c51ec30c31260fd98b564e
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon May 13 17:01:30 2013 -0400

    radeon: add hainan chip family
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 8a9e9b21cbb44c23d37bf18c983e2c3f0fe33e87
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Apr 25 17:10:12 2013 +0200

    glamor: Fix build against xserver < 1.13
    
    Those didn't define CREATE_PIXMAP_USAGE_SHARED.

commit 6216b5aa3793abe71b864170bc9d4d745f027328
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Apr 25 14:19:37 2013 -0400

    radeon: add new richland pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit fd5903f15b36555bf1ccc1c3865c9fffd499128a
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Apr 25 14:17:51 2013 -0400

    radeon: add new SI pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit b2826580e4d246d45871b413e4deecb070162577
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Mon Apr 8 13:45:18 2013 -0400

    radeonsi: add 2d tiling support
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit 6e74aacc5e5da3b51744153dad1645caa6ea4ce3
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Mar 27 11:57:29 2013 +0100

    glamor: Only enable for depth >= 24
    
    It can't handle lower depths yet.
    
    Reported-by: Igor Vagulin <igor.vagulin@gmail.com>

commit 33d8408eec806355c2e55726679ec50ef3b769f1
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 12 19:03:06 2013 +0100

    glamor: Enable by default on SI
    
    We should now handle its major initialization failure cases gracefully.
    
    Reviewed-by: Jerome Glisse <jglisse@redhat.com>

commit ad1d8874fab30257ba8ec8bee8ffa42a8fa9b5c0
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Mar 15 18:28:27 2013 +0100

    glamor: Initial PRIME pixmap sharing hooks.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=57200
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Tested-by: Christoph Haag <haagch.christoph@googlemail.com>
    Tested-by: linedot <linedot@xcpp.org>

commit 35b384a00a0c76ea556f55787fccc95ecd51bc0c
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Thu Mar 21 15:34:21 2013 +0100

    drmmode: handle failure of drmModeGetConnector
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 751c7259cf23a29fdd2653881e2db63ce3cf1ca5
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Thu Mar 21 10:40:42 2013 +0100

    Move fd cleanup to correct place.
    
    Oops, just after previous commit I realized that it
    needs to be done from RADEONFreeRec, because when preinit fails
    info pointer can be null in FreeScreen.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 1643b8cd2dc53ed36916e11003590c7037b4ddd6
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Thu Mar 21 10:33:19 2013 +0100

    radeon: add refcounts to fix up zaphod open/close.
    
    Oops, turns out my previous commits were buggy.
    Adding proper refcounts will handle this correctly.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit a4d1bc43d4d10e2ca1e512c1010e962c587d6c16
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Mar 20 17:13:44 2013 +0100

    Cleanup drmmode in CloseScreen.
    
    Prevents a use-after-free.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 3cb3ab8704813d7c14b9e547a30e37598d70c85a
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Mar 20 17:12:29 2013 +0100

    Close drm_fd in CloseScreen.
    
    This prevents a small fd leak.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 462d8d3b86038438ab854072e546cc7a9efacdd7
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 12 18:59:19 2013 +0100

    glamor: Bail if the glamoregl module wasn't loaded early
    
    Trying to initialize glamor in that case crashes.
    
    Reviewed-by: Jerome Glisse <jglisse@redhat.com>

commit 3e5350bedf50a1a140e0eba08c39ed2451fb9115
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Mar 8 14:07:42 2013 -0500

    radeon: add Richland pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit bdbf766d8170f6ea6c16b9780ef5a4007730588b
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Mar 8 14:00:09 2013 -0500

    radeon: mark trinity APUs with IGP flag
    
    Was missing on trinity.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 5ac335eaae135c0e66cc4643908f41174e2f1123
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Mar 8 17:37:41 2013 +0100

    Only parse Option "AccelMethod" if glamor was enabled at build time
    
    Will hopefully make it more obvious when it wasn't.

commit f1059e3f0934ccf1ae183099dbd4de700a7c81ac
Author: Colin Walters <walters@verbum.org>
Date:   Wed Jan 4 17:37:06 2012 -0500

    autogen.sh: Implement GNOME Build API
    
    http://people.gnome.org/~walters/docs/build-api.txt
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 343b01c9bf35b125cd0c3df8db7c01a5fb227bda
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Jan 24 19:57:23 2013 -0500

    radeon/kms: add oland pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 9980f1e0e0a5df5fb0c791687e5c98c13089d7d1
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Thu Jan 24 19:52:04 2013 -0500

    radeon: add oland chip family
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit d89e545826969910226cb96e73b64f18e92d2064
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Jan 30 17:21:05 2013 +0100

    bump version post release
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 21a4f3eaca98c1c54bffcdf3926c631cec9c409d
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Wed Jan 30 16:55:27 2013 +0100

    radeon: bump version for release
    
    And fixup distcheck..
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>

commit 102ee4a24e4c9ba0c0b65d3ca8599dc7e0216c1e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 11 09:52:32 2013 -0500

    radeon/r200: program RE_WIDTH_HEIGHT properly
    
    Values are inclusive.  Mesa already sets these
    correctly.  Also bump EXA/Xv limits from 2047 to
    2048.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 47689ef8b878a56ea094e21a6090b228e67d605e
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Jan 11 15:41:48 2013 +0100

    Make radeon_glamor_create_textured_pixmap() return TRUE without USE_GLAMOR.
    
    Otherwise rotation won't work when glamor support isn't built in.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 1a8c05fd5559be842d8a038df73de34d4b261c15
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Jan 11 13:22:24 2013 +0100

    Make CRTC shadow pixmaps usable by glamor.
    
    Fixes rotation with glamor.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit e5e22d788b103c04d3460a221a3b9dc3be69e0a4
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jan 10 17:00:16 2013 +0100

    DRI2/r[345]xx: 16 bit depth buffers use square micro tiling.
    
    Fixes piglit sanity.tests (with 3D drivers which allocate depth buffers from
    the X server).
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit f5d2682584c74587890a9795ece7a8917214a83f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jan 10 17:00:15 2013 +0100

    DRI2: Properly use buffer depth passed in by client.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 4e35b2f530e2ca8c7b7220cacd05c661de43d20d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jan 10 12:10:52 2013 +0100

    Drop support for X servers older than 1.7.
    
    The main purpose is to drop DRI2 compatibility code paths which are getting
    awkward to deal with and at this point are probably only tested lightly if at
    all. xserver 1.7 was released more than 3 years ago, and 1.6.2 was already
    required before.
    
    Mostly mechanical, there's probably potential for more cleanups.
    
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 857d729eb3672443f89c0516f8226eacb37dad2b
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jan 7 14:13:33 2013 +1000

    radeon: fix damage reporting for slave pixmaps
    
    This is definitely more correct, not sure if it'll fix any bugs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 6981a5c087165b126c15ba0025cffdba218ab652
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Wed Dec 19 10:35:43 2012 -0500

    DRI2: limit the swap rate when CRTC is in DPMS-off state
    
    If drawable is displayed on a CRTC and relevant CRTC is in
    DPMS off state, defer the swap by a fixed (hard-coded) time.
    
    This patch fixes a bug that caused an application to render
    at uncontrolled rate when CRTC goes into DPMS "off" state,
    thus thrashing the GPU and CPU and likely offsetting the
    power savings achieved by shutting off the display.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 3657672207322be651cdb94a811337b7c5668c84
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Wed Dec 19 10:35:42 2012 -0500

    DRI2: change signature of radeon_dri2_drawable_crtc
    
    Return pointer to the CRTC instead of CRTC ID and expose
    consider_disabled option in arguments of this function.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 61d0aec40e2521488c2fe43e7a6823e5c87d94d7
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Wed Dec 19 10:35:41 2012 -0500

    video: add option to include disabled CRTCs in best CRTC search
    
    This patch adds an option called consider_disabled to
    radeon_pick_best_crtc function. If this option is set
    and searching for best-fit CRTC yields nothing, the search
    will be widened to include CRTCs in DPMS "off" state.
    The new option is not used yet; it will be in the patches
    to follow.
    
    v2: Do not look at the CRTC mode, we only care about its box.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit a60d2152e928a7011fc7c44a885a34c3cdd4f0fe
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Dec 27 12:13:57 2012 +0100

    glamor: Enable full 2D acceleration for SI as well.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 04ebe14fe775d18b534e89b50b90ee293ae1910e
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Dec 27 11:54:27 2012 +0100

    glamor: Release the drawable after passing to glamor_push_pixels
    
    Ported from xf86-video-intel commit ca5c028c2b4d9bf02002acd484054fe427ea8d09 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit cee7d61b144162974238b282d76a70aa2f14cc0d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Dec 18 15:49:47 2012 -0500

    exa/Xv: fix coordinate limits on AVIVO IGPs
    
    RS6xx asics are r4xx derived, but seem to have r3xx
    limitations as far as clipping is concerned. Spotted
    by Michel on IRC.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=58469
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 3c7d024c2671dac541b8f2daed55040f4fd5d62d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Dec 12 10:43:55 2012 +0100

    Remove dead option definitions.
    
    These were only used with UMS.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit bdbd84a6c99943f4e012c92ad9cb920cbd676621
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Dec 10 23:35:41 2012 +0100

    Remove local variables total_size_bytes.
    
    Not actually used for anything. Refactoring gone wrong?
    
    Also remove a comment that doesn't seem to make sense anymore.
    
    Stumbled over this due to a warning by clang:
    
    ../../src/radeon_kms.c:1562:6: warning: variable 'total_size_bytes' is uninitialized when used here [-Wuninitialized]
                total_size_bytes += (64 * 4 * 64);
                ^~~~~~~~~~~~~~~~
    ../../src/radeon_kms.c:1557:25: note: initialize the variable 'total_size_bytes' to silence this warning
        int total_size_bytes;
                            ^
                             = 0
    
    Reviewed-by: Alex Deucher <aleander.deucher@amd.com>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit cf0a81547bcde32bdd2b080c0a546a49dd2eb628
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Dec 11 11:48:33 2012 +0100

    Remove unused local variable 'path'.
    
    ../../src/radeon_probe.c: In function 'radeon_platform_probe':
    ../../src/radeon_probe.c:270:11: error: unused variable 'path' [-Werror=unused-variable]
    
    Reviewed-by: Alex Deucher <aleander.deucher@amd.com>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit d268038a5bdd1655f7533c8dd2edf74fbc82bbee
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Jul 2 09:07:14 2012 +0200

    Remove dead code flagged by gcc -Wunused-but-set-variable.
    
    Reviewed-by: Alex Deucher <aleander.deucher@amd.com>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 793e1b0ea579cce7489aee57a95f20384d6ecce8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 6 09:21:19 2012 -0500

    radeon: fix ring count in R300PrepareTexturedVideo
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=31364
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit f402805b22e4f4f735924d59c69474b24e623a25
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Fri Nov 30 10:07:51 2012 -0500

    radeon: avoid copying over itself ddx fb
    
    In some rare case it seems that the old fb could already be the
    ddx fb. As copying from the same bo will trigger a ttm deadlck
    detection which will result in infinite kernel/userspace loop.
    Avoid doing any copy as anyway it's useless.
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 60cd6ceaf44b506433aebf6b3a639a17604dfddd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 21 18:42:56 2012 -0500

    radeon: add new SI pci id
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 53af6aa99dfb67b5223c28d5129a79694165048d
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Wed Nov 14 12:15:47 2012 -0500

    radeon: avoid segfault when pixmap exceed GPU capabilities
    
    We might get a request for a pixmap/drawable that is too big
    for GPU capabilities in the dri2 get buffer path. In face of
    such things just return NULL to dri2 get buffer request. The
    GL driver should then use something like transparent black to
    avoid something too ugly on the screen.
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit 71eeb0833489ece745f1e5dc41379ec63161ee81
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 6 09:43:55 2012 -0500

    bump verion post release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit cf377c991f4c1cd4eee1a8530ba9fdf6f9f63301
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 6 09:12:39 2012 -0500

    radeon: bump version for release
    
    7.0.0, RIP UMS
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 20bfc652ce40008ea561db2984bccf137409c7fd
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Mon Sep 24 17:19:09 2012 -0400

    radeon/radeon_platform_probe: fix Zaphod mode breakage
    
    Using radeon_platform_probe function breaks the Zaphod mode because
    it attempts to call xf86AddEntityToScreen multiple times, but nobody
    calls xf86SetEntityShared prior to that. Consequently, calls for all
    but first device instance fail.
    
    Prior to introduction of platform bus, the logic was that the Probe
    function would make the entity sharable, which would cause Xserver
    to later make it shared prior to adding it to screen. With the
    platform bus loading, add to screen happens in the probe
    function so we have to make it shared there.
    
    v2: do not make the entity shared if it was not previously marked
        sharable. Should fix:
    
        https://bugs.freedesktop.org/show_bug.cgi?id=56680
        https://bugs.freedesktop.org/show_bug.cgi?id=56663
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>

commit b2807b53083af5db0b85645666b0127be16623c7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Nov 2 17:57:18 2012 -0400

    man: note that 2D tiling requires Mesa 9.0 or newer
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 1038e29162d869e2ce37f9b8f5f7c8ea37c3e53d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Nov 2 10:04:46 2012 -0400

    Revert "radeon/radeon_platform_probe: fix Zaphod mode breakage"
    
    This reverts commit 39eac3104c2f08b4d78aab3f88fd104301eb4711.
    
    This breaks non-zaphod configurations with xserver 1.13.
    See:
    https://bugs.freedesktop.org/show_bug.cgi?id=56680
    https://bugs.freedesktop.org/show_bug.cgi?id=56663

commit d748894c84e891662cde6d7a5748f74a5aa5175e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Nov 2 08:50:16 2012 -0400

    man: update man pages for trinity (ARUBA)
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 6740e8e90b934611c3bb0f9e8732d66e25b8c727
Author: Andreas Boll <andreas.boll.dev@gmail.com>
Date:   Fri Nov 2 13:30:44 2012 +0100

    radeon/man: ColorTiling2D is by default on for r6xx-cayman
    
    Signed-off-by: Andreas Boll <andreas.boll.dev@gmail.com>

commit 39eac3104c2f08b4d78aab3f88fd104301eb4711
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Mon Sep 24 17:41:32 2012 -0400

    radeon/radeon_platform_probe: fix Zaphod mode breakage
    
    Using radeon_platform_probe function breaks the Zaphod mode because
    it attempts to call xf86AddEntityToScreen multiple times, but nobody
    calls xf86SetEntityShared prior to that. Consequently, calls for all
    but first device instance fail.
    
    Prior to introduction of platform bus, the logic was that the Probe
    function would make the entity sharable, which would cause Xserver
    to later make it shared prior to adding it to screen. With the
    platform bus loading, add to screen happens in the probe
    function so we have to make it shared there.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>

commit 2e96aa641bc8a5c263a5b643961383cdf530d044
Author: Marek Olšák <maraeo@gmail.com>
Date:   Sun Oct 28 12:50:49 2012 -0400

    radeon: turn on 2D tiling by default on r6xx-cayman
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit e830c039479539735d0836082abef24f6841c803
Author: Marek Olšák <maraeo@gmail.com>
Date:   Sun Oct 28 12:49:15 2012 -0400

    radeon: log if 2D tiling is enabled
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit ce1b745dcb60dc516ad999756240b78e72a7aa54
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Tue Oct 16 13:05:46 2012 -0400

    radeon: add new pci ids for SI
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit e3519be285bdab50ef2193f98826a351a4414fae
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Oct 16 16:09:23 2012 +1000

    radeon/dri2: fix the window->pixmap math properly.
    
    Okay kwin did things different, and I really hope this time this is the
    correct transformation operation. It works here with gears under kwin
    and under mutter and under xcompmgr.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit bd9e2c064d93afbe4ab84febb2a43ae6a95ab17b
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Oct 11 14:36:11 2012 +1000

    radeon/dri2: fix damage reporting on pageflip
    
    when you use MPX or slave usb devices, the damage posting was incorrect,
    and resulted in misrendered boxes on the screen.
    
    Fix it by reporting damage correctly.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit e8cb0b721e6ea251f85c799ca0563bfa59a2d37c
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Sep 26 09:27:54 2012 -0400

    Remove mibstore.h
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 8637f772347c958fa3beea6c0dc9c22255db70e5
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Sep 13 19:50:35 2012 +0200

    glamor: Force acceleration for DRI2 copies.
    
    Improves performance of non-pageflipped 3D apps on SI.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 40b87f0e9db2642ca8a70e994fb4d3742e199640
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Sep 12 18:44:10 2012 +0200

    glamor: Fix DRI2 crash introduced by PRIME changes.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 646ffd49d2cf0d3130301e8ad2f49f620bd9ef1b
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 10 15:31:06 2012 +1000

    radeon: fix build against old servers
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=54711
    
    Reported-by: wolput@onsneteindhoven.nl
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 7c7f2775604da61537c24c249884aaa220e06e13
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 10 11:27:45 2012 +1000

    radeon: don't fail to load if we have no modes and gpu driver.
    
    This ensures radeon loads on output less GPUs as a GPU driver.
    
    There are server bugs that also need to be fixed.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 7fe16dd037ac688726869816888bd77fe4356f8e
Author: Dave Airlie <airlied@gmail.com>
Date:   Wed Sep 5 10:41:51 2012 +1000

    radeon: fix typo in glamor paths
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=54519
    
    Reported-By: scaty@dcinformatique.com
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit cdc985e9190ce54dc6274ebc0e87ab954b15bb0d
Author: Dave Airlie <airlied@gmail.com>
Date:   Tue Sep 4 18:18:50 2012 +1000

    radeon: fix build against older servers
    
    Another silly one.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit bd0e9c51407cb99f1fe4f0acfedc37ee0c354040
Author: Dave Airlie <airlied@gmail.com>
Date:   Tue Sep 4 18:17:06 2012 +1000

    radeon/dri2: fix build against older servers.
    
    Older servers won't have DRI2UpdatePrime, so fix build.
    
    bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=54433
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 75c1f62f44d7b3709c1fa103d59733866967b841
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 3 13:09:02 2012 +1000

    radeon: add capability and provider support
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit ca8b61e916998458203dfa4b9d0c997fa7d90ba9
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 3 13:08:37 2012 +1000

    radeon: allocated shared pixmaps as untiled gtt.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 8c1bf9d8fe3948b72795984e625ef46b2f0bf654
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 3 13:08:05 2012 +1000

    radeon: add pixmap sharing hooks.
    
    This hooks into EXA and the dirty tracking to add sharing and output
    offload support.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 3add8df8122697acfe126d4857f3946ce44b8305
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 3 13:07:07 2012 +1000

    radeon: add dri2 offload support.
    
    This adds the new dri2 interfaces required for radeon to be offloaded to.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit f7502a11c8ef9c453ceb40d26109977116df88c2
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 3 12:56:56 2012 +1000

    radeon: add shared support to pixmaps.
    
    this just adds the interface and shared support to the pixmap.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit f71139a2afe8fffb628331402bf829a6d67c9fff
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Sep 3 12:37:22 2012 +1000

    radeon: add platform bus loading support.
    
    This allows the radeon driver to be loaded via the platform bus mechanism.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 9911e72ea79e000ee0492d19a434aa98b83b5066
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Aug 17 17:02:51 2012 +1000

    radeon: damage full screen after pageflip
    
    in order for offload to work we need to cause a full
    screen damage to be registered after pageflip.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 0873b8cef21abf1e7286731758f0db1e7f2e7c97
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Aug 3 16:45:50 2012 +1000

    ati: fix stub driver loader to load all drivers properly
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit cdf522f5992adf7b76f9153c777e6dddcf7758a6
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Aug 15 13:38:28 2012 -0400

    Implement ->driverFunc
    
    Copied from fbdev, makes it so we can run without iopl.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 763f387ccac2399f1d58ec112c8bed45196bea5e
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Aug 15 12:49:10 2012 -0400

    Don't bother to include vbe.h
    
    The only VBE code here went away when we dropped UMS.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit aabcf5ea30195274c79ae94c0fe6edc965f5c123
Author: Tomas Chvatal <tchvatal@suse.cz>
Date:   Mon Aug 13 22:58:18 2012 +0200

    Add switch for udev to disable automagic detection.
    
    Signed-off-by: Tomas Chvatal <tchvatal@suse.cz>

commit aef90993621331f01d17b95a751d4924d77eed0c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 6 11:00:45 2012 -0400

    radeon: add some new SI pci ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 6ef1ad6a46348d3aecd8d1f5e94431ca2298853c
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Jul 13 11:15:25 2012 +0200

    Deal more gracefully with DRI2 being unavailable at build or run time.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit ef8a404391036d8aa814dbda2407c789b8a64b92
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Jul 5 20:14:48 2012 +0200

    Initial SI support.
    
    Defaults to shadowfb. 3D acceleration is available with glamor. 2D
    acceleration is disabled until the radeonsi driver can handle glamor's
    shaders.
    
    v2: add chip flags (Alex Deucher)
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit e9edd2f5002c642b59f028b3ec076d604ae8ce9d
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jun 20 08:40:07 2012 +0200

    Initial glamor support.
    
    Enable at build time with --enable-glamor and runtime with
    
    	Option	"AccelMethod" "glamor"
    
    The most notable lack of functionality is XVideo. Use something like VDPAU for
    now.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 9eac8021f3d33a63156f9f5d43a220e88bb3f8db
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jun 27 14:48:47 2012 +0200

    EXA: Factor out pixmap BO allocation into a helper function.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 060c7836e7f7777bacca4e23f57c5985beab33bc
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jul 4 11:49:18 2012 +0200

    Some cosmetic fixups for the radeon manpage.
    
    ATI -> ATI/AMD
    PCIE -> PCIe
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit c3a9f64fe40c78331b9340c3832d344f38b11564
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jul 4 11:46:30 2012 +0200

    Drop UMS specific parts from the radeon manpage.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 5ebebfdb4fadada157d1369f35a8610c0fa72e02
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 29 15:03:43 2012 +0100

    radeon: fix conflict with fix in master.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit ff12ddf613ad42e4566d6e10fc6cf33a4e445736
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 29 15:00:44 2012 +0100

    configure: bump to 6.99.99
    
    this is in prep for 7.0 release.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 50689ec8dbd4a68527b2ac16cecac298b8d441d0
Merge: 6a60fcd ae682a6
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 29 14:59:47 2012 +0100

    Merge remote-tracking branch 'origin/kms-only'
    
    This merges the removal of the UMS code and subsequent simplifications.
    
    Hell yes.
    
    * origin/kms-only: (24 commits)
      radeon: fix radeonchipsets properly
      radeon: fix RADEONChipsets
      radeon: migrate remainder of radeon_driver.c to rest of driver
      radeon: avoid including large static struct twice.
      radeon: drop some more unused macros/inlines
      radeon: drop another unused struct member.
      radeon: more unused stuff
      radeon: drop cardType shouldn't matter to userspace.
      radeon: drop radeonGetPixmapOffset
      radeon: move more functions into texture video
      radeon: drop legacy memory, merge into radeon video
      radeon: drop unused txoffset vars.
      radeon: drop vb_mc_addr, not needed anymore
      radeon: drop offset member of r600 accel object
      radeon: move macros into radeon.h
      radeon: drop more wrapper macros.
      radeon: further macro cleanups.
      radeon: make exa copy funcs static.
      radeon: drop FUNC_NAME macro and ONCE_ONLY stuff
      radeon: drop radeon_commonfuncs.
      ...
    
    Conflicts:
    	configure.ac

commit 6a60fcdf060a0f553d8d4f7939c2a05aa04bedfa
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 29 14:57:58 2012 +0100

    configure: bump version after release.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 008eb209d506ed7195fd544dfa91be9783946fd5
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 29 14:46:55 2012 +0100

    configure: bump version number to 6.14.6 pre-release
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 72fea2635a56c4f572c07fc50fc58f703a21eb4f
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 29 14:46:17 2012 +0100

    radeon: require libdrm 2.4.36 for KMS support.
    
    This is due to some commits to the surface manager that fix bugs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 179b035835bfa99283d44ba2d5ee17e686196535
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jun 27 19:26:51 2012 +0200

    Fix up displayWidth vs. virtualX confusion in radeon_setup_kernel_mem().
    
    It was using the pitch (displayWidth) for the virtual width (virtualX). This
    prevented using page flipping in some cases, as displayWidth was already
    overaligned for virtualX, so the DRI2 front and back buffers ended up having
    a different pitch.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Jerome Glisse <jglisse@redhat.com>

commit 5dc5012320536f7b1e86a81ed3b823e3626828e1
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jun 25 09:23:04 2012 +0100

    radeon: dixPrivateKeyRegistered is only in server 1.9
    
    just fallback to the old behaviour on older servers.
    
    should fix: https://bugs.freedesktop.org/show_bug.cgi?id=51388
    Review-over-irc: Michel Dänzer <michel.daenzer@amd.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit ae682a6a1781ab023ab36e3154d6b3e88da63d64
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jun 18 13:11:31 2012 +0100

    radeon: fix radeonchipsets properly

commit 6514bcdc0fc199b4f3a8b4273bd29e0fe255d232
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jun 18 13:02:03 2012 +0100

    radeon: fix RADEONChipsets
    
    reported on irc by okias.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit dd4ab5aba9047d522dbcfe8a341c368312e1a471
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Jun 16 08:47:32 2012 +0100

    radeon: migrate remainder of radeon_driver.c to rest of driver
    
    This helps make a few more things static and the driver generally
    smaller.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit a19237fad2492d70777167c631f4e6e1fae0e908
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Jun 16 08:19:35 2012 +0100

    radeon: avoid including large static struct twice.
    
    Just extern this in the one file that needs access.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit c8a5c5a0dd9adc46b03b898c9c1719dbbde05ba1
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 19:52:14 2012 +0100

    radeon: drop some more unused macros/inlines
    
    These are no longer used anywhere.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 3097f273443b5b8fce097e2b1e09a17b02d06a40
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 19:45:15 2012 +0100

    radeon: drop another unused struct member.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit cb97e75acab84b67b7b7358860788638efc9b344
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 19:38:45 2012 +0100

    radeon: more unused stuff
    
    Remove all CurrentLayout stuff.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 81593e7deb688fa3108a0589c1418459ec0df4de
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 18:52:52 2012 +0100

    radeon: drop cardType shouldn't matter to userspace.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 997b0dddfeb180043ece5eff0ac0d6a1a751f9b5
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 18:43:01 2012 +0100

    radeon: drop radeonGetPixmapOffset
    
    no longer needed.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 639061edb3ac35a24e4d6633c9b6384434dcac64
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 18:38:48 2012 +0100

    radeon: move more functions into texture video
    
    make more thing static.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 85711a0a6a553232b603dbbb2b2d234c35391578
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 17:26:50 2012 +0100

    radeon: drop legacy memory, merge into radeon video
    
    This merges these two functions into textured video code.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 445ca1d66ce7b37762731fe67407cc1b978bb129
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 17:13:48 2012 +0100

    radeon: drop unused txoffset vars.
    
    These vars aren't being used anymore.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 832244de9e6d7aa1b8fbeb29c9a6a86923744d60
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 17:09:00 2012 +0100

    radeon: drop vb_mc_addr, not needed anymore
    
    This field is totally unused now, so drop it.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 6559b6e28bf111b64c3aeb5ec1260acfeb3e0b7f
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 17:05:54 2012 +0100

    radeon: drop offset member of r600 accel object
    
    This is always 0 now.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 857179e538c9752fab239a21312d0fcc80022151
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:55:23 2012 +0100

    radeon: move macros into radeon.h
    
    Drop separate header file, there isn't many separate macros now.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 148e889149f5ecc3dc2473f2a9e01572eeb037d3
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:52:24 2012 +0100

    radeon: drop more wrapper macros.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit ad8629e3323efe484dd1421d94dd934e1bfafe56
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:49:13 2012 +0100

    radeon: further macro cleanups.
    
    drop some more of the wrapper macros.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 96644f96f1a2df1d7d1ca8cbdc9a105affdb4f32
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:34:53 2012 +0100

    radeon: make exa copy funcs static.
    
    These are no longer used outside this area.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 83904b820b81d226940ec6d663246f243f92e7ba
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:30:41 2012 +0100

    radeon: drop FUNC_NAME macro and ONCE_ONLY stuff
    
    Drop all the CP vs MMIO macros that name functions.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b422d8085aab4e01a1ac4ffb247c73fe51aafa0d
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:14:54 2012 +0100

    radeon: drop radeon_commonfuncs.
    
    modify all the macros and drop it into radeon_accel.c
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 29dd3f84eecd2892a438f004403521de8986a91d
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:11:03 2012 +0100

    radeon: misc cleanups.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 678c1f3425c0fa7e98795c8e351da77d04652e02
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:06:27 2012 +0100

    make pci chipsets static
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 95cbbe999418c72dc407069d31e759d70f49ab16
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 16:01:53 2012 +0100

    drop RING_LOCALS/ACCEL_PREAMBLE
    
    these were unused now.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 18d5ae3bd9075ac1a2ee21b071ac133e2e634b62
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 15 10:05:03 2012 +0100

    radeon: drop all UMS/DRI1/XAA/overlay support.
    
    This overhauls the radeon driver and removes all the old UMS-only code,
    it drops all the UMS, DRI1, XAA, overlay Xv, video capture, tv tuners
    
    There are probably a lot more cleanups that will fall out of this afterwards.
    
    So far this is compile/build tested.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 248e912c487636d7352cfad43c03fc9f19fc2215
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Jun 8 12:18:48 2012 +0200

    UMS: Fix CRTC DPMS state check.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 58883711136fa6671d4f3250d4ee973e2953ebb4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 7 11:47:21 2012 -0400

    configure: bump version post release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 3a9103f855c67bbcd7b97ee2e96836353e0d789d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 7 11:27:08 2012 -0400

    configure: bump for release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit f1693ee09e9b251eb75e3e5fe0ee7699fec6fb98
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 7 11:23:31 2012 -0400

    configure: bump libdrm_radeon requirement
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 77a056c1725c9c44a328ed324687bdf35144e9e2
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jun 6 12:29:37 2012 +0200

    Don't page-flip or wait on a CRTC while we're VT-switched away.
    
    We don't know what the CRTC state is.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 1d9f1eb7e65c57c52759ccbfa51e8bdd5a10acac
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Jun 6 12:16:08 2012 +0200

    Don't wait on a CRTC which has been disabled via DPMS (bug #49761).
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=49761 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 4603285aa8efaf2614f15a38254465cec2075f11
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 5 09:48:59 2012 -0400

    radeon: add new PCI ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 9307609420b4b209767d2057b4803bcb16cc1455
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Jun 2 17:16:34 2012 +0100

    radeon: improve smooth startup fallbacks.
    
    If we can't handover the framebuffer, memset it to black.
    
    mostly ported from nouveau.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 89a4c79a43a2b6963e41d7812e8fe5beedb556af
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Jun 2 17:14:14 2012 +0100

    radeon: fix smooth startup with tiling enabled.
    
    We need to use the surface we worked out when we allocated the front bo,
    not work out a new surface from scratch.
    
    This fixes smooth handover from plymouth to gdm on F17.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit c1b9b2c9d71a87a0b98ccdb542da8a30c8c4d99a
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 1 12:22:06 2012 +0100

    radeon: fix compat api for newest planned API.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 68c51d148b22ee8cbe98b5d5441e3494804ee808
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 1 12:21:34 2012 +0100

    drmmode: drop flags arg to adjust frame.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b1e9c3081d2b975682a62389aa29063b79f9655c
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu May 24 17:54:41 2012 +0100

    radeon: move include down further
    
    fixes tinderbox build.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 5ed959585f35a4eff2cd803ae222b46d164f210d
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu May 24 08:17:11 2012 +0100

    radeon: update compat-api.h for block handler + enable/disable fb.
    
    This updates the compat stuff for the latest block handler code,
    and the enable/disable interface.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 2de17efdcb502f91fb145130c12be3cb164f03c5
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu May 24 08:16:39 2012 +0100

    radeon/xvmc: fix build with new API.
    
    This was missing the compat include.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit a1f47768309aa8b14b13f05ba01bb490024c4cbc
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu May 24 07:55:14 2012 +0100

    radeon: fix a few more RHDAtomBiosFunc uses
    
    I missed these in my initial search/replace for some reason.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit c26e40cf60eb6a2bffb5ec7cba1f1bbffcbf1d53
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 12:12:54 2012 +0100

    radeon/atombios: rewrite atombios parser code to not use xf86Screens.
    
    Just pass the ScrnInfoPtr around instead.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 14122214edabd2a574b66577289a7c8732f4e953
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 11:57:35 2012 +0100

    radeon/generic_bus: stop passing scrnIndex
    
    Just pass a pointer to the screen, removes usage of xf86Screens lookup
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 2101e485480e3ffd6a17ed12f5287b8b1e4e0223
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue May 22 16:17:55 2012 +0100

    compat for new server API

commit 9d2549057ffced996bfaeb8df4901ef57da636c7
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 16 15:45:53 2012 +0100

    ati: convert to new screen conversion APIs
    
    The compat header takes care of the old server vs new server.
    
    this commit was autogenerated from util/modular/x-driver-screen-scrn-conv.sh
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 80a45bfc26e20d1d481f13cb15c0720d165a8306
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 16 15:42:59 2012 +0100

    radeon: add compat-api.h

commit 84c3900b5179a8d2cc5f925e94ed5b2bbdee1ad9
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 23 08:49:45 2012 +0100

    radeon/xaa: drop scrnIndex parameter to some functions
    
    This isn't needed, and makes api changes later easier.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 3fb694b308ebadd1b849836059b6b56bb19385f7
Author: Thierry Vignaud <thierry.vignaud@gmail.com>
Date:   Wed May 16 14:43:53 2012 +0200

    UMS/EXA: Add reminder for potential solid picture performance issue.

commit 4b9bad959438725e4434e2aa4f142542d8dcc260
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Fri May 11 05:25:32 2012 +0200

    radeon: use GB_GR and BG_RG formats for packed yuv video for r600+
    
    Those formats were invented for exactly that purpose so use them.
    This saves some code and also some hw resources (only need one
    sampler instead of two for packed yuv).
    Only tested on EG.

commit 37786e9027b8c8d1f9ec9928915784dd28853766
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Fri May 11 05:25:33 2012 +0200

    radeon: avoid rounding errors in texture coords for textured xv on EG+
    
    make sure the division is done with floats, otherwise the coordinate
    can be wrong up to 1 texel.
    Particularly visible with clipping and small source scaled up (since one
    texel can be a shift of several pixels) but could be seen even unscaled.
    Should provide more accurate coords without clipping too depending on the
    scale factor probably.
    This is a straight port of 688c8a54a00b01e73a11970ad2abe858f8c7c5c4
    when I apparently forgot the eg code...

commit faea3aafa8c9a7c1bc866ffcd847972c5569c8bc
Author: Anisse Astier <anisse@astier.eu>
Date:   Thu May 10 17:22:59 2012 +0200

    Fail more gracefully when drm surface manager can't be initialized
    
    Should make bugs like https://bugs.freedesktop.org/show_bug.cgi?id=48138
    easier to diagnose.
    
    [ Michel Dänzer: Appended newline to error message. ]
    
    Signed-off-by: Anisse Astier <anisse@astier.eu>
    Singed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit b0b7d8d26fd107df342b5c87b0a38e5bb08101a9
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed May 9 11:08:49 2012 +0200

    EXA/UMS: Synchronize to the GPU before writing solid colour to scratch pixmap.
    
    UMS doesn't do this automagically. It's a big hammer that will probably suck
    for performance, but I don't have any better ideas right now.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 6bda7ceda645e838723883d133d614def1511d16
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu May 3 15:07:30 2012 +0200

    EXA: Attempt to fix solid picture acceleration with UMS.
    
    Only compile tested, but should fix
    https://bugs.freedesktop.org/show_bug.cgi?id=49182 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit b33cf9cf9dce5add8aaccab10ba5aaa64247c8ce
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 2 09:55:16 2012 -0400

    radeon: add MacModel entry for SAM440ep embedded board
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 0bda305f7ab2a4720b3fea3f318ab2a73be151e5
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Apr 13 13:28:10 2012 -0400

    EXA: Support acceleration of solid pictures on R2xx.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit a7754b076e355fef3aea082b6e2d3aefbb8e7a9b
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Apr 13 13:24:46 2012 -0400

    EXA: Support acceleration of solid pictures on R1xx.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit cac2d7ed54918579418fc762558497d3ec547fad
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Sat Apr 14 08:53:39 2012 -0400

    EXA: Support acceleration of solid pictures on Evergreen/NI.
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
    Reviewed-by: Michel Dänzer <michel.daenzer@amd.com>

commit d88b9700137ee407c483f263bb55c77cd6f92fef
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Apr 13 09:35:38 2012 +0200

    EXA: Support acceleration of solid pictures on R3xx-R7xx.
    
    Allocate 1x1 scratch pixmaps to hold the solid picture colours.
    
    This works around https://bugs.freedesktop.org/show_bug.cgi?id=47266 and might
    improve performance in other cases as well.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 66b586b9b9cdaf70f0fcd547b5a04f044d848d44
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Apr 16 15:33:36 2012 +0200

    RADEONCopySwap: Fix RADEON_HOST_DATA_SWAP_16BIT case.
    
    It was the same code as for RADEON_HOST_DATA_SWAP_32BIT. This caused bus errors
    on FreeBSD/PPC, but I'm not sure how it could not cause problems anywhere...
    
    Reported-by: Andreas Tobler <andreast@fgznet.ch>
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 1e656cd5973bbcf85b63406638ede0bccd65e28f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Apr 16 15:44:01 2012 +0200

    Make radeon_setup_kernel_mem failures more graceful and verbose.
    
    So that bugs like https://bugs.freedesktop.org/show_bug.cgi?id=48138 can be
    diagnosed more easily.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit d282719a9c2fb0ee32830aa75b8dfbb9392954ed
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Wed Apr 4 17:08:30 2012 -0400

    r6xx-r9xx: force 1D tiling for buffer with height < 64
    
    Due to some old kernel issue, height is 8 aligned insided the ddx
    For buffer with height btw 57 & 63 this lead ddx to believe it can
    allocate a 2D tiled surface while mesa will not align height and
    will assume 1D tiled leading to disagreement and rendering issue.
    This patch force buffer with height < 64 to be 1D tiled.
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit de2419e5509398328903ca61f4ea80852cba6bc4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 29 00:28:39 2012 -0400

    configure: bump version post release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 9425c50e93903fb64d9e569cfdc1e2c35d16ce25
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 29 00:19:12 2012 -0400

    configure: bump version for release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit dc18d771713ecd893c7d5833da6e0661093161dc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 28 17:32:53 2012 -0400

    configure: bump libdrm requirement for TN support
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 03535904a3e1542b3924d0a062c4b022ca196888
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 27 09:48:28 2012 -0400

    radeon: man page updates
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 6ed191c33caa33c12c2c6dafcba3a5ab1bf4a02f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 20 19:57:53 2012 -0400

    radeon/kms: add TN pci ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 55d65fcf33eb383e3fbc7a1d469ab68a70a7ab37
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 20 19:54:57 2012 -0400

    radeon/kms: add support for TN (trinity) APUs
    
    - KMS only
    - Includes full EXA/Xv support
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit b5cf9bd693cf4090956add4c33c4fae9c3069a03
Author: Marek Olšák <maraeo@gmail.com>
Date:   Wed Mar 7 11:01:40 2012 -0500

    r6xx: initialize SX_MISC
    
    If Mesa set it to 1, the DDX would not render anything = the monitor would
    basically freeze.
    
    agd5f: update emit count as well.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 355dc4295912c153f5333421594fa90aa119a056
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 6 15:52:40 2012 +0100

    DRI2: Unreference buffers immediately when event wait info is invalidated.
    
    Deferring this could result in trying to unreference buffers from a previous
    server generation, i.e. accessing freed memory.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Tested-by: Christian König <Christian.koenig@amd.com>

commit fe51469b2e02e4d565050bab077985270fb58a9b
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Mar 6 15:52:40 2012 +0100

    Re-register DRM FD wakeup handler for each server generation.
    
    Fixes hang when trying to use DRI2 swap scheduling after a server reset.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Tested-by: Christian König <Christian.koenig@amd.com>

commit 878454ae8d8e96dd27a19d0b30940d014c4cd7e2
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Feb 24 09:35:39 2012 -0500

    Fix ConnectorTable crash in radeon_output.c
    
    The sam440ep PPC board requires a ConnectorTable xorg.conf option, but putting
    in that option causes the radeon driver to crash. I finally traced it to a
    copy-and-paste bug in radeon_output.c as a result of a major rework in commit
    82f12e5a40c1fbcb91910a0f8b725c34fff02aae.
    
    The actual crash occurred in RADEONPrintPortMap().
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 688c8a54a00b01e73a11970ad2abe858f8c7c5c4
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Sat Feb 18 21:12:34 2012 +0100

    radeon: avoid rounding errors in texture coords for textured xv
    
    make sure the division is done with floats, otherwise the coordinate
    can be wrong up to 1 texel.
    Particularly visible with clipping and small source scaled up (since one
    texel can be a shift of several pixels) but could be seen even unscaled.
    Should provide more accurate coords without clipping too depending on the
    scale factor probably.
    Changed for r100-r600, though only tested on r300.

commit 2778b56252124ef6f636a493d2e1457b43911c37
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Mon Feb 13 20:42:57 2012 -0500

    radeon: r6xx-eg use linear general when using scratch bo
    
    In path where we need to use scratch bo as temporary area,
    consider it as linear buffer. Not linear aligned. Fix some
    case such as in bugs:
    
    https://bugs.freedesktop.org/show_bug.cgi?id=45827
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit c66ae235700f5efe64eb168327551b8f1d153c9c
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Mon Feb 13 10:43:58 2012 +0100

    Handle new xorg_list API.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=45937
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 7ff277e22c629308915307bbee96eb25ff77f8b9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 10 13:04:59 2012 -0500

    radeon: fix crash in drmmode_create_bo_pixmap()
    
    Only init surface on r6xx+.  Return NULL rather than
    FALSE.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=45829
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 60b949f34df5db05e0e102cc3daa33469aa50cfc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 10 13:11:26 2012 -0500

    radeon/kms: reusing fd message is not an error
    
    It's standard behavior.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit e20284409937d784847339b5d466a95012d85940
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Feb 3 12:21:59 2012 +0100

    EXA/r6xx+: Only set write domain or read domains, not both. (Bug #43893)
    
    Avoids an accounting bug in libdrm_radeon 2.4.31 or older.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=43893
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 5a7f64c5170ca424c9dca739662018e30df13413
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Feb 8 11:35:35 2012 +0100

    Fix UMS build failure.
    
    And some UMS specific warnings.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 87f776b966f4200c97a989536d4b71822ae4c0b3
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Feb 8 11:10:27 2012 +0100

    Remove unused local variable 'height'.
    
    Pointed out by gcc -Wunused-variable.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit f63262e2f112a348c45f0dcecd891c8b6d9c5ee8
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Feb 8 10:28:45 2012 +0100

    evergreen: Initialize source surface member for textured video.
    
    Fixes crash reported by Ole Salscheider on IRC.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit c8f104d38870f14049402bbc14f662c151caeeef
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Tue Feb 7 15:04:37 2012 -0500

    radeon: fix tiling for weird resolution
    
    Should also fix xv for some case.
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit 615033f2b5e3817e335e9d022fc9fdcf8ac8b11a
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Tue Dec 13 11:08:19 2011 -0500

    r600-evergreen: use common surface allocator for tiling v11
    
    Use libdrm common surface code so mesa,ddx have same idea
    about tiling surface and what their pitch should be and
    the alignment constraint.
    
    v2 fix remaining issue add new option to conditionaly enable
    v3 fix fbcon copy and r600 exa copy path
    v4 fix non tiled path 2D tiling on GPU >= R600, set it to false
       as default
    v5 adapt to pixel/element size split of libdrm/radeon
    v6 update to properly handle falling back to 1d tiled
    v6 final fix to tile split value on evergreen and newer
    v7 fix default array mode on r6xx, fix height alignment issue
       on evergreen
    v8 fix tile split value
    v9 add stencil tile split support, simplify dri2 for stencil
       with evergreen
    v10 Try to fix xv path regarding tiling. Adapt to libdrm API
        change. Try to fix case where there is no surface which
        means non tiled bo.
    v11 check for proper libdrm
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit 36c190671081967bac6fff48aaf66d67b639a48c
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Feb 1 13:21:02 2012 +0100

    Fix vline range calculations.
    
    The range passed in is in pixmap coordinates, so the CRTC offset needs to be
    added to the clamping limits and subtracted from the clamped range for
    pre-AVIVO display engines.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit bb0e1531ac6949d38025d7dcb19234fee33b2acf
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Feb 1 13:07:11 2012 +0100

    Check for empty vline ranges after clamping.
    
    The clamping could turn a previously non-empty range into an empty one.
    
    Also, start == stop means the range is empty.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 13b3aed4ef9afbcbaea1dcf0ed1acb162b240a3f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 10 09:35:09 2012 -0500

    EXA/r6xx+: fix rop setting for overlapping copies
    
    Need to use GXCopy for the src to temp copy, then
    the original rop for the temp to dest copy.
    
    Noticed by: Frank Huang
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit eb6d769a087b2ed5952f477fc3f0b0625810a287
Author: Egbert Eich <eich@suse.de>
Date:   Tue Nov 15 18:50:56 2011 +0100

    DPMS: Split non-modeset CRTC DPMS function.
    
    RADEONRestore() calls crtc->funcs->dpms() after most of the mode setting
    subsystems have been restored. This function enables the CRTCs but does
    more: it calls DRM pre- and post-modeset ioctls and sets up the palettes
    (LUTs).
    None of these two things are needed. Accessing the palette registers after
    restoring the PLLs can even lead to lockups.
    Thus the CRTC DPMS function is split into two parts: one that just enables
    /disables the CRTC and one which wraps this function and does the rest.
    Now the inner function can be called directly from RADEONRestore() as
    there is no need to go thru the RandR hooks in this function while the
    RandR hook uses the wrappering function so the full functionality is
    preserved from an RandR point of view.
    
    Signed-off-by: Egbert Eich <eich@freedesktop.org>
    Reviewed-by: Alex Deucher <alexdeucher@gmail.com>

commit ac51e331895b216d288bc7bd108a38b362214668
Author: Egbert Eich <eich@suse.de>
Date:   Mon Nov 14 19:10:01 2011 +0100

    UMS: Fix lockups in palette save/restore on pre-AVIVO chips.
    
    The reintroduction of palette save/restore in 5efdf514 causes some
    pre-AVIVO chips to lock up. An investigation revealed that accessing
    palette registers when the associated PLL is not running is causing
    this. With UMS the PLL setup that is saved has been done by the BIOS
    typically.
    A similar issue was observed when VGA palette save/restore had
    been reinitroduced with 80eee856:
     http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=480312
    and has been worked around for Linux without further investigation
    by 87e66ce7.
    To fix the issue we now
    a. introduce 'on-demand' palette saving (ie the palette is
       saved before it is first altered). This guarantees that
       the palette register are only associated when the associated
       CRTC is active and thus the PLLs are powered up and running.
    b. move palette restore before PLL restore.
    c. eliminate generic VGA palette save/restore which seems to be
       unneeded when the palette is restored natively.
       It is believed that this caused the behavior described in
       https://bugs.freedesktop.org/show_bug.cgi?id=18407#c27
    
    Signed-off-by: Egbert Eich <eich@freedesktop.org>
    Reviewed-by: Alex Deucher <alexdeucher@gmail.com>

commit 0a8d04eeac95f4db9d03ee31070bd825a7feb0b2
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Sun Jan 1 18:27:54 2012 +0100

    Update for new vgaHW API.
    
    Signed-off-by: Matthieu Herrb <matthieu.herrb@laas.fr>
    Reviewed-by: Mark Kettenis <kettenis@openbsd.org>
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit ae45d7e6d8e6844cd4586c9ee97c21b257fa788f
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Dec 28 11:48:36 2011 +0100

    DRI2: Can't use page flipping for pixmaps. (bug #42913)
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=42913 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit aacbd629b02cbee3f9e6a0ee452b4e3f21376bd3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 12 09:32:30 2011 -0500

    radeon: add some new pci ids
    
    fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=43739
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit bc54e415e2fd344939c5c788ea0686133a7e2c69
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 6 15:47:45 2011 +0000

    radeon: add original radeon to always tiled.
    
    and actually enable it for M7, previous commit only did one function.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit ba46c7b0cf72d157748981eb3224d5eefb6200aa
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 6 13:42:49 2011 +0000

    radeon: refine always tiled depth check
    
    So it appears the M7 family always tiles its depth buffer also.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 98b2d5fe1722a43c4bbe7711ed7180a3fb65305f
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Dec 5 18:44:28 2011 +0000

    radeon: r200 depth buffers are always tiled
    
    When we do the allocations we need to make sure the always tiled
    nature is taken into account.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 7dcefc69d9fbceae27cd03083c815e01a19b527e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 5 09:21:48 2011 -0500

    Xv: Evergreen+ asics support 16k surfaces
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 72e386d42516e7cd3c2cbf2fffc9174cd3ec8451
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Wed Nov 30 19:38:35 2011 -0500

    radeon: add some new pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit 3853c3020d05175ae180b9a188dec7c425bdd0b8
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 28 18:38:30 2011 +0000

    fixup xinerama since 9151f3b1c2ebcc34e63195888ba696f2183ba5e2
    
    since the driver would call RRFirstOutput without checking if randr has
    been enabled, and it would crash in privates code.
    
    reported by vereteran on #radeon
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>
    Acked-on-irc-by: Michel Dänzer <michel.daenzer@amd.com>

commit d669c34f140c000f88c4b4e464e44e6c8694f581
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Nov 21 11:35:40 2011 +1100

    ddx/evergreen: Fix endian of ALU constants
    
    The constants are written directly into a buffer object shared with the
    card and we "forget" to swap them. This patch fixes it by doing the swap
    in evergreen_set_alu_consts() in-place (ie, it modifies the buffer),
    which should be fine with the way we use it in the ddx.
    
    This makes everything work fine on my caicos card on a G5 including some
    quik tests with Xv, gnome3 shell, etc...
    
    Thanks a lot to Jerome Glisse for holding my hand through debugging that
    (and finding the actual bug).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 422bdd4fe6cb728e1dd08a56f6ee2d0f009cbfcb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 14 09:39:16 2011 -0500

    radeon: add missing FireMV pci id
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 534fb6e413a909a9d1afd57d1c711844b7c5ddf4
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 11 10:26:51 2011 +0000

    ati: enable bg none when fbcon succeeds and we are built against ABI after 10.
    
    One less patch to keep carrying in Fedora.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 89452c08048c98fb5cc3dc551b3824be40d52cf2
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Nov 8 11:23:11 2011 +0100

    UMS: Guard references to PCITAG / pciTag with XSERVER_LIBPCIACCESS (bug #42690)
    
    Should fix https://bugs.freedesktop.org/show_bug.cgi?id=42690 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 5ec34ed95948f7164184551615c1fc4c3eef3b98
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Thu Nov 3 20:16:47 2011 -0400

    DRI/DRI2: remove hard-coded limitation to 6 crtcs
    
    DRM's hard limit to the number of CRTCs is 32. ATI DDX unnecessarily
    clips this limit to 6 by hard coding initial assumption for
    output->possible_crtcs mask to 0x7f (before it gets trimmed down to
    what's really possible for a given output) and by allocating only 6
    entries for for cursor_bo[] array in RADEONInfoRec.
    
    Fix this and thus allow the ATI DDX to deal with as many CRTCs
    as the DRM allows (32), so it is ready if anything with >6 CRTCs
    comes out.
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>

commit 4853ab2cdc3b97948c7cd69eaf4fff54f59774fc
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Nov 4 12:15:53 2011 +0100

    Turn compile time check into runtime check.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit bcdb54fe16ebf2e239b84eebf20e8adfe5094bff
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Oct 20 11:11:35 2011 -0400

    check for xserver 1.9.4.901 to enable tiling by default
    
    Previous xservers had a bug in the EXA code which caused
    display corruption in some cases.
    
    See:
    https://bugs.freedesktop.org/show_bug.cgi?id=33929
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit edde94cba5321e6e51e7fd4d79dde5abc4944495
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Nov 2 13:40:05 2011 +0100

    Bump version post release.

commit 93459f842c2d8dc178a1954b8e05150fcb96ac9a
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Nov 2 12:51:15 2011 +0100

    Bump version for 6.14.3 release.

commit fe3ce559b7f07d39ded39abb38576846d6eb185b
Author: Jeremy Huddleston <jeremyhu@apple.com>
Date:   Tue Nov 1 20:27:03 2011 -0700

    Build fix for -Werror=int-to-pointer-cast
    
    Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>

commit d3d6a5da07aaec5961e51c9a8f90c1490ee101b6
Author: Tormod Volden <debian.tormod@gmail.com>
Date:   Sat Oct 29 23:08:46 2011 +0200

    radeon: do not include xf86PciInfo.h
    
    We already use atipciids.h instead most places.
    
    Signed-off-by: Tormod Volden <debian.tormod@gmail.com>

commit 70da7001e81363ed6ef2c4727c512daf53ae29fe
Author: Jeremy Huddleston <jeremyhu@apple.com>
Date:   Sat Oct 29 20:15:09 2011 -0700

    Use malloc/calloc/realloc/free directly
    
    Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>

commit a3bb07efb1757c33d70e2e1928219d12a4dd6498
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Oct 25 17:43:58 2011 +0200

    EXA >= R6xx / KMS: Avoid running out of CS space at inconvenient times.
    
    Otherwise we may end up with things not properly set up at the beginning of the
    next CS.
    
    Fixes http://bugs.debian.org/645007 .
    
    In contrast to the Composite code for < R6xx, this isn't necessary with UMS,
    as the draw packet only uses constant space in the indirect buffer, and nothing
    else can mess with the 3D state between indirect buffers.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 23788c4a5e3b6affb9b183e1393edd0e5ca4550e
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Oct 27 19:12:22 2011 +0200

    EXA < R6xx: Make sure 2D state is re-emitted after running out of CS space.
    
    Otherwise it's basically luck what the 2D state ends up being at the beginning
    of the next CS.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 6e0e1a821accc6ca95f4134e49b66a6b168c1934
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Oct 25 17:39:57 2011 +0200

    Make radeon_dri2_create_buffer(s) more robust. (Bug #30047)
    
    In particular, handle and propagate failure to allocate GPU accessible memory,
    instead of crashing. Fixes https://bugs.freedesktop.org/show_bug.cgi?id=30047 .
    
    Also take care not to leak resources in error paths.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 856583dbca9319c77fed40daa9956e81a0068f9e
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Thu Oct 20 14:17:14 2011 -0400

    radeon/kms: fallback to vesa if GPU is not supported by UMS
    
    For GPU not supported by UMS, test in probe so that we properly
    fallback to vesa.
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit f6f1b4f7789cfef763c063e671b76b60be8bdd8e
Author: Maarten Lankhorst <m.b.lankhorst@gmail.com>
Date:   Tue Oct 18 14:30:39 2011 +0200

    dri2: Add vdpau driver name entry
    
    libvdpau has a driver loading mechanism that looks for a dri2 driver
    first before falling back to nvidia, so lets use that.
    
    Allows use of libvdpau_rx00 without having to set things up separately,
    similar to the patch to xf86-video-nouveau.
    
    Signed-off-by: Maarten Lankhorst <m.b.lankhorst@gmail.com>
    Reviewed-by: Christian König <deathsimple@vodafone.de>
    Reviewed-by: Michel Dänzer <michel@daenzer.net>
    Tested-by: Michel Dänzer <michel@daenzer.net>

commit a6b2bd2d184f10d4c56c4ee17186aedb238a36ec
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Sep 21 17:00:16 2011 -0400

    UMS: fix DDIA enable on some rs690 systems
    
    DVOOutputControl checks the value of of bios scratch reg 3
    on some tables and assumes the encoder is already enabled
    if the DFP2_ACTIVE bit is set.  Clear that bit so the table
    sets the DDIA enable bit properly.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit d78860ba53d9bfcf6c28e1cfd2d970709b5e20fa
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Aug 12 11:21:33 2011 +0200

    Only call radeon_dri2_close_screen() if DRI2 was enabled.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 11330ca5dc61a70fe4507e63230f9133ca22d891
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Fri Aug 12 11:21:32 2011 +0200

    Remove dead variable remain_size_bytes.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit fcf0cca9c0ab0f692b222f619aee8f1cdad3b519
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Sep 20 12:34:05 2011 +0200

    KMS Color Tiling requires xserver which supports EXA_MIXED_PIXMAPS.
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit c96e6fb8a5f5be2319fdb4c431c1ba5279997fe8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Sep 17 08:26:12 2011 -0400

    man: note that the list of marketing names is non-exhaustive
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 1a51fce6f6ab169c882a86b936909c0820f27a68
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Sep 15 17:52:25 2011 -0400

    update man page with new marking names
    
    Note that the driver support all currently
    shipping asics and the names in the man page
    are just a sampling.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=40808
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 64f237a4cf3ef5bcb3163e88e1447ff275a1eefa
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Aug 18 19:11:08 2011 +0200

    Convert register ranges for >= r6xx from enums to defines.
    
    Avoids lots of "comparison between 'enum <anonymous>' and 'enum <anonymous>'"
    warnings with newer versions of gcc. See
    https://bugs.freedesktop.org/show_bug.cgi?id=38238 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 95991fcce45f0dd904f76b9f98f9c7ed5708e4fa
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Aug 17 11:10:34 2011 +0200

    Bail if we're trying to start up in UMS mode on KMS.
    
    Ideally, the display manager will start the X server again, and everything
    will be fine and dandy. But in the worst case, at least we won't hit the
    hardware behind the KMS driver's back.
    
    (This change intentionally makes (ab)use of the fact that Bool is defined as
    int).
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit f95a41b7851565c282d22f8d679db1377428f165
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Thu Aug 11 11:22:57 2011 +0200

    video: Don't round up bottom/right edge for clipping source width/height.
    
    It's not necessary: If the top/left edge was rounded down, this will be
    compensated by the subtraction.
    
    Worse, if the original source width/height is odd, rounding up may result in
    reading past the end of the source data.
    
    Fixes http://bugs.debian.org/637258 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>
    Reviewed-by: Alex Deucher <alexander.deucher@amd.com>

commit 93fc0843a1e31dc9237433bc2bf17df79e956d26
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Wed Aug 10 17:44:37 2011 +0200

    Change my e-mail address to something that still works, and always will, I hope.

commit 9151f3b1c2ebcc34e63195888ba696f2183ba5e2
Author: Michel Dänzer <michel.daenzer@amd.com>
Date:   Tue Aug 9 19:13:26 2011 +0200

    Prefer the CRTC of the primary output for synchronization.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=39696 .
    
    Signed-off-by: Michel Dänzer <michel.daenzer@amd.com>

commit 3b9fdc807dd7e52af0576299cefba596040f6f2f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 3 16:20:13 2011 -0400

    r5xx+: Fix vline setup with crtc offsets
    
    On r5xx+, vline is relative to to the viewport, not
    the scanlines.  Based on initial patch and investigation
    from Herbert Pötzl (Bertl) on IRC.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 104b2d7c071f29266b1bc4184a74e9714d14febc
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Mon Aug 1 10:05:30 2011 -0400

    kms: fix possible leak in pageflip code
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit d29bab632e9ecccba518d4107d52620bf75eb1cf
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Wed May 4 23:51:27 2011 +0300

    kms: Move flip_count and co. to a per swap structure
    
    If multiple drawables are doing page flipping, the global drmmode
    structure can't be used to keep per swap information. For example
    flip_count can increase prematurely due to another swap request,
    and then the previous swap request never gets completed, leading to a
    stuck client. Move the relevant pieces of data to a strucuture that
    gets allocated once per swap request and shared by all involved CRTCs.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>

commit 9493563c1ef4b51af0ee8a44cb4e7c5bb280347e
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Wed May 4 23:51:26 2011 +0300

    dri2: Update front buffer pixmap and name before exchanging buffers
    
    Buffer exchange assumes that the front buffer pixmap and name
    information is accurate. That may not be the case eg. if the window
    has been (un)redirected since the buffer was created.
    
    Signed-off-by: Ville Syrjala <syrjala@sci.fi>

commit 8c9266ed2da22a510243f9a952c14d4423f48a2b
Author: Alex Deucher <alexander.deucher@amd.com>
Date:   Fri Jul 15 10:44:57 2011 -0400

    radeon: add some new NI pci ids
    
    Signed-off-by: Alex Deucher <alexander.deucher@amd.com>

commit f59c3b294b0f715fc96e2bbe25893f2b31aa488b
Author: Christian König <deathsimple@vodafone.de>
Date:   Thu Jul 14 11:49:06 2011 +0200

    Register XvMC video decoding acceleration

commit e8d0d437957b15252dfad775796a3949ed50dbcf
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jul 12 11:43:25 2011 -0400

    evergreen: Emit SQ_LDS_RESOURCE_MGMT
    
    Avoids rendering problems when compute changes this reg.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=39119
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 9bb31158466e6168116d841d12c8b4303f11c4a6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jun 22 12:24:28 2011 -0400

    evergreen: fix num_banks for 2D tiling config
    
    The field is encoded.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 122b471f734aa07427b01d4bec35ff1ac28290b5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jun 17 04:02:16 2011 -0400

    dri2: fix copy pasto in a6154c00c64932332e8f6e334661ffd579cfd894
    
    Reported-by: Nils Wallménius <nils.wallmenius@gmail.com>
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 122bedcbcf45cb583cf51b2fd04ed2805e0ca60b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 16 12:57:11 2011 -0400

    dri2: missing bit from a6154c00c64932332e8f6e334661ffd579cfd894
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a6154c00c64932332e8f6e334661ffd579cfd894
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 16 12:48:43 2011 -0400

    dri2/eg+: fix size and alignment of depth/stencil buffers
    
    Base alignment may be 256B or 512B depending on the group
    size.  Also need to check against front size for virtualX.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 41eb1fbb3d9da64feb4a96df7c575e44136b1538
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jun 13 12:50:39 2011 -0400

    kms/man: update ColorTiling info
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 481baa5c74271cd7ce38bae3965d2bc4b8809058
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jun 13 12:44:07 2011 -0400

    kms: enable ColorTiling by default on r6xx-cayman asics
    
    Currently only 1D tiling as 2D tiling still has some corner
    cases to fix up.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit cbcc57b0fa6f581be777bef648f2bf3efe7443ee
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 4 12:52:00 2011 -0400

    radeon: add llano pci ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 36afd1e1055eeadb2396dadcc68b214655bd90a9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 31 16:03:36 2011 -0400

    radeon: add support for llano APUs
    
    - KMS only
    - Includes full EXA/Xv support
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 557f46dc2f18734ecf1f18dee7e951e0bf062e63
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri May 27 07:22:08 2011 +1000

    bump version after release

commit 2fca40ea65d9f2a6f8451c324bb4b82786f34f76
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu May 26 12:52:21 2011 +1000

    radeon: bump version for release of 6.14.2

commit fab868c5f7d8cafdb0176d2751f216819a5ba66a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 25 01:09:12 2011 -0400

    EXA: make evergreen_fix_scissor_coordinates static
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit fe5c42f5155361006b687da824181418f688809f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 24 22:32:01 2011 -0400

    cayman: endian fixes for shaders
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 470ecd02347c32e79316046d01a7d5dad0e2fe99
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 24 18:31:47 2011 -0400

    EXA/Xv: add workarounds for eg/cayman scissors bugs
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit b913e7ba2b60d47a6660699210cc3cf6f5dc52c2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 24 18:02:52 2011 -0400

    Revert "cayman: add scissors workaround."
    
    Needs a proper workaround for a hw bug.
    
    This reverts commit b77d374b0d11f48c33cfffdb4157c4ec4b05ea15.

commit 82cb33c3f0e1ba802d7a94f3159b3c5c86cd4043
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 18 14:49:17 2011 +1000

    cayman: enable all accel

commit b77d374b0d11f48c33cfffdb4157c4ec4b05ea15
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue May 24 15:53:58 2011 +1000

    cayman: add scissors workaround.
    
    wasted a lot of time getting to this.

commit ffeab7a7058298e15294a3b2c740c731e36dda1d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 18 18:16:51 2011 -0400

    cayman: fix dword counts default state
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 3cbfae361bf5e779d3364f0f31cfd25bd0f59e65
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 2 20:48:19 2011 -0500

    cayman: add spi state to default state
    
    changed in e3145801b80fd4be4cf770128876e86e89bda66f
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit b8ade97c9d0fa5aacb0e3166868bb72e9bc679a6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 2 20:44:19 2011 -0500

    cayman: first pass at exa/Xv shaders
    
    Main differences with evergreen:
    - 4-way rather than 5-way
    - END_OF_PROGRAM bit removed from CF istructions, use
    CF_INST_END instead.
    - MEGA_FETCH* fields removed from VTX commands
    - no more VC, all fetches go through the TC
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 01b646ed800732985c1638b147716641a99082f9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 2 20:39:38 2011 -0500

    cayman: add a default state function
    
    The rest of the state functions can be shared
    with evergreen.  I've noted where there are
    differences.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 42eecc6f4fb1570769490bdaeac06817c6c36a7e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 2 20:20:56 2011 -0500

    cayman: add 3D register headers
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit e1d28e011f4a5139cbc778973c63158ed2746716
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 2 20:13:50 2011 -0500

    kms/cayman: stub out exa support
    
    Just fallbacks for now.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 21e44a20b8b1b64079ee77f45aaa5010206ed7b6
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu May 12 09:23:38 2011 +0200

    UMS: Fix comparison of unsigned variable against < 0.
    
    Pointed out by clang:
    
    ../../src/radeon_crtc.c:242:18: error: comparison of unsigned expression < 0 is always false [-Werror,-Wtautological-compare]
                            error = error < 0 ? 0xffffffff : error;
                                    ~~~~~ ^ ~
    
    If a UMS regression is bisected to this commit, the assignment should probably
    just be removed, as it's a no-op in the current form.

commit 3b893d81982c9381393c92625e308541e0071b05
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri May 13 09:10:02 2011 +0200

    KMS: Fix output properties logic error.
    
    Pointed out by clang:
    
    ../../src/drmmode_display.c:1023:30: error: use of logical && with constant operand; switch to bitwise & or remove constant [-Werror,-Wconstant-logical-operand]
                    if (props && (props->flags && DRM_MODE_PROP_ENUM)) {
                                               ^  ~~~~~~~~~~~~~~~~~~
    
    Reviewed-by: Alex Deucher <alexdeucher@gmail.com>

commit f83d58cf5b33686139067f8f898b8e566ba5c253
Author: Nicolas Kaiser <nikai@nikai.net>
Date:   Fri May 13 00:56:31 2011 +0200

    man: fix typos
    
    Signed-off-by: Nicolas Kaiser <nikai@nikai.net>

commit 90abffbd30f44b9cf76a6e28103ddcb5419b4522
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Fri May 6 09:45:23 2011 -0400

    DRI2: fix high-crtc/vblank oversight/bug
    
    improvements to high-crtc handling done in
    f0b7d7b449cc77bb2b281d81108507f8bc2e6018 introduced a bug that caused
    the populate_vbl_request_type to never use the high-crtc field even
    when it should. The reason is that the offending patch put the code
    under #ifdef DRM_VBLANK_HIGH_CRTC_MASK which is not visible outside the
    enum type, so #else was always taken in compilation type. This patch
    fixes it by basing #ifdef on (pre-processor visible)
    DRM_VBLANK_HIGH_CRTC_SHIFT constant
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>

commit 62a4cd180fe884dca24586d453395472516e6496
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 4 01:13:55 2011 -0400

    fusion: fix tiling enable logic
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 76638ca687b02d3b1494b9868f817fd4fd892c64
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 4 01:06:22 2011 -0400

    fusion: enable tiling if DFS works
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a6d2dba6573a3512d550d7e442bf42ea03012bbc
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 4 10:44:43 2011 +1000

    radeon: add add hw DFS support for fusion
    
    Fusion had a bug setting up the VM on earlier kernels so we need to work
    around that and only enable accel on a new enough kernel.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 859e052af49e68a826b77a9135c7f067dc331a06
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 3 15:15:04 2011 -0400

    radeon: add some new pci ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 8f8bbf628c6eed037f57bc8c155f0ecdacbebad1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun May 1 13:19:15 2011 -0400

    man: add cayman to man page
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 903e90c31cf0319be9297529aa7b8daa1756cf63
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 20 03:10:08 2011 -0400

    EXA/Xv: used cached bo tiling flags for accel setup on 6xx+
    
    This avoids calling into the kernel for each bo in the accel
    code.  This is a follow on to:
    cc7d1fa39da40a532fcdbe6c7924ca47a879e66a
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 982c22f16c8eeee9be81779fbfe17d8d3f9b6897
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu Apr 14 16:04:50 2011 -0400

    R520: Fix textures larger than 2k
    
    Ported from the equivalent fix in Mesa.

commit cc7d1fa39da40a532fcdbe6c7924ca47a879e66a
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon Apr 4 17:37:12 2011 +0200

    EXA: Cache BO tiling flags.
    
    Calling into the kernel every time is quite expensive, and nobody else should
    ever change the tiling flags.
    
    There's still more to do along the same lines for >= R6xx.

commit f0b7d7b449cc77bb2b281d81108507f8bc2e6018
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Apr 5 13:36:01 2011 +0200

    DRI2: Some cleanups for the scheduling mess.
    
    * Fix build against libdrm that doesn't define *_VBLANK_HIGH_CRTC*.
    * If we have more than two CRTCs but can't use DRM_VBLANK_HIGH_CRTC_MASK, don't
      enable scheduling in the first place rather than relying on
      DRM_VBLANK_SECONDARY magically doing something sensible for higher CRTCs.
    * Only set up client state tracking when scheduling is enabled.
    * Only declare pRADEONEnt when it's needed, and break long lines.

commit 7acf9bc833de539fa2259a051c66a99445a54bc4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 4 11:08:37 2011 -0400

    radeon: add some additional ontario pci ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 0af6386f85a0f1ba14864a3334164733a10a6cb8
Author: Ilija Hadzic <ihadzic@research.bell-labs.com>
Date:   Thu Mar 24 13:33:27 2011 -0400

    xf86-video-ati: (revised #2) add support for vblank on crtc > 1
    
    Hi Alex,
    
    Enclosed is a revised version of two patches sent on Mar 18 and Mar 22,
    respectively. Details summarized in these two threads:
    http://lists.freedesktop.org/archives/dri-devel/2011-March/009463.html
    http://lists.freedesktop.org/archives/dri-devel/2011-March/009582.html
    
    This patch reconciles the DDX with the change in libdrm sent to this list
    earlier today. Specifically, it refers to a symbol that has been renamed
    from DRM_CAP_HIGH_CRTC to DRM_CAP_VBLANK_HIGH_CRTC. It *supersedes* the
    previous patch (i.e. apply it to the master branch as it exists at the
    time of this writing, not as an incremental patch to the one sent previously).
    
    Regards,
    
    Ilija
    
    Signed-off-by: Ilija Hadzic <ihadzic@research.bell-labs.com>
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit fe2e0ad3ffa58f40311319c950b842e2928a5740
Author: matthew green <mrg@eterna.com.au>
Date:   Mon Mar 21 12:17:58 2011 -0400

    bug fix for r6xx/r7xx UMS
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 83978ad5fe37581e2b2f3fbd9c073d91b2ae1d50
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 17 19:07:43 2011 -0400

    bump version post release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 38d9368e59b2990bf32a028ece2132451b402350
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 17 18:59:55 2011 -0400

    bump for release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit cdfc007eccc9b130fc08012deef304488eb6e469
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Mar 16 10:40:42 2011 +1000

    radeon/exa: correct function name
    
    this corrects the function name so it matches the contents.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b93d7658f669f6dc1cfacebcfe955a1e113a537c
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Mar 16 10:37:22 2011 +1000

    radeon/exa: fix scaling check
    
    This caused a regression in firefox, as these numbers are xFixed
    values hence 1 is actually 65536.
    
    Should fix: https://bugzilla.redhat.com/show_bug.cgi?id=685084
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 8567b8cd9e136ef69906e02286b3752db2404741
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 15 13:13:06 2011 -0400

    APU: no tiling yet
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 4d350497012fa31a417ada662006e2d64db2a4b5
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Mar 15 10:32:19 2011 +1000

    radeon: exa shaders don't handle scaling either.
    
    rendercheck tsrccoords test fails.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 6319a33cb7bd8dba1eaf47bee1e2608cee5d7600
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 2 19:38:04 2011 -0500

    kms: add cayman pci ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit fd65def45a57e3242596274d270791df8abc8e29
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 13 17:02:31 2011 -0500

    kms: no accel yet for cayman
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 585e2a3b803b6d3e070f2427e9cb49bab0949239
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 13 16:58:01 2011 -0500

    kms: add cayman chip family
    
    KMS only.  No UMS support for cayman.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 6835e22256ba7a74c02504383f63baaba7e87156
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 2 12:20:45 2011 -0500

    r6xx+: truncate point sampled coordinates
    
    By default the hardware rounds texcoords. However,
    for point sampled textures, the expected behavior is
    to truncate. When we have point sampled textures,
    set the truncate bit in the sampler.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 8a8862e4165dc5be779bce5e327a31da4826db3b
Author: Sedat Dilek <sedat.dilek@googlemail.com>
Date:   Sat Feb 26 21:04:22 2011 +0100

    kms: Fix warning XNFprintf is deprecated (v2)
    
    The first take of my patch missed the breakage against pre-1.10
    xservers and now I know XNFasprintf() is not a 1:1 replacement
    for XNFprintf().
    The idea for the fix seemed to be so obvious, but as usual "really"
    test the patch you are sending to any ML.
    I am awfully sorry for the overhasty bad hack.
    Thanks to Alan and Alex for the help to fix it correctly, now.
    
    Tested-By: Sedat Dilek <sedat.dilek@gmail.com>
    Signed-off-by: Sedat Dilek <sedat.dilek@gmail.com>

commit 88304fe9c0ce69012d44a77a5368c35236511dac
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 28 11:29:19 2011 -0500

    kms: don't rotate if acceleration is not enabled
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 99141761e947e2153ed1a3bc485dc5716a22acb1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 28 11:20:44 2011 -0500

    kms: don't enable tiling if accel is off
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 7928c120fb629a782846bcd5734d9fa14cbb099d
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Feb 28 14:11:57 2011 +1000

    xv: fix height alignments for U/V planes
    
    The kernel CS checks showed we were incorrectly aligning the
    U/V allocations for when we used them as texture sources.
    
    This should fix
    https://bugs.freedesktop.org/show_bug.cgi?id=34567
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit e55520c0e582f2a500b3b01c2cb78750e15256ca
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Feb 26 15:27:59 2011 +0100

    Revert "kms: Fix warning XNFprintf is deprecated"
    
    This reverts commit cb4dc7ab66016d0c980800f8dbf71bbe993889d3.
    
    Looks like this caused https://bugs.freedesktop.org/attachment.cgi?id=43852 ,
    but even if it didn't, the following needs to be addressed first:
    
    cc1: warnings being treated as errors
    ../../src/radeon_kms.c: In function ‘radeon_open_drm_master’:
    ../../src/radeon_kms.c:413: error: passing argument 1 of ‘XNFasprintf’ from incompatible pointer type
    /usr/local/include/xorg/Xprintf.h:57: note: expected ‘char **’ but argument is of type ‘char *’
    ../../src/radeon_kms.c:413: error: passing argument 2 of ‘XNFasprintf’ makes pointer from integer without a cast
    /usr/local/include/xorg/Xprintf.h:57: note: expected ‘const char * restrict’ but argument is of type ‘uint16_t’
    ../../src/radeon_kms.c:413: error: assignment makes pointer from integer without a cast
    make[2]: *** [radeon_kms.lo] Error 1

commit cb4dc7ab66016d0c980800f8dbf71bbe993889d3
Author: Sedat Dilek <sedat.dilek@gmail.com>
Date:   Fri Feb 25 17:21:52 2011 -0500

    kms: Fix warning XNFprintf is deprecated
    
    Noticed when building ati/radeon ddx against xserver 1.10-rc3.
    
    [ build.log ]
    ../../src/radeon_kms.c:412:5: warning: 'XNFprintf' is deprecated (declared at /usr/include/xorg/os.h:273)
    
    agd5f: don't break the build against pre-1.10 xservers.
    
    Signed-off-by: Sedat Dilek <sedat.dilek@gmail.com>
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit ecfdb209afe2aafc378baab8c511f5df7b000270
Author: Sedat Dilek <sedat.dilek@googlemail.com>
Date:   Fri Feb 25 21:48:14 2011 +0100

    UMS: Fix build against xserver 1.10-rc3
    
    This issue was introduced due to last minute backout of RandR-1.4
    in xserver 1.10-rc3.
    
    Switch to "#ifdef RANDR_14_INTERFACE" as suggested by Keith Packard.
    See also <http://lists.x.org/archives/xorg-devel/2011-February/019643.html>.
    
    Note:
    The ddx needs a rebuild as the X video driver ABI changed to version 10.0.
    
    Reported-by: Alex Deucher <alexdeucher@gmail.com>
    CC: Keith Packard <keithp@keithp.com>
    Signed-off-by: Sedat Dilek <sedat.dilek@gmail.com>

commit 04293a3a84acd96ccdf8e5e865cf973325ca43a1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 24 02:33:41 2011 -0500

    dri2: disable pageflipping for transformed displays
    
    Based on Ben's nouveau patch.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 91070cfd75d5607c4a72ace780f830f0ddb40e84
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 23 00:55:28 2011 -0500

    Xv: use aligned height to calculate Xv buffer size
    
    Make sure it's large enough for the tiling mode so the
    CS checker doesn't complain.  Should fix:
    https://bugs.freedesktop.org/show_bug.cgi?id=34567
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit acd54a48a6680956ed903fc890204c0c910b6712
Author: Mark Kettenis <kettenis@openbsd.org>
Date:   Sun Feb 20 22:51:04 2011 +0100

    Properly restore CLOCK_CNTL_INDEX register
    
    RADEONRestore() restores the CLOCK_CNTL_INDEX register before calling
    RADEONRestorePLLRegisters(), which modifies the CLOCK_CNTL_INDEX register
    to access the PLL registers.  As a result we may end up with the wrong clock
    being selected when exiting X.  This happens on platforms where the driver
    doesn't save and restore the VGA state.
    
    Signed-off-by: Mark Kettenis <kettenis@openbsd.org>

commit d7c2ba4286ea32401c0026cb92ec167f7b5753d8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 16 18:30:34 2011 -0500

    man: add btc chips to the list
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit d0f8bffbbc26818eccdd305ef142387dc4975bba
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 16 15:09:20 2011 -0500

    kms: add tiling support for evergreen/NI
    
    - requires 2.6.37 or newer
    - 1D only at the moment
    - disabled by default
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 0471d8412acd82e281a35fc4c6bb2d53b1ff5802
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 16 15:07:35 2011 -0500

    kms: EXA/Xv tiling fixes
    
    - properly set tiling flags for temp surfaces
    - fix CB non_disp_tiling bits on evergreen
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 4d7e1498f7d9eb50e2eddabca193fc27bde24f0e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 15 11:24:23 2011 -0500

    fix Xv on pre-r6xx asics
    
    broken by:
    a9c1358099:"Xv: fix textured video alignment"
    
    Reported by:
    Artur Skawina <art.08.09@gmail.com>
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a9a59717d11af37a2dda5555f6a83c5b65449527
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Feb 12 05:34:50 2011 -0500

    kms: use worst case base/pitch align if we don't have drm tiling info
    
    To avoid CS rejection.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 5f9b7fdb4ce27f8c6a64134bb4d5ebeb1c958cca
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Feb 12 05:19:12 2011 -0500

    kms: always get the tiling info even if we aren't tiling
    
    We need the proper group size to calculate alignment so the
    ddx and drm agree.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 355f0f7a67ce239b7fd2f2e81bcaaa88b2a09f03
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Feb 12 04:52:52 2011 -0500

    kms: fix rotate pitch align
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit f1dc419c989addc4737aed06ec8b8acdb4d40063
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 11 17:21:10 2011 -0500

    kms: evergreen/ni big endian accel support
    
    Based on 6xx/7xx patches from Cédric Cano.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit e8dc728a549323f1babe337b9d42ad504af1ca39
Author: Cédric Cano <ccano@interfaceconcept.com>
Date:   Fri Feb 11 17:06:47 2011 -0500

    ums: atombios endian fixes
    
    agd5f: fix a few more cases.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 48ffad957f1dbca909515ffa00629f4caa68706b
Author: Cédric Cano <ccano@interfaceconcept.com>
Date:   Fri Feb 11 17:00:31 2011 -0500

    kms: 6xx/7xx big endian accel support
    
    agd5f: minor cleanups
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 151b22bd7c3b1002a7261538611fb2b468815c86
Author: Cédric Cano <ccano@interfaceconcept.com>
Date:   Fri Feb 11 16:33:16 2011 -0500

    kms/6xx+: endian swap cursor uploads
    
    agd5f: remove kms surface for cursor since
    we now do the swap in the cursor load to avoid
    breaking pre-6xx cards with BE.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 309fac041f998e20338d320aabaeda5cc1bb6348
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 11 14:32:45 2011 -0500

    kms/exa/xv: fix alignment checking in accel state setup
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 25fe3ec4c6dfcdf6ba72a032bc9cb2c84d84029a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 11 14:03:56 2011 -0500

    kms/exa: UTS/DFS base alignment fixes
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 3d10278ce511f5dabb68ed86ee43eaaf43585983
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 11 13:51:11 2011 -0500

    Xv: fix textured video alignment harder
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a9c135809945fb372ce390f06918b9fd8e455b3f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 11 13:21:43 2011 -0500

    Xv: fix textured video alignment
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit e5bd99faa3b6629a55168386d5dfa936ee4e97ae
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 11 12:14:55 2011 -0500

    kms: remove RADEON_TILING_SURFACE flag on front bo
    
    Should have been removed in:
    ef9bfb262db7004bef3704e5d914687e50d3fca4
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 92ffce1892d24a98d789aad57a4230cadb0c812a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 11 03:12:43 2011 -0500

    EXA/r6xx+: properly account for height alignment in copy temp buffer
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 39104c6e8461cf49c1bb03a18858ad75a9d98b46
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 10 14:31:43 2011 -0500

    remove EVERGREENSetAccelState()
    
    It was a duplicate of the R600 variant.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 7ac3a2e0bcdadff7c7172a9f833f526b526da16b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 10 14:24:50 2011 -0500

    6xx+: switch to linear aligned rather than linear general
    
    linear aligned is supposedly more performant, but more
    importantly, linear general only works on the CB without
    slices.  The texture blocks technically don't support
    linear general although, I think linear general gets
    upgraded to linear aligned in the hw which is why it
    currently works.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit e3145801b80fd4be4cf770128876e86e89bda66f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 10 14:14:55 2011 -0500

    evergreen/NI: consolidate spi setup
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit be67ded05621aff9c85525372fd119071d3278ec
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 10 14:06:38 2011 -0500

    6xx/7xx: consolidate spi setup
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 2c5ae1724307e0dba5d0306fe27c1e15a7390a2f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 10 13:47:53 2011 -0500

    evergreen/ni: consolidate CB state handling
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit c52d817b51e13447802fe338be2d247ffba2a669
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 10 13:35:02 2011 -0500

    6xx/7xx: consolidate remaining CB state
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 5f9bc127d302404432b631e3e774192950f57b42
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 10 03:28:01 2011 -0500

    kms/r6xx+: clean up pitch/height alignment in EXA UTS/DFS

commit a4899db96029acde6cd400fc0541693a487898e7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Feb 5 14:11:42 2011 -0500

    UMS: fix spelling in error message
    
    Noticed by: Warren Block <wblock@wonkity.com>
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 84450ea9221f32296c1f786a6aa126a08bb9756f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Feb 5 14:05:48 2011 -0500

    UMS/DCE3.2: fix segfault
    
    atombios_pick_dig_encoder() needs to be called
    with a valid crtc assigned.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a27b5dbd9fba689f1814c0888d1b7459b6c6b1a1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 3 19:06:22 2011 -0500

    Bump version post release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 0a1a0513a61f392580bde39cca4880f2c19abc8d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 3 18:09:17 2011 -0500

    bump version for release
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit ef9bfb262db7004bef3704e5d914687e50d3fca4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 1 19:24:44 2011 -0500

    kms/pre-6xx: fix pageflipping with tiling
    
    Use UTS/DFS to tile/untile as appropriate for sw access on
    pre-6xx.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=33738
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit bb16dd77321e5a64a3cb2d2ca9982117799ac1a8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 1 19:20:00 2011 -0500

    kms/r6xx+: fix tiling and pageflipping harder
    
    Thanks for Michel for final fix.  Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=33738
    for r6xx+ asics.  A similar approach for pre-r6xx
    asics is pending.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 9c124f781049ef11a8b19894a29b7f62975b3011
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 1 18:59:40 2011 -0500

    radeon: remove device 0x4243
    
    0x4243 is a PCI bridge, not a gpu.
    
    See:
    https://bugs.freedesktop.org/show_bug.cgi?id=33815
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 66eb81b62e5ae8e1d7bd44ed8a179e5ec1ca69af
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon Jan 31 12:26:20 2011 +0100

    UMS: Slightly improve xserver version check.
    
    This will ensure the xserver definitions necessary to compile the new code are
    there. xf86CrtcSetMode will be unresolved at runtime with a few xserver
    commits, but I'm afraid this is the best we can do.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=33719 .

commit 3dc28c86eb57cac819e4ed650acfe1f7df6ef565
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 27 13:09:26 2011 -0500

    ums: fix build against xserver >= 1.10
    
    xf86CrtcSetMode was removed in:
    http://cgit.freedesktop.org/xorg/xserver/commit/?id=8b35118c03590a7ad3786d3284bafb3f40fcb8cc

commit f58e1354b78bf6b70120bddfe1566da3b0723f72
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Wed Jan 26 16:13:30 2011 -0500

    dp: fix displayport support by syncing with KMS code
    
    Warning the dp clock value are divided by 10 in ddx (10 times
    bigger than kernel value) this is somethings very picky.
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit 0f90133ac61c5e1d80b6fa9256e079349940029f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 24 12:40:22 2011 -0500

    vbo: warn if we add a bo with a pointer to the wait list

commit 42529603ecf86fcfd0a8f3495d9db9ce1ee9b4c3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 24 12:30:56 2011 -0500

    vbo: always flush the cbuf bo in flush_indirect()
    
    Always flush the cbuf in case we end up with a cbuf mapped in
    Prepare*(), but never end up issuing a draw call since the cbuf
    may be in use by multiple ops.
    
    The CS check for the cbuf bo is no longer necessay because
    the cbuf bo is NULL at this point due to the radeon_vbo_put()
    just prior.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=32188

commit 9b0e03e98ab739efb4031f81cc4a1a50b3d87a42
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 24 00:13:25 2011 -0500

    vbo: avoid extra cs revalidation in vbo alloc
    
    Make sure we have a valid bo before revalidating.

commit fadee0409a8e13b78bbccb83dd70f590fee23d57
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 21 17:30:28 2011 -0500

    vbo: balance radeon_vbo_get() and radeon_vbo_put()
    
    bo_ref() and bo_map() in radeon_vbo_get()
    bo_unmap() and bo_unref() in radeon_vbo_put()
    
    rather than doing the bo_map() separately in
    radeon_vbo_space().

commit af7d81625a8cf873e6efc881489b3eda9861bd03
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 21 17:01:25 2011 -0500

    evergreen: use vb_offset rather than vb_start_op for cbuf offset

commit 4817fac5f728b777939e2e2bee16b842c9e1367b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 21 15:59:32 2011 -0500

    vbo: remove useless radeon_vb_discard()
    
    We already reset vb_start_op to -1 in the
    UMS/KMS ib discard functions.

commit 0a03f03a65aad925ba2d9c76b1d3356184607bf9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 20 17:07:32 2011 -0500

    evergreen/ni: fix Xv artifacts
    
    Port of the 6xx/7xx fix to evergreen.  Bad texture size
    for texture cache flush.

commit f41cf83750ba9a2e0797fdb21ea9104b85ce53aa
Author: Marton Balint <cus@fazekas.hu>
Date:   Thu Jan 20 17:04:56 2011 -0500

    r6xx/7xx: fix Xv artifacts
    
    bad textures size for cache flushes.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=22007

commit 57fbddfc21d8c6794f378489b764cc2a0ad4a48c
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Jan 18 16:07:52 2011 +0100

    Fix crash freeing KMS video memory.
    
    Where's that brown paper bag? :}

commit 6548bb9836253c586023ffe5ad1497ddabaa50fc
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Jan 18 10:23:41 2011 +0100

    Fix KMS textured video leaks (bug #33193).
    
    v2: Fix radeon_legacy_free_memory() argument type error pointed out by
    Marton Balint, refactor video memory freeing logic into helper function.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=33193 .

commit edc3496b55577ee8509ddd9188e6f2bcdf7169a1
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jan 17 07:55:29 2011 +1000

    radeon: add back flush in block handler.
    
    this is also needed for certain things like stipple rendering.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 63d7dece3f4be8b14012b3a2bedd850831c0437b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 13 11:24:26 2011 -0500

    rs880 fix typo in HD 4250 string
    
    Noticed by Nigel Taylor
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=33057

commit c5b3db18d888552328e9718ea022794fc5bde352
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 11 16:21:18 2011 -0500

    kms: fix pitch aligment for scanout
    
    Display has slightly stricter pitch alignment requirements
    than other blocks.  Factor that in when aligning pitch.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=32997

commit bbd7adce889359b5eb3239b73e904b3ede283e12
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 11 15:41:03 2011 -0500

    radeon: fix yet another pitch align

commit af2e6d7d2f1b3d8f8f6b0acfb2b7b0cfaff7bcdb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 11 14:42:17 2011 -0500

    radeon: fix pitch align in pageflip code

commit e5d0a400d08da2358fac9c2ad12042f125525736
Merge: 0e432df e27e9b4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 10 18:16:49 2011 -0500

    Merge branch 'kms-pflip' of git+ssh://git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 0e432dff9e06a183acaeb20db29cbd03ff0f4b82
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 6 20:56:45 2011 -0500

    NI: add pci ids

commit 34d61785b9bc13287bd7ab8bdd8a1b99a3df4440
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 23 20:54:57 2010 -0500

    Add EXA/Xv acceleration support for NI chips

commit 97322c00faf08461b941edf97efe86d8b082a0ce
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 24 12:18:04 2010 -0500

    Bail on NI cards with UMS
    
    NI cards require KMS.

commit c678b79f99238473df6ff1bedbae840950cdf88c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 23 20:45:25 2010 -0500

    add NI family ids

commit e27e9b4e50ad42885ad2e25be897cdf29aa59712
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Sun Dec 19 03:56:17 2010 +0100

    ddx/ati: Bugfix for pageflip consistency check.
    
    target_msc wasn't passed from vblank event handler
    to pageflip routine, due to a missing initalization.
    Now fixed.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>

commit 30c5f217f91ed1ee15b5fff0002521d98682efb7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 17 13:40:40 2010 -0500

    exa/dfs/ontario: always use the CPU for DFS for now
    
    There are issues with rendering to gart memory that haven't
    been sorted out completely yet.

commit e97079c1b621433b4aa3ecfdd2aa0884aac5df76
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 16 18:49:55 2010 -0500

    DCE4.1: fix DIGx routing
    
    Works more like DCE4.0.  With only two DIGx blocks
    the routing is hardcoded based on link.
    This fixes blank screen issues when changing crtc
    routing due to incorrect crtc to dig mapping.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 3b1fb12dec7df4e9434b2c51568ac8d997638922
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Dec 12 19:16:47 2010 -0500

    man: minor formatting fixes

commit b1af52e522158788a9613d6f1a2309a3987ad59f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Dec 7 19:17:09 2010 -0500

    man: add rs880 info

commit f9bbb26dd97254b66de11bb2abd821aa293ecba5
Author: Matt Turner <mattst88@gmail.com>
Date:   Thu Dec 2 17:00:11 2010 -0500

    Add missing call to vbeFree (bug 4417)
    
    Also kill unneeded vbe.h include from radeon_bios.c.
    
    Signed-off-by: Matt Turner <mattst88@gmail.com>

commit 9fc16ff3f8806971cb495e8838af1e5f9149d34f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 3 02:04:28 2010 -0500

    radeon: remove duplicated define
    
    xfixedtofloat macro was defined several times

commit f074762fff4253a457cb48519bb33a2e2c90f8b9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 3 01:25:41 2010 -0500

    radeon/exa: fallback for non-affine transforms
    
    We need to implement a texture lookup with perspective
    divide for non-affine transforms.  For now just fallback.
    Should fix:
    https://bugs.freedesktop.org/show_bug.cgi?id=31799
    although it appears either EXA or the xserver gets this
    wrong too.

commit 774b114baa932078f8bf91ea302850a8c54c2c07
Author: Nicolas Joly <njoly@pasteur.fr>
Date:   Thu Dec 2 16:02:44 2010 -0500

    ati: remove leftover word in ati.man
    
    fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=28297

commit 69639ef377a9d6701cdef902f8a1c5e0b58cf833
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 2 02:12:24 2010 -0500

    radeon/kms: pageflipping man page updates

commit f48af8a6cfa1ac665f07b8f9712e94b77bc4f5e9
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Tue Nov 23 04:41:53 2010 +0100

    ddx/ati: Fix reporting of pageflip completion events on multi-head.
    
    When a drawable is page-flipped on multiple crtc's (fullscreen
    drawable on mirror-mode or multi-head x-screen), only one pageflip
    event is finally delivered, after the last participating crtc signals
    flip completion, this to avoid visual corruption.
    
    Old code returned vblank count and timestamps of flip completion
    of this last crtc, instead of the values of the "master crtc", the
    one that was used for initially scheduling/triggering the pagflip
    via vblank events. (master = radeon_dri2_drawable_crtc(drawable))
    
    This patch makes sure that the pageflip completion values of the
    "master" crtc are returned, otherwise client applications will
    get confused by the random (msc, ust) values returned by whichever
    crtc was the last to complete its flip. Without this, the returned
    values change randomly and jump forward and backward in time and
    count.
    
    The patch also implements a consistency check on returned vblank
    count values of pageflip completion. Impossible values are detected,
    a x-warning is logged and returned (msc,ust) values are marked invalid,
    so clients could perform error handling. Such a warning would indicate
    bugs in the pageflip completion routine of future kms drivers or the
    ddx to aid driver debugging.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>

commit 122536ee0aeb1eef1a9d80d5e464dcb423dc2837
Author: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>
Date:   Mon Nov 22 04:11:07 2010 +0100

    ddx/ati: Add option "SwapbuffersWait" to control vsync of DRI2 swaps.
    
    A new optional kms driver option "SwapbuffersWait" is defined
    for xorg.conf, which defaults to "on". If "on", DRI2 bufferswaps
    will be synchronized to vsync, otherwise not.
    
    This currently only affects copy-swaps, not pageflipped swaps.
    It also requires a swap_interval setting of zero by the OpenGL
    client.
    
    Ideally, we'd provide a way for dri2 to pass the current swap
    interval to the ddx so we could change this dynamically.
    
    Signed-off-by: Mario Kleiner <mario.kleiner@tuebingen.mpg.de>

commit 0de680730294bd623f6b3e189faa7b88a09d3a2a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 17 17:39:39 2010 -0500

    radeon/kms: add pageflip support
    
    requires radeon drm 2.8.0 or higher
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit fccdca8db34010f566bd068c74cdef0f4a8cb7f5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 17 17:37:25 2010 -0500

    radeon/kms: allow tiled front buffer on 6xx/7xx
    
    Use UTS/DFS to tile/untile as appropriate for sw access.
    Also enables pageflipping with tiling enabled.

commit 035f7f3ab529ca19b853066792af8a23d08a0f53
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 1 10:23:14 2010 +1000

    radeon: add some missing math.h and assert.h includes

commit 0f924e83d7be6fca7e024acdf973089efdf3b627
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 1 10:23:33 2010 +1000

    radeon: make sure EXA is off when EXA is disabled with --disable-exa

commit e142e55c56d8440d7185b594c696ec9eeb699cda
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 30 15:51:21 2010 -0500

    evergreen: set default group_bytes to 256
    
    512 seems to cause issues on certain cards.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=31724

commit 90f831361844f1b80b3f6bb718ff5ac584d73d48
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 29 18:09:05 2010 -0500

    evergreen: use dot4 for transforms

commit 3cae361d0448b6e231c80f53d64bdbbdd74dc4cf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 29 17:44:47 2010 -0500

    6xx/7xx: clean up gpr/const handling in shaders

commit d9bcac516f2a810acb300b29169e56a2df0b47ac
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 29 17:23:30 2010 -0500

    r6xx/r7xx use dot4 for transforms

commit 5d3f33729be0639cef17372345b2dab6127e39d9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 24 10:59:09 2010 -0500

    radeon/kms: fix output enumeration
    
    If a system has a mix of DVI-I, and DVI-D connectors, or a mix
    of HDMI-A and HDMI-B connectors, the enumeration was per
    connector type, but the naming was the same for multiple
    connectors (DVI-[0-n] for DVI-I, -D, -A, and HDMI-[0-n]
    for HDMI-A, and -B), you'd end up with multiple connectors
    with the same name.  Fix this by tracking the number of
    connectors across similar connector types.

commit dc470b5382ffa27bd4a673b21fb6b978d3716ca0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 23 01:46:15 2010 -0500

    radeon/man: divide driver options into UMS and KMS

commit 4cbb7100df4b983d77c20a77431cf2f5101bde36
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 23 01:22:04 2010 -0500

    update man page to include ontario

commit 718dfd443897d70d97fc19afddfbcfe1e39a9c59
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 22 13:11:50 2010 -0500

    Ontario: add workaround for small pixmap issues with DFS
    
    On past asics these kind a problems were usually due to a bad
    backend map config. I suspect in this case, and the previous
    cases it may be related to using linear buffers rather than
    tiled.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 61c97b0812c820564c7bc9d64a998c109bcd46b3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 22 13:10:16 2010 -0500

    Add EXA/Xv acceleration support for Ontario Fusion APUs
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 0659f35dfbeda7dd3ff58da1deb6484fabadc332
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 22 13:07:00 2010 -0500

    Add Ontario fusion APU pci ids
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit fa0cec331e6c94cebf82270dcd6c179b15851c5e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 22 12:56:45 2010 -0500

    ontario: add UMS modesetting support
    
    Accel not enabled yet.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 7ad1f01573e930aa6238eaeb0e11708ae548dfce
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Fri Nov 19 10:27:40 2010 -0500

    evergreen: fix typo for fetch resource offset
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit 3455a3b58532ea3ad901a317126968ab6cbb21b7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 17 17:32:41 2010 -0500

    radeon/kms: fix buffer base alignment for tiling
    
    On r6xx+, 2D tiling can require larger than 4k base alignment.

commit beb7fecd0191e38fb238134ba612985062cf9770
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 15 11:59:58 2010 +1000

    dce4: improve the VT switching code.
    
    add in lots more blocks of regs to save/restore

commit 51e51f864a691e51b5193d102398ced667e0beb1
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 11 18:48:40 2010 +1000

    evergreen: remove warnings since last commit

commit abbf73ee990512ac16ca77e8bb23288495e1f9f4
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 11 09:38:15 2010 +1000

    evergreen: add UMS VT switch support.
    
    This isn't perfect, but it brings back text VTs here on the
    DAC and DVI outputs.

commit e1dfaf93d06bc5eafdbc2e1823d19204ce8f242c
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 11 09:15:27 2010 +1000

    avivo: use arrays to store the crtc/pll info for save/restore
    
    this is just prep work for evergreen VT save/restore

commit 0c2834e67df6e143a7d15f373faaddca1dda6b18
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Nov 5 09:30:40 2010 +0100

    Fix incorrect CS size in one textured video path. (Bug #31364)
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=31364 .

commit 2a7b080727f61559cf8444c93a5088f4155a8fdf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 29 16:56:45 2010 -0400

    radeon/kms: more alignment fixes

commit bf60af579382a0d48f7a65a4cec88759cc8b683c
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Oct 28 13:06:54 2010 +1000

    dri2: reference count the client privates key/callback
    
    This lets multi-screen work better, but still having issues after server
    recycle, but it doesn't crash at least.

commit fb22d0c06a7dc42216230e198ff443d8035e9d21
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Oct 28 11:10:03 2010 +1000

    radeon: only register block handler once per fd.
    
    should fix https://bugs.freedesktop.org/show_bug.cgi?id=29726
    
    the problem is of course the second head instance tries to access the
    fd and fails, however I think this might break syncing on the second
    head but not sure, but its better than just hanging up the X server

commit 040140b5d7cbeaf5d83687bc87e4a236ff9f0cbd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 27 20:16:17 2010 -0400

    drm/radeon: unify fb bo alignment harder
    
    More duplicated paths discoved...

commit f07f9b7b61c05f2de1d61bb0e2f71bd017c8d36a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 27 12:37:42 2010 -0400

    kms/radeon: unify fb bo alignment handling
    
    Previously there were 3 different paths with what should
    have had duplicated code:
    - EXACreatePixmap2
    - Initial front buffer creation
    - Randr resize
    
    This patch attempts to unify the alignment across all 3.
    
    This may fix tiling issues in some cases and should make
    buffer pitches match for pageflipping.

commit d31046ba6c8eee9b7decc3875697d37c38bc38f3
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Oct 27 12:12:04 2010 +0200

    Re-use result of GetScreenPixmap call.
    
    Fixes compile warning due to local variable ppix being unused when building
    against current xserver Git.

commit 4dd7f835c17b00707f1d8d4e36a24380ba52761e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Oct 27 12:09:03 2010 +0200

    Fix another stray xfree() call.

commit f815e9c3c61b1ed73e7dd9383587efcdd8dfc07f
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Oct 27 11:29:12 2010 +0200

    Don't try to delete DRI2 event list entries that were never added. (Bug #31086)
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=31086 .

commit df92245e1fd0ead2581b675cd96ac8bcc8cb65d7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Oct 24 14:27:27 2010 -0400

    r100: add some missing bits in SE_COORD_FMT
    
    Texture coordinates work fine with or without these,
    but this should be more correct I think although
    I don't think it matters since we aren't sending w
    anyway.

commit fc7aa6e3bbb86eaa2f34b827629f7e82cde65ac7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Oct 24 11:56:48 2010 -0400

    UMS/radeon: fix typo in restore palette

commit 5efdf514ab0e5439114e8dd7a49105812155eb69
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Oct 24 11:45:19 2010 -0400

    UMS/radeon: fix screen dimming on VT switch
    
    Save and restore the palettes on VT switch.  The restore
    has to be done after the vga restore to work properly as
    determined by Jonathan Kollasch.
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=18407

commit 1e3ede62c39307d0210cb2044badd619a4f44fec
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Oct 24 11:24:07 2010 -0400

    UMS/atom: default to DVI mode if we don't have monitor hdmi info
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=30330

commit 51f26a7f01b68e373867c03881868ca8830664d6
Author: Mark Schreiber <mark7@alumni.cmu.edu>
Date:   Sat Apr 10 10:55:08 2010 -0700

    Correct spelling and grammar

commit 0f575984594e6977b4a7cb794dad8c6e56c850f1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Oct 19 19:21:39 2010 -0400

    Xv: limit overlay to 2047x2047
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=15391

commit 0f184630cd4760199430320215e4280438fc4ce5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Oct 19 17:13:06 2010 -0400

    radeon: fix compilation on xserver >= 1.10
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=30451
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 179b0e15924ae2757efaece6488ae835ba6436e3
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Oct 19 13:37:22 2010 +1000

    r600: for 2d tiles we need to align to channels no banks.

commit 809cacbc23ab37aa7952665f9b2e37c03a34f173
Author: Adam Jackson <ajax@redhat.com>
Date:   Mon Oct 18 12:32:11 2010 -0400

    kms: Let the server know if we got more than 1 EDID block
    
    Otherwise things like xf86MonitorIsHDMI() won't work right.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 042037e485396981cf4a420c247104ba5d016ca0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Oct 14 17:00:51 2010 -0400

    evergreen: requires same cursor fix as avivo chips

commit 0f37458c253aec46d98db6661c4def711df8fc17
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu Oct 14 14:37:34 2010 -0400

    Don't allow the config file to override BIOS location
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 2918df3a312fc600e83f84c298b9653d2eb3a8d5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 13 17:16:04 2010 -0400

    evergreen: increase XV_CRTC Xv attribute range
    
    Cover all 6 possible crtcs.

commit 0d1f9fd03d0196dda5c1ce34b2e68b007c1874f2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Oct 10 12:06:22 2010 -0400

    DCE3+: UMS modesetting fixes
    
    - add mising LVTMA case statement for DCE3.0 dig encoder
    - some DCE4 systems have EN/DISABLE_OUTPUT actions

commit acf4024aa0ef192355b2bd8281507b1c2e6b7de4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 8 16:30:36 2010 -0400

    ATOM DDC fixes for UMS
    
    - Header size was already subtraced from table size
    - Only hw capable ddc pads are shared with aux

commit 74fd2b91477106a26a2d9fb4b11c885910996041
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Oct 7 17:33:00 2010 -0400

    DCE3.2 UMS: fix duallink
    
    Should fix:
    https://bugs.freedesktop.org/show_bug.cgi?id=30686

commit 8c544272f218fd8bd93a898b96afedc2498b27bb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Oct 7 17:25:47 2010 -0400

    fix the non-kms build
    
    Should fix:
    https://bugs.freedesktop.org/show_bug.cgi?id=30685

commit 81360adffb2a66b9a95a38671f9227a9718c9841
Author: Oldřich Jedlička <oldium.pro@seznam.cz>
Date:   Mon Sep 6 21:14:52 2010 +0200

    radeon: proper DRI2 pending events handling when client gone. (v6)
    
    Properly handle asynchronous DRI2 events for disconnected clients.
    Track client's pending requests and mark them as invalid when the
    client disconnects.
    
    This is based on the version from Alban Browaeys in bug #29065.
    
    v1 (Alban Browaeys): Based upon a detailed explanation from Oldřich
    Jedlička and comments from Christopher James Halse Rogers.
    on http://lists.x.org/archives/xorg-driver-ati/2010-August/016780.html .
    
    v2: Updated version to apply on master. Removed unnecessary
    client_index field from _DRI2FrameEvent. Added freeing/removing from
    list to failed paths of radeon_dri2_schedule_wait_msc and
    radeon_dri2_schedule_swap.
    
    v3: Adopt to older xorg-server that doesn't have dixRegisterPrivateKey.
    
    v4: Conditional include of list.h, unreachable return removed.
    
    v5: Distribute list.h as xorg_list.h, remove xorg-server version check.
    Use the version from xorg-server when available (checked in
    configure.ac).
    
    v6: Removed xorg_list.h, made DRI2 scheduling features dependent on
    list.h presence.

commit adee138f007e26307f1aab7f8fe066150c12e55d
Author: Jesse Adkins <jesserayadkins@gmail.com>
Date:   Tue Sep 28 13:29:50 2010 -0700

    Purge cvs tags.
    
    Signed-off-by: Jesse Adkins <jesserayadkins@gmail.com>
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>

commit f1bf9cbb471d60ee4b0422bc4e896e3b86f4d75f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 6 11:44:42 2010 -0400

    radeon: man page updates
    
    - tv-out is not supported on carding using
    the rage theatre chip for tv-out
    - add evergreen cards to the list

commit 0921ecc1c751df0dd56e0b1d0b78ab53d7164904
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 4 12:34:47 2010 -0400

    evergreen: use EXACreatePixmap2 if available

commit 5bdb6434975584eef90eb9e5955b9c2a14b7f327
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 4 12:31:51 2010 -0400

    evergreen: port Karl's UTS/DFS changes to evergreen

commit be8f45cbd313b68ad663f303c64edb4525b8f981
Merge: e843faf ff5f466
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 4 12:36:56 2010 -0400

    Merge branch 'evergreen_accel' of git+ssh://git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit ff5f466e6ca0ee541a255facff6c9198976dfd52
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 1 15:46:43 2010 -0400

    evergreen/dri2: fix depth allocation for depth+stencil
    
    evergreen uses separate allocations for depth and stencil,
    so to handle that, create a depth buffer large enough to
    handle both.  This is required for using the stencil
    buffer in mesa.

commit e843faf355c864beab81e74f0e39f8ad53d4c2bf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Sep 30 19:30:35 2010 -0400

    radeon: fix fbLocation for >32 bit MC addresses
    
    If the fbLocation was at an address >32 bits, we'd fail.
    Change fbLocation to uint64_t and properly cast when needed.

commit 886febc882053e09294225e85b102f965041b62b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Sep 30 19:20:17 2010 -0400

    r6xx: fix bad mask when setting up HDP_NONSURFACE_BASE
    
    This fails for MC addresses >32 bits

commit 16589b862feb796e15dc6e471d25604a4f5e7c1c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Sep 27 18:28:43 2010 -0400

    bump version post release

commit cc5005af61f45a3552f7358dc5aa711e42f5af54
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Sep 27 18:20:53 2010 -0400

    bump version for release

commit 7f8820fcec8c90bf2f823170bd08a23e8b4ff7af
Author: Michael Cree <mcree@orcon.net.nz>
Date:   Mon Sep 27 13:39:12 2010 -0400

    Fix some unaligned 32bit accesses in the AtomBios code.
    
    On the Alpha architecture unaligned 32bit accesses incur a software
    trap to the kernel and pollute the kernel logs.  Fixed by use of the
    ldl_u() interface.
    
    Signed-off-by: Michael Cree <mcree@orcon.net.nz>

commit c4f834cdfbe96aa47ac5fb039f9dd7aa9730c8a3
Author: Nicolas Reinecke <nr@das-labor.org>
Date:   Mon Sep 27 13:33:55 2010 -0400

    radeon: Convert remaining x(c)alloc/xfree to m/calloc/free.
    
    Fixes deprecation warnings missed out by
    f7a91ece264af9f3fd2fc18e99aefcda93ce9f5c

commit f8fb9312d791af1f77020e8c2d35bb30841ed9aa
Author: Karl Tomlinson <karlt+@karlt.net>
Date:   Sun Aug 22 22:46:33 2010 +1200

    RADEONPrepareAccess_CS: fallback to DFS when pixmap is in VRAM
    
    This avoids costly CPU VRAM reads and lets EXA manage a system memory cache
    of the portions of pixmaps needed for unaccelerated operations.
    
    https://bugs.freedesktop.org/show_bug.cgi?id=27139

commit 35c4ff936601ee083f51510a5192fb97d622a483
Author: Karl Tomlinson <karlt+@karlt.net>
Date:   Sun Aug 22 22:28:06 2010 +1200

    radeon: complete UTS and DFS even when a scratch BO is not necessary
    
    Turns on the big-endian paths even for little-endian systems, and adds
    similar paths to the r6xx/r7xx functions.
    
    This makes UTS and DFS reliable, which will let PrepareAccess (with
    mixed pixmaps) choose to fail based on whether the pixmap is in VRAM
    (to avoid CPU reads).

commit d46381a3a6bf10903803f5acaa7aa0ce06373b96
Author: Karl Tomlinson <karlt+@karlt.net>
Date:   Sun Aug 22 21:02:45 2010 +1200

    radeon: complete big endian UTS and DFS even when scratch allocation fails.
    
    On big endian systems, PrepareAccess will fail when byte-swapping is
    required so UploadToScreen and DownloadFromScreen cannot rely on
    fallback to PrepareAccess.
    
    When scratch BO space allocation fails, this patch merely adds simple
    fallback to direct CPU access without any GPU blit.  This sometimes
    requires a CS flush even in UploadToScreen.
    (No allocation retry after a flush is added here.)

commit 4ced4e1eff67946e306c0c67c9ed59dd5f3c4ba9
Author: Karl Tomlinson <karlt+@karlt.net>
Date:   Sun Aug 22 20:04:42 2010 +1200

    RADEONDownloadFromScreenCS: flush CS writes before mapping BO for read
    
    If unflushed CS operations write to the pixmap BO, then these need to be
    flushed before mapping the BO for read.  This currently only affects big
    endian systems and only when the operation writes to the GTT domain.

commit a4eef8faffbb1ea2f742273ee855f4e6f992e5c8
Author: Karl Tomlinson <karlt+@karlt.net>
Date:   Sat Aug 21 22:29:34 2010 +1200

    FinishAccess_CS: set bo_mapped to FALSE on unmap
    
    This is actually only necessary when PrepareAccess may behave differently on
    different calls with the same pixmap, which currently doesn't happen.
    
    However resetting bo_mapped is necessary to let PrepareAccess (with mixed
    pixmaps) choose to fail based on whether the pixmap is in VRAM (to avoid CPU
    reads).

commit bfebe039af0c0282d04eb6234b6e6d1e02097146
Author: Karl Tomlinson <karlt+@karlt.net>
Date:   Sat Aug 21 21:44:39 2010 +1200

    DownloadFromScreenCS: download via a scratch BO if pixmap domain is unknown
    
    radeon_bo_is_busy() may return without setting the domain out-parameter.
    If this happens, then download via a scratch GTT BO to avoid CPU VRAM read.

commit e26a59e9db8067882327f872e3d2d760ce4c66f3
Author: Mathieu Bérard <mathieu@mberard.eu>
Date:   Thu Sep 9 19:32:38 2010 -0400

    Fix NULL possible deref in evergreen_cp_wait_vline_sync

commit b90cb61ccb0f4f80e0627141f223354a9371d47d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Sep 7 11:51:16 2010 -0400

    radeon: set interlaced and doublescan enabled for randr outputs
    
    interlaced used to work without setting these parameters.  Changes
    in the xserver seem to require them now.
    
    Should fix:
    https://bugs.freedesktop.org/show_bug.cgi?id=29591

commit 7cc0d3311f23ad569af004e0e4a0e2efbac107e5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 3 00:32:27 2010 -0400

    evergreen: fix Xv
    
    VS const buffer offset was wrong.
    
    fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=29788

commit 7c6ce4e62693f446d7d3c8a86502ccc03c0e55b0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Sep 2 20:34:56 2010 -0400

    evergreen: add additional default state
    
    Note, you also need a drm patch to fix the GPU hangs:
    drm/radeon/kms/evergreen: fix gpu hangs in userspace accel code
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 2b98ec1f7e931019a4ab699a56d5dfaa395946fb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Sep 1 13:24:19 2010 -0400

    r6xx/r7xx: fix typos
    
    some stray - signs

commit 966ac1be81da76c8aa4ea46b63f3ca5358a2c021
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Aug 27 18:22:21 2010 -0400

    evergreen: work around bad data in some i2c tables
    
    The 7th entry in a lot of evergreen i2c gpio tables is partially
    zeroed.  Fix the entry.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 91f707d308d4bbf16c3d62d046cf280fef5a8f4c
Author: Heikki Lindholm <holin@iki.fi>
Date:   Fri Aug 27 02:26:24 2010 -0400

    xv: fix non-kms/non-dri Xv column ordering on big endian systems
    
    Column order is wrong on big endian systems, primarly because of a
    bits / bytes mix up with the bpp variable. Fix tested with r100 and
    r300, screen depth 16 and 32 with YV12 and YUY2 (overlay, textured video),
    RGBA and RGBT (overlay).
    
    Should fix: https://bugs.freedesktop.org/show_bug.cgi?id=29041
    
    Signed-off-by: Heikki Lindholm <holin@iki.fi>

commit 6a2c8587a4e05a8be2a2e975a6660942cfe115d6
Author: Christopher James Halse Rogers <christopher.halse.rogers@canonical.com>
Date:   Fri Aug 27 13:14:33 2010 +1000

    dri2: Reference count DRI2 buffers
    
    When a client calls ScheduleSwap we set up a kernel callback when the
    relevent vblank event occurs.  However, it's possible for the client
    to go away between calling ScheduleSwap and the vblank event,
    resulting in the buffers being destroyed before they're passed to
    radeon_dri2_frame_event_handler.
    
    Add reference-counting to the buffers and take a reference in
    radeon_dri2_schedule_swap to ensure the buffers won't be destroyed
    before the vblank event is dealt with.
    
    This parallels the approach taken by the Intel DDX in commit
    0d2392d44aae95d6b571d98f7ec323cf672a687f.
    
    Fixes: http://bugs.freedesktop.org/show_bug.cgi?id=29065
    
    v2: Don't write completion events to the client if it has quit.
    v3: Don't try to unref the NULL buffers from a DRI2_WAITMSC event.
        Take a ref in schedule_swap earlier, so the offscreen fallback
        doesn't incorrectly destroy the buffers.
    
    Signed-off-by: Christopher James Halse Rogers <christopher.halse.rogers@canonical.com>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit e9928fe036e9382fd7bc353f3f05531445f08977
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Aug 25 10:42:39 2010 +1000

    remove explicit buffer submit from copy region
    
    port of 0be3e95c844247746742805830860ace9f546d99 from intel driver.
    
        Remove explicit batchbuffer submit in DRI2 copyregion
    
        Now that we submit from the flush callback chain, we know we'll always
        submit before the client receives the reply or event that blocks it from
        rendering the next frame.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 9f13049ddf06f6f2138851a548cfb82f12a52f42
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Aug 25 08:56:37 2010 +1000

    radeon: add correct flushing for direct rendered
    
    this is a port of 69d65f9184006eac790efcff78a0e425160e95aa from the Intel
    driver.
    
        Submit batch buffers from flush callback chain
    
        There are a few cases where the server will flush client output buffers
        but our block handler only catches the most common (before going into select
        If the server flushes client buffers before we submit our batch buffer,
        the client may receive a damage event for rendering that hasn't happened yet
    
        Instead, we can hook into the flush callback chain, which the server will
        invoke just before flushing output.  This lets us submit batch buffers
        before sending out events, preserving ordering.
    
        Fixes 28438: [bisected] incorrect character in gnome-terminal under compiz
        https://bugs.freedesktop.org/show_bug.cgi?id=28438
    
        Signed-off-by: Kristian Høgsberg <krh@bitplanet.net>
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 141cbc283fddeb67c2a6c47a0f0f5c2aa2bfb430
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 24 18:01:05 2010 -0400

    evergreen Xv: remove stray line that caused a segfault
    
    fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=29788

commit f170dddd3538a587f2363ef5fa10a4b484e762da
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 23 18:58:12 2010 -0400

    evergreen: use vbo pool for constant buffers

commit eede93b057bbdddcde5da3220a3f8c6f73784a7e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 23 13:16:27 2010 -0400

    radeon: move vbo data to a separate struct
    
    this way we can share the vbo code with const buffers

commit d8abf27dbd14f5eb746c5e8b8b1436ad292d8ec6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 23 01:31:27 2010 -0400

    evergreen: fix dword counts in default state

commit 5a7c9d94733a0db1d3565447acc9f0e751db5950
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 23 00:43:48 2010 -0400

    radeon: fix legacy lvds dpms sequence
    
    Take from my kms commit.
    
    Should fix:
    https://bugs.freedesktop.org/show_bug.cgi?id=19459
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 6930d2c981221757b1e11ef194809f085753a611
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Aug 20 16:55:21 2010 -0400

    Add initial EXA and Xv support for evergreen
    
    Based on the r6xx/r7xx code updated for evergreen.
    Still causes GPU hangs in some cases.  We haven't
    tracked down why yet.  Might be related to constant
    buffer persistence.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit bdd41fecdb19c83c6c7b793016b61d38065dcd13
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Aug 20 01:17:13 2010 -0400

    evergreen: set encoder type to DVI for HDMI
    
    Fixes:
    http://bugs.freedesktop.org/show_bug.cgi?id=27452
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit ad8ea1f6e5fcb4f163622cf5eab953ea812b5829
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Aug 19 17:04:35 2010 -0400

    DCE3+: switch pads to ddc mode when doing i2c
    
    The pins for ddc and aux are shared so you need to switch the
    mode when doing ddc.  The ProcessAuxChannel table already sets
    the pin mode to DP.  This should fix unreliable ddc issues
    on DP ports using non-DP monitors.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit fd686668289258ffaf6b81057545e50612aac6a8
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Aug 12 12:59:18 2010 +1000

    radeon: fixup non-kms build

commit 5a9865d90c23c4ce0f46d380ea9119eac87a99eb
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Aug 12 11:18:06 2010 +1000

    evergreen: fix multi-head cursor support

commit 8351bb9f085fde5dc47b115375efcc61adc23859
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 15:05:45 2010 +1000

    radeon: take 8/10 encoding into a/c on displayport link

commit b91e0efcb24eea32e6978c146c5409eeeeac0a62
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 15:05:25 2010 +1000

    dce32: remove rmx workaround

commit 94bc1b7156cd0866566dc44a823c7e051bb45175
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 13:24:52 2010 +1000

    atombios: fixup set crtc source like KMS
    
    This removes a bunch of strict aliasing warnings and fixes the
    codepaths up like the latest KMS code, including a workaround for a bug
    on evergreen.

commit 9bc716eb62d4e0eed2902b92437a42634eef6ba1
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 13:23:21 2010 +1000

    atombios: move adjust pixel clock around to follow KMS code flow
    
    This reworks the pixel clock adjusting code to follow the KMS style,
    also fixes warnings in this code.

commit 31de43bf9d9eb93cc2b2150474ea7404beabe49d
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 13:21:39 2010 +1000

    displayport: retry on timeout
    
    this is ported from KMS

commit 9ef67335583d36080d227e8bce1966afe08e0486
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 13:21:01 2010 +1000

    evergreen: don't call YUV table on evergreen

commit 1cce55e8ba43e7958cb67147aeaeb068826ab99f
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 13:20:13 2010 +1000

    evergreen: add support to parse firmware info for ext dp clk

commit bbffd67d3296344e8735b007cdee83146d38369c
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 13:14:54 2010 +1000

    atombios: realign digital transmitter/encoder setup with kms

commit 6244153467665f5007e2fc7786b4bcc4b0b96030
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 10 12:57:22 2010 +1000

    update atombios.h to latest from kernel

commit bb7c77ca75e857f90791b0dd1c04c8e2f19d0e3c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 9 22:18:53 2010 -0400

    atom: upstream parser update
    
    fixes digital output problems on evergreen asics

commit cc0a167ff2db9b097891883ded147af1d67e4407
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 25 18:17:15 2010 -0400

    r6xx/r7xx: default to micro (1D) tiling for now
    
    SW de-tiling used in the r600c 3D driver has issues with
    certain configurations.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit b5bfdbd70d9671250957ccd41dfc8818850d257e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Aug 5 17:26:28 2010 -0400

    r6xx/r7xx: add support for tiling with kms (v3)
    
    Requires radeon drm 2.6.0 and updated mesa.
    
    v2: - fix lockup due to not emiting DB_DEPTH_INFO
    https://bugs.freedesktop.org/show_bug.cgi?id=28342
        - fix drm minor version to deal with evergreen accel
    v3: rebase on current ddx git
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a3c59c6f6be7067421e348142da0ca13428dcd57
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 4 12:07:36 2010 -0400

    radeon: add new pci ids

commit a456587b77ae357750179a50f8db2a17c0f2738e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 2 14:24:41 2010 -0400

    r6xx/r7xx: move syrface sync emit to the functions that emit surface info
    
    reduces code duplication.

commit 8eba977cab1878ba247da8160771d41194d8014f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 10 13:34:59 2010 -0400

    EXA: move more common helpers to exa_shared

commit 71c1a2704af23b61439cee5ce784f7fe267a8a26
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 10 11:52:43 2010 -0400

    remove unused reg headers from radeon_exa_shared.c

commit d73aef78919005369af1b60df138439b4b6105c3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 2 13:27:12 2010 -0400

    r6xx/r7xx: set VGT_MAX_VTX_INDX to a larger value

commit dacaf5d827b58c39f9e5a7ac0530f9ea6e257347
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 2 08:33:51 2010 +1000

    fix make distcheck

commit c79ce215a01b45fc63b483da167ae37ec7aefad6
Author: Dave Airlie <airlied@redhat.com>
Date:   Sun Aug 1 16:51:48 2010 +1000

    radeon/r600: restructure exa + vbo to provide more sharing
    
    This is a precursor for r300/500 vbo support.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 82254b59268140c4102ae3cd713743ae2be15c00
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 30 17:15:05 2010 -0400

    r6xx/r7xx: unify composite mask and non-mask pixel shader

commit 1c17f3a192f644e8e38b5cfb1470f49434bfba27
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 30 16:34:54 2010 -0400

    r6xx/r7xx: clean up composite vertex shader
    
    keep CF, ALU, Fetch instructions in separate groups

commit f9d6c0de231357f96e2e0de71e6c9221bcb36bd4
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Fri Jul 23 13:28:42 2010 -0400

    The local copy of the modes code is no longer required.
    
    The server 1.2 as shipped in the tarball on the web does not contain the
    modes code. It was added just after and found in git branch server-1.2-branch.
    
    The modes code was initially included in version ati 6.8.0 and fails to compile
    with server 1.2 as it requires randr 1.2. The modes code is included in server
    versions 1.3 and later, so there is no need to provide an unknown version of
    the modes code in the ati driver tarball. It will never be used.
    
    This patch makes the ati driver requiring server 1.3 or later.
    Version 6.8.0 configures and builds ok on server 1.3
    Master branch post 6.13.1  configures and builds ok on server 1.3
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 0028419acb0762eeb950de5fe702c93e70301612
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Sat Jul 24 10:51:18 2010 -0400

    config: add AM_PROG_CC_C_O for per-target compilation flags
    
    Per-target compilation flags (theatre200_drv_la_CFLAGS) are required
    when multiple targets which require different compiler flags,
    are build in the same makefile.
    
    Automake issues a command with -c and -o flags which not all compilers
    support. The object fles are prefixed with theatre200_drv_la.
    The macro AM_PROG_CC_C_O must then be used to provide this feature
    on compilers that do not have it. If not, a warning is issued at make time.
    
    This macros checks for compiler support and if missing, uses a "compile"
    script it generates in the package root directory.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit aca0a8669b538d58f018f95c9b22e6b3ec1ffe50
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Jul 21 16:49:04 2010 -0400

    config: add comments for main statements

commit 66e614f7115efeec237b3b916d9637e8b3e8985c
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Jul 21 16:07:00 2010 -0400

    config: replace deprecated use of AC_OUTPUT with AC_CONFIG_FILES
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 16e5510c90ef1ba2bbaab78d18943f080b86d809
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Jul 21 14:37:41 2010 -0400

    config: replace deprecated AC_HELP_STRING with AS_HELP_STRING
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit b36d8c09e91382f4cfa71635374ec88f5b676d1c
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Jul 21 14:05:22 2010 -0400

    config: replace deprecated AM_CONFIG_HEADER with AC_CONFIG_HEADERS
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit cd9351b04c2d6982b28c647a63d550eb3e1937eb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jul 21 13:48:24 2010 -0400

    r6xx/r7xx: group op variable state
    
    Group the op variable state into one emit block, re-order
    to reduce dwords emitted.

commit 5f838c664e8010f4e51afecd4100d73a96fe1209
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Jul 21 09:27:42 2010 -0400

    config: complete AC_INIT m4 quoting
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 48ec2e65c268b426ab9a3e214d174447cf5b5936
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Jul 21 08:33:38 2010 -0400

    config: remove unrequired AC_SUBST for LIBDRM and LIBUDEV
    
    These macros are called by the PKG_CHECK_MODULES macro.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 1aabb7eb7d8f06c7481151145db3b9a722ce4ef0
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jul 20 21:54:11 2010 -0400

    config: remove unrequired AC_SUBST([DRI_CFLAGS])
    
    This macro is called by PKG_CHECK_MODULES
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 8f92b349821a3ee5ed8df55273d905b9605385aa
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jul 20 21:44:57 2010 -0400

    config: remove unrequired AC_SUBST([XORG_CFLAGS])
    
    This macro is called by PKG_CHECK_MODULES
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 5b483b832f9c4a5b92ffb7f72a470669201f1fba
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jul 20 20:24:42 2010 -0400

    config: remove unrequired AC_HEADER_STDC
    
    Autoconf says:
    "This macro is obsolescent, as current systems have conforming
    header files. New programs need not use this macro".
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 6574e3a16eb3631ee7e00ee60a8c9ba95c8b84ef
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jul 20 19:41:30 2010 -0400

    config: remove AC_PROG_CC as it overrides AC_PROG_C_C99
    
    XORG_STRICT_OPTION from XORG_DEFAULT_OPTIONS calls
    AC_PROG_C_C99. This sets gcc with -std=gnu99.
    If AC_PROG_CC macro is called afterwards, it resets CC to gcc.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 593eff2924c2ad161d8b490fbf6d7e433fbe2a80
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jul 20 18:45:18 2010 -0400

    config: update AC_PREREQ statement to 2.60
    
    Unrelated to the previous patches, the new value simply reflects
    the reality that the minimum level for autoconf to configure
    all x.org modules is 2.60 dated June 2006.
    
    ftp://ftp.gnu.org/gnu/autoconf/autoconf-2.60.tar.gz
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit c2ab6ffc25aa6759cbbb4c1fbbd4a136b38983bf
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jul 20 16:15:29 2010 -0400

    config: upgrade to util-macros 1.8 for additional man page support
    
    Use MAN_SUBST now supplied in XORG_MANPAGE_SECTIONS
    The value of MAN_SUBST is the same for all X.Org packages.

commit cdeb1949c820242f05a8897d3ddd0718f204dacf
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Thu Jul 15 16:21:41 2010 -0400

    kms: don't call cursor helper if using software cursor
    
    Fix :
    https://bugzilla.redhat.com/show_bug.cgi?id=601713
    https://bugzilla.redhat.com/show_bug.cgi?id=598358
    
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit 06691376b1ee963c711420edaf5a03eab6f5658f
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Jul 7 13:15:03 2010 +1000

    fix build on non-kms

commit 052cf0169ae70d5448af6dc4db840b2fc195569b
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Jul 7 11:10:46 2010 +1000

    configure.ac: bump version post release

commit ad999e633ff41d27eed9d2c6535e163a7181b0bd
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Jul 7 10:49:22 2010 +1000

    set version for release

commit 37b348059b1c15d7b381cd3df3db52bd9ee6613e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jun 30 12:56:48 2010 -0400

    remove rv100 quirk
    
    Some RV100 cards with 2 VGA ports show up with DVI+VGA, however
    some boards with DVI+VGA have the same subsystem ids. Better
    to have a VGA port show up as DVI than having a non-useable
    DVI port.
    
    reported by DHR in irc.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit c8ea942bd0e9d1c055d50b94440aa4dae425f20b
Author: Cooper Yuan <cooperyuan@gmail.com>
Date:   Tue Jun 29 20:34:57 2010 +0800

    Remove HDP_SOFT_RESET function, there is no need to reset HDP block.
    
    This commit can fix an issue reported on DELL server, system gets hang
    during soft resetting while another application tries to access PCI
    configuration space.

commit 139b38bf67ec10d876cc56df833541d497ae4fa4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 24 14:55:09 2010 -0400

    r6xx shader: use ADDR() for CF_DWORD0
    
    no change in functionality

commit 801e83227a59a29eea425ea612083bbf2b536c30
Author: Wolfram <bugzilla1@malloc.de>
Date:   Mon Jun 21 18:59:19 2010 -0400

    r6xx/r7xx: fix ums cmd buffer leak
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=27957

commit b13d719080b75fc6db4d15d2d323b8fce8b7ad06
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jun 21 18:49:44 2010 -0400

    r6xx/r7xx: fix miscount in state emit

commit c3c5c8e2cc91b51a24effdffb85281216eed731d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jun 21 14:30:17 2010 -0400

    r6xx/r7xx accel: add back some additional default state
    
    This adds back everything removed in c29157bbf5b0dd26857675282ab094082fbaed0d
    except CB_FOG_*, CB_CLEAR_* and the VPORT transforms.  Those shouldn't
    be needed as we aren't using fog or viewport transforms.  We probably don't
    need all the state that was added back either but I can't reproduce any
    problems here, so it's hard to say which parts are problematic.
    
    Should fix:
    https://bugs.freedesktop.org/show_bug.cgi?id=28629
    and several corruption reports on #radeon.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 800cb2088fec698d0626063a9ab198ff534938c0
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon Jun 21 08:15:14 2010 +0200

    DRI2: Fix up confusion between windows and pixmaps.
    
    Fixes crashes with xserver master, where looking up a pixmap private on a
    window no longer happens to work.

commit f7a91ece264af9f3fd2fc18e99aefcda93ce9f5c
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon Jun 14 08:52:16 2010 +0200

    Convert x(c)alloc/xfree to m/calloc/free.
    
    Fixes deprecation warnings with xserver master and should also work with older
    xservers.

commit ea37d24b1b6d4cbcf73e680846de25b72af216e3
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jun 21 13:55:15 2010 +1000

    radeon: fix support for 1.9 server master.
    
    This moves pixmap and mode set into CSR where its allowed. Should work fine on
    old servers also.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit fdd8ecafd054f65842351aee6ee6fba7af6613b2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jun 16 19:02:10 2010 -0400

    r6xx/r7xx: macro safety fixes

commit 4651d77211b508cb6b76931807780e317f232220
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jun 16 12:28:36 2010 -0400

    radeon: fix depth 16 with ums
    
    Fixes:
    https://bugs.freedesktop.org/show_bug.cgi?id=28494
    https://bugzilla.redhat.com/show_bug.cgi?id=554967
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 1e1d6a515428b6884fea586d180346fc74ef75a1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jun 16 12:20:03 2010 -0400

    r3xx-r5xx Xv: disable bicubic filtering by default
    
    - makes Xv more consistent with r1xx/r2xx/r6xx/r7xx
    - Xv attributes like brightness, contrast, hue, etc. only work
    when bicubic is disabled.
    - avoids performance issues on some systems when sampling from textures
    in GART with kms.
    - It can be re-enabled with using xvattr
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit c29157bbf5b0dd26857675282ab094082fbaed0d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 15 19:39:42 2010 -0400

    r6xx/r7xx: remove unnecessary state emit
    
    No need to emit state that doesn't impact that we use for EXA/Xv.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 35280545fcfb911f189d7657bd1040a28450fe7b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 15 19:21:32 2010 -0400

    r6xx/r7xx: reorg default and clipping state emit
    
    Group ordered registers to save command buffer space.
    Reduces the default and clipping state from 256 to 160 dwords.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a2528a734c1d4e8639c49e5d222e3630a93ffbfd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 15 17:00:34 2010 -0400

    r6xx/r7xx accel: remove some duplicate emits and minor clean up
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 5f093357f18eb9bea641394ab86a92a1766d8f2e
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Sat Jun 12 15:11:46 2010 -0400

    COPYING: replace stub file with actual copyright notices
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 0c2118586d3edeecc2473b5d685472df4b5e70fa
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 11 15:53:18 2010 +1000

    radeon: fixup last fix, use CURSOR_WIDTH not RADEON_CURSOR_WIDTH.

commit 9a117f768cb8261327fd3c324da9c98875785cc1
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 11 14:28:24 2010 +1000

    radeon: set proper stride for cursor in tiling flags.
    
    definitely incorrect, but hope it doesn't break anything.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b6346ede94f0d0b11ee04770cf52508cb0a5e6c6
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jun 10 20:13:58 2010 -0400

    drmmode: fix big endian issue with properties.
    
    On a power machine with an rn50, this was causing load detection to be turned off after the first X run, subsequent X runs would find nothing connected.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 1971dc6d758dea13b9fb6d1c8f516c165628b5e5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 8 11:18:28 2010 -0400

    radeon: fix rn50 cloning with kms
    
    Since they only have one crtc sometimes the xserver doesn't assign
    a crtc to one of the outputs even though both outputs have common modes
    which results in only one monitor being enabled. Assign a crtc in
    preinit so that both outputs light up.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 426114b4a99d37b394efe3336968bb0ab9b6e9ae
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jun 8 11:34:35 2010 +1000

    xv: fix Xv on M6/RV100 under KMS.
    
    pRADEONEnt->HasCRTC2 wasn't setup under KMS.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit f64bf0de8e2de7c1bf9cc0c614603dd23c9060ad
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 3 14:48:21 2010 -0400

    evergreen: explicitly disable accel on evergreen
    
    Previously we relied on the drm not having accel enabled
    to make sure evergreen used shadowfb, now we when we enable
    accel in the drm, we need to make sure the ddx doesn't try
    and use it until it's implemented.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 428125c095b18c2a2864c1aef24ac0f384b6be54
Author: Marek Olšák <maraeo@gmail.com>
Date:   Sun May 16 20:11:17 2010 +0000

    r3xx-r5xx: enable color tiling by default on KMS
    
    Signed-off-by: Marek Olšák <maraeo@gmail.com>

commit 6712ce4f4715c8ce7c2fcddb52ca9b103bdd634c
Author: Marek Olšák <maraeo@gmail.com>
Date:   Sun May 16 20:09:31 2010 +0000

    rs740: follow macro-switch too
    
    Signed-off-by: Marek Olšák <maraeo@gmail.com>

commit 842fa162e9d3bbad2bc44d3732bbc8e5a54402ea
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 18 11:21:01 2010 -0400

    dri2: use radeon_pick_best_crtc()
    
    It's already exposed and used by exa and Xv and has
    the same functionality.  radeon_covering_crtc() can
    be dropped eventually.

commit 64e6858aaf5d0e39ecc9f9804689012f3a38660a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 17 12:50:44 2010 -0400

    r2xx exa: fix typo in 27c3326863deae36bc35e2c3b73fffd400208ff1
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 27c3326863deae36bc35e2c3b73fffd400208ff1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 17 09:53:32 2010 -0400

    r1xx/r2xx EXA: handle RepeatNone properly with transforms
    
    Fallback with unsupported ops like r3xx, r6xx.
    
    Should fix fdo bug 28142.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 30591320ec46e491ba20904cc64f3405b51c6505
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Fri May 7 17:35:09 2010 +0200

    kms: add support for the MSC swap & sync API
    
    This patch is mostly a port over of Intel ddx code for
    MSC support. It needs a radeon KMS module with version
    2.4 which has the query for hw crtc id.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Jerome Glisse <jglisse@redhat.com>

commit 766024dcc61c83490540910ce752f9bfe6dddba4
Author: Marek Olšák <maraeo@gmail.com>
Date:   Mon May 3 22:56:27 2010 +0200

    r3xx-r5xx: fix texturing with small macrotiled pixmaps
    
    Pixmaps smaller than a macrotile cannot be used as textures because hardware
    automatically switches to macro-linear and therefore sampled pixels are
    messed up. This behavior is known as MACRO_SWITCH.
    
    The only sane workaround seems to be not using macrotiling for small pixmaps.
    
    The function RADEONMacroSwitch has been ported from r300g and implements
    MACRO_SWITCH the same way it's implemented in hardware. It's been well tested
    in r300g.
    
    This commit also fixes blit-based framebuffer reads, which are used for tiled
    surfaces in r300g, when ColorTiling is enabled.
    
    Signed-off-by: Marek Olšák <maraeo@gmail.com>

commit 6aedd57f6c2f08d0151a8bd1c5893d40d3db709a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 4 14:30:52 2010 -0400

    radeon: fix pll_out_min default for pre-avivo
    
    Fixes fdo bug 27960

commit b2ecd1bb507ed4e0d9ba6ebd498c51da2e8136fa
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Apr 23 18:28:22 2010 +0200

    FB/MMIO_cnt should be ints, not pointers.
    
    Pointed out by compiler warnings.
    
    https://bugs.freedesktop.org/show_bug.cgi?id=27817

commit 1ad41054989f7c3edec373ccf09dceda6d7c94b4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 22 16:48:21 2010 -0400

    r3xx: fix gb pipe setup for SE cards
    
    Noticed by Tormod Volden

commit 59e287d7c484b4addd4a06d013670577639c7ae2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 22 02:05:40 2010 -0400

    r3xx-r5xx: fix vertex units
    
    Noticed by Tormod Volden.
    
    RV3xx is 2, RV560,RV570 is 8

commit 2a6b409496f26da0436972b5feae6ea035dde08d
Author: Owain Ainsworth <zerooa@googlemail.com>
Date:   Mon Apr 19 14:37:33 2010 +0100

    Reference count shared driver mappings.
    
    With MMIO it wasn't *such* a bit deal if we leaked the smallish mapping.
    with FB it could be a larger deal. So instead of worrying about this,
    reference count the mappings in the entity structure and unmap them when
    no one cares anymore.
    
    Prompted by a discussion with airlied
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 761f0de5556e46f166280476185977f720efe586
Author: Owain G. Ainsworth <zerooa@googlemail.com>
Date:   Mon Apr 19 04:05:36 2010 +0100

    Make consistent use of fbOffset and share fb mappings.
    
    What we were doing previously was mapping the framebuffer for zaphod for
    only this driver instances chunk, however, fbOffset was (rightly) set to
    the offset into the whole framebuffer we were using.
    
    Since in some cases we did operations on the FB virtual address +
    fbOffset (for example zeroing the framebuffer on entervt) we were
    actually pissing all over ourselves in those cases.
    
    Fix this by implementing shared fb mappings like we do for MMIO already,
    and whenever we wish to refer to our area of FB space we always use
    fbOffset. Fixes zaphod for some users on r600 chipsets, my 4870 is still
    behaving strangely on screen 0, but I suspect that is another bug.
    
    Once calculation (in PreInitAccel) is now wrong because of this, however
    dri on zaphod does now happen so this is irrelavent, add a comment to
    that effect.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 2059d628c5fb03222a62502cc1b5724bf296a7b3
Author: Owain G. Ainsworth <zerooa@googlemail.com>
Date:   Mon Apr 19 04:05:35 2010 +0100

    Kill per-context SAREA support.
    
    It has never been used, and since the world is changing it almost
    certainly never will be. Good riddance.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit c4b46f56279cc18c8114235ca41cfb41ffede67f
Author: Owain G. Ainsworth <zerooa@googlemail.com>
Date:   Mon Apr 19 04:05:34 2010 +0100

    Remove remnants of the ShowCache option.
    
    The rest of it died a long time ago.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 03b34c5fb12c4df180d4df113d2b654f6afd7230
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Apr 19 17:58:07 2010 +1000

    radeon: add FireMV 2400 pci id.
    
    From RH#581927 - thanks to Carsten Clasohm
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 6c07816025f70e522986614c29c300ea13e5d932
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 18:50:17 2010 -0400

    r5xx texvid: deal with large numbers of verts
    
    should fix fdo bug 25884

commit 5ee320a6b1b4c65fe592c8ac4d1981799242d59e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 18:42:56 2010 -0400

    r3xx texvid: deal with large numbers of verts
    
    should fix fdo bug 25884

commit 47af3f4f266232517486238917d82fc5ca9c82e6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 20:50:18 2010 -0400

    r2xx texvid: deal with large numbers of verts
    
    should fix fdo bug 25884

commit 57577d5cd0641b7cad02242478699bcfece59227
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 20:40:56 2010 -0400

    r1xx texvid: deal with large numbers of verts
    
    should fix fdo bug 25884

commit 31a888e78fa403f2bddacee098a29f36eaa969cb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 15:52:59 2010 -0400

    r5xx textured video: split into prepare and draw functions

commit f7ebe4a127965bb9e46d20c60331bcc4dab76fc5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 15:46:24 2010 -0400

    r3xx textured video: split into prepare and draw functions

commit 10799b4ce0c18c5a7d92d688549e8e777344f111
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 15:38:49 2010 -0400

    r2xx textured video: split into prepare and draw functions

commit bd1cf42201a1f918080bf34786a6de327cb31b5f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 15:31:40 2010 -0400

    r1xx textured video: split into prepare and draw functions

commit c1136f94b80346065893f8a43c0fbf60c8c9b057
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 15:23:14 2010 -0400

    Xv: track vtx_count, is_planar in port priv

commit 2f680b631357661511456f07b7b4ba1aa2cbf30c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 13:43:41 2010 -0400

    radeon/kms: fix possible crtc mask for evergreen

commit 4656f5dff1ed72fa2c7a1484305f2aef7b65ff2b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 16 13:36:25 2010 -0400

    radeon/kms: fix crash when using more than two heads
    
    fixes fdo bug 27692

commit a69e749d0562887af6bd236c38802472e54640c4
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Apr 16 13:58:54 2010 +1000

    kms: add uevent support.
    
    When we get a hotplug event from the kernel we should notify the client side to reconfigure displays.
    
    based on work by ajax in intel driver.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 22a46dddd375b2b9399e12fdf168fa5292ff17a4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 13 11:08:59 2010 -0400

    radeon: add support for pll algo selection
    
    tv-out on atom systems is very particular about it's
    dividers.  force it to use the old algo.
    
    Should fix fdo bug 27593.

commit c1b817c45477c21234abaaebe78feb7ea4fd92b1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 12 16:32:04 2010 -0400

    atom: disable TV encoder when VGA is in use
    
    Switching between TV and VGA caused problems on some
    systems since the TV encoder was left enabled.
    
    Should fix fdo bug 25520.

commit 878814aeab7031ff6169fcaf2be869b7595c8699
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 12 11:16:14 2010 -0400

    Xv overlay: set scalerwidth to 1920 on r3xx/r4xx chips
    
    reported on phoronix forums.

commit 276fe739f1caa95778213054375a65288b80f320
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 9 20:03:09 2010 -0400

    radeon: add some new pci ids

commit eb5665688ef9b52f03f61546351d0848cab54740
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 8 00:31:52 2010 -0400

    radeon: don't setup Xv on rn50
    
    It has no overlay or 3D engine.
    
    fixes fdo bug 27528

commit 3c6c6afcbfc6f2c582e13a7c37fe2014b0875b22
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 5 12:12:56 2010 -0400

    change version post release

commit fb7911912e60b2cdbc2152b96847775b767ca3ef
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 5 11:59:24 2010 -0400

    bump version for release

commit 476a1c6e8b42807b897b8c6f8550ec42b2d5c10e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 1 12:42:56 2010 -0400

    radeon: fix possible gpio i2c table overrun
    
    GPIO_I2C_INFO does not always have ATOM_MAX_SUPPORTED_DEVICE
    entries.  Should fix Novell bug 589022.

commit 6baa96c44ca93b88acf5233335cee233e59d5af4
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Apr 1 11:24:32 2010 +1000

    r600/exa: further cleanup, use the object struct in the accel state.
    
    This cleans up the accel state objects as well.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 87f49a24019967552c5478d6af89ba438b4261c8
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Apr 1 10:52:58 2010 +1000

    r600: cleanup wasteful variables.
    
    Just assign directly to the structs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 478319e55d52fce241d040912fea952071e3b742
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Apr 1 10:45:52 2010 +1000

    r600: reduce function call overhead.
    
    Create a small accel object that can be used to reduce the amount
    of parameters passed to SetAccelState. This can be cleaned up a lot more.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit bc93395b3eb5e3511c1b62af90693269f4fa6e13
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 31 22:30:24 2010 -0400

    r6xx+ EXA: fix swapped domains in kms UTS
    
    Noticed by Dave.
    
    Should fix fdo bug 27284

commit 3a33b1a92c328b690bdc1aafa0011e4326109815
Author: Owain G. Ainsworth <zerooa@googlemail.com>
Date:   Tue Mar 30 17:14:02 2010 +0100

    Add support for MacModel autodetection on OpenBSD.
    
    This allows radeon-equipped macs to work without an xorg.conf on openbsd.
    Patch originally written by Mark Kettenis (kettenis@openbsd.org)

commit c7eeda8c3f3514ba95ebf2893fbe124bf526b3df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 26 01:38:36 2010 -0400

    radeon: add support eDP connectors with and LCD device tag
    
    should fix fdo bug 27322

commit ff323e11485fa5030ac278c836bf80a535c22249
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 26 01:24:16 2010 -0400

    radeon: fix name string for eDP

commit 53ac06161eb2b8cffb1b88e24a9a21cfd12e5883
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 23 13:34:38 2010 -0400

    r6xx+ EXA/Xv: add a R600SetAccelState function
    
    This moves CS bo checking and alignment checks into
    a central location.  It also cleans up the code.

commit 7a044472dfea7cf05ba4c2b87be30e94e2ae0b62
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 23 01:27:22 2010 -0400

    r6xx+ EXA: always use a temp surface for overlapping copies
    
    The scanline based fallback code was complex and added a lot of
    overhead. It also didn't work with kms.

commit d33bddaedae81126ab7f0023af1c6443bb0b4c4f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 22 18:15:23 2010 -0400

    r6xx+ EXA: always use the accel_state state in DoPrepareCopy

commit dda3f5a99e7a2dc5d57860f4d07df3498e1e21df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 22 18:05:36 2010 -0400

    r6xx EXA/Xv: track src/dst domains
    
    Much of the code is shared, so track the src/dst
    domains so we make sure the uses consistent domains
    for each bo.

commit 5c256808cb5fea955eea96ffe9196473715156aa
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 17 23:47:50 2010 -0400

    XAA: disable render accel
    
    It's been reported broken for a while.  Should fix
    fdo bug 27151, others.

commit a0683be5cc082bdbdd3bc4e9b52f39f423650946
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Mar 18 12:36:25 2010 +1000

    radeon: avoid using DRI1 init path on DRI2 driver.
    
    I was playing with multi-seat and found this code, fixed
    it up to be sane and more DRI2 like.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 080a5414593e9b59ed923f26aa6057747b0c868f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 16 12:33:39 2010 -0400

    kms: fix ums naming compat for DisplayPort

commit 819b4015349b5d8c5ffa5f979097599774fce5bb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 15 13:47:29 2010 -0400

    dump version for rc release

commit d3482a947e3731be4ed0b00b4e3079470700dc4c
Author: Michael Cree <mcree@orcon.net.nz>
Date:   Fri Mar 12 22:23:31 2010 +1300

    Fix some word accesses in AtomBios to work on all architectures.
    
    The UINT16LE_TO_CPU(), etc., macros are used in the AtomBios code to
    fix up endian issues but they do not address bad alignment or assist
    architectures that cannot perform hardware byte or word accesses.
    This patch inserts use of the ldw_u(), etc., interface of the Xserver
    into certain AtomBios accesses to address alignment issues.
    
    This resolves Debian bug 572311, namely that the driver when compiled
    for generic Alpha architecture (i.e. doesn't use the byte-word extension)
    resulted in no display output on certain Radeon cards.
    
    Signed-off-by: Michael Cree <mcree@orcon.net.nz>

commit 488c9fd8300505cc6c0c2f8f0f00849f27cc5d63
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 15 12:25:57 2010 -0400

    r6xx/r7xx: fix domain handling in accel code
    
    Noticed by Pauli and Michel on IRC.
    
    Improves GetImage performace by a factor of ~10.

commit 2ace2591d92fb6d3ce7a6453edb04b36a6c49a32
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 15 12:03:58 2010 -0400

    radeon: remove some leftover debugging output

commit 67e81c8f17ddde6eba633d2a5aef528e1d598d89
Author: Andrzej Hajda <andrzej.hajda@wp.pl>
Date:   Wed Mar 10 18:19:35 2010 -0500

    radeon: add support for pal on legacy IGP chips
    
    Based on my initial non-working patch.
    
    Fixes some element of fdo bug 12007

commit 3a44f1cb0d2bb748692b1024003de8ee88ca77a5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 9 09:44:01 2010 -0500

    atom: i2c gpio fixes
    
    Basically a port of my kms patch. This allows us
    to remove some quirks.

commit d85cb40f516c67305e818302bec7ee817df4144c
Author: Matt Turner <mattst88@gmail.com>
Date:   Sun Mar 7 14:24:35 2010 -0500

    Don't check for Xinerama.
    
    It doesn't seem to be used anywhere, so don't require it.
    
    CC: Jerome Glisse <jglisse@redhat.com>
    CC: Alex Deucher <alexdeucher@gmail.com>
    CC: Dave Airlie <airlied@redhat.com>
    Signed-off-by: Matt Turner <mattst88@gmail.com>

commit e7b41f8cb082ed462d29bf3fc440072424cbd852
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 5 19:16:11 2010 -0500

    radeon: disable frac fb div with new pll code
    
    fixes fdo bug 26897

commit 14aff767490c253cbcdd411f812e50b91673119e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 3 13:31:19 2010 -0500

    radeon: add new RS880 pci id

commit e6dc886634b38e4a36af7b5f0b23299d5acd7244
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Mar 2 10:25:15 2010 +1000

    radeon: bump configure.ac

commit 4975658f05c387b39b3e96a292a7683f17645c2c
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Feb 27 16:47:19 2010 +1000

    pciids: hopefully fix HP

commit e76b90b399c3cc0f0998c0209300c46f97505498
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 26 15:01:28 2010 -0500

    rv740: disable dfs workaround for drm 1.32+
    
    rv740 pipe setup was fixed in 2.6.33

commit 2de0af5f5b806f9dbfdb1e9b6a5cf96d9433961d
Author: Matt Turner <mattst88@gmail.com>
Date:   Wed Feb 24 22:46:28 2010 -0500

    Use RADEON_ALIGN instead of open coding it.
    
    Also fix some RADEON_ALIGN(x, 63), which would return incorrect results
    for odd x. Though this shouldn't happen, it's still not right. You
    wouldn't ever write (x + 62) & ~62 which is clearly wrong (and what it
    expands to).
    
    CC: Jerome Glisse <jglisse@redhat.com>
    CC: Alex Deucher <alexdeucher@gmail.com>
    CC: Dave Airlie <airlied@redhat.com>
    Signed-off-by: Matt Turner <mattst88@gmail.com>

commit c7e81d2f3a372e0d5f751dd0c5091aec2b56d936
Author: Matt Turner <mattst88@gmail.com>
Date:   Wed Feb 24 22:46:27 2010 -0500

    Use/define RADEON_GPU_PAGE_SIZE instead of sprinkling 4096 everywhere.
    
    Also, define RADEON_BUFFER_ALIGN in terms of it, and replace some
    RADEON_ALIGN(x, RADEON_BUFFER_ALIGN) with RADEON_ALIGN(x,
    RADEON_GPU_PAGE_SIZE) since this is really what was intended.
    
    CC: Jerome Glisse <jglisse@redhat.com>
    CC: Alex Deucher <alexdeucher@gmail.com>
    CC: Dave Airlie <airlied@redhat.com>
    Signed-off-by: Matt Turner <mattst88@gmail.com>

commit c0a5c9403dff254e1669df606a4193794270aeff
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Feb 26 19:17:28 2010 +1000

    pci: add HP vendor id

commit 3970cc5563900f08ba5236b23f765c926616c345
Author: Cooper Yuan <cooperyuan@gmail.com>
Date:   Fri Feb 26 16:14:12 2010 +0800

    add more triple-head server ID

commit b499eee7506f7478649e0000e9f8fcd00ac9d88d
Author: James Le Cuirot <chewi@aura-online.co.uk>
Date:   Thu Feb 25 21:13:18 2010 -0500

    clean up kms zaphod handling
    
    Taken from James patch on bug 24523
    
    agd5f: adapt to the current code

commit 433c8617341f5768255826435a2b09afba684f02
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 25 21:03:13 2010 -0500

    update ZaphodHeads option
    
    Now that the screen section mapping is fixed,
    Make the option per-instance and allow multiple
    outputs to be specified; e.g., DVI-0 and HDMI-0
    associated with instance 0 and LVDS and VGA-0
    associated with instance 1.

commit f3e20b01c77f02bdf3483ceee27a1f00d240c33d
Author: James Le Cuirot <chewi@aura-online.co.uk>
Date:   Thu Feb 25 19:10:19 2010 -0500

    zaphod: Fix entity instance assignment.
    
    Each screen needs to have a pointer back to its
    device's entity instance, Currently Screen1 is
    pointing to Screen0's instance so when it comes
    to match up the screen sections with the detected
    screens, Screen0 gets chosen in both cases.
    
    See bug 24523

commit 1b7e9a2e50f77819b3aff4e37ba39eaec69ff932
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 23 11:39:55 2010 -0500

    radeon: fixes for zaphodheads option
    
    Needed for systems with more than two outputs.
    Both KMS and non-KMS zaphod work on systems with
    more than two outputs now.

commit bd83e5f1c75b8c00b43846c7225568917fc9a8ce
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Feb 23 19:27:24 2010 +1000

    zaphod: hopefully fix kms + zaphod

commit 0c3468d812e3790ce03d9e76779ae81e7b7b82d5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 22 17:34:51 2010 -0500

    AVIVO: set frac fb divider pll flag
    
    matches previous behavior

commit 212e152536c4325e6799018891d9aee132681f48
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 22 17:27:24 2010 -0500

    radeon: update new pll algo
    
    - add support for pre-avivo chips
    - add support for fixed post/ref dividers
    - add support for non-fractional fb dividers
    
    By default avivo chips use the new algo and
    pre-avivo chips use the old algo.  Use the
    "NewPLL" option to toggle between them (set to
    TRUE for the new algo, FALSE for the old).

commit e68d3a3890fc81c51f2006b5548da1e8756ad2fd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 18 14:02:00 2010 -0500

    RS600: add connector quirk
    
    System lists DVI port as HDMI.
    
    fixes fdo bug 26605

commit a3b730eceb522c7ac1ef3dd6f6c7d773118d03f7
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Thu Feb 18 14:13:48 2010 +0100

    r6xx/kms: when reseting BO force default state emission
    
    In KMS world each cs need to fully initialize the 3D engine
    when we were erasing cs in IBDiscard for r6xx we weren't
    forcing reemission of default state. This patch force this
    emission. Fix :
    
    http://bugs.freedesktop.org/show_bug.cgi?id=26603
    http://bugzilla.kernel.org/show_bug.cgi?id=15284

commit 579cdcf9b4e38c791a497b747a055fc0a07d8dd6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 17 12:22:48 2010 -0500

    radeon: add ZaphodHeads option
    
    Allows users that want to use zaphod mode to select
    which xrandr outputs are assigned to which head.  E.g.,
    
    Option "ZaphodHeads" "LVDS,VGA-0"
    will assign LVDS to the first zaphod driver instance
    and VGA-0 to the second instance.

commit 47136fa347d1756523239746b4c74cd5278a1118
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon Feb 15 16:44:39 2010 +0100

    EXA: Fix order of coordinates passed to radeon_pick_best_crtc().
    
    The wrong order prevented tearing avoidance from working with EXA/DRI2.

commit 6e95905f759b844373be62ec513c78153ed00222
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon Feb 15 17:02:16 2010 +0100

    Allocate BOs for 'video offscreen surfaces' and 'TV-in' in VRAM.
    
    I think these can only really work in VRAM, though right now there's probably
    nothing to prevent them from getting evicted...

commit 78e7047c5235b09858b66dd3688d39aaa27d7589
Author: Pauli Nieminen <suokkos@gmail.com>
Date:   Mon Feb 15 13:40:37 2010 +0200

    Allocate Xv buffers to GTT.
    
    KMS doesn't have acceleration for upload to vram. memcpy/memmove to VRAM
    directly is very slow (40M/s in benchmark) which causes visible problems
    to video.
    
    Allocating video buffer in GTT will give good performance (350-450M/s)
    for memmove operation. This is nice performance boost for Xv under KMS.
    
    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>

commit 3ec25e59854b6b03ad763bc374d3475a50f562d8
Author: Pauli Nieminen <suokkos@gmail.com>
Date:   Mon Feb 15 13:45:28 2010 +0200

    Use memcpy instead of memove for RADEONSwapCopy.
    
    memcpy has about 25% better performance than memmove when
    destination is GTT (wc caching). Changing memmove to memcpy
    in SwapCopy will reduce CPU time spent moving data between
    host and GPU.
    
    memcpy will specially help Xv when playing high resolution
    videos.
    
    The swap path doesn't support overlapping memory copies either
    so extra safety is not worth the performance hit in commonly
    used code path.
    
    Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
    
    [ Michel Dänzer: Fixed up whitespace ]

commit 221ef11b31756deb7134801730e76c040e841f5c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 12 14:15:10 2010 -0500

    r6xx/r7xx: implement EXA vline support

commit 8ad4025affe1fb2f417e3a3031d74f83be5df253
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 12 11:34:47 2010 -0500

    radeon: consolidate crtc selector for vline wait
    
    Use the Xv version as it takes into account the area
    covered by the op rather than just picking the largest
    crtc area.

commit 4f9d1714a7382594b834d446bbe502663f6a2778
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 5 12:27:51 2010 -0500

    r500: fix relocs for Xv planar video
    
    fixes fdo bug 26445

commit b7ca1ab11ac0e4e4be5a1e7789ae8633b460a2d4
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Feb 5 13:37:20 2010 +1000

    rs400/rs480: mc idle bit is bit 2 like original radeon
    
    backport from a KMS fix, the rs400/480 mc idle is bit 2 not bit 4.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 97c387e269672b146a95b45fbef5c8c18e473e36
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Fri Jan 29 16:08:17 2010 -0500

    config: remove dead LINUXDOC macro usage
    
    This module does not generate LINUXDOC documentation.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 05fa2dee0c63d56fd523ee1ebab479bcb9f5e89d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 4 13:13:58 2010 -0500

    evergreen: minor clean up in transmitter setup
    
    both link and encoder must be set for linkb

commit 76eea5e02776f7beeb8f4491a374bd36792eda92
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 4 10:52:14 2010 -0500

    r600: reduce number of cache flushes
    
    We don't need to flush so often. Next step
    would be to move the flushing to the drm and only
    flush after each command buffer rather than each
    draw.

commit 8d63d70f7ebaf9d250f0449d3720ef47516c05df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 3 15:22:22 2010 -0500

    evergreen: use external clock source for DP PHY
    
    DP CRTC clock always comes from DCPLL.  This frees
    up PPll1/2 for non-DP-mode PHYs and CRTCs

commit ecbc26431914216a8b207e81451282ea07c8b92f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 3 03:52:07 2010 -0500

    evergreen: blank/unblank DP in dpms calls

commit 710a2fd07235349f084ec40626cc28fbae523d27
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 3 03:00:24 2010 -0500

    evergreen: pll fixes
    
    SetPixelClock needs to be called for DP outputs with a
    valid PLL.

commit 9ab2377ee23c5dc360ba135a77aa6b181a1862e6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 2 15:15:36 2010 -0500

    evergreen: DP requires coherent mode

commit 634da80056525a48ec17ffb81e2fb59b168bea9e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 2 15:09:57 2010 -0500

    evergreen: fix units on frac_fb_div

commit a887818f491f6c7315c56c4e0d0b702c4c6aa4ac
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 1 11:01:47 2010 -0500

    evergreen: add pci ids

commit cb2772b69480268c059766c4f6b209ce590ede0e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 29 12:59:46 2010 -0500

    evergreen: add atombios crtc/pll functions

commit bd8e04cb7b39f38b6958273582a9b324a9f0759a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 1 10:07:43 2010 -0500

    evergreen: add atom support for digital outputs
    
    analog is already supported by the existing code.

commit 8ad40d3c32ad5b91725bd37fcade6bed504df421
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 26 15:39:44 2010 -0500

    evergreen: add crtc set base/format support

commit 2c9cf0a07ff9e5a4989861bc2fdfd71d841013a8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 10 15:29:14 2009 -0500

    evergreen: add lut support

commit 65246545c3dd9bfef73e8a0f200bd5909b89a167
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 26 12:10:02 2010 -0500

    evergreen: add hw cursor support

commit c05cad56b69d239fa2e69905d15f4f08b9db4c55
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 28 01:28:52 2010 -0500

    evergreen: add base asic support

commit ed63e1b1abe8810b5da6b4140892337eef08a9ea
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 29 12:42:33 2010 -0500

    evergreen: add register and utility defines

commit 019260ec4a9f9fbf2ac63a2ca3314aa308471f7e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 10 14:57:39 2009 -0500

    evergreen: add chip enums

commit e86ae564d8b94d2cc8d3c7cceb452a197ab6387a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 1 12:03:23 2010 -0500

    atom: update to the latest upstream atombios.h changes

commit 77b13a02c70842a58e0590d0243f0ae016c5a640
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 1 12:16:20 2010 -0500

    r500: fix CS section size missmatch in Xv code

commit 5c11264517d1b9808415d47e9dedc345610f0f86
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jan 29 15:10:33 2010 +1000

    radeon: further digital encoder cleanups.
    
    this just cleans up a few more bits of the digital encoder setup.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 872a11fa9efb0b76cef83089ea1bb80792b94930
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 28 01:19:23 2010 -0500

    radeon: clean up dig encoder handling
    
    - switch the var name to dig_encoder
    - quiet coherent messages
    - clean up dig encoder selection
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit c1a73ff51b371ecc6f57a81a33f644344b4e3f70
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 28 12:58:29 2010 +1000

    radeon: add support for picking the digitial encoder
    
    Testing on a W500 laptop found the LVDS + DisplayPort would conflict
    over the choice of digital encoder, and only one would work.
    
    This patch fixes the DCE3 case where LVTMA requires the second digital
    encoder and lets DP/DVI use the first in most cases.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 95b56275d80dcee48a7927df124602c34cd72235
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 27 15:48:25 2010 -0500

    avivo: add some hotplug detect regs

commit 5a4327f7784361933484895c9af751ccfa242d48
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 26 16:06:00 2010 -0500

    radeon: minor pll updates
    
    add new fixed post divider option

commit cbd642af7c76469d701471daea0c8d167567ccf8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 26 12:03:45 2010 -0500

    radeon: use mmio bar size rather than hardcoded number for register ops
    
    newer asics have larger mmio bars

commit e5933fd74923a07aa401bdb4ecd8d1d641148440
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 25 13:18:47 2010 -0500

    KMS: fix no accel option
    
    NO_ACCEL wasn't handled correctly with KMS.
    
    fixes fdo bug 26198

commit ba99a82ced1a6101365876723d22bcfec4607537
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jan 25 13:50:13 2010 +1000

    radeon/kms: only enable EXA pixmaps under kms if we support render accel
    
    I've seen RN50s with 64MB of RAM that are slow as molasses, this
    should fix them.
    
    RH bug 556400
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit de40d36264364434541377c7f65f3836dc514fc0
Author: Kusanagi Kouichi <slash@ac.auone-net.jp>
Date:   Fri Jan 22 17:18:51 2010 +0900

    Remove unnecessary checks.
    
    Signed-off-by: Kusanagi Kouichi <slash@ac.auone-net.jp>

commit 30a19b75cc82b8e04c45e6684b84f9a4ccc0505b
Author: Alan Coopersmith <alan.coopersmith@sun.com>
Date:   Tue Jan 19 14:54:04 2010 -0800

    Fix configure with --disable-dri
    
    AM_CONDITIONAL calls can't be made inside if statements, since
    automake won't know what to do when the if isn't true.
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@sun.com>

commit bd011784c0609f1fd03dcb784744c8f5cdef33da
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 19 11:59:38 2010 -0500

    ATOM: Upstream parser updates

commit 95d63e408cc88b6934bec84a0b1ef94dfe8bee7b
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Mon Jan 18 10:46:50 2010 +0100

    r6xx/r7xx: emit relocation for FRAG & TILE buffer
    
    FRAG & TILE buffer are unused but still they need
    to be associated with a valid relocation so that
    userspace can't try to abuse them to overwritte
    GART and then try to write anywhere in system
    memory.

commit bbaf71fb46e3e0acdadcb91e9b1c73396bd9aa8e
Author: Alan Coopersmith <alan.coopersmith@sun.com>
Date:   Fri Jan 15 15:09:27 2010 -0800

    Update Sun license notices to current X.Org standard form
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@sun.com>

commit 3d158716a60d5a113a541ea2f680b81a1be41ad2
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jan 14 11:21:33 2010 +1000

    displayport: fix DDC on DVI->DP convertors.
    
    Seems we have to not do auxch DDC if we aren't talking to a DP
    sink.

commit 6a363f68415d37c302151581f2a86855dba39b67
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 11 15:13:45 2010 -0500

    rv100: fix typo in fix for bug 25992
    
    Noticed by Maarten Maathuis.

commit 7b01e1ee29f681bf1735ecded6445d12beeb52d8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 11 12:40:06 2010 -0500

    rv100: reject modes >135 Mhz with DVI
    
    Due to heat issues. fixes bug 25992
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 74da9a66a420a40bb5d562f07e97ce6ac2eb010f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 8 16:51:43 2010 -0500

    radeon/kms: add new strings for eDP and TV

commit 61977f61f516b54d1fd9df34d0f0892fbf5227d7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 7 02:15:31 2010 -0500

    radeon: fallback to i2c for edid if aux fails
    
    In case of a DP->DVI adapter for example.

commit 958d073869404f60e56dc0cc70b3e7de85904694
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 7 02:12:00 2010 -0500

    radeon: add initial support for eDP (embedded DisplayPort)
    
    Should fix fdo bug 25931

commit 944ae73f7cd5f9a1622b38e06a58565812cb102f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 7 01:52:35 2010 -0500

    radeon: updated ObjectID.h

commit 48aa5064aff4b9adf768e480df2312d4375e9c40
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 4 11:05:44 2010 -0500

    radeon: fix LVDS power sequence on Mac cards
    
    Noticed by John R. Dunning.  Fix taken from radeonfb.
    
    I'm not sure if this sequence would be useful on any PC
    laptops or not so make it mac specific for now.

commit 36bd69affc996c92c40b7360a7fbaa1a3a46abfd
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Dec 16 15:52:18 2009 -0500

    configure.ac: remove unused sdkdir=$(pkg-config...) statement
    
    The sdkdir variable isn't use, so remove the statement.
    
    Acked-by: Dan Nicholson <dbn.lists@gmail.com>
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 9d0f3af7278dc939fd4e6f3ea69d9f488a9fbed7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Dec 22 08:45:27 2009 -0500

    radeon: add cvt timing if we only have panel w/h
    
    fixes mac laptops without an edid
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 6e1f5553c6d7e3b5d089af2e3d587efe95936855
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 21 17:32:40 2009 -0500

    ATOM: add new power table defs

commit 4b05c47ac657f9a93d76221269761ed64c81f716
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Dec 17 14:30:23 2009 +1000

    radeon: use new libdrm api

commit 1d620800bd79290967fa487decf798e318c45f25
Author: Ingmar Vanhassel <ingmar@exherbo.org>
Date:   Sun Dec 20 21:04:56 2009 +0100

    Replace shave with automake silent-rules
    
    Which are enabled by default in Xorg's util-macros 1.3 if automake-1.11
    is used.
    
    Signed-off-by: Ingmar Vanhassel <ingmar@exherbo.org>

commit 52f6a2ff682ad1f8e26ef1cd7d380493dcd57752
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Dec 16 15:29:53 2009 -0500

    src/Makefile.am: missing 3 header files in tarball
    
    radeon_dummy_bufmgr.h
    radeon_vbo.h
    simple_list.h
    Replace leading spaces with tab for radeon_atomwrapper.h
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 3a30210d50b27f8772fc5045133940246764fce9
Author: Matthias Hopf <mhopf@suse.de>
Date:   Tue Dec 15 10:53:48 2009 -0500

    fix 200M freezes on VT switch if CRTC is disabled
    
    It appears that RS4xx chips need to have the crtc
    enabled when the timing is programmed.
    
    agd5f: minor fixes/cleanup of the original patch

commit 299d395bd3f294239dee58ab7d607d7d2c657f61
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sun Dec 13 14:51:17 2009 -0800

    dri: be more useful if disabling DRI due to KMS/UMS mismatch.
    
    It's only fair.
    
    Compile-tested only.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 0e5c9d87b5d7e0751df71cc8958ca5ccaed25104
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 10 14:27:43 2009 -0500

    ATOM: split set base/format into separate functions
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 46630da5fd6f45bb8ea150b870162997480d69c7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 9 12:55:25 2009 -0500

    AVIVO: add new PLL code
    
    This should hopefully help the problems with flickering
    and blinking monitors reported on some systems.  If there
    are problems, the old PLL algorithm can be selected with:
    Option "NewPLL" "FALSE"
    in the device section of your X config.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit f082b1693d6f7f763ccf5a8436a89890ca2c6129
Author: Matthijs Kooijman <matthijs@stdin.nl>
Date:   Thu Dec 3 12:10:14 2009 -0500

    radeon: fix crtc2 dpms
    
    noticed by Matthijs Kooijman on fdo bug 22140

commit 3a96fbf3b84522cf1ba1b176e82b662222331c14
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 2 18:02:33 2009 -0500

    radeon: only read RADEON_PPLL_REF_DIV for ref div on pre-avivo
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit f03450796d2e9247a1228c4e2abb1dfad7aecddf
Author: Kusanagi Kouichi <slash@ac.auone-net.jp>
Date:   Wed Dec 2 01:36:37 2009 -0500

    radeon: Lift hardcoded limit from RADEONQueryImageAttributes
    
    The dimension of an XvImage is limited to 2048 x 2048 even if an adaptor
    supports larger image.
    XvCreateImage and XvShmCreateImage lower the width or height of an image.
    XvPutImage and XvShmPutImage return BadValue.
    The cause is that 2048 is hardcoded in RADEONQueryImageAttributes.

commit efbc2c80ab02879edf3b7b3d65b16c45ddce5017
Merge: 88a50a3 a612813
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 2 14:30:36 2009 +1000

    Merge remote branch 'origin/displayport'

commit 88a50a30df11a06263209340a42251851f8e2334
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 30 15:32:12 2009 +1000

    r600: fix multi-operation in single batch support.
    
    This ports the mesa DMA buffer handling with the 3 lists,
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b2597deea3a3953ff50d54ff37e3c043eac409f4
Author: Kusanagi Kouichi <slash@ac.auone-net.jp>
Date:   Mon Nov 30 11:10:50 2009 -0500

    R600: fix some warnings

commit 4d90dc3cb248e9d61c0c490bba80f6727fafd318
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 30 11:05:38 2009 -0500

    atom: pull misc mode info for lvds panel mode from bios tables
    
    sync polarity, etc.  This will likely fix LVDS problems
    on some laptops.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a612813c5f329f00a9271e7bb69abd2630a49403
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Nov 27 17:20:30 2009 -0500

    radeon: clean up DP code
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit a8dbf7c23481501987971a9c0b6cb0760f86127f
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 27 10:16:00 2009 +1000

    r600/accel: cleanup and merge a lot of the accel functions
    
    All of the drawing ops were the exact same modulo the vtx size,
    this along with the vertex buffer wrapping code could all be consolidated
    into a smaller set of functions.
    
    This also adds 2 VBO which we switch between, and merges a #define to
    enable the multiple operations in one CS under KMS mode.
    
    Multi-operation still isn't working though.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 971e463b2cfdc1ba1c78a24fb439d33dd9155dfc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 26 12:45:15 2009 -0500

    dce3: CV1/TV1OutputControl tables didn't go away until dce3.2
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 95385f0906f371a1ed6e60eb3e597e699c7a3222
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Thu Nov 26 12:21:21 2009 +0100

    kms: Fix resizing when acceleration is disabled
    
    When acceleration is disabled we need to reallocate
    a new shadow framebuffer and we should also avoid
    calling any EXA function as EXA is disabled in such
    case.

commit 8195385d3cedf70d89ca576371af6bca5045bbd2
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 26 15:43:54 2009 +1000

    dce3: no CV1 or TV1 Output Control tables anymore.
    
    According to the DCE3 docs we should only use DAC1/2 not
    CV1/TV OutputControl, also my rv730 bios doesn't have any
    CV1/TV tables.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 381b14d5422131ea8ff942ab06a328f6beca0d3f
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 26 15:28:15 2009 +1000

    atombios: CV mode retrival was broken.
    
    a) crev and frev are reversed
    b) my rv730 bios only has one mode in it, so
       bounds check the table size.

commit a67a13c315a9235be052662e2a3270686cccc0f0
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 26 13:41:36 2009 +1000

    radeon: fix typo in unused as of yet CV code

commit cd9bfb5892eebef6dff14ac414dff074db5ddee4
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 26 06:43:13 2009 +1000

    fixes displayport for me here

commit 256de862a3c017dcb4ed0d8689294a552eda0d18
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 26 06:35:39 2009 +1000

    displayport: cleanup call dp from dpms on instead.

commit 05551295c5e0946745163f17e5c1d3d41b94bcbf
Author: Kristian Høgsberg <krh@bitplanet.net>
Date:   Tue Nov 24 21:09:03 2009 -0500

    dri2: Use drmGetDeviceNameFromFd() instead of open coded loop.

commit 0061c4db1d3aecdca13efb5133ab8784dc37df95
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 15:39:10 2009 +1000

    Revert "r600: enable multiple operations in one CS"
    
    turn this off for now, on my rv635 desktop, I started getting blanks
    in places in firefox and the odd bit of font corruption, need to
    track that down.
    
    This reverts commit 985a065518b1d33599de33f7fe082d3302db58a6.

commit 8b28534bcf877557a5681fa3b4f107c74615d3de
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 13:24:44 2009 +1000

    radeon/exa: change option to determine exa pixmap usage.
    
    This moves to a boolean instead of using VRAM sizing.
    
    as per Michel's suggestions on list.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit f0acb16fa19844453adc6db3399977fba7c8a0db
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 12:04:47 2009 +1000

    r600/xv: drop inited 3d false in xv code

commit 985a065518b1d33599de33f7fe082d3302db58a6
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 11:54:08 2009 +1000

    r600: enable multiple operations in one CS
    
    This switches on multiple ops in a single CS under KMS/DRI2.
    
    It gets for on a Pentium D 3 + rv740 from 330,000 to 500,000
    with x11perf -aa10text.
    
    It also knocks a couple of seconds of gtkperf -a
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit af816ac752820255f245793b53a7cca5a4a49cd4
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 11:53:07 2009 +1000

    r600: fixup problems with EXA operation reset for multiple ops
    
    To put multiple ops into one CS, you can't just discard the whole
    IB. This add supports for reset the CS cdw to the correct place
    after an op discards.
    
    Still doesn't enable the final accel bits.

commit 3d8dcbc29323a3c644100bec13aa93f024653bd3
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 11:43:57 2009 +1000

    kms: flush cs on close screen.
    
    this is needed for server recycle.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 19f1a357944f9d8f4567a2691a68067ec033ccb7
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 11:41:52 2009 +1000

    radeon: fix check for no work in operation

commit 3a460a14b9603159f10d89da27b559c36a184e27
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 10:33:17 2009 +1000

    r600: refactor code to help future acceleration speedups.
    
    This changes the vertex buffer index to be an offset, and
    records the start of the vb for each operation and uses
    that to set the operations up.
    
    This still flushes after each operation to make sure we have
    no regressions in non-kms/kms cases.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 797a3f0c71c94477eec565ea2c95553c6f66d9fd
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 25 10:07:59 2009 +1000

    kms: allow prepare copy to fail without dying

commit ba76acc76e0d0a51a1c488e4d5494a71e155a05b
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 24 15:38:47 2009 +1000

    radeon/kms: drop special r600 indirect flush
    
    This just merges it with the main kms cs flush

commit 3c527d752d3cced219c6113acb932511b16e35fb
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 24 15:11:12 2009 +1000

    r600: enable mixed pixmaps

commit b9eb2380df5145c85b2ef694a04628c055c47429
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 23 12:12:02 2009 -0500

    DCE3.2: fix uniphy2 dvi issues
    
    In some cases the atom transmitter table sets the
    golden value of this reg differently which some monitors
    don't like.  I haven't had time to dig further, so this
    works around it for now.
    
    Fixes fdo bug 24313
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit d0dd5122d8d75b7c4a72df07dc7f562b2e75dd5e
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Mon Nov 23 09:25:05 2009 -0500

    Makefile.am: add ChangeLog and INSTALL on MAINTAINERCLEANFILES
    
    Now that the INSTALL file is generated.
    Allows running make maintainer-clean.

commit 3d7888aa0493f46d826f4d80dea36f1f642f3c6b
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 23 15:26:15 2009 +1000

    radeon: fix warning in printf

commit 3a1a8b7b73424a769baf917bba2223ea6515b596
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 23 15:07:10 2009 +1000

    radeon: surround mixed pixmaps usage with ifdef check for old servers

commit e20af9c94982ec6487dae42c141d33cf6a7a2eb4
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 20 12:15:02 2009 +1000

    radeon: avoid using hw pixmaps when we have little VRAM.
    
    This patch returns NULL for pixmap creation when we are using
    mixed pixmaps and the pixmap has a size.
    
    The size check is necessary for the front buffer.
    
    We add a flag to force pixmap creation for certain pixmaps
    that need to be hw, like the DRI2 and Xv ones.
    
    Idea from Michel and workarounds from Ben Skeggs.
    
    v2: add Option "EXALowVRAM" to allow configuring this, value in MBs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 543338842ba7fe7da4902947d386ea1cabd1cdf0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Nov 20 16:38:43 2009 -0500

    dp fix timing
    
    aux channel atom command table delay is 10 usec units
    this gets the link training working, but alas, no image.

commit dd3eab848cf352bb96c3d01fe6028d8a4a8e451e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Nov 20 01:06:49 2009 -0500

    r300: render target limit is 2560
    
    limit was increased to 4021 in r4xx.
    
    fixes fdo bug 25191.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit df35d40d4ec260cdab57a9b36e4e96b2a6c2a827
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 19 20:01:42 2009 -0500

    DP: hack that makes DP work.
    
    Something's wrong with the status check.

commit f42412ec4dbd21f562a7fe4239c0a1f17ef1b8f2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 19 19:40:54 2009 -0500

    wip

commit eb9bc133fc426e67b397e661bfd22bf62009d9d3
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 20 09:23:31 2009 +1000

    kms: recalculate the flush limits after screen resize.
    
    When we resize the front buffer we need to reduce the flush limits
    appropriately.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit f7f58ef4c042e492618665a6c5555e8e67387ab3
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 20 09:22:39 2009 +1000

    radeon: r100/r200 have a 2047 scissor limit
    
    We were overflowing this in my case with a 2704 width desktop,
    so videos were stopping around 700 bytes across the screen.
    
    can I haz shatter already?
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 54c09778d79de1516ee511d6d7d5b54dd4bf9130
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 19 13:32:30 2009 -0500

    DP wip
    
    - use coherent
    - fix up lane/clock numbers

commit 02d017a0552db2c8a48506c5b26c48a1a2ab75b6
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Oct 28 14:41:41 2009 -0400

    INSTALL, NEWS, README or AUTHORS files are missing/incorrect #24206
    
    Automake 'foreign' option is specified in configure.ac.
    Remove from Makefile.am

commit 396ee9b7e7e3b1dd64532270c4e32cdb33857596
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Oct 28 14:09:09 2009 -0400

    INSTALL, NEWS, README or AUTHORS files are missing/incorrect #24206
    
    Add missing INSTALL file. Use standard GNU file on building tarball
    README may have been updated
    Remove AUTHORS file as it is empty and no content available yet.
    Remove NEWS file as it is empty and no content available yet.

commit 1dcda0c4d5d506e18a7989ff05f2ad8569a73f23
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Mon Oct 26 12:54:21 2009 -0400

    Several driver modules do not have a ChangeLog target in Makefile.am #23814
    
    The git generated ChangeLog replaces the hand written one.
    Update configure.ac to xorg-macros level 1.3.
    Use XORG_DEFAULT_OPTIONS which replaces four XORG_* macros
    Update Makefile.am to add ChangeLog target if missing
    Remove ChangeLog from EXTRA_DIST or *CLEAN variables
    This is a pre-req for the INSTALL_CMD

commit 5b517bcc353e7111d2365a213505f27cfae30924
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Thu Oct 22 12:34:16 2009 -0400

    .gitignore: use common defaults with custom section # 24239
    
    Using common defaults will reduce errors and maintenance.
    Only the very small or inexistent custom section need periodic maintenance
    when the structure of the component changes. Do not edit defaults.

commit 605c869076985b69350c893cf2bbcc90de8dc6bf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 18 01:51:12 2009 -0500

    more dp cleanup
    
    - clean up handling of linkb, etc.
    - add support for ATOM_TRANSMITTER_ACTION_SETUP_VSEMPH
    to existing transmitter control function
    - fix lots of warnings

commit bce1911f66f446b793125ac8cd5463bf6292629e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 18 00:04:33 2009 -0500

    radeon: pull previous displayport work into master

commit 437113124bbd6fb166825169eabec4dfde900dd9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 17 14:16:22 2009 -0500

    radeon: deal with connectors sourced to the same encoder
    
    Some systems have multiple connectors connected to the
    same encoder; e.g., DVI and HDMI connected to the same
    encoder with the same ddc line.  Since we expose
    connectors as xrandr outputs, randr treats them separately
    which results in it trying to source the same encoder to
    different crtcs.  If we have an HDMI and DVI-D port on the
    same encoder, pick the one to be considered connected
    based on the edid (HDMI if edid indicates HDMI, DVI
    otherwise).  Also, don't turn off (dpms) encoders that are
    shared.
    
    Fixes fdo bug 21767.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 9b8605d4e2bf7703c7848f3e2022a8c7328a3acd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 17 11:45:09 2009 -0500

    radeon: fix potential memory leak in ddc code
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit ce8299962003de572122561a6f7f61eaccf633b2
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 17 15:23:30 2009 +1000

    kms: check for 0 mask for cloned outputs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 06d68f7fa3870f9601e837e1834d33e8395008b1
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 17 15:10:04 2009 +1000

    kms: add cloning support.
    
    We have to translate from the kernel encoder cloning to the randr
    connector cloning, we do this by constructing an encoder mask per output
    and an encoder cloning mask per output then comparing them.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 7587ce16ab0380337fe801f457c1d1d9b4141cc5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 16 19:16:03 2009 -0500

    r600: remove un-needed format conversions
    
    we do the normalization and xforms in the vertex
    shader.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit ba605b5c9ff48765f2b66960aa4cc81b6235d012
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 16 19:00:52 2009 -0500

    r600: fix num format in vtx fetch
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 0c4710c67a2fee2061fc3da43c9f908585693cfa
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 12 11:11:17 2009 -0500

    radeon: man page updates

commit 2af2744c80f3307e6d84edba9479be5bd36e1d03
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 11 13:12:24 2009 -0500

    radeon: fix support for external tmds on some legacy chips
    
    Should fix bug 11801.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit f17657fdc83d8f4c0386d2c7dade98de5b94acbe
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 9 16:59:11 2009 -0500

    r600/r700: typo, fix mask of DB_ALPHA_TO_MASK
    
    noticed by glisse.

commit 0ee7763fb33bf7fbc4ae1e8372cbc74578bfb720
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 9 15:09:34 2009 -0500

    IGP: some IGP chips report as AGP
    
    Set bus type appropriately.  fixes bug 25002
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit da1fcddaade58e371c7bee555ce32944c689f810
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 5 14:13:49 2009 -0500

    radeon: properly fix unused label warnings

commit 6e496f46fdc90d0a6cef41e9d45a6458aaed1eca
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 5 14:11:55 2009 -0500

    Revert "Fix warning about unused defined labels in radeon_exa_funcs.c."
    
    This reverts commit b6ac42cce2156880ac18b32e15acbff40b2f53e9.
    
    This patch is very broken.

commit b6ac42cce2156880ac18b32e15acbff40b2f53e9
Author: Tomáš Chvátal <scarabeus@gentoo.org>
Date:   Sat Oct 31 23:07:07 2009 +0100

    Fix warning about unused defined labels in radeon_exa_funcs.c.
    
    Signed-off-by: Tomáš Chvátal <scarabeus@gentoo.org>

commit 87d7235790866f9c19ef08972d5237f09d940cd9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 5 10:23:03 2009 -0500

    EXA: fallback if no pMaskPicture->pDrawable
    
    A solid or gradient mask could be used for blending
    the source picture onto the destination picture.
    
    Fixes fdo bug 24838
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 873897c54429e230a23011a9dd2f1069f4eb7752
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 5 00:51:11 2009 -0500

    DCE3+: call transmitter init on mode set
    
    Generally this is done at post, but might not always
    be done with softboot or for connectors on docking
    stations.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 3028374488cc0f34942ac372c8d05cf15898a613
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Nov 4 18:48:03 2009 -0500

    ATOM/DCE3+: fix up usPixelClock calculation for Transmitter tables
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 52973e8f2c4104de60d00c0e5c29a31f77bf3de7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Nov 1 13:58:03 2009 -0500

    radeon/atom: fix tv-out on r5xx
    
    fixes bug 24796
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 19b4f5f9b647cd470616b8ec1d34f1e4afa357ad
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Oct 27 11:55:20 2009 -0400

    ATOM: fix up DVO for DCE 3.x
    
    AdjustDisplayPll takes care of this for us.

commit 5a0019126a57138ee506d9a66738c9e8b75cbb96
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Oct 27 11:39:06 2009 -0400

    radeon: fix DVO on AVIVO chips
    
    DVO generally requires 2x ppll on AVIVO cards due to the
    way the tmds chip is wired up.  Because of this, disable
    cloning of DVO outputs.
    
    fixes fdo bug 21857.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 2a6eeec72d6bb04a32225883f431c1d2e8cff123
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Oct 27 11:18:44 2009 -0400

    atom: loosen pll min output limits
    
    Limiting the pll output range is a good thing generally as
    it limits the number of possible pll combinations for a given
    frequency presumably to the ones that work best on each card.
    That's why the limits are in the bios tables. However, certain
    duallink DVI monitors seem to like pll combinations that would
    be limited by this at least on pre-DCE 3.0 r6xx hardware.  This
    might need to be adjusted per family or per clock range in the
    future.
    
    Fixes fdo bug 24727.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit f0d9d80fee4176eaba9435a9539f29d0eefe2a87
Author: Luca Tettamanti <kronos.it@gmail.com>
Date:   Sat Oct 24 16:45:23 2009 -0400

    Disable color tiling on r600/r700
    
    Not supported yet.

commit ac499c3c0ea92f83ebd8127bb8cb5de625de6c94
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 23 10:48:55 2009 -0400

    radeon: clamp the internal FB map to the aperture size v2
    
    We don't use the invisible memory yet and on cards with
    large amounts of vram this can cause the top of GART
    calculation to overflow.
    
    Fixes bug fdo bug 24301:
    http://bugs.freedesktop.org/show_bug.cgi?id=24301
    
    v2: only clamp cards with more than 512 MB.  This seems
    to cause problems on some older cards due to the way the
    drm and ddx set up the internal memory map.

commit e57b54daf318ff59315a1c9ed21934f288c5c782
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Oct 22 16:07:58 2009 -0400

    R7xx: program additional CUR/GRPH regs for 40 bit addresses
    
    The *_HIGH regs are reversed. The secondary ones are in the
    primary block and vice versa.

commit 4cf06dfba617529291ce4b4c306c4fc1bba110ee
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Oct 22 02:08:45 2009 -0400

    ATOM: use indirect addressing for regs >= 0x10000

commit 66b194a78c470cb3978f310828dd96c3f3e96944
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 21 15:58:18 2009 -0400

    ATOM: fix up get clock info
    
    Newer revisions of the atom firmware table have
    changed.  This helps select better pll dividers
    in some cases.  Noticed by Mathias Froehlich.

commit bd89b7501f294ac645390ef144df569953c81dc4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Oct 18 16:21:36 2009 -0400

    radeon: fixup CustomEDID option
    
    - add support for analog option to force edid to analog
    mode
    - fix compilation on older xservers
    - updated man page

commit 255ac8d54e3dc12e579e05edb41b40946a00eab8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Oct 13 12:27:52 2009 -0400

    radeon: add XV_CRTC attribute for textured video
    
    This attribute allows the user to override which
    crtc is synced with when XV_VSYNC is enabled.  This
    is useful for clone modes where the user can might want
    to override the default.

commit 801d900add4731f3c424ebb780ad2dbd7a1c6a25
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 12 10:00:57 2009 -0400

    ATOM: minor cleanups to pll setup

commit f4407962cd7b272e0860319f11f6a6583ef226c2
Author: Csillag Kristof <csillag.kristof@united-consult.hu>
Date:   Fri Oct 9 18:00:09 2009 -0400

    Fix some issues with CustomEDID support
    
    - Fixes a memory allocation problem introduced with the previous
    version of the CustomEDID patch (now in GIT), and
     - Enhances the syntax of the CustomEDID option so that I can force
    digital output, even if the EDID was acquired over an analog link.

commit de55995e82c3875f70b6394fff440d695d062113
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 9 11:07:30 2009 -0400

    r600 EXA: fix up mask reg mixup

commit a168caf5349b757873ad89d977772feaa7fb6e58
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 9 10:32:26 2009 -0400

    r600 EXA: fix some compile warnings

commit fb8dda2928bd0def2b34c8c8e414129e650d6eb5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 9 10:30:21 2009 -0400

    r600 EXA: properly check planemask
    
    We only support per-component masks.

commit 1b25bad2d8ebe481ffb4b0fd3a85ab636bd4fec2
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Oct 9 20:09:52 2009 +1000

    Revert "radeon: clamp the internal FB map to the aperture size"
    
    This reverts commit 5f846360c46f5a989f5d0fde6d251cdbd61d4968.
    
    Numerous reports of system hangs since this, I'm guessing
    some sort of conflict with the drm memory setup. This code
    has always been fragile between kernel/userspace drivers.

commit a956d478043b44c49aed39c7aa3d576ef32cadc5
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Oct 9 20:08:31 2009 +1000

    Revert "kms: setup colormap and gamma correctly."
    
    This reverts commit 60d9685abddccec17c1a9a5ec48cbe9c92543e0f.
    
    which breaks colormap on 1.6 X server
    
    Conflicts:
    
    	src/drmmode_display.c

commit a493feb94c0d84aaf5bfd84c6940d7f03974dd86
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Oct 9 15:05:25 2009 +1000

    kms: don't use scratch pixmaps at all
    
    use our own wrapper to allocate a pixmap for wrapping a bo in.

commit 0caffbd6fd6b356b9b7d715c015285eaa91e3e36
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Oct 9 15:04:56 2009 +1000

    drmmode: reload cursors on modeset

commit 02e12ae6be7bc1976f63848fa2854d320d5ab36e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 7 19:56:58 2009 -0400

    ATOM: rework crtc modeset
    
    - clean up tv timing handling
    - unify SetCRTCTiming and SetCRTCDTDTiming interfaces

commit d499eeaf22f77a1294e99aa38a50aa6810bb684a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 7 17:43:11 2009 -0400

    ATOM: reorder crtc dpms based on bios recommendations

commit 4ccd2a21f9c50515b4246f35454f76ef49006c76
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 7 16:30:03 2009 -0400

    ATOM: add support for AdjustDisplayPll table
    
    Depending on the output and clock, this table will
    adjust the pixelclock accordingly.

commit 5f846360c46f5a989f5d0fde6d251cdbd61d4968
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 7 17:01:55 2009 -0400

    radeon: clamp the internal FB map to the aperture size
    
    We don't use the invisible memory yet and on cards with
    large amounts of vram this can cause the top of GART
    calculation to overflow.
    
    Fixes bug fdo bug 24301:
    http://bugs.freedesktop.org/show_bug.cgi?id=24301

commit 186bf719c394116341abff471fb4b4803650da9a
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Oct 7 17:23:36 2009 +1000

    radeon: fix rotation since mixed pixmaps.
    
    Passing null in here stops the mixed pixmap code doing it wrong,
    but I'm not 100% sure how it is meant to work, we have the
    same issue with the real front bo by the looks of it.

commit e08411af1aa8c7d4233ba593b84360397cdbb307
Author: Roel Kluin <roel.kluin@gmail.com>
Date:   Tue Oct 6 18:31:17 2009 -0400

    radeon: Fix duplicated bit settings
    
    [agd5f: adapted from kms patch]
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit e59ae08270711512e64b70f79b6476cc2c52d230
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Oct 6 00:13:09 2009 +0200

    Don't call radeon_cs_flush_indirect() without KMS.
    
    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=24316 .

commit 457646d734558672402b6bcd15cadb66741edbed
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Mon Oct 5 15:52:42 2009 +0200

    kms: assume accel is working is info ioctl return -EINVAL
    
    -EINVAL should only happen if the info ioctl doesn't support
    the get accel query. This patch assume that on such case accel
    is working.

commit 9d596562496863d65850306d2126d8df98464de4
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Oct 5 18:35:20 2009 +1000

    kms: only touch gamma stuff on 1.7
    
    for correct colormap operation you probably want 1.7

commit 876f43d4682df4d47d3e158f75e0ca6040f41c70
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 5 02:23:03 2009 -0400

    R1/2xx EXA: Minimise number of draw primitives used for Composite operations.

commit 86cafb8affea448bdf58300044e755201b822d2a
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Oct 5 14:17:25 2009 +1000

    kms: don't use scratch pixmaps when copying fbcon.
    
    scratch pixmaps seem to interact badly with mixed pixmaps, it appears
    some state may be getting left around in the privates somewhere, since
    scratch pixmap headers don't get destroyed.

commit f8471512ea9f1d38140dfe98a0f832e9f935f51b
Author: Csillag Kristof <csillag.kristof@united-consult.hu>
Date:   Sun Oct 4 18:18:56 2009 -0400

    radeon: add support for Custom EDID
    
    Allows you to specify an edid per output from a file
    to override what is detected by DDC.  Useful for
    problematic monitors or KVM switches that block
    DDC.  Specifying an EDID that is not compatible with
    your monitor could damage your monitor so use with
    caution.
    
    agd5f: cache the custom edid at startup so we don't
    have to read it from file every time the output is
    queried.

commit 60d9685abddccec17c1a9a5ec48cbe9c92543e0f
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Oct 5 12:41:30 2009 +1000

    kms: setup colormap and gamma correctly.
    
    We need to program the gamma at modeset. no need to use
    old cmap interface at all.

commit b0b10e548fd69b3ff67a0f9b71456b89c61cb4d6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Oct 4 17:07:32 2009 -0400

    R6/7xx EXA: Add support for BGRA picture formats.
    
    Also add mysteriously missing case statements for ABGR destination formats.

commit 8404c37b2ff95aba31db97676f106ec2f30fda7f
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Oct 4 18:18:51 2009 +1000

    radeon: fix build without kms

commit 9460ea864b12ec1fbd11c5d9a20bb5a4279d9d3d
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:33 2009 +0200

    Fix KMS on big endian machines.
    
    Requires at least xserver 1.7 to work properly.
    
    Also make sure the front buffer is and stays tiled if colour tiling is enabled.

commit aee6b6f2c120baf477b4845ddc1a94637c31db2f
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:33 2009 +0200

    EXA: Bail earlier from PrepareCopy hook on trivially unsupportable conditions.

commit 30031b169def5caadb394225919a6079a0957142
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:33 2009 +0200

    R3/5xx EXA: Add support for BGRA picture formats.
    
    Also add mysteriously missing case statements for ABGR destination formats.

commit 4b4ce36081ca151c24e028c54b59986f41731a73
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:32 2009 +0200

    R3/5xx EXA: Minimise number of draw primitives used for Composite operations.
    
    This should reduce the kernel CS checker overhead, if nothing else.
    
    I'll leave porting this to other chipset families to others who can test it.

commit eade1e5be159c9f2965d611925596d33cab11d6d
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:32 2009 +0200

    EXA: Don't always flush when switching between 2D/3D engines with KMS.
    
    This seems to work fine here now and help 2D performance quite a bit, let's see
    if it breaks anybody else's setup...

commit 926e414fc835ace141c066830d11d8ce32dbb06c
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:32 2009 +0200

    KMS: Double-buffer textured video source image upload.
    
    In order to avoid stalling on previous frame.
    
    OTOH without KMS we can't do this but have to wait for the previous frame to
    finish rendering.

commit 6a3b75fae4147244212298ff55c7ab36c3d80d30
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:31 2009 +0200

    KMS: Don't hide HW cursor when it's updated.
    
    Inspired by the intel driver; might avoid/reduce HW cursor flicker in some
    cases.

commit c4ba15b4871c70cced7f1761e24be692cdb28d2b
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Oct 3 16:33:31 2009 +0200

    Fix some compiler warnings.

commit cc45856a18dd3e6f7e44d9eb507b31419da70977
Author: Kenneth Graunke <kenny@whitecape.org>
Date:   Fri Oct 2 14:31:36 2009 -0400

    radeon: Remove gatos message from driver startup
    
    Remove a message on driver startup which directs people to the old GATOS
    website; said site contains highly out of date software which is no longer
    necessary.

commit d302481493ff61eb7f8648b7afe7407b6b653cf7
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Wed Sep 16 15:18:40 2009 +0200

    radeon/kms: fallback to shadowfb if kernel report acceleration is off
    
    This will fallback to shadowfb is GPU accel failed somewhere during
    KMS kernel init.

commit 7968e1fb89f6b59d1654df48249bf4b81990c008
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 25 19:05:38 2009 -0400

    radeon: fix segfault in MMIO path in RADEONInit3DEngine
    
    fixes fdo bug 24158.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 0380a9cf98d34e88dd81370ade5525680ec89c02
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 25 16:46:43 2009 -0400

    kms/r600: add support for vline relocs
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 3efecebb10de7f7bacf9f8c57ae20fd508097294
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 25 14:44:41 2009 -0400

    radeon: fix vline handling for kms
    
    drm crtc ids do not correspond to actual hw crtcs,
    as such the vline stuff was never enabled for Xv.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 9733dcde0a21b7503aa20254724f2910b541b990
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 26 06:15:58 2009 +1000

    r600: fix build

commit ff18595eace42ddfc931f4f948cb5adf59ebcf52
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 26 06:04:51 2009 +1000

    r600/xv: fix dst bo write domain

commit 718a611f3cc7f5eea95cd73a9dcc7913c922fcbc
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 26 06:03:51 2009 +1000

    radeon: fix zaphod

commit 86c367be517e992aabc1bcfea2a2dde1a1ae520c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 25 13:03:44 2009 -0400

    r600: fix bo accounting for Xv
    
    fixes Xv after changes in:
    8f80e37eed3ec028718b4e71bbb9b598847fd94e
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 8f80e37eed3ec028718b4e71bbb9b598847fd94e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 25 11:37:38 2009 +1000

    r600: space check wasn't correct.
    
    the r6xx space check code was incorrect for the DFS case, since
    the dst bo was in GTT but the hardcoded cp_start function
    assumed the bos were where it thought.
    
    Ripped out assumptions and replaced with code more like other radeons.

commit 90669f6cb5ada9067d6fccc7f54c69b367862f42
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Sep 24 10:40:40 2009 -0400

    radeon: remove old pre-randr rotation cruft
    
    leftover from the randr 1.2 conversion.
    
    Signed-off-by: Alex Deucher <alexdeucher@gmail.com>

commit 97a4e747bfac14f34646c55ddf639e8fe22f2f55
Author: Michael Olbrich <m.olbrich@pengutronix.de>
Date:   Sun Sep 20 14:19:41 2009 +0200

    use AC_CHECK_HEADER instead of AC_CHECK_FILE
    
    AC_CHECK_FILE is not possible when cross-compiling. Use AC_CHECK_HEADER /
    AC_PREPROC_IFELSE instead.
    
    [ Michel Dänzer: Shuffled things around slightly to make it work on my setup ]
    
    Signed-off-by: Michael Olbrich <m.olbrich@pengutronix.de>
    Signed-off-by: Michel Dänzer <daenzer@vmware.com>

commit 579070ed9f0218a975e840331b6fe9fa8fd05789
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Sep 19 19:15:14 2009 -0400

    kms: disable dga
    
    Can be dangerous with kms:
    http://lists.freedesktop.org/archives/xorg-devel/2009-September/002113.html

commit da7487f6ac7b32ed7866af53da2925aa52ed7aae
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Sep 19 13:08:02 2009 -0400

    kms: init dga using xf86DiDGAInit
    
    fixes cursor problems in games like UT2004 and Penumbra Overture
    
    see fdo bug 24034

commit 52279251fae9df99c569c16e2522bbd346d8ec38
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Sep 18 14:29:32 2009 +1000

    avivo: disable VGA rendering core when starting X.
    
    this thing can be rendering to VRAM when we don't expect it.
    turn it off.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 2c46bafcb77c4125a27c18ad6ca2f6de5f143a2d
Author: Pauli Nieminen <suokkos@gmail.com>
Date:   Thu Sep 17 15:13:51 2009 +0300

    Fix configuration to disable KMS if not finding libdrm_radeon.
    
    Most of KMS building was disabled if LIBDRM_RADEON was not detected. But at
    least configure was reporting KMS enabled even tough it was realy disabled.

commit ee9f6d802988a4d7f7985687036db854f4a14fe5
Author: Pauli Nieminen <suokkos@gmail.com>
Date:   Mon Sep 14 16:36:48 2009 +0300

    radeon: Add missing libdrm_radeon cflags to compiler paramaters.
    
    This fixes compilation if libdrm_radeon is installed to non-standard location like /opt.

commit ac853ca0a950d6147cd6a0b4a1b089f5d2f080ea
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 11 14:25:31 2009 -0400

    atom: fix typo in asus quirks
    
    Should be DVI-I, not DVI-D

commit a88f60e7b789cd23a79e6e18a7e3fa008d15aa77
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Sep 10 13:42:31 2009 -0400

    r600: add CS UTS and DFS hooks

commit 0bb0ff0e55aaf8e64017d204e376a14f0a7384a3
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Sep 10 11:48:00 2009 +1000

    r6xx: fix EXA crash with gtkperf -a
    
    unmapping was getting unbalanced.

commit 10a58d54857484b6e89763ecf463f54dc290c702
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Sep 9 14:24:49 2009 +1000

    kms: add property support.
    
    this adds support to the userspace DDX to get properties from the kernel
    and expose them over randr. Its most liberated from the Intel driver.

commit fad9ee6cdae5ae45e6406e3071a84276f1b59a85
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Sep 8 17:50:50 2009 -0400

    radeon: replace dga code with DiDGA

commit 651fe5a47435c6a5cc1cdfb33c5c6601d692adcb
Author: Adam Jackson <ajax@redhat.com>
Date:   Tue Sep 8 13:21:07 2009 +1000

    radeon: fix dri2 struct zeroing

commit 6990f2ac6478bf92929a4400ef84fb2142699204
Merge: 917f2d7 853f4c3
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Sep 8 11:26:32 2009 +1000

    Merge branch 'r6xx-cs'

commit 853f4c3d1ea8f975ab2855f18d3ae336a4095091
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Sep 8 11:25:39 2009 +1000

    r600: more alignment fixups + vb map/unmap
    
    I'm not so sure the vb map/unmap is a good idea, I think
    it pretty much locksteps the cpu/gpu, so we should really
    work out if we really need to flush this often, since
    mesa doesn't have to and we are just doing 3D ops.

commit 917f2d7cd1815279710939edc27133ca6609460f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Sep 6 10:53:29 2009 -0400

    RV280: add agp quirk
    
    deb bug 545040

commit 78fcbf577ad6eba6399cc39f74b7ce5f9c8e265e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Sep 3 14:55:05 2009 +0200

    EXA: Check for solid/gradient pictures the same way for all generations.
    
    In particular, also catch them for >= R300.

commit 794ae743c305331741e7cf45dd71c755fe325ed5
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Sep 2 09:19:17 2009 +0200

    EXA: Fix Composite restart dst/src switcheroo.
    
    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=22636 .
    
    Now, where's that brown paper bag? :}

commit c4ab50c5eafca3d04129a72453496eb8afb26b34
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Sep 1 13:43:00 2009 -0400

    radeon: add some notes about DVO setup

commit 22fbd6476f4b3513378e848affc4dd269e9d4498
Author: Dave Airlie <airlied@itt42.(none)>
Date:   Tue Sep 1 15:22:57 2009 +1000

    r100/r200: seriously WRAP is illegal for rectangular textures
    
    unless we scale all the bos up to POT

commit 8f4196e88855f10762254fca9e0a0988e7b5562f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 31 19:41:59 2009 -0400

    r6xx/r7xx: various CS fixes from Dave

commit a32384f9b9ed73c14484a380dfa14652ed478ad6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 31 13:26:05 2009 -0400

    r1xx: fix textured video
    
    Copy/paste bug from when kms support was added.

commit 3d6bf0f8cf128ee67d448491be44d345547b75c5
Author: Pauli Nieminen <suokkos@gmail.com>
Date:   Fri Aug 28 17:05:44 2009 +0300

    radeon: Fix DRI2BufferPtr to be DRI2Buffer2Ptr for xserver 1.6.
    
    Bump requirement for xserver in KMS mode to 1.6.2 for DRI2Buffer2Ptr.

commit 6521dbf3884185ca5692d35d879d251890cc4f08
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Sat Aug 29 12:11:03 2009 +0200

    r100/r200: fix section size mismatch for textured video
    
    this fixes the driver complaining though reportedly it still does
    not work (on r100)

commit 39dfac41eebbcdacb1ae0c17cea325ea2966c4a5
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Aug 28 12:20:04 2009 +0200

    EXA: RENDER repeat fix and more cleanup.
    
    Apparently changing pPict->repeatType causes badness, see
    http://bugs.freedesktop.org/show_bug.cgi?id=23560 .
    
    Now we just use a normalized repeatType value derived from pPict->repeat and
    pPict->repeatType everywhere.

commit 7d36f13afa5da742aa6c989a2652e92c96e5f80e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Aug 27 09:52:11 2009 +0200

    KMS: Remove explicit radeon_bo_wait calls before radeon_bo_map.
    
    libdrm_radeon always takes care of this implicitly now.

commit 066c90e8f5b93c80195dc43486ad3efa083a1f3a
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Aug 27 09:52:11 2009 +0200

    KMS: Don't use a blit for UploadToScreen if the pixmap BO will be idle anyway.
    
    Direct CPU writes should be at least as fast in that case.

commit 174b61bb786a841cebd354e23b4b0caa85b541aa
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Aug 27 09:52:11 2009 +0200

    KMS: DownloadFromScreen improvements.
    
    * Drop superfluous RADEONDownloadFromScreenGTT function, EXA does the same
      thing when we return FALSE.
    * Take unflushed operations into account for determining which GEM domain the
      pixmap BO will end up in.
    * Only use a blit if it ends up in VRAM.

commit 7623e169e1f7d5afbd4108de03f28098bca519db
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Aug 27 09:52:11 2009 +0200

    EXA: Allocate pixmap BOs in VRAM.
    
    This is the intention with EXA in xserver Git, and IME it improves performance
    significantly even with older versions.

commit b90b823790657707b5bf7249095833bef959b0e8
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Aug 27 09:52:11 2009 +0200

    DRI2: Set tiling for depth/stencil buffers with all DRI2 interface versions.

commit 27d9664f8862d1948dd32021f8e9bcb94f23e4ef
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Aug 27 09:52:10 2009 +0200

    EXA: RENDER repeat cleanups.
    
    We can't rely on the server setting pPict->repeatType to something sensible
    when pPict->repeat is FALSE, but we can do it ourselves.

commit 9b5517fcf7f2397a1a814d396fc9dc24769a6d9f
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Aug 27 09:52:10 2009 +0200

    Throttle DRI2 buffer swaps / frontbuffer flushes.

commit e87f0f50f31a59ca1f60d4582d4a57ed00854fb7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 26 02:13:38 2009 -0400

    r6xx/r7xx: set EXA_HANDLES_PIXMAPS

commit 3212c26b90c0f6f1a7248b4da3ed985a9c2e9381
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 26 01:42:10 2009 -0400

    r6xx/r7xx: more WIP

commit 5a08e68cc254fb255e631b456e331c32456ef0e7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 19:24:41 2009 -0400

    r6xx/r7xx: fix some define problems in Xv code

commit 9aa214e125b7927d62b9fe124a851d0373c24d7e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 18:45:49 2009 -0400

    r6xx/r7xx: fix reloc for vtx buffer

commit bba51187055932ecd466f5f817428d6c773747b9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 18:37:15 2009 -0400

    R6xx/r7xx: unmap vb bo when done

commit 599adfc1f5e6d708be7ad30f4871de3046775727
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 18:13:14 2009 -0400

    r6xx/r7xx: fix flipped domains

commit 2e83cca8d7efaf1a6836cfb9ea5893fd9d70175f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 18:05:43 2009 -0400

    r6xx/r7xx: more cs exa wip

commit 65852de027989c105246fa4e4eed432f29525a22
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 17:29:42 2009 -0400

    r6xx/r7xx EXA: WIP

commit 69ec7a35e2a0a3d802ec093a6aab2d7ed2cc88be
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 16:14:02 2009 -0400

    r6xx/r7xx: first pass at kms accel support
    
    Adapted from various patches from Dave and Jerome.

commit 04692f80678ffea15ac33820381ce45865e697b8
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Aug 26 05:31:56 2009 +1000

    radeon: afaics these aren't radeon regs but r128 regs.
    
    so remove them from radeon use.

commit 9cf965bbc977f0523437c0ecf1d7363b17de2468
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 12:47:34 2009 -0400

    R6xx/r7xx: add begin/end batch macros

commit b6368cc572c79bce9a9366242c727c13cab3f006
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 12:14:33 2009 -0400

    r6xx/r7xx: move more common state to default state setup

commit fc74e1194c980d978667e02c60a29a761a694bde
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 25 11:39:56 2009 -0400

    RV740: disable small DFS transfers
    
    Seems problematic on all rv740 chips, so until we
    can find a solution, disable them.

commit 1c909ecd88e75c6e16af7aa068e32a7a60b0af37
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Tue Aug 25 11:21:41 2009 +0200

    radeon: Fix X recycling with KMS
    
    On X recycling CloseScreen drop master so grab it again
    in InitScreen and avoid to reallocate buffer & various
    others cs/bo utilities on X recycling.

commit 39aaf9addc923852598ba6fb914459671b78e492
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Aug 24 18:59:22 2009 +1000

    r600: use exa fallback code for solid/copy codepaths.
    
    Solid seem to try and handle 1bpp which really no.

commit e4b2d57ddca8739ec0b452565713398d036be0d5
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 24 14:11:24 2009 +1000

    r600: fix bad unit in texture setup

commit bac224912c750dc1c85ff2d9b8526dad6c23b572
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Aug 22 21:17:59 2009 +1000

    radeon: don't spec any initial placement for pixmaps.
    
    allow the first use to decide placement.

commit 77f98717d825162da106c6898cdbcbdf5c984ae6
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Aug 22 21:16:25 2009 +1000

    exa/cs: add DFS from GTT optimisation
    
    This uses the new libdrm busy interface, once I had this in place
    I added a error if this happened and it does on my desktop here,
    so may as well add the optimisation that used to be in my old KMS tree.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b1b77a4d6fb7404af9568644e1a8e050fdfa956e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 19 13:29:04 2009 -0400

    rs600: add support for DisplayPriority HIGH
    
    Still haven't implemented the actual watermark
    calculation, but this forces the display requests
    to urgent if the user specifies DisplayPriority HIGH.

commit 72e0d1b2cb11a67b8e4be4c74913ee44dc051c5b
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Aug 19 19:01:30 2009 +1000

    radeon/kms: add initial colortiling support (disabled by default).
    
    This requires an X server from git with createpixmap2 support fixed up in it.
    
    On 1.6 and previous it won't do any tiling, if you are running git server
    please upgrade to latest git.
    
    Option "AllowColorTiling" "true" to enable and do some testing

commit 479a6daefe46f985c415b0d000b1b1b820f3924e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 18 02:53:29 2009 -0400

    AVIVO: add support for DisplayPriority HIGH
    
    If the DisplayPriority option is set to HIGH,
    force the diplay mem requests to urgent.

commit 8fd6f69c84103b277de70181988e843da23c85b0
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 17 15:50:21 2009 +1000

    radeon: move detected monitor type debugging.
    
    We should print this after DAC detection to be useful for TV

commit d25185f33d06a8162469e18688e95ee19a5d94d8
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 17 15:31:16 2009 +1000

    atom: recall crtc source script after tv dpms on
    
    For some reason we lost the DACB source when we dpms tv back on.

commit a971f1cfbbda1e3d16fb41f4a07f3b43fd59bc0d
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 17 15:25:17 2009 +1000

    atombios: store dac detect result into save register.
    
    We end up writing back an empty save register over the dac
    detection results so the atombios table can no longer
    figure out the S-video vs composite so sets the wrong one up.
    
    this gets tv-out on my r580 with a composite connector working.

commit efef7c01ad38e078de2fa3f9e528e4ef7d05d00a
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 17 13:44:20 2009 +1000

    atom/tvout: set the correct scaler up for tv out
    
    If we need to use the second scaler actually set the second scaler
    up.

commit 032a8a06315d12e66240e7ef74b5b165f6d0d1a9
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 17 12:18:23 2009 +1000

    kms: make tv out match the connector name

commit 36e51c4d63836863dd7a17cbf6e5a9b7c1bbd31a
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 17 12:17:31 2009 +1000

    r100/r200: dont emit wrong clamp modes.
    
    for rect textures you don't want to use wrap clamping which
    is the default.

commit 595f7c3a60ca982ca2836a0174e1f36f9d1a4fec
Author: Dave Airlie <airlied@itt42.(none)>
Date:   Mon Aug 17 09:38:09 2009 +1000

    radeon/tv: fix typo in crtc register modifications

commit 92baeafde8f0c1eed2b6769e96f8093e3d6d7478
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 11 15:29:17 2009 -0400

    RV280: add agp quirk
    
    from Hartmut Niemann

commit 04288fdb8b8c62fc2eb32fd467fdf05151ad121a
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Tue Aug 11 19:32:52 2009 +0200

    radeon/r600: abstract vertex buffer for r600 & r700 hardware
    
    Abstract vertex buffer, preliminary work before others change
    to bring cs support along IB support.

commit 72daee2a18bfb809260d1bcbe80cc14afea3b0fa
Author: Adam Jackson <ajax@redhat.com>
Date:   Mon Aug 10 13:59:49 2009 -0400

    Fix misleading filenames in DRI setup failure messages

commit cd99d9f0d715f1f74de4fe22f2fd30046f2c7568
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Aug 7 11:56:50 2009 +0200

    Properly let radeon_cs_flush_indirect() re-emit 2D state if necessary.
    
    Also remove a superfluous assignment.

commit 577ff3ce922e457cc32f80d4365cb1da81552e72
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Aug 7 11:56:49 2009 +0200

    Add support for EXA_MIXED_PIXMAPS in xserver master.

commit e755fa56d03aa338d0c6345ed41e32aa3115ad4b
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Aug 7 11:56:49 2009 +0200

    Minor fixes for KMS EXA DownloadFromScreen hook.
    
    Check we can handle the bpp, and remove superfluous flush.

commit 4cebafae81c1738a1c330d52a2c5248869f06411
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Aug 7 11:56:40 2009 +0200

    Add KMS EXA UploadToScreen hook.
    
    Fixups by Michel Dänzer: Doesn't seem to be a win in terms of raw numbers, but
    should allow more pipelining and avoiding BO memory waste for small glyph
    pixmaps.

commit 9243791322e36b9231e6a3f04024ad66325385e3
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Aug 7 14:07:32 2009 +1000

    r200: fixup scissors for DDX.
    
    a) turn of R200_RE_CNTL - SCISSOR_ENABLE - this save us emitting R200_RE_TOP_LEFT, note scissor is still enabled.
    b) disable aux scissors.

commit bd03977e320591ca55b1a2fbb32414c53cb3f72e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 4 15:21:44 2009 -0400

    radeon: fix compile with !kms

commit 4fc1e67e606daf9227e74518c54315b60cd38301
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 4 15:17:39 2009 -0400

    radeon: re-add asus connector quirks
    
    fixes bug 19943

commit 22074cf0e58fddba743924532625e6fca49b6bdc
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Tue Aug 4 21:09:25 2009 +0200

    radeon/kms: add simple DownloadFromScreen implementation
    
    What we want to do is add userspace object support to radeon
    kernel modesetting. Also this DFS is dumb and might endup doing
    blit from GTT to GTT.

commit fce31b61a88522733863a9b4e9f1c935c439cb4e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 4 11:16:05 2009 -0400

    RS880: enable accel

commit 6b1b4b9214d58175727f7992fc42bc7244c42bf2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 3 15:55:04 2009 -0400

    radeon: add some new r7xx pci ids

commit f564460e94c9d0f1cf3ff4b8535481b2b8b4e9c1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Aug 1 16:53:47 2009 -0400

    radeon: use XAA in some cases
    
    Use XAA in low memory situations or when the DRI is disabled.
    Using shadowfb might also be a viable option, maybe even a better option...
    fixes bug 21683

commit c71b2f050e8996787eae463eddbfdb5864ffa65a
Author: Bryce Harrington <bryce@canonical.com>
Date:   Sat Aug 1 16:50:43 2009 -0400

    radeon: AGPMode quirk needed for SiS
    
    fixes bug 23065

commit e3659ed06fc5bb8817f1dbd7c2d6bc94c67b30f7
Author: Bryce Harrington <bryce@canonical.com>
Date:   Sat Aug 1 16:48:48 2009 -0400

    radeon: AGPMode quirk needed for IBM Thinkpad T40 with Mobility M7 LW
    
    fixes bug 23064

commit 2391531ed6b7c11ddd5ab91b2369821cc5f8b8a7
Author: Bryce Harrington <bryce@canonical.com>
Date:   Sat Aug 1 16:41:41 2009 -0400

    radeon: AGPMode quirk needed for HP Omnibook 6200
    
    fixed bug 23063

commit 474eda02257152ced52364f38cbad24c20aebbc0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Aug 1 16:06:52 2009 -0400

    radeon: reload bicubic Xv texture on VT switch
    
    fixed bicubic filtering after VT switch or suspend/resume

commit 447a2ce1b88aa2d6d5713e93174c4002617720f7
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 30 09:54:01 2009 +1000

    radeon: fix r600 shadow fb mode with cursor allocation in wrong place
    
    From RHEL QE testing, we could end up with the cursor at 0 since
    we think EXA is in use when really it isn't. the info->useEXA = FALSe
    might be unnecessary but better to be explicit
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 2b9a5be3bb22fad1d52ec9eea7733c5e956250b7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jul 29 03:34:11 2009 -0400

    radeon: fix typo in object header to connector type conversion
    
    Should fix bug 19943

commit 63c873cbd4d1d21d9f688028c0900c79fadc42c1
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jul 28 15:22:40 2009 +1000

    ati: change to using ABI version check

commit 21a621c297ac71c65c239ea960c38706e718b91c
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jul 28 13:32:28 2009 +1000

    ati: update for resources/RAC API removal

commit 5ad2519c2a7c0df389b2cd7cf7151c7e4b7252a8
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon Jul 27 14:22:02 2009 +0200

    KMS: Explicitly specify VRAM and GTT domains when allocating BOs for pixmaps.
    
    Without this, apparently they are initially allocated in system RAM (or
    possibly GTT), so any GPU rendering to them first triggers a copy of the whole
    uninitialized data to VRAM...
    
    We may want to explore more sophisticated schemes in the future, but for now
    this seems to improve KMS 2D performance quite a bit.

commit 57f2c83a22f27567506c555af431f89e6031204c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Jul 25 14:19:38 2009 -0400

    radeon: Set PCI/PCIE bus type properly per asic
    
    - r1xx-rv350 chips have the old pci gart
    - rv380+ chips have newer pcie gart
    
    Select the right kind regardless of whether the user selects
    PCI or PCIE.

commit 2afc46fa74ce7730f766a3370d323c6b59694186
Author: Jerome Glisse <jglisse@redhat.com>
Date:   Thu Jul 23 20:13:15 2009 +0200

    radeon: fix KMS shadowfb for r6xx and newer hw.
    
    We need to map front buffer and also to avoid EXA initialization
    when falling back to shadowfb on newer r6xx/r7xx when KMS is enabled.

commit 328e4c816348b6f867df30b39856dbe78c8e0dcc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 23 13:28:36 2009 -0400

    RS780: fill in MC access functions
    
    Also, r6xx/r7xx don't have indirect MC space, so
    don't try to access it.

commit f96d5b255425fbd02be2cad26edb590d474a5640
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 23 13:25:04 2009 -0400

    R6xx/R7xx: clip rendering to destination surface dimensions

commit e372f845b0defaf2d2c9ef3cbbf7498e09d9372e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sun Jul 19 16:05:29 2009 +0200

    Guard reference to CRTC active field.
    
    Fixes build against older xserver.

commit e38305aebdc95f80f5b4b3e5ba541ea67dc05f01
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Jul 18 22:23:45 2009 +0200

    Also drop DRM master in KMS CloseScreen.
    
    The LeaveVT hook isn't always called when the server dies, e.g. when quitting
    from the GDM greeter. This may cause existing servers to fall over if the dying
    server process still exists when they try to re-acquire master and set a mode.
    
    Also use drmSet/DropMaster() rather than ioctl() directly.

commit a43c660a00147bfae5ca601f4720b2680b75211f
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Jul 18 22:21:59 2009 +0200

    Set CRTC active flag to TRUE after a successful KMS mode set.
    
    Otherwise some things like changing the colour map won't work properly.

commit f32069f42b3e4643f15148d0b96164def00dcc74
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Jul 18 22:20:08 2009 +0200

    Set the STALL bit in the CRTC_GUI_TRIG_VLINE registers.
    
    As recommended by the register reference when using the WAIT_CRTC_VLINE bit in
    the WAIT_UNTIL register, as we are.

commit 27bd9fc9b2c0eeff488c1f26f1355a7fa3655520
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Jul 18 22:14:27 2009 +0200

    Enable vsync for DRI2 region copies.

commit 4b1b28865ffb17f58a70d955212fd51cb1fb55ab
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 16 17:09:33 2009 -0400

    R6xx/r7xx: reduce the amount of default state setup
    
    Most of the default state setup was extraneous or duplicated
    in the accel ops.  There's no need to reset all the consts
    everytime you reset the default state for example.  This leads
    to a 10x reduction in default state.

commit 7e6557b81026d8a4d6c837839e68c28b151f8a97
Author: Peter Hutterer <peter.hutterer@who-t.net>
Date:   Thu Jul 16 11:33:57 2009 +1000

    Update to xextproto 7.1 support.
    
    DPMS header was split into dpms.h (client) and dpmsconst.h (server). Drivers
    need to include dpmsconst.h if xextproto 7.1 is available.
    
    Signed-off-by: Peter Hutterer <peter.hutterer@who-t.net>

commit 95d431e8b260dd43cf6d93b90eecab1dc0ec7c26
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Jul 15 12:07:01 2009 +1000

    radeon: emit colorpitch relocs.
    
    This causes relocs to be emitted for the colorpitch.
    
    Shouldn't have no effect on current kernels, but will keep DDX
    going on kms kernels when tiling lands
    
    Also contains a missing reloc space for r200

commit 8312763977b22e108b7d003cbf3256e0165e4439
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jul 14 18:13:27 2009 -0400

    Add an r420 AGP quirk
    
    fixes bug 22726

commit 5473eeeb45468fd200fec49a8506281628a5e4b5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jul 14 14:05:13 2009 -0400

    R3/4/5xx: only upload the bicubic texture once
    
    Upload the bicubic texture once during textured video init
    rather than once per frame.  Suggested by Michel Daenzer on
    IRC.

commit 0485f27bc3d75cb6ab320e8164dbe6ea2713c78e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jul 14 13:11:12 2009 -0400

    R3/4/5xx: fix bicubic Xv filtering with KMS changes
    
    fixes bug 22730

commit ca4a9efef987108266ae59afbb5142d4d2000c8e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 13 11:28:41 2009 -0400

    Add configure option to disable kms support
    
    Useful to building with mixed kms/non-kms setups

commit 035e8d1d5593c12828bb079de4e663cf1b1f1674
Author: Edward O'Callaghan <eocallaghan@auroraux.org>
Date:   Sun Jul 12 13:45:29 2009 +0200

    Fix a warning
    
    Signed-off-by: Nicolai Hähnle <nhaehnle@gmail.com>

commit 76af48c43f829e7aebacc9f2a623823fa26ee22b
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Wed Jul 8 09:58:56 2009 -0400

    xf86-video-ati: use XORG_CHANGELOG macro to create ChangeLog. #22611
    
    Build break: Makefile.am: command not found: git-log
    Adding the macro in configure.ac and use it in Makefile.am
    Refer to: https://bugs.freedesktop.org/show_bug.cgi?id=22611
    Tested: running autogen.sh, make and 'make dist'
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Peter Hutterer <peter.hutterer@who-t.net>

commit 43db263d301082e84e9bc304816bcbb206fe280e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 9 12:48:06 2009 -0400

    RV280: another AGP quirk
    
    fdo bug 12544

commit 69b5e5496f10a9f566d2e563862c96cb41952eb6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 9 12:42:45 2009 -0400

    RV280: Add an AGP quirk
    
    lp bug 370205 via fdo bug 12544

commit a6d6c900e60a3685ee9e93c34eb7f6d237c45fd8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 9 11:30:57 2009 -0400

    RS740: fixup display latency setting as per rs690
    
    Both chips program the same in this regard

commit ea407570d39ace3162d372eda56bf791bfd80c24
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 9 10:46:23 2009 +1000

    radeon: add shave support.
    
    clean up output a lot

commit 8c03c1fdb5ea35570064946557050c87ca30582a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jul 8 18:34:57 2009 -0400

    R6xx/R7xx: fix hangs on x2 cards with PM options
    
    Changing the PCIE lanes on x2 cards results in a hang,
    so for now, disable it.
    
    Fixes fdo bug 22669

commit 9645838c57f6b40837fdce23ce7f9faefb3d9966
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Jul 8 19:18:02 2009 +0200

    Further non-KMS fixes / cleanups.
    
    Only compile tested.

commit 2d86ec4ddb1fb83be95ed9cdcbabf4d568a6d7b6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jul 8 12:33:34 2009 -0400

    Fix the build for the !XF86DRM_MODE case
    
    compile tested only.

commit a68afc2a80b8581cc3d67e9b5a95a10b0d4ead0e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Jul 8 09:15:28 2009 +0200

    Fix RADEON_TRACE_FALL build.

commit 9ca0aeaad01b7c682396b30af48668f287a59d6e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Jul 8 09:13:36 2009 +0200

    Pass on CS relocation offset values.
    
    Not actually used ATM, but just in case...

commit f718dd794477fbdd5eeb4183f43ff25517c63034
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Jul 8 09:11:18 2009 +0200

    Don't set EXA UploadTo/DownloadFromScreen hooks when they'd always return FALSE.

commit 42e76d0b24b76fbcc6b08a4ea5003dbec368645c
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Jul 8 08:51:10 2009 +0200

    Don't always flush CS when switching from 2D to 3D.
    
    This works fine here and doubles x11perf -aa10text scores, but may cause
    problems on other setups according to Dave. Let's see...

commit 94fe049c35187ddc3ec0472e9309c3a22879f415
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Wed Jul 8 08:36:22 2009 +0200

    KMS CS fixes, take two.
    
    Avoid flushing CS in the middle of (setting up state for) an operation,
    properly finish/restart the operation.

commit 0519f15af2fe5e7e5a6c94e7203a96fe363c643e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Jul 7 10:04:09 2009 +0200

    Fix DRI2 with current xserver Git.

commit 7ad11fec2579807371360cb680e593f723ebaa1a
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jul 6 18:43:08 2009 +1000

    radeon: add make dist headers

commit e68fbf743ec88e0fa3a9f1ffe83daf251e250b21
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jul 6 18:32:32 2009 +1000

    git: fix git-log to git log

commit 5eeb1fd19c6797cc76ce308570dffe34cb82b24d
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jul 6 17:45:50 2009 +1000

    radeon: oops fix compile without libdrm

commit 98824f37fc74dc1fec2677515d0dc3cfc263f00a
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jul 6 15:29:53 2009 +1000

    radeon: move state changes into flush function

commit 503b51343267248b4c6994b88238dd5384528f03
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jul 6 15:20:13 2009 +1000

    radeon: taken from kms-support + CS fixes commit.
    
    re-emit 2D state and reset 3D state emit on flush

commit d78d50591851d14543f0935d051a59ef29751bbc
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jul 6 14:45:07 2009 +1000

    radeon: port to new space checking in libdrm interface
    
    This uses a new libdrm interface which shares code with mesa.
    
    It also fixes the bo to flush when full instead of never flushing.
    
    It survives gtkperf -a here which the driver didn't before now

commit e1200cb89218930d01330ba0114e013438655cce
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Jul 6 15:10:29 2009 +1000

    Revert "KMS CS fixes."
    
    This reverts commit 11cf8a28eb46f48d101888552266921bee8b63fc.
    
    I'll bring this back in a few minutes, I've got a big change introducing
    a new cs space accounting scheme which this messes up and I think
    probably conflicts with what I've done.
    
    I promise i'll go over this and pick the bits that are still useful :)

commit 11cf8a28eb46f48d101888552266921bee8b63fc
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sun Jul 5 15:14:59 2009 +0200

    KMS CS fixes.
    
    * Flush CS before running out of space.
    * Don't flush CS every time when switching between 2D and 3D engine, but make
      sure to re-initialize 2D/3D state after flushing.
    
    Doesn't seem quite perfect yet (some rendering seems to get dropped on the floor
    sometimes), but this should fix a lot of CS failures people have been seeing.

commit 8d2f712eaf1e569fd92bbe2db5aceb43b7b367d1
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jul 3 10:40:59 2009 +1000

    radeon: don't set up overlay under KMS until we figure out how.

commit 2a622168606d98c404708b879e6417c8f7d7305c
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Jul 2 15:03:53 2009 +0200

    Test BO pointer before passing it to radeon_bo_unref().

commit 36a4ea5a9c7062f4c8aa7480bb7488ce2062390f
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Jul 2 14:52:44 2009 +0200

    Warning fixes.

commit 65465d56c1bf943113518a5b2f57b3170213bab9
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jul 2 18:38:38 2009 +1000

    radeon: fix up configure check better

commit ad17108b72c9adf773a122b4c054c7b92e6a8b9d
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jul 2 17:25:57 2009 +1000

    radeon: fix it properly.
    
    I blame the flu

commit e1b9cb9ea665eaa84e64a386299efa0819d55df4
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 17:18:47 2009 +1000

    radeon: fix compile without kms

commit de427fac6912a625f7e4d8b982a1f7a1ba80dfbe
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 15:41:43 2009 +1000

    radeon/dri2: fix dri2 - needs newest libdrm_radeon

commit 2b671adba54ebff1756dd990123f4bade6e35d61
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 15:25:19 2009 +1000

    radeon/dri2: call proper gem bo function

commit 851b2b8cab883e4422745cca1827aa8ac9f193a3
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 15:17:13 2009 +1000

    radeon/kms: add textured video BO size checks

commit 9d092060236e8587697fdd57a7a01f3c0dddd680
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 15:17:03 2009 +1000

    kms: drop DGA

commit 207174ea964c561076bdd5297a2fb6f136b4b645
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 15:16:47 2009 +1000

    radeon: fix CS imbalance

commit 4d24a9d2c0be0c025266cc8cdf7e8d7bb065cdb1
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 14:55:45 2009 +1000

    radeon: enable KMS build

commit 9bcd3ae7966eb7a17b922bcd33e0d6f016245614
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 14:55:18 2009 +1000

    radeon/kms: fixup 3d state emission for KMS
    
    This fixes font rendering under KMS (should have looked at dmesg)

commit ac1607bb23f0c7584648407a3ac3fb27142e186e
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 2 14:55:05 2009 +1000

    kms: no need to reference fifo slots

commit 1782ce28953184776c90eb1255208a3e0ad245f0
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jun 30 16:55:26 2009 +1000

    radeon: add KMS support (still disabled)
    
    This adds DRI2 + KMS + driver pixmaps support to the driver.
    
    I've decided to just do a completely separate KMS driver file
    instead of hacking the crap out of radeon_driver.c. So now
    I do the KMS check in radeon_probe.c time and set the DDX
    pointed up to a completely different set at this stage.
    
    This avoids a lot of if (kms) type crap in the code at
    the expense of making sure we make changes to both files
    if necessary.
    
    This code is still disabled in configure.ac as I broke EXA composite
    rendering somehow in KMS mode

commit ac4bd24a66c1bdda0293f770a3f891e2b88cc8ee
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 30 16:00:06 2009 -0400

    EXA: fix the build on servers without EXA_HANDLES_PIXMAPS

commit 49a0ca19ee4109cdd39a43fbf4bedf3f0557d6ec
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Jun 30 17:22:50 2009 +0200

    Warning fixes.

commit e932836691aeaec37794fdaed2dabb22710fd171
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Jun 30 16:24:37 2009 +1000

    radeon: initial preparation for kms patch.
    
    This patch contains most of the changes to the EXA and texture video
    accel code.
    
    It adds a few bits of pixmap support but doesn't actually do anything
    useful KMS yet.
    
    Testing this should not have any regressions over what we have already,
    biggest worries are r6xx, I've fixed a textured video one, but no idea
    what other might lurk
    
    It won't build against libdrm radeon yet either

commit bb04b450ed00ca4b1aa44c33085567d47b33b547
Author: Fredrik Höglund <fredrik@kde.org>
Date:   Mon Jun 29 22:38:26 2009 +0200

    Check if the composite op is supported in R200CheckComposite.

commit f39cafc5c4a93a16ac93756473ebb1f33c7881db
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Jun 28 20:42:49 2009 -0400

    radeon: call hdmi-b connectors dvi in randr
    
    Technically HDMI-B is a glorfied DL DVI, but this is confusing
    to users, so call it DVI when reporting randr outputs.  This
    allows us to remove two quirks where the bios was actually
    correct.

commit 407e676b04117c7ca3dcc0cc072f3552b03c64e5
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Sun Jun 28 16:54:32 2009 -0400

    R6xx/R7xx: fix pixel centers
    
    Make sure we are using GL mode (centers at 0.5) rather
    than D3D mode (centers at 0.0).  This also fixes fdo
    bug 21963.

commit 68001981f22173ff949720055dba89291f284474
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Jun 28 16:20:10 2009 -0400

    Add some missing M96 pci ids
    
    fixes fdo bug 22404

commit 06d5d8d7fd92b58b2467c782e57a80a3520a2c90
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu Jun 25 13:51:36 2009 -0400

    Add a (harmlessly) missing break statement.

commit 7d1d968fdc8de1e0ab0be916a1f3a4a398af47aa
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu Jun 25 13:49:18 2009 -0400

    Cosmetic cleanup to digital output detection
    
    No functional change, but this logic would need extending anyway for
    DisplayID, so unify it now.

commit 96581746eea2f4e29a04f9266ec9649f25480424
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Jun 24 17:05:47 2009 -0400

    atom: Fix phantom VGA connector when HDMI-B present.
    
    HDMI-B is really a glorified DL-DVI connector, the analog pins work fine.

commit 496adc4dc7cf53fc6acfecb1158f1491d5f36168
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Jun 19 14:37:01 2009 +0200

    Revert "Build fixes for -Werror that aren't ready for prime time yet."
    
    This reverts commit ab20ea1530ec8a3a9fd4089775c4e157e50fe1bf.
    
    Whoops, pushed wrong branch...

commit ab20ea1530ec8a3a9fd4089775c4e157e50fe1bf
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sun Jun 14 16:50:07 2009 +0200

    Build fixes for -Werror that aren't ready for prime time yet.

commit 77e3537d312175a25f0e21cc07c3a96f78c3b35a
Author: Markus Gapp <markus.gapp@gmx.net>
Date:   Sat Jun 13 11:51:29 2009 -0400

    Add quirk for asus hd3450 board
    
    Fixes bug 22266

commit e8e0bb1ba29761c94d473e42ca6ada161cfff557
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jun 12 11:07:43 2009 -0400

    Fix count in 3d state setup after 43374c7420e378918bec062f4cbd581f16adb6f0

commit 808c90a24c48da7fa97e15e2f12be5bb8fd8cc96
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 11 16:09:40 2009 -0400

    Only enable frac fb divs on rs600/rs690/rs740 for now
    
    fixes bug 21413

commit d095bb3157faaee10b0130ea9b1032e0b533aaee
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 11 12:34:15 2009 -0400

    Re-enable frac feedback dividers on AVIVO hardware
    
    Preferring a freq <= target frequency seems to fix the
    previous issues with frac fb divs.  Appears to work fine
    on all hardware I've tested on.  See fdo bug 22229 for
    details.  Should fix bugs: 22229, 21553, 21413, and
    possibly other ones related to unstable images at certain
    resolutions.

commit 55fbdbae83d1563b472f49d0436c9298e390be66
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 11 12:31:53 2009 -0400

    Add PLL flag to prefer frequencies <= the target freq
    
    This appears to be needed when using fractional feedback
    dividers.  Based on a patch from Tom Hirst.  See fdo
    bug 22229 for more details.

commit 43374c7420e378918bec062f4cbd581f16adb6f0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 9 14:39:54 2009 -0400

    r1xx/r2xx: clip 3D rendering to destination buffer

commit 74b0a38c75c1d6a6344015d32d84b43d9e80df1d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 9 14:26:21 2009 -0400

    Consolidate indentical RADEONDoneSolid/RADEONDoneCopy functions

commit f6dff8836729cc9d29264080c9cfa0e1df6182cf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 9 13:31:15 2009 -0400

    r3xx/r4xx/r5xx: clip 3D rendering to destination buffer

commit 48dbf09e1309c815ac8b733145a0310083a29933
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jun 9 13:12:40 2009 -0400

    r3xx/r4xx/r5xx: refactor exa prepare composite
    
    - consolidate code duplicated between r3xx/r4xx and r5xx
    - make pixel shader setup easier to read and less
      redundant

commit ec1a3ccdf61c2226617b571cc4a209a542e9d7e3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jun 8 15:31:57 2009 -0400

    R6xx/r7xx: don't clamp tex coords in composite VS
    
    Fixes broken repeat modes.  see fdo bugs 21818, 22139

commit 32c218c5633fb7ffeb19e717bf645c1b25dd4ef5
Author: Alan Coopersmith <alan.coopersmith@sun.com>
Date:   Thu Jun 4 07:23:03 2009 -0700

    Add link to patch submission instructions to README
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@sun.com>

commit 39f736d6cb65fc7c3fd769478023fc87c1af5979
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jun 4 09:57:22 2009 -0400

    atom: connector quirk
    
    Some r6xx cards have a VGA and an HDMI port with
    a shared ddc line listed as an HDMI port with both
    analog and digital encoders.
    
    Fixes bug 19943

commit 7599dc40855c33a5fbd8e9bbc2b4cd62752fb7df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri May 29 16:29:50 2009 -0400

    Add RV740 (HD4770) support
    
    Verified by ernstp on IRC

commit ee0424078a3ea26f58c2998c9e58e065fb63f1a0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 27 18:37:58 2009 -0400

    radeon: remove dead code

commit b34df233115c0d82d7bcf82e041afbc55981ce82
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 26 17:47:01 2009 -0400

    R3xx/R4xx: increase EXA render target limits
    
    now that we are using 1/12 subpixel mode

commit 1457bc089d1395d18cf582a4d52444005f013753
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Tue May 26 17:21:07 2009 -0400

    radeon: fix segfault if Option "NoAccel" is set

commit 4079f97958cf1d5fd76a83aa61b93d6289bb9b1e
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat May 23 13:51:00 2009 +0200

    Bump version to mark Git snapshot.
    
    The fourth version component isn't visible in the log file.

commit 88a9e98341d96e5e7f48b69aed597d1bada6313a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 19 17:11:34 2009 -0400

    Pre-atom: Improve engine clock setup code
    
    Also remove SetMemoryClk() for pre-atom cards for now
    as it requires quite a bit more asic specific work.
    To set the mclk we'll need to use the mem reset/dll tables
    in the bios.

commit 1429133ffdbfe046249fcaaa4cbee432a1012e55
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Mon May 18 17:59:00 2009 +0200

    EXA: Set new EXA_SUPPORTS_OFFSCREEN_OVERLAPS flag when we have a 2D engine.

commit e9cca1e7dc521d3756bb2d97f1d703b9ad65cb47
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 18 10:48:25 2009 -0400

    r4xx: Add some missing pci ids
    
    Noticed by Romain in bug 21798

commit 76fffd51027820b3a6ea10de2be67d5fd4f3e843
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri May 15 16:35:13 2009 -0400

    R100: switch to normalized texture coordinates
    
    for consistency with the other asics

commit 1a1eef31e36f98b7a30e27e567c1b66e0e4cf7dc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu May 14 15:48:54 2009 -0400

    radeon: try harder when checking if a card is posted
    
    fixes debian bug 524280, possibly others.

commit 22e39392297fa11003df90c175db3c449d8f9853
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu May 14 10:24:07 2009 +0200

    Pre-R600 EXA: Fix coordinate limits off-by-one error.
    
    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=21598 .

commit fa09b058c7a17689989e600ffd465856a058579d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 13 16:10:40 2009 -0400

    R6xx/R7xx Xv: normalize texture coordinates in the vertex shader

commit 026b6f820d6caea17d2a082193e850713d5770a8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 13 15:48:32 2009 -0400

    R6xx/R7xx: do EXA transforms in the vertex shader

commit cd89241396d1931b04cfbdd8d553be16dbf9c360
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue May 12 17:30:02 2009 -0400

    R3xx-R5xx: do EXA transforms in the vertex shader

commit 15ee78d37f8b64c3e6d234e7ab37a31e82327b6b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 11 02:22:13 2009 -0400

    RV770: add missing pci id
    
    Fixes bug 21209

commit 5ff51ea83f9fdd836e830c77e3561eaef4b83183
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri May 8 13:19:26 2009 -0400

    R7xx: add support for reading disabled bios images

commit 76fdae9018330aa5af0d57339baff3ca4834e1b5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu May 7 02:59:32 2009 -0400

    R3xx/R4xx tex vid:  no need to check if IS_R300_3D
    
    function is r3xx/r4xx specific already

commit 23a8ada06a5b1ccc975e89f129c00382ecbf29df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu May 7 02:34:22 2009 -0400

    R3xx/R4xx tex vid: increase the guardband limit for rendering with a tri
    
    limit goes from 2880 to 4021 now that we've switched to 1/12 subpixel mode.
    
    This allows us to render with a clipped tri at higher resolutions preventing
    diagonal tearing.

commit 0c3541f7013c53fb8096ada63cc7b3577524aa4c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed May 6 12:24:35 2009 -0400

    AVIVO: set default cursor mode in cursor init
    
    Should fix bug 21557

commit da58e351b6398fa18b1d9c1a57a6e49b285f610f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 4 16:03:53 2009 -0400

    AVIVO: fix cursoe corruption bands for real
    
    Don't have to leave both cursors enabled, just have to use
    the same mode for both cursors whether or not they are enabled.

commit 2c8e130f73c680d4a7381b2ef37982b82c6ee478
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 4 13:40:17 2009 -0400

    radeon: switch to EXA by default

commit 8155a62df6817358a12cc2d613c1470ca55996ef
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 4 12:57:36 2009 -0400

    AVIVO: move cusor offscreen when disabling
    
    Adapted from Yang's patch. Setting size to zero is
    actually a 1x1 cursor.

commit a1c64ea5224009779ccad66b0f84d861eae966ac
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun May 3 19:42:44 2009 -0400

    r3xx-r5xx: switch to 1/12 subpixel precision
    
    - based on similar patch in Jerome's cs ddx tree
    - also fix clipping offsets
    - should eventually allow for 4k render targets
    - mesa driver uses 1/12 mode, this avoids changing the
      subpixel mode when switching between ddx and mesa

commit 3880bc3c95764acccd62cfa438932458df95daf6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun May 3 19:01:28 2009 -0400

    Remove some old debugging info

commit 3362381aa3a97c1da564f8a479ed4e7b0d6368b8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun May 3 18:52:00 2009 -0400

    r2xx-r4xx: fix typo in last i2c fix and clarify hw i2c pin sel

commit e01b8dc827ce1913927e1a4fad05a99a2dd9e805
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun May 3 13:09:39 2009 -0400

    RS690: gpio/connector fixes
    
    Fixes bug 21521

commit 1f70c9f05df9017d87b37f887e1eccd6d0568a02
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 30 19:18:13 2009 -0400

    R3xx-R5xx: don't set TX_OFFSET_RS in RS_INST_COUNT
    
    Isn't necessary and seems to cause problems for RS690 users

commit de17d36c1f710305870e3c636cae3f742f1cb6d6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 30 19:13:09 2009 -0400

    AVIVO: first pass at display watermark setup
    
    This helps with flickering and blanking when
    there is contention for MC bandwidth.

commit 7d9f643ae3d07e51e644a5979ca90bc2c102bc89
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 29 12:38:15 2009 -0400

    radeon: fix several dpms issues
    
    - atom dpms was unblanking for standby/suspend
    - return if r600+ in radeon_crtc_modeset_ioctl()
    - remove seprate standby/suspend handling in legacy
      crtc dpms.  we turn the outputs off, so turn the
      crtcs off too.
    - disable the crtcs in legacy crtc dpms
    - move radeon_crtc_modeset_ioctl() calls to radeon_crtc_dpms()
      so they will get called for both atom and legacy paths
    
    Should fix bug 21321

commit 35183ef528411eb0122cf48550d93f921d291d12
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 29 01:55:10 2009 -0400

    AVIVO: better fix for cursor flickering/corruption issues
    
    Should prevent ghost cursor from being left on screen.

commit 53e75cbd0ba8f39799d7b776cdc59d60aa2a6916
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 29 01:05:31 2009 -0400

    R6xx/r7xx: fix CURSOR_SWAPPING_* macros
    
    r6xx/r7xx have different swapper regs

commit 4e948e2aaa59267a9aa797396add2c6b7b4c1e7c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 28 19:28:25 2009 -0400

    AVIVO: fix cursor corruption/flickering issues
    
    When both crtcs are enabled, both cursors need to be enabled
    or you get corruption bands.
    
    Thanks to Yang Zhao for figuring this out.

commit 4d0beaf02b28d5a5dac4ff6053593a2f979f92ec
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 28 12:33:24 2009 -0400

    RV410: SE variants only have 1 quad pipe
    
    Should fix EXA corruption with the 3D engine.
    Mesa and drm patches forthcoming.
    
    Reported by Kano on IRC.

commit abd565ae71d9844d5afcd658628ca7778ce26ab1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 27 14:21:38 2009 -0400

    AVIVO: disable fractional feedback divs
    
    Doesn't seem to work well in all cases.  Needs more investigation.
    fixes bug 21413

commit 93626b1277f57bd559cf71b263221209b02e0046
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 27 03:35:24 2009 -0400

    AVIVO: make sure cursor width isn't negative

commit 32af0f097bccc4499d67e969d46ba35e7487c5e2
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 25 19:39:34 2009 +1000

    Revert "r300/r500: set R clamp mode."
    
    This reverts commit dab3d61619d91ae6a3da3e9b29b8258313653813.

commit b2c8f57bccbd46164907049a26ad2dd209d7b108
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 25 19:39:19 2009 +1000

    Revert "r3xx/r5xx: fix typo in last commit"
    
    This reverts commit 1a7b982457ead5f21c6e62a409ca0dbf86005607.

commit 253731dce6ab25122f2eda559233c098536b7143
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 25 19:39:05 2009 +1000

    Revert "radeon: attempt to fix R clamping for repeat again"
    
    This reverts commit 5998f262a52cb85b334fcc1fe24c7b2ae474ce93.

commit 5998f262a52cb85b334fcc1fe24c7b2ae474ce93
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Apr 24 17:30:57 2009 +1000

    radeon: attempt to fix R clamping for repeat again

commit 7ed27b926f28a1f088eace5034a7d9985f13752d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 23 14:06:06 2009 -0400

    r2xx/r3xx/r4xx: further i2c fixups
    
    - hw i2c engine has pin selection on r2xx/r2xx/r3xx chips
    - also switch hw i2c pin sel for external tmds

commit 0da80f34b5aa5999d2030ffbc5187328fa4e4ae5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 22 18:42:36 2009 -0400

    radeon: minor cleanup and warning fix

commit 1a7b982457ead5f21c6e62a409ca0dbf86005607
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 23 10:09:22 2009 -0400

    r3xx/r5xx: fix typo in last commit
    
    Noticed by osiris on IRC

commit dab3d61619d91ae6a3da3e9b29b8258313653813
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Apr 23 15:46:44 2009 +1000

    r300/r500: set R clamp mode.
    
    On rs690 without this set, we appear to end up fetching from well
    outside the texture sometimes into memory that isn't mapped.
    
    This "shouldn't" have any effect.

commit bbfd4625478e37d10fd58b23f46153f349370a52
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 22 14:47:16 2009 -0400

    radeon PM: update quirks

commit e3c564114eea4d032f920fcebd4040f1934c21b0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 22 14:31:44 2009 -0400

    AVIVO: fix for cursor corruption issue

commit 24e4b73b4fbbb2c790e6120ede3caaa4e7e58359
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 22 11:42:18 2009 -0400

    radeon pll: add support for fractional feedback divs
    
    Allows us to hit dot clocks much closer, especially on
    chips with non-27 Mhz reference clocks like most IGP chips.
    
    This should fix most flickering and blanking problems with
    non-exact dot clocks.

commit efa0825a86a8dc0f03ebb42c576ed26189e9d4bb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 21 13:51:11 2009 -0400

    Tex vid: fix top clipping

commit aa59b5b55e6ac64940fb3f0fa61f7b8fe36ba745
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 21 12:06:24 2009 -0400

    RS690: add quirk for acer board
    
    thanks to Gino Badouri for testing

commit 0e5164d968316bbb59b4484a7df087854738068f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 21 04:47:43 2009 -0400

    Tex vid: rework part 2
    
    - use pPriv->w/h directly for tex coords
    - take src x/y offset into account when calculating tex coords
    - when copying data, only optimize for y clipping. In order
      to deal with the x clipping optimization, the copy routines
      or tex coords would need to be fixed.  This should fix clipping
      problems with the current code.

commit 06a1b4169b506f69dd807380d9ce7210b3a3bc23
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 21 01:21:51 2009 -0400

    R4xx: avoid a PM related hang

commit 228b9ac87668241b09980fca17e9d866891285e6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 21 01:02:34 2009 -0400

    radeon PM: add some quirks

commit b6febf7368d3df3f1d3fee6a87aa71c54e77cdcc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 20 18:04:18 2009 -0400

    Tex vid: cleanup and unify common code

commit d096d1189c8dc5e19f68cc605ccffe1a8fef048b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 20 13:05:18 2009 -0400

    Endian fixes for object table

commit 101ce28ec4af696549b7d6defebb5b4ad412176c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Apr 19 12:13:18 2009 -0400

    Remove old messages
    
    R5xx/r6xx support isn't really experimental anymore

commit db177c70ce88af19c8e05eb916a15f3e124876eb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 17 01:05:15 2009 -0400

    Update Xv info in man page

commit 00266177bed2dc8693df497ca3ec19f2dc4adc05
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 16 20:33:28 2009 -0400

    R3xx/R5xx: only apply Xv attributes if bicubic is disabled
    
    Provides consistent output

commit 85323a7f84381fef7fad20c7f7ec601637af9aa7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 16 11:10:51 2009 -0400

    R3xx/R4xx: set tex caching for Y texture when doing planar rendering
    
    Doesn't affect performance, but docs indicate its the right
    thing to do.

commit 5ea5df22c038fc8f00984acc760e9d8c962bf902
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 15 20:26:34 2009 -0400

    Tex vid: remove remnants of XV_HWPLANAR
    
    no longer needed as bicubic is the only thing that uses
    the old csc code.

commit 9091b3f5f13dbea83ffd89679dac600e9f280bb2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 15 20:07:42 2009 -0400

    R3xx/R4xx: fix up planar shader
    
    We were overwriting the coord fetch address with the first
    tex fetch.  Seemed to work however, luck I guess. Reorder
    the fetches to write to temp0 last.

commit 14c13faeb9f9b7717a25fcc1ca97d46cc6ee0031
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 15 19:53:12 2009 -0400

    R5xx: add shader-based csc
    
    - native planar support
    - Xv attributes

commit 832efc7b90f5eb2da99512fcb902ab4838d2dcd1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 14 17:56:49 2009 -0400

    R3xx/R4xx: Implement shader-based csc for packed formats

commit 32625118c27041265d25811c00d25ab7e82fb340
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 14 16:38:40 2009 -0400

    tex vid: fix attribute setup typo for XV_COLORSPACE

commit adf0912006b4f1597784dbfcc563d5c6d1c5667d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 14 16:16:33 2009 -0400

    R6xx/R7xx: implement Xv attributes
    
    - brightness, contrast, hue, etc.
    - TODO: implement gamma

commit 8810fe92b5aed08888584c6914482586b59f71ab
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 14 11:26:35 2009 -0400

    R200: clean code, always use shader based csc
    
    - consolidate common r2xx csc shader code
    - always use shader based csc for both packed and planar
      formats
    - always use native planar csc on r1xx

commit 17685fefba68d188c7c0fe7a079180ec0722c046
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 13 20:06:11 2009 -0400

    Tex vid: general cleanup
    
    - convert macros to more meaningful VTX_OUT_4 and VTX_OUT_6
      names to reflect that they actually do
    - fix indenting

commit 093ab4c9a33b0b396b78c061c3321dc044bdccdc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 13 19:48:35 2009 -0400

    R1xx: add support for native planar textured Xv

commit ec0cb51df81c6c9a1de640d227fa9c9c33161083
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 13 17:21:20 2009 -0400

    R2xx tex vid: append verts for clip boxes
    
    rather than sending a new draw packet for each rect

commit fde075a30a8ee2c333aa1bbe8fbd177258b085ba
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 13 17:13:51 2009 -0400

    R1xx tex vid: append verts for clip boxes
    
    rather than sending a new draw packet for each rect

commit 12839fc17a2cca4ac14b9757bdaa63ba4679f96f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Apr 13 17:04:31 2009 -0400

    Tex vid: split by family

commit a30737b337edb31528174b483c9094941a5d41bb
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Mon Apr 13 15:36:07 2009 -0400

    r200/r300: implement brightness/contrast/hue/saturation/gamma controls for textured video
    
    This implements
    contrast/brightness/hue/saturation controls for r200/r300 plus gamma (same
    gamma value for all channels used though separate values would be trivial)
    control for r300.
    Some issues left:
    - only r200/r300
    - still can't be combined with bicubic
    - controls will silently cease to work if the format used is packed and not
    planar (except for rv250)
    - gamma range is from 100 to 10000 corresponding to 0.1 and 10.0 like used in
    overlay. However, usable range is far smaller. Over 2.0 picture gets dark
    pretty quickly, and below 0.6 or so black seems to turn into purple (I've
    verified that even with gamma 1.0 black actually often seems to be RGB 1/0/1 so
    this explains this since that gets amplified by low gamma values - not sure if
    this is a rounding problem somewhere, bogus reference values or is somehow
    expected).
    - gamma adds a bit too many instructions for my taste (7) though the
    alternative (3 texture lookups + some swizzling instructions) doesn't seem any
    better.

commit 9dd33cc8346073300312cd5f68de72d9bea1dd6b
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Apr 17 10:30:21 2009 +1000

    radeon: tweak ddc fix for all r300s.
    
    Alex seems to think this might affect some other chips

commit a846ec14dd65bb12f314f83ffb45c4c4be564a5e
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Apr 17 10:24:15 2009 +1000

    radeon: fix DDC on rv410 VGA ports for non-atom use.
    
    The rv410 hw i2c block appears to hold down whatever i2c lines
    it is connected to when in reset, so when doing DDC change hw i2c to
    point at different i2c lines.

commit efa1476fc0765b53298624198137dc5cc71d37a8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 16 16:43:02 2009 -0400

    PM: fix reversed logic in pm block handler

commit 2b95de17781959457a809c8fecc6bbb08336c83f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 16 12:52:41 2009 -0400

    RS400/RS480: attempt to fix ClockGating on RS4xx chips

commit c0215d2f2a27755fb04d20aaa4320a5e7da7ee04
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 16 11:58:19 2009 -0400

    RS690/RS740: fix connector enumeration in some cases
    
    Should fix Masta-G's issue reported on IRC.

commit 573339114660f06e5f257648ba413bab0d6083ce
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 16 11:19:01 2009 -0400

    R3xx/R4xx EXA: set explicit tex cache regions
    
    When using a mask, set explicit cache partitions for
    each texture.  Gives 1% performance improvement in
    x11perf with anti-aliased text.

commit eea9800890b56bac9c07b7bd9c9e33fae2938af3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 16 10:41:28 2009 -0400

    Revert "DCE3/3.2: cleanup dpms after previous changes"
    
    This reverts commit f8c7d6a6162196a743f6885ecaf63ba50de1722a.
    
    This is apparently still needed for some setups, however, I can't
    reproduce this locally anymore.

commit 099cb27d760af61b967239d960bc77f71e828655
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 15 16:23:01 2009 -0400

    Change ForceLowPowerMode to 4 pcie lanes
    
    This fixes corruption for some users

commit 5abcea88d1f3307a7d08ae7757c4b535df1503bf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 15 15:52:04 2009 -0400

    PM: don't touch clock gating regs unless ClockGating option is set
    
    Fixes an M26 hang reported by tormod on IRC

commit bae88f81e2a01c0d547132b5b91e717ff9d0497d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 15 14:38:35 2009 -0400

    man page: fix missing break

commit 4b3a3785f7b06205eeec6ca6b8913ecc2b94bd1f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Apr 4 11:39:35 2009 -0400

    Unify ForceLowPowerMode and DynamicPM Options
    
    Force lower power mode and switch to a lower mode
    when idle.

commit 63cb57c5eb0d6bc083f54eb100cb972b0e7bca69
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 1 16:22:02 2009 -0400

    Add DynamicPM Option
    
    Dyanmically switch between power states. Switch to a low
    power state when the system is idle (DPMS off).

commit a34a8b37afbea6ed4bf8ca42364195e174250c48
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 1 15:23:17 2009 -0400

    Set default low power PCIE lanes to 2
    
    1 lane seems to cause occasional corruption when
    blitting to/from gart memory.

commit 1f0dc778dc25f4f85fedd73c55c847cab2c79fc5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 1 15:12:27 2009 -0400

    Add support for setting the number PCIE lanes

commit 7e10b6222e8f44a3ecc6aaea55a7a7680d133bb3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 1 15:05:38 2009 -0400

    Add ForceLowPowerMode Option
    
    Force the chip to a low power mode at the expense
    of performance.

commit 533d01a5933cd491bbc09cd463ea62475abf4bf2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 17:24:29 2009 -0400

    radeon: Add functions to set sclk/mclk using atombios

commit adb099409768e695b9928fa6aa5760f93dadd9af
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 17:13:11 2009 -0400

    radeon: Add functions to set sclk/mclk on r1xx-r4xx

commit 68e2a959ccc3d1a5d0731f1b55fdf1b2412635b2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 17:02:45 2009 -0400

    Add unified ClockGating Option
    
    - replaces DynamicClocks Option as the name was misleading
    - unified interface for atom and com based bioses
    - fix up clock gating code for newer r3xx asics

commit 336cee0e6d19068582b189b2c747d92cb2139d2f
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Apr 13 18:11:48 2009 +1000

    radeon: legacy bandwidth calcs for later r3xx/r4xx cards.
    
    This is an attempt to rationalise the code using the register info
    files available to me here.
    
    Further info is required:
    r350 check for stop_req > 15 then subtract 10: what other chips need it?
    get rs480 working instead of using magic.

commit 367ba7af76e7f63f3186a6e8d9bbe21aa31fc6d1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Apr 10 09:37:15 2009 -0400

    radeon: fix tmds_pll randr property

commit 15f1a2f31a7bc33f276a65283dbad0c106bee73e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 9 20:17:03 2009 -0400

    radeon: remove old crtc size heuristics
    
    IIRC, the old randr code used to use this to use for front buffer sizing,
    but it has since been changed.

commit ce9077b2f5a5e749c0078dfb79d26ef8711a823a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 9 19:59:19 2009 -0400

    R6xx/R7xx: cleanup macro

commit 6532aeddacdeda3aa534264741c8648e1c449e76
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Apr 9 09:41:56 2009 +0200

    Clear the framebuffer before initializing modes.
    
    Fixes garbage being visible shortly on server startup or when VT switching back
    to X.

commit 0c19053975925fed637aaa41d440e0cab8f6b596
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 8 13:34:23 2009 -0400

    radeon: chip family typo

commit 2888dd9ae9689b1cd72115dc0ceea1f5957299b0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 8 13:10:01 2009 -0400

    R6xx/R7xx: set proper 3D client driver name for r600

commit 61a083116a2c89e145aa19da951243536e07542e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 8 10:44:30 2009 -0400

    Bump version post release

commit 1b02b93895c31a0c9d641e47b46dce43b40edd97
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 8 10:34:44 2009 -0400

    Bump for release

commit da74b94a5da8f0bcf4ae99b20e594d2f0f4fc6f6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 7 18:59:06 2009 -0400

    ATOM: code cleanup
    
    - remove cases that aren't possible (e.g., no TMDSA on DCE3 cards)
    - condense duplicate cases

commit a24aa7250d09ae68ceaaba987314388b5e52096c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 7 18:52:08 2009 -0400

    DCE3/3.2: further fixes
    
    disable the dig transmitter and encoder before setup and enable

commit 284e1943f6726ed08e796f99e49fbd90ac7fa8a4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 1 15:07:01 2009 -0400

    Cast info->sclk to int

commit b580e388e0e31843308c783c1ca859672dc6ca0e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Apr 1 14:59:43 2009 -0400

    Fix missing ')' in PCIE macro

commit 8ec27be3c8043a6ddc816b0b1480dd19f8d73832
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Apr 7 11:33:44 2009 -0400

    radeon: fix Xv vsync for multi-head

commit f8c7d6a6162196a743f6885ecaf63ba50de1722a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Apr 4 16:05:20 2009 -0400

    DCE3/3.2: cleanup dpms after previous changes

commit a707d355c3c6ff92252c5a060a1fc32d97547552
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Apr 4 15:20:01 2009 -0400

    DCE3/3.2: fix up transmitter/encoder setup
    
    Should fix bug 21050

commit 215e12f9c0e8ac62c23af1add776ef88f9a0dc54
Author: Eduard Fuchs <edfuchs@uni-kassel.de>
Date:   Thu Apr 2 12:36:59 2009 -0400

    Enable byte swapping for r6xx/r7xx Hardware
    
    Patch from Eduard Fuchs with some cleanup from me.
    
    Tested at 32 bpp on MPC8641HPCN board (PowerPC) with
    HD2400 PCIe card

commit 0ded9fab6bc3fecc1976ae8369b788659e4d7793
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Apr 2 12:09:00 2009 -0400

    Add RV790 (HD 4890) support

commit 0c6f20a9404c6a4210c5180bdca61c13fc186754
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 15:51:11 2009 -0400

    Add PCIE register accessors

commit 229d4e20e5adcdf9207944c19ca721477936ff02
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 15:39:42 2009 -0400

    Unify mc_idle()

commit f44b486848094b75479abef61c1aa075aede835c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 15:33:11 2009 -0400

    COMBIS: Clarify case 0 for LCD DDC table

commit e6f3c48899a92174a55f6fe7327412bc88039d87
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 15:30:40 2009 -0400

    COMBIOS: fix default sclk/mclk from bios

commit 75bf5272936093bc024559e5744d97d8e79943b1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 15:17:37 2009 -0400

    mac mini: 3rd time's the charm
    
    fixes 10fbbac4bed59e12ad794ac873dd415d9ee4e340
    fixes bugs 20796 and 20979

commit 10fbbac4bed59e12ad794ac873dd415d9ee4e340
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 31 15:14:27 2009 -0400

    Mac mini: fix connector setup for real
    
    fixes f061308e7abcf93d1612681b935387fee23e0a24
    fixes bugs 20796 and 20979

commit 8f2a03bfc86422669a46c2853050979f099a17a8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 30 11:30:34 2009 -0400

    r1xx-r3xx TV: fix white noise
    
    should fix bug 13872

commit f061308e7abcf93d1612681b935387fee23e0a24
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 27 01:14:12 2009 -0400

    mac mini: fix connector setup regression
    
    fixes bug 20796

commit 47134ca77988f8c3b42d55ac4fcbb5dc182878d4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 26 17:18:47 2009 -0400

    radeon: re-enable r/g/b intensity attributes for overlay
    
    Noticed by sroland on IRC.

commit e2b5e48e2652daf03fcae852d8368f29ea4abcd9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 26 13:42:25 2009 -0400

    R6xx/R7xx EXA: rework composite pixel shader
    
    - move to vram storage
    - move swizzle logic to tex setup

commit 24dbd3f93c640f819a9f5029f5a49e41ab875bd4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 26 12:01:07 2009 -0400

    R6xx/R7xx: clean up logic in EXA Comp PS setup

commit 076e4e3ac1c81086aecb4e70dd30fd5d26ec7bc8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 26 11:36:26 2009 -0400

    R6xx/R7xx: clean up bool const code
    
    3 regs: 1 bit per bool, 32 bools per ps/vs/gs

commit d2c3964fe04be42fe538f36439ed5ffca96e436a
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Wed Mar 18 01:55:12 2009 +0100

    fix textured video allocation bug
    
    size needs to be calculated after dstPitch adjustments, got already fixed
    for earlier than R600 chips by planar textured yuv patches, clean this up.

commit 18e56eb179fde28477487c63e6f9ebf7579e2cd5
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Thu Mar 5 02:07:46 2009 +0100

    don't convert planar yuv to packed for r200
    
    uses 3 textures for planar yuv and does yuv->rgb conversion in the shader.
    Similar to r300 code, but might have precision issues - hardware alu should
    have enough precision but hardware consts are only 8bit and we'd want
    at least 11.
    This also enables textured video on rv250 (and also supports packed yuv
    on that chip by using basically the same shader with packed data).

commit 58530bf4912800f9e09ebaea42a13cff8a80c19e
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Sat Feb 21 04:46:31 2009 +0100

    don't convert planar yuv to packed for r300
    
    uses 3 textures for planar yuv and does yuv->rgb conversion in the shader.
    small performance advantage, but manual texture cache setting is necessary
    otherwise it may be measurably slower (but probably not relevant) in some
    cases.
    Unlike some other drivers, using MADs instead of DP3s, since this requires
    less instructions due to no MOVs are required, the end result is the same
    though the constants need to be different.
    Use of this is user settable for now (XV_HWPLANAR attrib).

commit 97e19d96ba65a3df2fa3bbf73cfcc01b6dc3e796
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Tue Dec 30 22:23:39 2008 +0100

    clip fixes
    
    This fixes some oddities observed when the video is only partly visible.
    Instead of recalculating the geometry of the video, always use the same.
    Also fixes a assignment present twice, and another issue (bring in line with
    what the overlay code does).

commit 7aaf5f08e4147b75c4975e6d680d3f5a93424164
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 23 12:55:02 2009 -0400

    R4xx ATOM: fix crtc routing for CRT1
    
    should fix bug 20814

commit 2fe6b393d9dbb193d4f0a3351ad76618cda07e2c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Mar 22 01:31:30 2009 -0400

    radeon: add new chip ids

commit 1ddee7cd6fd267b2fc86f21af27c5425eb0835a4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 20 13:44:00 2009 -0400

    DCE3.2: use RMX for for non-native modes on DVI
    
    DVI seems to have issues with low dotclocks, so
    use the scaler instead.
    
    Fixes bug 20754

commit 44081e8fd2bf974272d5447b45dd7b206cf939c1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 19 20:48:16 2009 -0400

    R6xx/R7xx EXA: fix maxPitchBytes
    
    should now allow accel up the hw max of 8192x8192

commit e8e2367b66d9a4f5977d95f52b37cdbad75e409a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 19 20:09:32 2009 -0400

    Add new pci ids

commit 68e83f10adb23fc359c1da881f5d666cd08b4067
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 18 20:58:19 2009 -0400

    bump version post release

commit a196aae19603c8651dc502f5cb0df4d55befe163
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 18 20:52:12 2009 -0400

    bump for release

commit 537da7018b0fd2ad263fc5cdc55b3b85cf8e9205
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 18 19:22:55 2009 -0400

    ATOM: fix up tv-out support
    
    - fix purple hue when using ATOMTvOut option
    - fix TV load detection on newer r6xx/r7xx chips
    - disable CV for now

commit c0e2513ab128ddd5be0ed626d9e31777a98983ef
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 18 14:08:30 2009 -0400

    R6xx/R7xx AGP: disable gart data transfers
    
    UTS/DFS/Xv
    
    Doesn't seem to be reliable on AGP.
    
    fixes bugs: 20436, 20236, several reports on ML and IRC

commit e3e1f0c7b892b094b292081021a0e97932b8e079
Author: Fabio <fabio.ped@libero.it>
Date:   Wed Mar 18 12:13:53 2009 -0400

    man page update

commit 6ae54d3ea023968887bf0cb0ec1be2115621d554
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 18 11:50:22 2009 -0400

    AVIVO: Fix dac load detection

commit 04e36b794c216e4fa77c780fd989df1ef1c7f0d9
Author: Fabio <fabio.ped@libero.it>
Date:   Tue Mar 17 11:29:26 2009 -0400

    man page updates
    
    from bug 20648

commit a6855c370194b6df307ea33724fe17a85d67607e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 16 13:52:42 2009 -0400

    radeon: add another AGP quirk
    
    bug 20647

commit a55ced5ee20c07e743c7c0978803fd10589c1531
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Mar 15 12:08:04 2009 -0400

    Fix fallout from r6xx/r7xx EXA merge in IB handling
    
    Noticed Christiaan van Dijk.
    Should fix bug 20510

commit a065eeb9b301ab452cc8fbd3cac1fd9a3841c4e1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Mar 14 18:40:28 2009 -0400

    atom: fix up bios scartch register usage
    
    the bios scratch registers keep 3 types of state for each output:
    1. dpms
    2. active
    3. connected
    
    some of the command tables use the active flags.  We used to set the active
    flags based on dpms state, but instead set them based on whether they are
    connected or not.

commit 5c4ef924d082fd3b279f62fda7a97f563b009d38
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Mar 14 18:16:49 2009 -0400

    radeon: fix typo in bios scratch reg setup

commit 96fce5a56269509a935e8ee621a5e17cc9005ddc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 19:29:58 2009 -0400

    Bump post-release

commit 8da1b82a70de7b3ef38905bd77c58a20fd44ddd6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 19:23:19 2009 -0400

    bump for release

commit 28d9d699dcdff394aa561505f7f54f08db800828
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 18:18:31 2009 -0400

    radeon: man page updates

commit 06963796d00b5cb6704412a7d4417fcefae4aa4d
Author: Adam Jackson <ajax@redhat.com>
Date:   Fri Mar 13 18:14:43 2009 -0400

    uniphy: start adding DisplayPort setup

commit 1db81afe4f8db55e02a65cd22ad84c6bbb27e8ef
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 17:51:56 2009 -0400

    radeon: add support for 30 bit LUTs
    
    All radeons have them.  Thanks to Yang Zhao for figuring
    this out.

commit 5bb326c64ad3bf5c93943280dcbcb25c8910d1aa
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 14:10:58 2009 -0400

    R6xx/R7xx: EXA VSync Option not supported yet

commit 8c2d40894448329e721360811c124998a17ba2ba
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 14:03:43 2009 -0400

    R6xx/R7xx: fix up vline stuff along the lines of previous chips
    
    Avoids an additional function call.

commit 176c1b43fc3ee48e87c134446754360b3683c24b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 13:28:42 2009 -0400

    R6xx/R7xx: return in RADEONWaitForIdleMMIO() if accel is off
    
    Don't wait for engine idle if we haven't initialized the engine.
    Behavior should be consistent with versions of the driver prior
    to accel support being added.
    
    Should fix bug 20645

commit d538a4508248adf2debaf0cc870a2d1c48abd986
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Mar 13 13:22:03 2009 -0400

    R6xx/r7xx: clarify accel messages
    
    We only support EXA and and only with DRI.

commit 1b7090a4c0d6a38701fbfb928fac8e15d40fb81f
Author: Adam Jackson <ajax@redhat.com>
Date:   Fri Mar 13 17:41:59 2009 -0400

    Add some more cases to the DVI single-link checks.

commit 104e13da74de37477e3a31a5de96c5ebb8fe888b
Author: Cooper Yuan <cooperyuan@gmail.com>
Date:   Fri Mar 13 11:47:43 2009 -0400

    radeon: save bios scratch registers in Preinit()
    
    The display detect routines can change these which causes
    havok with some bioses.

commit f70d7a0fd9ac3659d93511ab362eb80a7ff49777
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Mar 13 12:56:29 2009 +1000

    r600: reload shaders into VRAM on resume
    
    As VRAM gets zeroed out over s/r, we need to reload the
    shaders.

commit 1fe0dcfe98dfe30499ba53c1f208c4ef10bef001
Author: Yang Zhao <yang@yangman.ca>
Date:   Thu Mar 12 18:50:32 2009 -0400

    R6xx/R7xx shader: Fix OFFSET_[XYZ] macro for TEX_DWORD2 to accept floats
    
    Values for OFFSET_[XYZ] are 5-bits two's-complement fixed-point with
    one-bit after decimal point. Values in [-8.0, 7.5] are valid. Inputs
    that do not exactly land on 0.5 increments are rounded towards 0 to the
    nearest increment.

commit f356ca7795531e0c080775efb598141eb7db44ba
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 12 03:42:40 2009 -0400

    RS600: fix page table size for rs600 as well

commit ef69336584c45e35aabb797a06c4030e75d66507
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Mar 12 14:54:18 2009 +1000

    r600: fix sizing of PCI GART table for r600

commit 945ccbbd4fa2b65ccdfb23716c178c95b036734d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 10 09:53:14 2009 -0400

    radeon: clean more thoroughly in RADEONFreeRec()

commit 03ec2099fdc859b23e5fa56ac8696ec045f1b110
Author: 오유연(Yu-yeon Oh) <yuyeon_oh@tmax.co.kr>
Date:   Tue Mar 10 09:51:08 2009 -0400

    radeon_driver.c small memory bug

commit 60dac878cc8626b0821c4c7a6a6dfa12a5597cfa
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 9 20:48:39 2009 -0400

    R4xx: add R4xxATOM option
    
    If set, enables the use of atombios for modesetting
    on r4xx cards.

commit 758fcc33c232c32e7b66261fca51de161d1a4800
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Mar 10 10:34:13 2009 +1000

    r600: enable DRI by default
    
    fallback to shadowfb if DRI fails pre init

commit 7735e411954fd2cb6105c30ebd5a1b209974ce22
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 9 17:49:25 2009 -0400

    R6xx/r7xx: clarify EXA message

commit 1d355798f3d421cabf2a3a0ba32a580483476ab0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 9 15:13:01 2009 -0400

    AVIVO: fix panning
    
    low 2 bits of X need to be 0.

commit d1add18f3d238c755f9875b5e5c211e4af742482
Author: root <root@benzylpiperazine.boston.devel.redhat.com>
Date:   Fri Mar 6 17:53:59 2009 -0500

    output: Filter out dual-link modes from DP->DVI connections
    
    There's not enough pins on a DP->DVI connector for this to possibly work.

commit 04481bf450650d1ea5aadabc9213b899b0fe8119
Author: root <root@benzylpiperazine.boston.devel.redhat.com>
Date:   Fri Mar 6 17:32:15 2009 -0500

    atom: Enable DisplayPort source to DVI/HDMI sink
    
    DP source to DP sink still doesn't work yet, of course.

commit 0ba73e040b94590867f8b1071a26da2526a3c375
Author: Adam Jackson <ajax@redhat.com>
Date:   Fri Mar 6 15:38:00 2009 -0500

    output: Allow for multiple DisplayPort outputs.

commit 8f7c17a6b77ca368f067c2acb803cc8f9ef19351
Author: Tormod Volden <debian.tormod@gmail.com>
Date:   Fri Mar 6 09:42:39 2009 -0500

    RV350: Add AGPMode quirk for Thinkpad
    
    fixes bug 15096 (and Ubuntu bug #195051)

commit 5dc4b69fbdd0e8ca48cc00321f193260a8f10bd0
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Mar 5 12:26:04 2009 -0500

    radeon: add a few more default common modes for lvds

commit 3b0fc22ad9e5c0f120a74c4f3d8e48c270f0ff29
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 4 19:04:34 2009 -0500

    R6xx/R7xx: wire up DMAForXv option like older asics
    
    Select between SW and HW-assisted uploads

commit 52f06ace04ad8141effc45fb6a0107a05bb46a73
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 4 18:51:44 2009 -0500

    R6xx/R7xx: disable XV_BICUBIC attribute
    
    It's not implemented yet.

commit b1fd883b59b85fed8782e035890098908902f4ce
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 4 11:17:16 2009 -0500

    RN50: fix up cloning on servers
    
    Since the rn50 only has one crtc, but often has multiple outputs,
    occasionally one of the outputs doesn't get a crtc assigned eventhough
    the outputs may have common modes.  If we see an output with modes, but
    no crtc, assign it so all the attached outputs light up.
    
    fixes bugs 19457 and similar ones

commit 592bcac52f113a95923a8f1cb8427e7552d5670b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 4 10:53:20 2009 -0500

    ATOM: don't use fixed ref div for LVDS
    
    The bios doesn't provide one.  If there are problems
    with certain panels, we may need to adjust the PLL flags
    in certain cases.
    
    Should fix bug 20458

commit e88b0eac8cab8b54b769fd7b4ad3b3b65a90de09
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 4 02:52:36 2009 -0500

    radeon: just add some common modes for LVDS
    
    avoids needing to hack around with the edid

commit 2bb319fd80d20a3d4e5cc9416891bc7e4c3e431e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Mar 4 02:50:45 2009 -0500

    Revert "radeon: adjust LVDS so that default modes get added"
    
    This reverts commit 1a2b16561d19ec9c027c562902f5fc086c856994.

commit 1a2b16561d19ec9c027c562902f5fc086c856994
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 3 20:21:17 2009 -0500

    radeon: adjust LVDS so that default modes get added
    
    we can scale, so add the default modes.  for panels
    with an EDID, set the continous freq bit.  for panels without
    and EDID, add a FAKE edid with the continous freq bit set.
    
    Based on similar code in the Intel driver.

commit 71117970df36cbe689ef15e9a6cca24439b4cd62
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 3 19:40:30 2009 -0500

    AVIVO: add aspect scaling mode
    
    No luck yet for aspect on pre-avivo chips

commit d586a2c6f821c821a4a7708a3382acb63187534f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Mar 3 12:17:30 2009 -0500

    Rotation: don't rotate if acceleration is not active

commit fdc64948119e2218921b4dc0a492522442668875
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 2 16:33:46 2009 -0500

    R6xx/r7xx: remove some unneeded code I missed in the last commit

commit 4ad1c4decfee653dbbc1ea2ca4270487be622382
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 2 15:38:35 2009 -0500

    R6xx/R7xx EXA: cleanup composite texture setup

commit b7164ac4ad55e5d0fc474df8ae762b469b91ba30
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 2 04:08:09 2009 -0500

    R6xx/R7xx EXA: combine composite mask/non-mask VS
    
    Also fix set_bool_const()
    the CF bool consts are not contiguous by shader type
    There are 96 boolean constants (32 each for PS, VS, GS) and
    they are ordered as follows:
    ps, vs, gs ... ps, vs, gs

commit fa98f424de739be2c6005b740a74bbf1ee968a8b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Mar 2 02:28:57 2009 -0500

    R6xx/R7xx Xv: combine packed and planar shaders
    
    use a bool const to select the tex fetch routine

commit ccde35c3eda3fff0de29eb8c6fdc392629724a34
Author: Christian Koenig <deathsimple@vodafone.de>
Date:   Sun Mar 1 23:38:37 2009 -0500

    R6xx/R7xx: move shaders to r600_shader.c and fixup Xv PS
    
    patches from Christian Koenig with some adjustments from me

commit a8e631c1b1c9b46602aeca66f8e7e68154d0bfc8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Mar 1 22:30:31 2009 -0500

    R6xx/R7xx: code cleanups

commit 528061d51bb4248d6fabec9579dead32a730467a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Mar 1 18:28:13 2009 -0500

    R6xx/R7xx: write vertexes directly to the IB
    
    Reduces the vertex buffer setup overhead

commit 96a0bafa16dbb67a3d10fa6fe45be13930495ddc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Mar 1 17:58:36 2009 -0500

    R6xx/R7xx: switch emit functions to macros
    
    This improves performance due to decreased function call
    overhead.

commit cbd579c41a16bddcbb8793eac2a41f2e958bef4d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Mar 1 13:16:20 2009 -0500

    Print a message when we have a shared DDC line

commit a7f465f73363fce409870f62173d518b1bc02ae6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Mar 1 12:39:31 2009 -0500

    R300: Add AGP quirk
    
    bug 7770

commit 017bc7f34de2e40919f0e711205b78ee4e3643f6
Author: Tormod Volden <debian.tormod@gmail.com>
Date:   Sat Feb 28 10:33:35 2009 -0500

    M9+: Add AGP quirk for Sony Vaio

commit 49b57767d0d2c041517b0764c2ed2d2ba5a7092c
Author: Bryce Harrington <bryce@bryceharrington.org>
Date:   Fri Feb 27 20:31:03 2009 -0500

    Quirk for RV280 on 82865G/PE/P DRAM Controller/Host-Hub
    
    Solves issue where display suffers from line corruption.
    (See https://edge.launchpad.net/ubuntu/+bug/300304)

commit 150abd4123664eab65ea43585dbdb9b3151c46af
Author: Tormod Volden <lists.tormod@gmail.com>
Date:   Fri Feb 27 11:23:32 2009 -0500

    Janitor: cosmetic clean-up of AGPMode quirk table

commit c7d344f0ad255761d5ae30da59cf0a8b532dfc68
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Feb 27 17:05:01 2009 +0100

    EXA: Make sure Prepare/FinishAccess hooks can handle EXA_PREPARE_AUX* indices.
    
    And signal this to the EXA core using the new EXA_SUPPORTS_PREPARE_AUX flag.

commit f4d57105fc869e9318f447a1514f1b284a0a4ec0
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Feb 27 09:23:24 2009 +0100

    Revert "EXA: Adapt to EXA changes in xserver Git."
    
    This reverts commit de358736dc696559ba99c71cf5b2a97508201630.

commit 3285a4af17b19f2d1c24eebfb6aa51cddcf3ca50
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 26 17:31:13 2009 -0500

    DCE3.2: fix up Save()/Restore()

commit 4fc978f3d83ef6370c9715e7ca5350640ccbfe10
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 26 12:10:08 2009 -0500

    R6xx/R7xx: use shadowfb if DRI is disabled

commit 000756e052a291230e5c95e48b69a5aa9c4fab0e
Merge: 22d7746 8373f43
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 26 11:44:13 2009 -0500

    Merge branch 'r6xx-r7xx-support' of git+ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 22d7746bfc1bcbb3269afac88971254088ea9ece
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 26 11:00:46 2009 -0500

    RS600: enable the DRI by default

commit 8373f4399b03961f2c928a9275d47e9f41bd92bb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 25 09:16:38 2009 -0500

    R6xx/R7xx EXA: same surface and same coords equals nop
    
    should fix bug 20305

commit c74727015453ff3c3d6d06b812ebca9eb19a9767
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 24 11:08:46 2009 -0500

    R6xx/R7xx EXA: init copy_area to NULL

commit 95ce13572dc2d9f5dd6cf55c23411e275c0aadf1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 24 10:51:13 2009 -0500

    R6xx/R7xx EXA: Optimize temp surface for overlapping copies
    
    - allocate temp surface in PrepareCopy()
    - fall back to old OverlapCopy() path if we are not able
    to allocate a temp surface

commit 1a7db3fc2a0277d724d60d028064d8ef75019c28
Author: Mark van Doesburg <mark.vandoesburg@hetnet.nl>
Date:   Tue Feb 24 10:44:19 2009 -0500

    R6xx/R7xx EXA: use a temp surface for overlapping copy

commit 957c2ba3459af152ad16a3f6dd4631044f9df6f9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 24 09:43:58 2009 -0500

    RS600: fix MC addr mask
    
    Noticed by osiris on IRC

commit de358736dc696559ba99c71cf5b2a97508201630
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Feb 24 08:30:23 2009 +0100

    EXA: Adapt to EXA changes in xserver Git.
    
    The PrepareAccess hook can now get six different indices.
    
    Also remove superfluous instances of #include "exa.h".
    
    Note that you may need to run autoheader manually to get config.h.in updated.

commit 752b0218af36a45b333a12f66dfdce8c1e662aa8
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Feb 24 08:13:06 2009 +0100

    EXA: Pass pScrn and info into RadeonCompositeTile.
    
    Saves some cycles looking them up.

commit e2e508bc08d993fc108297e9cd2fa0ce183282bc
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Feb 24 08:12:42 2009 +0100

    Only call RADEONWaitForVLine if it might actually do anything useful.
    
    Otherwise it and RADEONBiggerCrtcArea show up pretty high in x11perf -aa*text
    profiles.

commit 5ab8699c97c050424cf813b9a60550aba32446a2
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Tue Feb 24 08:12:23 2009 +0100

    Fix compile warning when building without EXA.

commit 132e61741185f4a1114e66a34bdbf21e08e4d5d8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 23 12:13:41 2009 -0500

    radeon: re-enable load detection output attribute for TV/CV

commit 918d511f6f26d2fdeb63d6e32cd348707b4a2140
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 23 10:22:19 2009 -0500

    RS600: fix up MC setup
    
    Please test if you have an RS600

commit 27f8ca2cce65be2bcb3375231886d5444d251808
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 19 21:18:07 2009 -0500

    R6xx/R7xx: add wait for idle MMIO path

commit 1f783117f79f95f1744681ccc7d80dc0e7b53057
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 19 21:07:06 2009 -0500

    RBBM_GUICNTL is pre-r6xx only

commit f3933ed200dbf61b05a114f7697f2bb68d92abe7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 19 20:12:33 2009 -0500

    Don't write new HDP location until we've written the new FB location

commit 7f6801abb4bbd79830999d99ccdbd672a9984df6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 19 19:02:52 2009 -0500

    radeon: one more 32 -> 64 just to be safe
    
    missed this in cadae2a8d9979b2d61eae7d1f7a9ab8f5eb28e83

commit ca22390c8a5256bbc8eeff775d5eebf0e892d890
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 19 18:58:40 2009 -0500

    R6xx/R7xx: fix up a few more paths

commit cadae2a8d9979b2d61eae7d1f7a9ab8f5eb28e83
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 19 18:50:49 2009 -0500

    Fix MC setup on systems with more than 512 MB of VRAM
    
    many thanks to app4des on IRC for helping me sort this out.

commit 42492c70c481c88911337eefb97ba9d030adf7b6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 19 10:20:28 2009 -0500

    R6xx/R7xx: wait for MC idle when changing the MC
    
    should fix bug 19984

commit e6475282486f4895bc68f6b093ecbb1aa6d25f72
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 20:21:13 2009 -0500

    R6xx/R7xx Xv: fix some missing bits from last commit

commit adff8906c9899dde7711382577a63f4a726437ca
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 20:01:57 2009 -0500

    R6xx/R7xx EXA/Xv: properly deal with running out of vertex buffer space
    
    As noted by mhopf, if VGT_MAX/MIN_INDX, etc. regs change, you need to re-emit
    CB blocks to avoid a hang.  So, just set the VGT_MAX_INDX to a reasonably large value
    in the default state and don't touch them when drawing.  When we run out of VB space,
    just draw the current buffer, grab a new one, and continue.

commit cf85d4a1d43a3209c7ca9307aede2c2c243f7130
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 19:02:56 2009 -0500

    R6xx/R7xx: reset 3D state after VT switch

commit 6545f0a2967414fa518a78440060b8b69c0146ee
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 18:15:18 2009 -0500

    R6xx/R7xx: fixup accel paths

commit 61311b1de019c5a2344928a47347a966c229b08a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 17:27:05 2009 -0500

    Bump version post release

commit 0d3d1f1f7b450dabd3ad7d2df26ad1c72709b29b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 17:24:57 2009 -0500

    bump for release

commit 76a32f8391317513538dafee49cbb61c0d756356
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 16:31:44 2009 -0500

    R6xx: Connector quirk for asus board
    
    bug 19943

commit 97b8482dba4e99088b59d3ab1396be98a70e823e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 13:27:15 2009 -0500

    Set default RMX type to FULL on LVDS

commit 7d22b1799b34010d34c3600d6cb02ffe839a0780
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 12:55:40 2009 -0500

    DCE3.2+: allow output cloning

commit 1a237a40958c006c56b80850bd77b2ac6c17e030
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 18 11:46:20 2009 -0500

    ATOM: reset crtc initialized flag on CloseScreen()
    
    additional fix needed for bug 16781

commit 9a108f0a0b7203458673ce6221e747a166d39617
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 17 19:52:27 2009 -0500

    ATOM: don't unblank uninitialized crtcs
    
    If the crtc timing isn't setup, you might get stuck in a loop
    in the BlankCRTC command table
    
    fixes bug 16781

commit 3dff20e276615e8b77177689a4a5f8d91b3e8eac
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 17 13:14:38 2009 -0500

    R6xx/R7xx EXA: switch to surface sync packet

commit 31bd6d28dd35021e0e706d4f094989deb856c26a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 17 11:24:02 2009 -0500

    Fix crtc routing on pre-DCE3.2 systems
    
    This should fix peterz and bug 20074

commit 3c9e00c7f2ed494976713e8f77b729e0d76409db
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 16 16:18:42 2009 -0500

    RV350: add another AGP quirk

commit 036a17bec5dabbb91640b907811da060dac154d6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 16 13:10:45 2009 -0500

    RV280: add another agp quirk

commit 00ac9d2f8d58725d0d3e6b1bf7f728d9ae7e6109
Author: David Miller <davem@davemloft.net>
Date:   Sun Feb 15 18:26:14 2009 +1000

    GART: Save/restore GART table consistently.
    
    Always save the GART table with the RADEON_SURFACE_CNTL register
    zero'd out to make sure we always use the same endinanness.
    
    fixed up as per Michel's suggestion for endianness.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 2de90c8349409eb892edc57fd24b61b679eb7719
Author: David Miller <davem@davemloft.net>
Date:   Sun Feb 15 18:24:01 2009 +1000

    DRI: Fix page size used in RADEONDRIGetPciAperTableSize().
    
    The ATI GART has a fixed size of 4096 bytes.  So using
    the system page size here is wrong.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 7cde00f49649e25fd5816927c7a5e28b608fabcd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 12 17:39:44 2009 -0500

    R6xx/R7xx: switch to drm for wait for idle
    
    THIS REQUIRES AN UPDATED DRM

commit e22cd4011b9be437ba89bff568e7fb82b4907d99
Author: Yang Zhao <yang@yangman.ca>
Date:   Thu Feb 12 14:46:53 2009 -0500

    R6xx/R7xx EXA: Further optimizations to overlapping copy
    
    Diagonal overlapping copies can be reduced to either horizontal- or
    vertical-only offset, and the one with fewer copies is picked.

commit da08b760bcf3d04d775c4440fafec10657bb1863
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 12 13:53:11 2009 -0500

    R6xx/R7xx EXA: handle running out of vertex space in the copy path

commit e3be312b0b73982c24f1f5d9cf76d7caafae0853
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 12 13:48:36 2009 -0500

    R6xx/R7xx EXA: properly handle non repeat cases in the texture setup

commit 3ff1eb7e50fef22adb6280dd7de77c3ecafdb451
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Feb 12 19:24:41 2009 +0100

    EXA: If making a pixmap offscreen fails, return ~0ULL as texture offset.
    
    This allows AIGLX to fall back to the non-zero-copy code rather than messing up
    the 3D driver.

commit c19aa4fc8da7ac4745624098b146bcc42c0436dd
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Thu Feb 12 19:22:12 2009 +0100

    EXA: The source tiling code can't handle RepeatReflect yet.

commit adc35636aa1e936ec74cba8931ccffe2b5c11656
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 12 13:10:53 2009 -0500

    R1xx/R2xx EXA: fix non repeat texture setup

commit c6e1bf75c399807716b99486ab3301aeba60fa79
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 12 12:49:24 2009 -0500

    R3xx-R5xx EXA: fix texture setup for non-repeat case
    
    fixes bug 19923

commit 0804dde9012cf33f614a1c2ee6d5d0def040a9af
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 12 12:02:57 2009 -0500

    AVIVO: fix dualhead/rotation for real

commit 3e5ac32f747bef70903e9cdf41652a827eece707
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 17:40:20 2009 -0500

    Revert "R6xx/R7xx: handle running out of vertex buffer space"
    
    This reverts commit 4fd7228de7ad88edf825dbc3039df877795a9479.
    
    Causes lockups.

commit bd141aa73a77f68301715fb3b5664e2082327a80
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 15:31:47 2009 -0500

    R6xx/R7xx Xv: switch packed over to Yang's new shader code

commit cb4a1ceaa32d6847b146a31291772e1183972ee7
Author: Yang Zhao <yang@yangman.ca>
Date:   Wed Feb 11 15:18:00 2009 -0500

    R6xx/R7xx Xv: Planar - Properly scale Y'CbCr values before converting to RGB
    
    According to MPEG-2 spec, Y' and Cb/Cr values are scaled to [16, 235]
    and [16, 240], respectively, when packed into bytes. Properly take care
    of the reverse scaling before translating to RGB.
    
    Conversion matrix has been simplified to remove 3rd column, as the fitting
    to [-0.5, 0.5] can be done with scaling.
    
    Redundant MOV instructions were also removed, and now only 3 GPRs are required.

commit 4fd7228de7ad88edf825dbc3039df877795a9479
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 14:46:02 2009 -0500

    R6xx/R7xx: handle running out of vertex buffer space
    
    draw current VB and start a new one.

commit ec60ef094762901ede4df5cde55c3f162e8c667b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 13:05:27 2009 -0500

    R6xx/R7xx: be more verbose about what function ran out of VB space

commit e7dedbc355970407eddb38370b58a8c96d204c1d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 12:45:14 2009 -0500

    R6xx/R7xx: Move engine idle to sync functions

commit 4a759a907ecd571460c7ff64cd6288380359b04b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 12:29:50 2009 -0500

    adjust alignment

commit d98359b20e1eb8eae893581ab199c299c8352dc4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 12:03:56 2009 -0500

    Revert "Radeon EXA: wait for the engine to be idle before sw access"
    
    This reverts commit 0c4694c58f2ec152b19023626bc7ced891d9da65.
    
    This patch just adds latency and thus isn't a real solution

commit d6c50b221cbab6e726948e2310c1def9fc38da64
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 11:05:02 2009 -0500

    R6xx/R7xx Xv: add support for packed uploads

commit 8e437e996cc3f2c424c342701f4aa6bcf72ad08e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Feb 11 10:53:50 2009 -0500

    R6xx/R7xx Xv: Add native support for packed formats

commit 0c4694c58f2ec152b19023626bc7ced891d9da65
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 10 17:08:37 2009 -0500

    Radeon EXA: wait for the engine to be idle before sw access
    
    Really we need proper fencing with timestamps but this should
    help in the short term.
    
    This should help with minor corruption issues and possibly
    lockups.

commit 13ab61d90bb58112bef4ce7267ef127935315f80
Author: Fabio <fabio.ped@libero.it>
Date:   Tue Feb 10 10:50:30 2009 -0500

    man page updates
    
    bug 20030

commit 615f2f202cee5f0dd2c6b29329f843bb1c9c70d5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 10 10:17:47 2009 -0500

    Bump version post RC release

commit 1b4afc1c9f8458f9ab3434418f4ccf959f532ac1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 19:50:37 2009 -0500

    R6xx/R7xx: Add checks to make sure we don't overrun VB space

commit ff6efe513e0c3148812d6a9578d2265522417053
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 17:43:24 2009 -0500

    ATOM: warning fixes

commit 87ad9006f3dafb45e131c9a3d6df713321f39998
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 17:40:41 2009 -0500

    RV350: add AGP quirk
    
    bug 19981

commit 610b8b65fd7aa97f9c03b2ff6ae607aa959eab0b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 16:33:20 2009 -0500

    Bump for rc release

commit e85b7a1c5948b5123eddf9dfbb9e002d74fbe9fb
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 14:13:16 2009 -0500

    R6xx/R7xx Xv: fix cache flush buffer size for planar

commit 2a893bac1faffd28dce6d9a9693108196c71e6d3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 13:18:17 2009 -0500

    R6xx/R7xx Xv: add accelerated uploads for planar formats

commit 231aee18a73805be2f6c962e94a8345dd89fd0df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 13:02:27 2009 -0500

    R6xx/R7xx Xv: implement native shader for planar formats

commit 6c76bfe8105e3cf4e7e6ea1bfe1235be2079110f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Feb 9 09:47:22 2009 -0500

    R6xx/R7xx UTS: move actual upload to separate function
    
    So it can be shared with Xv

commit 04859362ce64ed4ae48305a83c92059899c1db4b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Feb 8 20:13:06 2009 -0500

    Add some missing r6xx/r7xx pci ids

commit 132e4c575dc4675f4995e45f08c53c26bffd999a
Author: Yang Zhao <yang@yangman.ca>
Date:   Sat Feb 7 13:54:51 2009 -0500

    R6xx/R7xx EXA: Optimize overlapping copy
    
    Overlapping copy is now done in chunks proportional to the
    non-overlapping area.
    
    Diagonal overlaps are also handled properly.

commit 8e9ef8ff581892cbe1b7ea56d48b9a1abd70179d
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Sat Feb 7 18:57:47 2009 +0100

    Xv vsync support on r6xx/r7xx cards.

commit 2222f0fd700f100b2e91fac2babe7d1b53f56c3e
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Sat Feb 7 18:56:42 2009 +0100

    Fix bad range adjustment in VLINE code.

commit 8ce6c024e31f6a3f5ae6c882738b1e64ae2944a1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Feb 7 10:32:01 2009 -0500

    R6xx/R7xx Xv: fix typos in cache flushing commands

commit bba5d806cc46328ad9e4c521bfeeb2a59f96862b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 6 19:44:17 2009 -0500

    AVIVO: better fix for rotation
    
    This should handle initial rotation as well.

commit 28cf3492f431f325cb08d7c6aade43d8886df3f6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 6 19:20:18 2009 -0500

    AVIVO: fix rotation
    
    When rotation is active, virtualX and virtualY change.

commit 1b45936ae614244aa49b1a5d3c7fc39773c4f9b6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 6 18:29:55 2009 -0500

    R6xx/R7xx EXA: Fix typo in DFS
    
    noticed by pzad in IRC

commit c06d89e16d5b2553142e8641e66080e1770c1563
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 6 18:07:22 2009 -0500

    R6xx/R7xx EXA: fallback on overlapping blits for now
    
    Leave this disabled until we get a proper solution.

commit 1d5fc3febf3470b94c423a1eda5e0683856909df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 6 14:43:30 2009 -0500

    Revert "r6xx/r7xx EXA: Optimize overlapping copy"
    
    This reverts commit 0dfadc1843e0d14b9cc1ee19a72f4fd60a2c495b.
    
    This doesn't always work properly.

commit def317e22d072405cd95ddb19d17eacd784ffd9e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Feb 6 11:04:59 2009 -0500

    R6xx/R7xx EXA: add accelerated UTS/DFS hooks
    
    I'm not sure how much of a win these are.  I need to
    do some benchmarking.

commit 0dfadc1843e0d14b9cc1ee19a72f4fd60a2c495b
Author: Yang Zhao <yang@yangman.ca>
Date:   Fri Feb 6 10:29:39 2009 -0500

    r6xx/r7xx EXA: Optimize overlapping copy
    
    When source and destination blocks are only offset horizontally, it
    appears to be unnecessary to perform careful, segment-by-segment copy.
    The code path that does this is taken out completely.
    
    For the case where offset is only vertical, copying is now done by
    height of the non-overlapping area each time, instead of always
    line-by-line.

commit 3d17bd199423e92d201c20f047d5e699942af976
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 5 19:25:03 2009 -0500

    Revert "R6xx/R7xx EXA: improve overlapping copy performance"
    
    This reverts commit b24827c9d211e8a35da53b665385a7733d19910d.
    
    This seems to cause corruption in some cases.

commit bf74055f543e7f0664741620fb1fe827ebc12711
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 5 17:31:43 2009 -0500

    r6xx/r7xx EXA: fix corruption when doing sw access
    
    need to wait until the engine is idle.  Ideally we wait
    on a timestamp shadowed in memory, but polling the
    GRBM_STATUS reg will do for now.

commit b24827c9d211e8a35da53b665385a7733d19910d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 5 16:21:37 2009 -0500

    R6xx/R7xx EXA: improve overlapping copy performance
    
    send vertices for each line of the copy, but only draw once

commit 729fe756f809a41494dc161252d82313956e4a4b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Feb 5 16:08:35 2009 -0500

    r6xx/r7xx EXA: cleanup overlapping copy

commit 16e01a5796a8e8b86ad25d3aa45b9e7044dc72d1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 3 19:46:10 2009 -0500

    Fix encoder accounting
    
    Should fix bug 19924

commit d7bf7b9c17add31dc9a115b56a563c7f9bf2cdb6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 3 18:28:38 2009 -0500

    EXA: fix and re-enable Solid() on R7xx
    
    missing last bit in alu clause in solid PS

commit 9abb09d5f43320bd27b336612d39d264fe93549f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 3 11:17:13 2009 -0500

    Fix bad rv710 pci id

commit e5b916770946a9eebcb4bd1e6f698220db8c718a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 3 10:48:41 2009 -0500

    Allow rotation on r6xx/r7xx

commit d1f071c7f1dad6babfbcfcc2cb2b722a4987f372
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Feb 3 10:44:10 2009 -0500

    Initial R6xx/R7xx EXA and textured video support

commit c88c3ef6f3db266c1aacba5297b8dfc8b66bf00e
Author: Wolke Liu <wolke.liu@amd.com>
Date:   Mon Feb 2 17:01:34 2009 -0500

    AVIVO: Save/restore vga pll registers
    
    This fixes some VT switch issues on some chips

commit 6fac3cefd1f46161c1e276ba40e72da2823aa9f6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Jan 31 14:21:02 2009 -0500

    Return NULL for encoder if no active device is assigned
    
    fixes bug 19855

commit db178c852d00e9b85513d750b5f8f7495f9e3360
Author: Alan Coopersmith <alan.coopersmith@sun.com>
Date:   Fri Jan 30 20:37:41 2009 -0800

    Add README with pointers to mailing list, bugzilla & git repos

commit fa8e5a4fc236f8f15f462cb0d6164b194a65a118
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Fri Jan 30 16:16:26 2009 +0100

    EXA: Accelerate Composite of RepeatPad/Reflect pictures when possible.

commit 3a6e958c59b4b44fe620c8abe760ed1abf0007b1
Author: airlied <airlied@roo.(none)>
Date:   Fri Jan 30 07:56:14 2009 +1000

    rs780: include RS780 in the InitMemory to leave alone
    
    This stops the MC_FB_LOCATION getting reassigned to 0, which
    is really bad thing to happen.
    
    I've had reported memory corruption on these cards so hopefully this
    fixes it.

commit bd8021d46e9066e4cd116c03a7b7adcfe2557aff
Merge: 4f88dd8 20d5dd3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 28 14:33:14 2009 -0500

    Merge branch 'atom-rework' and fix conflicts

commit 20d5dd387da555e895e2b73fb53e2b026dd91003
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 28 14:12:26 2009 -0500

    Move encoder specific data to encoder dev_priv

commit 4f88dd83f290fb38e41256a7f1804008c0f28139
Merge: 1c5678f 2ca970c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 28 13:13:13 2009 -0500

    Merge branch 'atom-tvout' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati
    
    Conflicts:
    
    	src/radeon_atombios.c

commit 1a62360e8260eaf5f98fa6be3f89f64c8cae7d32
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 26 10:11:28 2009 -0500

    Encoders not assigned yet, use supported devices
    
    need to move this to encoder setup

commit 44d9ceacb1fa6e1859d5d8bd1c55405aea24ad85
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 26 03:47:32 2009 -0500

    Fix legacy output setup
    
    don't have assigned encoders at this point.  Need to
    eventually move this stuff to encoder dev_priv.

commit 0c24cbcea56c8f36374aca0f8ba849adfbf0ecfe
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 26 03:24:19 2009 -0500

    ATOM: print useful output info for DPMS events

commit 2f92b885457c5cee2098ebbf8c6fe5a5eb98ec48
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 26 03:12:44 2009 -0500

    Warning fixes

commit 4cbf6189f3a7945a1141b0451e4f7881ceaaadcd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 26 02:59:51 2009 -0500

    Move legacy output setup functions to legacy_output.c

commit 93ed767255b60fbdf5b416b9bd06c366036a5141
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 26 02:40:41 2009 -0500

    Fix off by one when printing encoder name
    
    - also cleanup some debugging output

commit b515eee4b1cafae78ed39cd91c18b4f5e671b20b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 26 01:50:18 2009 -0500

    Additional output cleanup

commit 1c5678fc452dbc93135e9ece50a4cff6583f6078
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Jan 24 11:10:00 2009 +0100

    Drop memcpy fallbacks from EXA UploadToScreen and DownloadFromScreen hooks.
    
    While in theory it's possible for the PrepareAccess hook to fail on big endian
    platforms, in practice it isn't at this point because there's no other users of
    the surface registers.

commit 5cbd6082b9f8d7009ee9ef5e036673f99e1bfb05
Author: Michel Dänzer <daenzer@vmware.com>
Date:   Sat Jan 24 11:07:12 2009 +0100

    Don't transform EXA Composite mask coordinates when there's no mask.

commit 7e54c4b8acafead8de5d0dd6fdc1b619f832dd6f
Author: Thomas Jaeger <ThJaeger@gmail.com>
Date:   Fri Jan 23 20:03:27 2009 -0500

    Fall back to software for unsupported repeat modes

commit 289b4a377cfff0c2a8ec938951cfbae1e270570e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 23 20:00:43 2009 -0500

    Remove OutputType and other cruft

commit 5f98508effbdc1fd62d0df15798722c147d88da1
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Fri Jan 23 19:33:25 2009 -0500

    Make sure gb_num_pipes is initialized when DRI is disabled
    
    Found with valgrind

commit 0faab02cc732414af3cfb2014d3ddc1139aff063
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 23 17:35:01 2009 -0500

    Remove some unused cruft

commit 025082160c53c01a44f4d681cc63bf26ac4561d5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 23 17:31:18 2009 -0500

    track encoder state

commit 82f12e5a40c1fbcb91910a0f8b725c34fff02aae
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 23 16:21:33 2009 -0500

    Remove TMDSType, DACType, LVDSType from output rec

commit 7b42b57d748f77ff6ef6f8ade7cbc983a98d7204
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 16:28:00 2009 -0500

    few more logic pasto's bits I missed

commit fef1c12fbe4ceb4676258850d1fa5cac994f7c21
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 15:34:01 2009 -0500

    Fix compilation with RADEON_TRACE_FALL set
    
    noticed by curaga on phoronix forum

commit 1305376b009d17d65b4935896dc35cb7530f7c52
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 15:20:47 2009 -0500

    Move active_device setup to detect()
    
    Also add encoder debugging printouts

commit 9e0cc0ca5d7bc68756ae92ee3b5b2392366be71a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 14:47:08 2009 -0500

    Fix logic cut and paste error

commit 12010ae9296635ffa5f42ce0cd14482aaa290cf7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 13:52:11 2009 -0500

    More legacy rework

commit 3f8bbede8bf639050f773780888b89cbdcb425b8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 13:45:11 2009 -0500

    fix legacy crtc routing and add some debugging info

commit 80e0162ea2c1f793964731268251aba2d3243127
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 13:28:14 2009 -0500

    ATOM: fix encoder init

commit aea27d9caabb0e54e868a21e6e547733a4ca2709
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 12:33:49 2009 -0500

    Switch legacy output code to use new encoder objects

commit 9b44a4b57b00b150d041a5d82cb2df42159c062b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 11:32:24 2009 -0500

    ATOM: more output cleanup

commit 9e283fa9de34407fa6f0d5a8006a611b104f4bf2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 03:16:20 2009 -0500

    Fixup encoder setup on pre-ATOM chips

commit 5850abbdcd22b70bdbccd3642f8ba1a27e38e7cd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 21 02:28:47 2009 -0500

    clean up encoder setup
    
    - make sure not to duplicate encoders
    - use single encoder array

commit 152d1d4c179c262be4d0a5618400aa13b4820342
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 20 00:58:18 2009 -0500

    First pass at converting legacy code to encoder objects

commit 7cc7ba8bf9ce2f0eebfd9b48aa648c416c333ff4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 19 18:42:12 2009 -0500

    ATOM: round 1 of output rework

commit 25f3878858e6efb486888e5271b60d4ba08c73c6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jan 19 15:54:42 2009 -0500

    start to re-org outputs

commit cbeb310d35e5ea25ba7a45a2c555468391cdf29e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 16 19:53:49 2009 -0500

    ATOM: switch to define for external tmds

commit d0d157abced43f822885fa26f14a4924766594cd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 16 19:51:07 2009 -0500

    ATOM: combine DAC setup functions
    
    plus a few other clean-ups

commit f6f969338f8187529c7ae9b2adc980b71a3f5837
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jan 16 18:10:34 2009 -0500

    DCE30: LVTMA requires DIG2 encoder
    
    Fixes bug 19544

commit 549ae63aecc2624a69b41ce4db75883d03d59c23
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jan 15 19:26:40 2009 -0500

    RV280 Add another AGP quirk

commit 0e69068a8ed82e3fb7349d8224933451955e5f16
Author: Tormod Volden <debian.tormod@gmail.com>
Date:   Tue Jan 13 20:31:17 2009 -0500

    [PATCH] Add yet another AGP quirk for RV280

commit b437da34cb4f7c637674fb432ad81b9bf32244a3
Author: Christiaan van Dijk <dvbmail@xs4all.nl>
Date:   Mon Jan 12 11:54:15 2009 -0500

    R3xx/R4xx: Maximize the use of clipped triangles for Xv rendering
    
    While trying to get tear free video on my RS690 I found some problems in the code for rendering the
    video as a clipped triangle. The size limitations are quite strict and scaling the video output window
    creates all kinds of weird effects. This patch maximizes the use of this function and resolves the
    scaling issues. There could be a problem with zero target height/width, not sure if this is handled
    elsewhere.

commit 3d106b990fa8daba96e590c57b164640a2faae7f
Author: Alan Coopersmith <alan.coopersmith@sun.com>
Date:   Fri Jan 9 16:26:04 2009 -0800

    Remove xorgconfig & xorgcfg from See Also list in man page

commit 14d29a223028c183ba11e717a3737285d0ac8de1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 7 17:04:42 2009 -0500

    RV280: add another AGP quirk

commit 1795706a6bb13272a58e8fa1bd5ad2603d553dde
Author: Nicos Gollan <gtdev@spearhead.de>
Date:   Wed Jan 7 14:25:24 2009 -0500

    [PATCH] Fixed enumerations in radeon-output.c

commit f69ad5aa17bb907105c1657803628d52b5ff3f11
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jan 7 11:33:53 2009 -0500

    Bump version post release

commit a0dd5d7ee3f038a9bfe051db8dbfac4934a81581
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 6 19:08:28 2009 -0500

    Bump version for release

commit c3fb8bb279959512a4ced644a64cc660c5cd97bd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 6 17:41:22 2009 -0500

    ATOM: rework encoder/transmitter setup

commit 9bb6b8ceaf772e1ce63610812a12260ee3860c27
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 6 16:25:26 2009 -0500

    ATOM: refactor output dpms

commit 467995d960bdefb1911eabfc2a047cf816013101
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 6 15:18:41 2009 -0500

    ATOM: Adjust PLL setup for recent atom changes

commit ee6310174c44809c761dbdb423e56e61392a0e10
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 6 14:59:22 2009 -0500

    ATOM: handle cases where TMDS uses linkb
    
    fixes bug 18564

commit 690999b682c0f954e27d9f1b3a3d8db4ef865c21
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 6 14:55:49 2009 -0500

    ATOM: rework object table parsing

commit e23baa2fa8b25b68cd473aec7a3d8cf3ee7b0ea8
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jan 6 14:38:06 2009 -0500

    R100: Fix typo in e55598cc1b35d398c9eb2c3946df71456775f621
    
    Noticed by Andreas Stenglein

commit d5cb24075928690377fd2dfaa32abfebff9990df
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Jan 4 21:04:52 2009 -0500

    ATOM: add format rev 2 for digitial command tables
    
    should fix bug 18911

commit 1813456af3def38c6f53103054976f3092491746
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Jan 4 21:01:05 2009 -0500

    ATOM: fail on more tables with unhandled revisions

commit 90ce00a3dbf37833a71db234372695460c8f0342
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Jan 4 19:13:53 2009 -0500

    AGP: Print both device and subsytem pci ids for agp
    
    helpful for adding quirks with libpciaccess

commit 006d736d890a6b2f1d7eb8ee20ccf467a939516f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sun Jan 4 19:08:37 2009 -0500

    Another AGP quirk
    
    debian bug 510208

commit c39ca66a7e216b7492fc5e3680ac535831cfb9a1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Dec 30 19:05:58 2008 -0500

    R2xx: add another AGP quirk
    
    from http://www.phoronix.com/forums/showthread.php?t=14626

commit 877be1b268f275b8ad83d5e245a0f0d3b1a05091
Author: Fabio <fabio.ped@libero.it>
Date:   Mon Dec 29 18:11:10 2008 -0500

    man page updates
    
    bug 19329

commit 837f7e8a48ea35d21de24b620830a2c6db854861
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Dec 30 06:50:54 2008 +1000

    atombios: endian fix in r600 object table handling
    
    This fixes the r600 object table on r600.

commit 45f8b911659dba7f43b9b70bde4b9c3be51b0b5b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 29 10:25:33 2008 -0500

    RS600: remove gpio quirk for ddc
    
    Doesn't seem necessary on RS600.  I'll try and find out more.

commit e913990030c536427bfecdb7b3d1e18f1beb90d2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 29 10:22:20 2008 -0500

    Revert "radeon: maybe special handling only needed for DVI port not HDMI one."
    
    This reverts commit c877450a75d3fd4a2f200af197c691669966f6f4.
    
    This breaks RS690 setups.  I think for now we just apply this quirk to
    RS690/RS740.  I'll follow up with the bios folks about RS600.

commit c877450a75d3fd4a2f200af197c691669966f6f4
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 29 09:05:45 2008 +1000

    radeon: maybe special handling only needed for DVI port not HDMI one.
    
    fixes ciaranm's rs600 board on radeon DDC

commit 2a9bc6be3246ec230b181391221e3a46beb94a23
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 29 09:05:16 2008 +1000

    radeon: a-bit motherboard has no DVI output
    
    thanks to ciaranm for finding this.

commit eccf3fed2be54f5c02fefef32e39c4084acbbe22
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 26 19:51:58 2008 -0500

    Make sure to include radeon_drm.h in the tarball

commit e55598cc1b35d398c9eb2c3946df71456775f621
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 26 19:31:55 2008 -0500

    R2xx EXA: limit composite to 2047 like r1xx
    
    See bug 19269

commit 631123d144d088d4f77a0599c34deaa31d551d71
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 23 10:08:46 2008 +1000

    radeon: update to 6.9.0.91
    
    do a prerelease for end of year.

commit 047f7603174f6047090f4fafbe6488d697eb78bc
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Dec 23 08:16:25 2008 +1000

    radeon: pass distcheck

commit c0c33dab44e6966b1702d4e8cfba3537fc6e2d5c
Author: Patrick Haller <patrick.haller@haller-consult.com>
Date:   Mon Dec 22 03:06:23 2008 -0500

    Fix off by one in EXA composite limit checking
    
    Patch from Patrick, with some updates from me:
    - fix r200 limits
    - note about r100 limits

commit d01a609a2b07da4ca0f182e79459432584ec61f6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 22 02:18:43 2008 -0500

    R3xx-R5xx: better fix for xv primitive tearing issues
    
    R5xx:      always use single clipped triangle
    R3xx/R4xx: use single clipped triangle up to guardband limit,
    	   then use quad.

commit 4d009d14c9c72f6e1bc8100ec8d9b8037ee4e514
Merge: d52882d 4e96278
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Dec 22 16:00:01 2008 +1000

    Merge branch 'atom-tvout'

commit 4e96278b581e296c1203d97a6d7aa3bff3977222
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Dec 22 15:58:35 2008 +1000

    atombios/tv: add an option to enable atom tv-out for users.
    
    This code is still experimental but we will allow users to enable it for experimental reasons

commit d52882d8188830dd52fa112dadcf5ea7f3e5fd5e
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Dec 22 09:27:47 2008 +1000

    radeon: setup 3D engine even when no DRI.
    
    This should fix some missing font issues in EXA without DRI cases.

commit 2346fd7cbd90dcdce2b361d374a53da064fa6a12
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Dec 18 16:35:13 2008 +1000

    radeon: add all new pci ids for rv730/rv710 families

commit 2ca970c7aa1f3f212f03bf3287d6b60eeafd68ae
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 17 13:07:19 2008 -0500

    Allow arbitrary tv-out modes

commit 5da147eec70abb7c9125a8940089fd3ff8bdea95
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 17 05:37:58 2008 -0500

    missed one in last commit

commit 6bfbb930c549e67f68969f7f0483380417f755b5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 17 05:36:09 2008 -0500

    Make sure we hit the right bios reg

commit 6ed0e68060fd2775e2d4027ff1533729e87848ba
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 17 04:54:50 2008 -0500

    properly handle EnableYUV
    
    A bit of a hack.  we really need to restructure the
    bios scratch reg handling.

commit f21e673aced1bb5138bbb80e6d9724530eb95ebf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 17 03:17:45 2008 -0500

    Fix colors on tv-out
    
    Call EnableYUV to set the transform and enable/disable it.
    should also fix green tint with tv connected at boot issues.

commit b2b43905a5385a8bb0b59b8e50952863d8dacb59
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 17 00:59:52 2008 -0500

    Pre-avivo: fix FP setup
    
    - make sure to clear various shadow timing bits
    - crtc1 select bit was set wrong.
    - should fix bugs like 19100

commit 3754cc23abac99880eda87d06aa42e16081b6c8a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 17 00:56:19 2008 -0500

    R2xx: switch EXA composite to rects rather quads
    
    For conistency with Xv path and to reduce potential diagonal tearing

commit be12cf8fcc7a5a3c3ee2c630474e2f9d9368f4d4
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 15:28:25 2008 +1000

    radeon: r500 tv-out force scaler values to nice set that looks correct

commit 01f7a50d76f706a456de7a4eb8323939d905c82b
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 13:43:21 2008 +1000

    r500: re-enable TV out

commit 45b9ff5e250d69de0df41f68b33524f7e2ce13b7
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 13:42:10 2008 +1000

    radeon: r500 PAL timings are slightly incorrect
    
    this stablises the PAL image at least

commit 435d996949185201a97493e131f9920a32863acd
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:50:48 2008 +1000

    radeon: tv timings have crev/frev wrong way around for some reason.

commit b9549e89cbdf8fff4aa7bd9f3adfb7d5732508cc
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:40:53 2008 +1000

    atombios: re-enable TV dpms

commit db85ff2e0c52a030546c0cc8ed0b851418f3e045
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:37:17 2008 +1000

    atom/r600: re-enable TV outputs

commit ff7b52c9a48f2e417acf6bec3b72546ad9b33471
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:36:38 2008 +1000

    radeon: use latest atombios constants for TV encoders in set_crtc_source

commit 1e0c7d3f0bf6be67b976fdea8fa2df0b4b16435f
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:35:06 2008 +1000

    atom: spc3 only requires ucEncoderMode for DIG outputs

commit 105cfd0b8696347ef71ad9daa941abb308bd6c2c
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:31:15 2008 +1000

    atom/tv: enable scaler can set the TV output scaler up.
    
    Add the tv standard to the scaler enable for TV use.

commit 2a768abbd2f18abe203571213260bccc225f70fd
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:29:07 2008 +1000

    atom/tv: fixup the tv out default if bios doesn't specify

commit b7fdd5da08bfec705691363b8890699c794dce53
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 17 11:24:56 2008 +1000

    atombios: fixup parsing of TV tables on r500 and r600 cards.
    
    The TV tables changed between for later cards.

commit e3b08cb59716b525b3063b184eab70e32b9d66f0
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 16 15:43:16 2008 +1000

    atombios: correct fix for previous issue.
    
    I committed an old patch.

commit 1431bc6900b0e0d7f486b5b3ba281873472b3fdc
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 16 15:31:34 2008 +1000

    atombios: fix issue with Clearing of MM_INDEX 0.
    
    While playing with tv-out I discovered this issue with clearing
    the MM_INDEX register.

commit f72367aff2d09161d30066a00673ba291b292a36
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 16 12:32:24 2008 +1000

    radeon: add initial rv730 pciids.
    
    Lots more to come, this just adds a few to start.

commit 4d2429f3ec4d7d3e1512b268c7ff5cbff8d186b4
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 16 12:19:00 2008 +1000

    DCE32: add support for DCE3.2 digital outputs.
    
    This adds support for the digital outputs on the RV730.

commit 4d3792fd1b9f733107582436540f483d8993199f
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Dec 12 10:34:57 2008 +1000

    radeon: fixes from Alex for some output engines
    (cherry picked from commit 1e8ac6ea7b35ccbc3649c96ead60f69158f66ebc)

commit f892154dbd0d8b6dd8abdf2196ab0c7c18327412
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 15 19:41:32 2008 -0500

    R3xx-R5xx: switch back to quad rendering for Xv
    
    The large clipped triangle trick hits the guardband limits on
    large displays.  This gets textured video working again
    until we sort out how to deal with the situation better.
    
    See bug 19046

commit 62344e460f5d0cac81f94c535cda77d3d76528a9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 15 11:30:42 2008 -0500

    Remove remnants of unused DDCMode option

commit f1efee6a11dc9436276fb12cfb90aa79ada1192b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 15 11:27:17 2008 -0500

    Remove mention of MergedFB from server log
    
    noticed by Fabio, bug 19098

commit 94bffac6968057cdedc792f8540fe44cb6ecfd7c
Author: Fabio <fabio.ped@libero.it>
Date:   Mon Dec 15 11:22:56 2008 -0500

    man page updates
    
    from bug 19098 with some minor fixes from me

commit c7899905ec824071f9cabbd1e271c4d76010b733
Author: Fabio <fabio.ped@libero.it>
Date:   Mon Dec 15 10:58:23 2008 -0500

    Remove duplicate ATI in some device names
    
    from bug 19098

commit 89a8fd5337c77abf1f3166e69ed061d85b5c20f0
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Dec 15 14:41:10 2008 +1000

    r600: don't idle engine
    (cherry picked from commit b77729448e487d37707ce028d8edc59352d1cc2d)

commit 4ce255a9db8027f2471ba50e57724d3e4d5b16ba
Author: Fabio <fabio.ped@libero.it>
Date:   Fri Dec 12 09:53:33 2008 -0500

    Fix formatting in man page
    
    fixes bug 19039

commit 0e99017cb9a6d46b891705df73678c2705439532
Author: Joseph Adams <joeyadams3.14159@gmail.com>
Date:   Thu Dec 11 00:57:03 2008 -0500

    Add more eMac modes, fix crash in last patch

commit fb46c30d316ab3ec54c54f3aec91d5164070a423
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 10 17:16:56 2008 -0500

    Add support for Apple eMacs
    
    Thanks to Joseph Adams for helping me sort this out.
    Verified on eMac G4/1.0 with radeon 7500
    Later eMacs with radeon 9200 or 9600 chips may have
    different ddc setups.  Need to verify.

commit c0bcea9150ef215fa614733cef9a5b71a55a33bd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 10 11:40:47 2008 -0500

    Add another AGP quirk
    
    fixes bug 12544

commit 607b02d6abf78147902a5944bd006897ad95e982
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 10 03:54:35 2008 -0500

    Add randr 1.3 panning support

commit 24007acbf36bcfd09cb5e74ce4a8d918d393cf34
Author: Benjamin Close <Benjamin.Close@clearchain.com>
Date:   Wed Dec 10 02:17:56 2008 -0500

    [PATCH] xf86misc extension has been removed, update driver to reflect it

commit 69e445f7f2ebd299070e44457b434bbc28b7e05c
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Dec 9 18:59:11 2008 +1000

    radeon: memset the pll setting function
    
    Thanks to Peter Zijlstra for making me debug this and providing
    feedback.

commit c72b732a2f5597cd72bd4ebe207799ae07f2681e
Author: Adrian Friedli <adi@koalatux.ch>
Date:   Mon Dec 8 10:42:46 2008 -0500

    Add another AGP quirk

commit 979ad04d901676cb41aea5cf47a8a2e9c19064dd
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 5 17:53:57 2008 -0500

    Add missing .TP in man page

commit b89d434011787fb71593395f462d142375783e35
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Fri Dec 5 17:52:02 2008 -0500

    Fix scissor setup for Xv
    
    We need to adjust the scissoring for each clip box, so move the setup
    to inside the while loop.

commit 83c1115333cbe763f86422fa5aabf4ab21951e68
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 5 11:52:18 2008 -0500

    R200: Remove scissor setup from init3d()
    
    We aren't using them, so no need to set them up.

commit 7593d5399cdb2f42ecbcb5193580385b286a9db9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 5 11:18:15 2008 -0500

    set coherent mode consistently (enabled for now)
    
    It's set to enabled in the output setup, but then was set to
    disabled when teh output properties were setup.  Set it up
    consistently.

commit ad2579f8898251105a6b36b745afd1ce1dab103e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 5 20:03:53 2008 +1000

    radeon: damn you bios, HDMI cannot have DACs.

commit bae30856f2cb3884387ef347327af6ff00b75854
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Dec 5 08:15:59 2008 +0100

    Make VSync for EXA and Xv configurable

commit 33638d9e388b330e2f4eb4debd05ba09924cf176
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Thu Dec 4 23:29:31 2008 +0100

    Optimise RADEONWaitForVLine
    
    Only avoid the vlines we are rendering to, instead of the entire
    screen. This way we don't stall the card for longer than we
    absolutely have to.
    
    EXA calls fixed by Alex Deucher.

commit d1690f5cc096e2f735c8b407c370a1c1cd7a8afc
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Wed Dec 3 21:49:37 2008 +0100

    Improve tearing avoidance for Xvideo in two steps
    
    - Fix up VLINE handling to trigger whenever scanout is outside the
      visible area.
    
    - Render the video as a scissored triangle as R300+ cannot render a
      quad in a single pass.

commit 4d98acbca2e630056bf56cdcd0e23007fded2ced
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Jul 16 03:14:06 2008 -0400

    First pass at tear-free accel
    
    if the dest pixmap is the front buffer, stall the pipe
    until the vline is outside the active area.
    For EXA, pick crtc based on the larger mode area;
    ideally we'd have one pixmap per crtc.
    For Xv, use dst window area to determine crtc.

commit 82d67b70d0fb747cf7b1eb0b64244ae56cb84572
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Thu Dec 4 15:38:13 2008 -0500

    Switch r200 Xv to use rect lists rather than quads to avoid tearing
    
    Patch from Pierre with fixes from me.

commit 9eccd0ad0827a1b8ec9abb2cebf5768d204a5ce9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 4 12:28:12 2008 -0500

    Fix up US setup after r3xx bicubic merge

commit e13fba853ba19e6b0f081b9b3d9fa76c38a0f82b
Merge: d296337 79bbdd9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Dec 4 12:25:29 2008 -0500

    Merge branch 'bicubic' of git://git.infradead.org/users/drzeus/xf86-video-ati

commit d29633708b5451f5541e88371d831ae03019a7f5
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Dec 4 09:08:48 2008 +1000

    radeon: apply atom quirks to object table

commit 941ac0d3ab839dc5aaaef2f3b7f5c7085b2894c5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 3 17:31:25 2008 -0500

    Make sure 3D state is emited when switching to 3D IB
    
    - fixes bug 18864

commit 79bbdd984c925e37f5b3db2605339f1a21377fcf
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Wed Dec 3 20:33:36 2008 +0100

    Change the XV_BICUBIC attribute to a tristate, where the third state
    automatically turns the filter on and off as appropriate.

commit bbdf821c179242266fd86edf9e688a6be9cf985f
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Wed Dec 3 19:42:50 2008 +0100

    Make the R300 bicubic shader program a bit easier to understand by
    having comments that describe the operation, not how it has to be
    implemented in the hardware.

commit 8f4b22932c91f1d51fcbf1d1a99d852fcdaafdcc
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Wed Dec 3 19:31:31 2008 +0100

    Now that we have a bicubic code path that messes up the pixel shader,
    we need to restore it in the non-bicubic code.

commit 0851daa6e7db77e440188d774ef8b3236146bcb9
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Wed Dec 3 19:17:36 2008 +0100

    Fix macros so that they are safe to use with expressions as parameters.

commit e04bcb0066781f61e97787856261e3380036d304
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Wed Dec 3 19:16:03 2008 +0100

    Fix node setup on R300 bicubic pixel shader. It was backwards and used
    the wrong base for sizes.

commit 927aee181f3637bda1b761caf93fbc0652e1207b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Dec 3 01:39:38 2008 -0500

    Only flush IB when direct rendering is enabled

commit ca74ebf8813b7fab8d08465ef9600f001c948e94
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Dec 2 22:26:21 2008 -0500

    move 3d state init after RADEON_SWITCH_TO_3D()

commit fc079c5267baf431bbecee7744e484783d393152
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 2 22:11:57 2008 -0500

    Don't mix 2D and 3D in the same IB
    
    fix from radeon-gem-cs

commit 678693aabd0b4c1812ab44bf5abb4c8394b254bb
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Dec 2 22:02:21 2008 -0500

    Stability fixes from radeon-gem-cs

commit f231e4d9b2c683dc16f42cf09484fae926a892c1
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Dec 3 11:39:04 2008 +1000

    radeon: fix HDMI having DACs in some BIOSes

commit fe73d9a7dfe8ec5c8f1a8dc08e14b4e138aa9276
Author: Bryce Harrington <bryce@canonical.com>
Date:   Tue Dec 2 19:47:45 2008 -0500

    Add another AGP quirk

commit 6e0c48958c6a50a639368e369ce72d813256aee4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Dec 1 18:50:40 2008 -0500

    Add quirk for r200 card with the primary dac wired to both ports
    
    refactor load detection setup as a byproduct
    should fix bug 18719

commit fa496d7b0397d9be57db90d0860928e9ced73cca
Author: Pierre Ossman <pierre@ossman.eu>
Date:   Mon Dec 1 08:29:29 2008 +0100

    Fix comments for R500 fragment shader to reflect the code.

commit 0d95fca114194664d9ab612c90d3222912cf41ff
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sat Aug 30 12:38:43 2008 -0700

    Fix indentation on IS_R300_3D Xv code.

commit 36a62b8c47def3f23a0b735875f59d23ed3c095a
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sat Aug 30 11:15:20 2008 -0700

    r3xx: Various Xv fixes.

commit 01ed5462fad56f5b7bf867041d00443bdf81c653
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Thu Aug 7 18:08:54 2008 -0700

    Switch to Mesa-style 24-bit float packing.
    Seems like Mesa's got it right, so we should follow suit.

commit 85bbe889045aa434f71a3eb0ba8153b7d2cc5023
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Thu Aug 7 07:06:46 2008 -0700

    Enable bicubic Xv on r3xx+. Still some buggies in the actual display, but looks pretty good.

commit bf6263cff50bb85c19ff6dfebb739333fa8aca18
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Thu Aug 7 07:00:36 2008 -0700

    Add r3xx-specific bicubic filtering code. FP, RS, mostly, everything else is shared with r5xx.

commit da021c36bbdf3bca31ee50ebe01cdb9495c09b36
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 30 18:44:24 2008 +1000

    radeon_drm.h: remove kernel defines
    
    remove these we should update from an installed kernel copy not from the
    original kernel copy.

commit 783cdb7374941bb1d2b63eea375fbf2f1b808cc3
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Nov 27 15:29:06 2008 +1000

    r100/r200: EXA misrenders dst == a8 + dst alpha use.
    
    Fedora BZ#469556
    
    I've played with various dst and texture formats and rewritten large
    parts of this to no avail, so I'm punting for now.

commit 2d7cfc421713286edd5121b56999246f9ae70286
Author: Eygene Ryabinkin <rea-fbsd@codelabs.ru>
Date:   Tue Nov 25 13:25:33 2008 -0500

    Catch unsubstituted macro for PCI region base access
    
    also fix up some warnings.

commit af7690b9c300d37c3a0c51e27e0ad2ca009224a2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Nov 25 02:57:30 2008 -0500

    [PATCH] radeon: Fix PCI usage of 32-bit driver on 64-bit platform
    
    The radeon driver is storing PCI addresses in unsigned long's which
    won't work well on 32-bit platforms with 64-bit physical address space
    such as PowerPC 4xx. This fixes it by using unsigned long long instead.

commit 065938617c0feab17f4274a5350de02a692ba065
Author: Ramon van der Stelt <rvanderstelt@xs4all.nl>
Date:   Tue Nov 25 02:23:46 2008 -0500

    Interlaced mode fixes
    
    see bug 12626

commit 36a7dc6ea1e1929e986ab1159497c71521cb2f10
Author: Bryce Harrington <bryce@canonical.com>
Date:   Tue Nov 25 01:04:37 2008 -0500

    Additional AGP quirks
    
    bug 18693

commit 2acb8e4ed220fccb21b22a53c5142ab3a35d32ef
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Nov 25 15:07:09 2008 +1000

    radeon: fixup shared DDC lines for some rv610 cards.
    
    Some cards share DDC between a HDMI and VGA output, and expect the
    driver to use load detect or EDID to figure it out.
    
    airlied- shipped in RHEL5
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit b01e35168de40d192fd7a9ce6884b9c7419afbd4
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 24 21:06:42 2008 -0500

    Fix up posted logic
    
    noticed by benh on IRC

commit d7a03e93372b17d642b42f5490464616ae7c99c1
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 24 15:52:05 2008 -0500

    Get hardcoded edid from the bios for servers that support it
    
    should fix bug 11300

commit 3858e31fa9d77d52a5cabb02f53f06385eab40f7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Nov 24 14:39:41 2008 -0500

    Don't support rotation is accel is not available
    
    Fixes bug 18068

commit 3d27876d91ef69d71f17b6cf8c07c26bf12857b4
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 10 15:47:13 2008 +1000

    radeon: always align dstPitch to 64 bytes for textured video
    
    bz# 18454

commit 6c8b352264540ccc4622a7c0b704ce452dcd707d
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Oct 29 15:53:57 2008 +1000

    pciid: add HD3300 - 790GX chipset.
    
    RH BZ (#466706)

commit 902eaf768142c6c7dcc487e10775027b84cd1f9a
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Nov 6 15:46:43 2008 -0500

    Check for LVDS on all IGP chips
    
    - fixes bug 18395

commit 44abaa0ea8e5e3bbe833fa73e6d011618bb6d7e7
Author: Adam Jackson <ajax@redhat.com>
Date:   Mon Nov 3 15:09:28 2008 -0500

    Fix HDMI output setup on DIG1/DIG2.
    
    The only reliable way to detect an HDMI sink is to check for the
    appropriate EDID extension block, so this will only work right on
    servers with xf86DoEEDID().  RANDR 1.2 will call this internally for
    us if it exists, but pre-1.6 servers are out of luck.

commit 937b7ac2a259cf504a19dcf62a58b1db1afb8eb9
Author: Bryce Harrington <bryce@canonical.com>
Date:   Wed Oct 29 01:31:50 2008 -0400

    Add AGP quirk table
    
    - set known good default agp modes for problematic chip/bridge combos
    - should fix bug 17360, others

commit 67bc2ae7f227a2afedc8e699cf0458fa7960f301
Author: Julien Cristau <jcristau@debian.org>
Date:   Sun Oct 26 16:05:04 2008 +0100

    Bug#7148: Fix manpage formatting

commit 98fdd78a1229584b922f816f331a45bfc178c961
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Oct 21 18:36:22 2008 +1000

    atombios: oops typo

commit 763dff6c117a10b6a57ba1854c5b798359789e44
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Oct 21 18:35:44 2008 +1000

    atombios: set missing pixel clock

commit 435cf7da68186f2601c4b888296117d4f652c625
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 15 10:52:14 2008 -0400

    Add LCD dithering quirk for macbook pro
    
    fixes bug 17897.

commit c0e6cb6d0eeef8f2ea60d840e1cd668fa92cd7f9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 10 11:09:27 2008 -0400

    Fix grey level dithering setup

commit 9eb2b6cd28224f0cbbabf3df451696ae1a845b9c
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Oct 10 16:18:05 2008 +1000

    radeon: hopefully fix plls for 30" monitors.
    
    Only do the HIGH trick on the DCE3 cards. Tested on rv610/630/770.

commit 0975e007ec7933acf9cd8ad2f281313ef8d32ac9
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Oct 9 17:16:28 2008 +1100

    radeon: rename radeon_memory to radeon_legacy_memory.
    
    This is a setup patch for the kms/memory management code.

commit d744dc013cf5ca3141c0fdf55e36d713fe9f53ba
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Oct 8 15:50:25 2008 -0400

    Fix connector table mapping for lvtma/kaleidoscope/uniphy.
    
    Fixes DPMS on LVDS.

commit dc795ba66a8c0eb2c3fdb86bd42dfc17e0aa3b6e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Oct 7 12:32:47 2008 -0400

    Fixups from last DFP/LCD refactor
    
    - fix DFP1 -> LCD1
    - use _INDEX rather than _SUPPORT defs

commit 4a9e8d9fe24278b56aef51677fd35289d01584a7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 6 18:00:08 2008 -0400

    set grey levels correctly for temporal dithering

commit 5708624d1151877dd66a462d4a75fed6774604a7
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 6 15:11:56 2008 -0400

    Turn coherent mode off by default on DVI

commit a5c5ce96279d01eb519bfb92b94c06a58acb7f07
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Oct 6 15:07:31 2008 -0400

    Refactor atom LCD/DFP output setup
    
    Simplify the code, properly handle dithering, coherent mode, encoding, etc.
    Should fix bug 17897.

commit f9826a5694b7adb6920eb5bdf45d840d8fb14d53
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 3 15:24:12 2008 -0400

    Add support for DDC via atom commands for RV410
    
    The atom calls use the hw i2c engine for DDC.  For some
    reason, sw i2c doesn't seem to work on the VGA GPIO on
    RV410 chips, so we use atom in that case.
    
    This fixes the longstanding VGA DDC problems on RV410/M26
    chips.

commit 23c17c0121d43c2fd11bb5cfbaa4b02abac2b16d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Oct 3 14:30:33 2008 -0400

    man page updates
    
    Update render accel and page flipping information.
    fixes bug 17887.

commit 4ac6e499089aec3c79af5dbede5fe631b105ce3d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 1 18:53:15 2008 -0400

    proper fix for initial rotation
    
    The initial modeset was setting the MC regs, so just set them
    rather than the full modeset.

commit 346228b20c69a965c9e7d67157f42c1d36a5b6c3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Oct 1 14:38:27 2008 -0400

    Workaround to make initial rotation work
    
    Acceleration needs to be initialized before setting the mode
    for initial rotation to work.  Changing the order in RADEONScreenInit()
    doesn't work because RADEONDRIKernelInit() hangs in the ioctl to
    initialize the CP if the mode is not set prior (even if the heads
    are turned off after setting the mode).  The workaround is to set the
    modes twice, once before accel and once after.
    
    This needs to be looked into further.

commit c359c2a31caf9f75b9fc6b6bcbc3e9dc1fe404ba
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Sep 30 11:04:54 2008 +0200

    Pass base offset into RADEONDisplayVideo() explicitly.
    
    This prevents the base offset from flipping back and forth if double buffering
    is enabled and the two buffers start on different sides of a 4 MB boundary.
    
    Should fix http://bugs.freedesktop.org/show_bug.cgi?id=17254 ; please don't
    reopen that bug report without attaching a log file captured after reproducing
    the problem with this fix.

commit ba21d5ae7fbbf5828c44c41655aff8b182453e2e
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Sep 30 11:03:04 2008 +0200

    Update GEN_INT_CNTL register value after calling DRM modeset ioctl.
    
    Fixes sync-to-vblank hangs after mode switch with DRM vblank-rework.

commit 3110646daf05fa09faaa70066cc8c3db1bb07cec
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Sep 14 11:46:36 2008 +0200

    Fix -Werror build.

commit d82f2938f69402c641a1c8362fdc513419b27659
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 26 13:51:24 2008 -0400

    atombios updates from upstream

commit d0d58b39e49c5ce00bc8bd12f721ad8c7f554b91
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Sep 24 11:54:34 2008 -0400

    radeon: Further pll adjustments

commit d100a6af8f828eb94f8ba6e8a96c24389b5cf46f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 19 14:04:59 2008 -0400

    cleanup macbook quirk

commit 1218e38c75351a20f7414ba6fcb3545689339442
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 19 13:52:07 2008 -0400

    more macbook fixes

commit 83e1f132965deadedda7a622184eb400cd4c120c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 19 09:36:59 2008 -0400

    Fix copy/paste error in the last commit
    
    DVI-D -> DVI-I

commit 4af825f7b13cba8c3b204e72a07cab5009331240
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 19 00:29:20 2008 -0400

    radeon: Add quirk for macbook
    
    - should fix bug 17625

commit 38aa450fce6a91b35c191fd07112490a62cc29c6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 26 21:50:23 2008 -0400

    fix some fallout from the common allocator
    
    should fix bug 17317

commit a3cc1d7a421456186024c5c069e403d374a0f0b9
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 26 08:03:20 2008 +1000

    radeon: fix powerpc build

commit 6cebfe257f7ddad855ee743e4eb899bd6fac7f46
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 11 19:32:06 2008 -0400

    Switch EXA path back to static cursor allocation
    
    pre-AVIVO cards have address limits for the cursor offset

commit 4dff54a3c8d7c9f2d6ec50354ff0b92f1b7fcbdf
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 11 17:28:03 2008 -0400

    Switch cursors over to generic allocator

commit 5b1978a4796bcc31ac2f01d303dc8f8f44323025
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 25 10:05:28 2008 -0400

    Bicubic fixes from the last cherry-pick

commit 7daba77ded1c718e93ae8c372a39a6e85228d513
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 11 02:02:38 2008 -0400

    Convert randr, Xv to a common allocator

commit 610fe1a937da78f4ac813ac919c158dde8f42442
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 10 22:47:35 2008 -0400

    Switch to using radeon_drm.h from the drm
    
    modelled after Matthias' similar rhd change

commit a6561f2ec673b38907f7181235386f32e60c32ba
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 10 22:31:13 2008 -0400

    Move DRI to a separate struct
    
    based on Matthias' similar work in rhd

commit 75ef8dc214715d3c5c50996b293933842903ba65
Author: Egbert Eich <eich@freedesktop.org>
Date:   Thu Jul 10 21:49:55 2008 -0400

    Cleanups from rhd port
    
    - remove unused vars
    - remove static exa render vars

commit 71ad140fa11f3a504c38d6bddf40e3a3c0a20e60
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 10 21:24:16 2008 -0400

    Move accel state to a separate struct

commit 5b2e095c31b88d8495a4f86e6cb46b49fa4acd65
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Jul 10 20:07:44 2008 -0400

    Move CP into a separate struct

commit 2145309230e36aee7758bd244deb1e72ada0c065
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 25 08:47:59 2008 -0400

    match textured video macro names with other accel code
    
    OUT_VIDEO_REG() -> OUT_ACCEL_REG()
    etc.

commit 01daef0f095fbbaee701d5fe97f3dd7838b5f915
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 25 08:26:16 2008 -0400

    Additional cleanups and re-arragement following bicubic merge

commit 0a51d08c24af040fe48690662b1a912acad51700
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Aug 25 06:43:14 2008 -0400

    Whitespace cleanup from bucubic merge

commit c0170fef510b53a6ca2c6ea7a99119235229c929
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Thu Aug 7 06:53:39 2008 -0700

    Add needed FP registers, etc. for r3xx bicubic Xv.

commit d9c38326cf70f57ab777ffdf9520b8cdea9d9cb6
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Tue Aug 5 18:45:38 2008 +0200

    Fix typos.

commit d38ceba62aa5cee76baa342ce7719a983a79f09e
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Tue Aug 5 16:21:57 2008 +0200

    Fix bicubic fp calculation.

commit 6f9c7fde75edc0399559f975db9a6c4dc22714ae
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Tue Aug 5 15:38:42 2008 +0200

    Fixed bicubic fragment program comments.

commit 48b09ca40ccb28b5584069316fd38786a78c1dd3
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sat Aug 2 02:36:21 2008 -0700

    Switch from 32-bit floats to 16-bit half-floats.
    Massive bandwidth savings, or so I'm told. Yay?

commit ebbb7fb634fcadf28ff99c1df2c3db89fd56932d
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sat Aug 2 01:45:43 2008 -0700

    Change floats to uint32_t hex.
    Useful for moving to 16-bit half-floats.

commit 3b46162d8a90be3524cb513d42b9ad3d0bea45f5
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Fri Aug 1 15:24:01 2008 +0200

    Move some ALU instructions after the TEX instructions, so we can do something usefull while we are waiting for the texture values.

commit 2ecdec4bafc97212dde4d6908ee4ccf618adc0e1
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Fri Aug 1 04:03:12 2008 +0200

    Another uneeded SEM_AQUIRE.

commit e93b5d1b80d6203f63543b7b678e2f1d9221b5b3
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Fri Aug 1 03:00:26 2008 +0200

    Smarter usage of the texture semaphore.

commit 286f7aa18f19bd21b263701adab38b736dbeda0f
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Thu Jul 31 17:01:44 2008 -0700

    Enable bicubic filtering for all r5xx HW.

commit 242aa4f630b4c60aefa3c12dc459a4d4d0b334a0
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Fri Aug 1 01:11:28 2008 +0200

    Remove one constant.

commit 413eacb0538977b0b3c92df074d40510f4539abc
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Fri Aug 1 00:52:09 2008 +0200

    Heavy optimizations.

commit a0c4a949cb49e5ac1e857aef08a8742b9f7b49da
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Thu Jul 31 21:19:18 2008 +0200

    Remove uneeded negations.

commit abb2b2e757d92591ab9277824b9d9746ba98f875
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Thu Jul 31 20:31:03 2008 +0200

    Implement LPR in one instruction.

commit c370b74bec13194573348583c38adf710b880e79
Author: Dennis Kasprzyk <onestone@opencompositing.org>
Date:   Thu Jul 31 19:50:49 2008 +0200

    Set helper texture filter correctly.

commit 5e85d5a5d0c50b29086ec0c219c8b52d25dbc2e9
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Wed Jul 30 19:45:15 2008 -0700

    Update bicubic tables.
    Now including the 2048x1 texture as well.

commit 17e5e9573e59c3d82d51c261b9c5005f6aec7d43
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Wed Jul 30 11:57:25 2008 -0700

    Force R580-only for bicubic.
    Initial reading of docs suggest RV560 and RV570 can't handle it,
    but they're welcome to test.

commit 83b52473d0e7102265918b07be053fcda17a14b4
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Wed Jul 30 01:03:57 2008 -0700

    Bump bicubic cutoff to R580.
    RV530 chipsets can't handle fullscreen bicubic...

commit 69a4998d1286bcdd7bfe874cd5628bc1cc232bae
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Wed Jul 30 01:03:46 2008 -0700

    Oops, made a mistake with vertices.

commit a4ec30a677906ec2ff9824c7ddca586655f6d1a8
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Wed Jul 30 00:54:32 2008 -0700

    Merge upstream changes to vertices, and also add Xv attributes for textured video, including bicubic filtering.

commit f3b81c7582aed307fa44e134ee161cd8a3158657
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Mon Jul 28 19:50:10 2008 -0700

    Fix constants.

commit 7dbb7023ba023ec1a38be63af9c9f49e40222b7b
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Mon Jul 28 17:30:41 2008 -0700

    Finally got the fragment program fully working for bicubic filtering on r5xx.

commit 0e4dd73b9ebc6f608eeff945b4d463a00c02e07c
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Mon Jul 28 12:16:50 2008 -0700

    More bicubic FP buggies.

commit a87647e0c27e0950f4d0d8203a1242a994ad3419
Author: Dennis Kasprzyk <onestone@compiz-fusion.org>
Date:   Sun Jul 27 10:43:01 2008 -0700

    Fix texture size, texture filter, vertex offsets, etc.

commit 232aa3e943fef4c4037b255c3b64a0aaff90ab5c
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sat Jul 26 10:56:56 2008 -0700

    Make vertices emit properly.
    *bangs head against wall*

commit 8c84f67b93d926095633830aa8d95930a48b1c7b
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sun Jul 20 14:25:44 2008 -0700

    Try to get tex coords from the VAP to RS properly when bicubic filtering is enabled.
    I'm soo bad at this... :c

commit a4a7d5f5967c51c394229de5eccaec44cfec8f50
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Sat Jul 19 13:02:02 2008 -0700

    Upload pixel shader to card for r5xx. This was ridiculous. Also it doesn't work yet...

commit 20c1db2d7c110ab5c1117a57b169baa1ab070518
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Fri Jul 18 13:48:08 2008 -0700

    Upload bicubic filter to card. This was a LOT easier than I had feared, to be honest.

commit a760e628134c6d7d42ec3c98118b6e5f6fcd3e7f
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Fri Jul 18 12:21:20 2008 -0700

    Allocate memory for the bicubic filter texture.

commit b6c9e2bb5365de82315c6814f915e57b0c4fa444
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Fri Jul 18 11:24:14 2008 -0700

    Fixed typos in the bicubic texture tables. Whoops, looks like I'm still asleep.

commit ca51f4f37e1dbf53bf7ffc0e8f612e9609e11209
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Fri Jul 18 11:06:34 2008 -0700

    Add bicubic texture table, as well as the script used to (re)generate it. To regenerate, just run "python bicubic_table.py > bicubic_table.h".

commit 1cf7a5494fa94e8d9f30f9b2905dfbe6d4faa445
Author: Bryce Harrington <bryce@bryceharrington.org>
Date:   Wed Aug 20 09:46:59 2008 -0400

    radeon: Fix pasto in connector table setup for vga powerbooks
    
    fixes bug 17214

commit a55e85f742d1334bf88e4681e553f025d2de38df
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 14 15:21:51 2008 -0400

    Make sure video offerlay offsets don't exceed the hardware limit of 128 MB.
    
        Always set the overlay base address such that the buffer offsets are as small
        as possible. This could still break in theory if the buffers were more than
        128 MB apart, but in reality this can't happen ATM because we always allocate
        a single memory area for all buffers.
    
        Fixes http://bugs.freedesktop.org/show_bug.cgi?id=16845 .

commit 92ee21df344a989778e37369c7beb3904a00ead6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Aug 14 14:49:45 2008 -0400

    PLL adjustments
    
    Seems higher dotclocks prefer a higher FB div.
    Someone with a lot of should try and find out where
    the div sweet spots are for various dotclock ranges.
    fixes bug 17125

commit 0d5e0347af4322713075193154b8a348de4a0b52
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 13 14:17:34 2008 -0400

    Remove reset of 3D scissor registers when using the CP in the ddx
    
    They should only affect 3D and init3d() should take care of that case
    noticed by libv on IRC.

commit 7e456e9c427d48151b166bcac08c3e8a8b180f01
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Aug 12 08:18:30 2008 +1000

    radeon: add 0x9441 for hd 4870 x2
    
    thanks to Michael Larabel for testing

commit 4dbdeea7c9316575fba26b41fd347452e42cdcf2
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Aug 8 17:39:48 2008 -0400

    Further cleanup and unification of i2c code
    
    - unify the ddc and i2c code
    - add gpio mask support for legacy chips
    - remove the magic gpio dance for ancient monitors
      (if you have an ancient monitor that ddc stops
       working on let me know).  This should speed up DDC
      on legacy chips.
    
    -- radeon sw gpio i2c --
    4 sets of gpio registers for clk and data and corresponding bit masks
    mask - locks the gpio for use by sw
    get  - reads the value off the gpio pad
    put  - sets the gpio direction to output
    a    - "other stuff" On legacy chips you clear them if you want
           to use a gpio for i2c.  In some cases they are used for the
           output value when the gpio in the output state.

commit 268c848130ec1770bb645a74197b6aca7fc95abc
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Aug 8 15:50:07 2008 -0400

    Fix VT switching on M6 chips
    
    Some M6 chips have a faulty MEM_SIZE register that in
    some cases reports 0 on 8 MB cards.  On EnterVT we check
    the MEM_SIZE reg as a check to see if the card is posted or
    not.  Since this reg returns 0, the driver attempts to post
    the card which can lead to a hang.  Switch this to check if
    either crtc is active as is done in the bios init code.
    fixes bug 13994

commit 33f88f7fc90d9d93fdcbba9ad59dd70a6596bc3f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Thu Aug 7 17:57:07 2008 -0400

    RS4xx DDC fixes take 3

commit df0d1ef53100f0a19c5b5fdc349f5186c8d9bd87
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 6 19:13:56 2008 -0400

    RS4xx: Fix up ddc gpio
    
    - I mixed up the regs previously

commit 18429390440a829fb24ed3afd99ccf8278138496
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Wed Aug 6 00:35:15 2008 -0400

    Remove un-needed dac check for single crtc cards
    
    Connector tables should be setup properly already and this
    check breaks systems with 2 DACs and 1 crtc like the es1000.

commit 001c535687d8588873037ee5363d0a709f44b418
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 5 17:14:48 2008 -0400

    IGP: fix typo in IGP quirk handling

commit eb65ddf70d182b6457e1ef5ebb820456039e8f6d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 5 15:01:33 2008 -0400

    IGP: attempt to get external TMDS working
    
    RS4xx chips have a tmds init table in the mobile info table

commit 8b8990917809b9a35c6e9c1b9e3b12ff81c6dbb3
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Aug 5 12:16:06 2008 -0400

    IGP: Updated quirk handling
    
    - Hopefully finally fix DDC on RS4xx chips
    - RS3xx/RS4xx do not have internal TMDS
    - general quirk handling cleanup
    - we don't currently support mm gpio for external TMDS
      so return false.

commit cb0deba5412a575d36f2f99377120b123506c946
Author: Calvin Fong <hoiwai930@gmail.com>
Date:   Mon Aug 4 02:04:15 2008 -0400

    IGP: add support for NTSC tv-out on legacy IGP chips
    
    Patch from Calvin with some cleanups from me.
    No support for PAL yet.

commit 942b18aca91819fa65d853cd15ffd1cd720cbd68
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 4 14:38:21 2008 +1000

    radeon: make r600 use i2c table lookup for ddc.
    
    This may fix DDC on rv770 cards.

commit 1f3eee3682f3598a303c9c3accfbe01b245cacf9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jul 29 20:29:32 2008 -0400

    Change prim types for exa and textured video to help avoid tearing
    
    - r1xx - switch from tri fan to rect list
    - r2xx/r3xx/r4xx/r5xx - switch from tri fan to quad list

commit 5b5441f8cc119db0d1e03dd35bd06015a26270dd
Author: Brice Goglin <bgoglin@debian.org>
Date:   Tue Jul 29 23:31:14 2008 +0200

    Increase default GART size to 32MB on >=R300

commit 0a505297f09aefb1b4432176a263bfdf6f256f77
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 28 17:12:41 2008 -0400

    Fix error in driver connector table for powerbook w/ vga

commit d5799ac53c3e1b2ca1da97780b171a44060c3aad
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 28 11:09:10 2008 -0400

    Add quirk for oem x300 card
    
    - debian bug 492457

commit 64dbadddcf6d069c0472f37afeab89d3e31e937d
Author: Owain Gordon Ainsworth <oga@openbsd.org>
Date:   Mon Jul 28 10:40:58 2008 +1000

    radeon: don't call ioctl unless DRI is initialised

commit 1c5858484da4fb1c9bc3ac3b4d7a97863ab99730
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 21 23:47:45 2008 -0400

    First pass at InitDispBandwidth() for AVIVO chips
    
    - support for LB allocation
    - MC priority bumps for display1/2 on RV515 variants and RS690
    If you are having display underflow problems (flickering on sides of
    screen in high res modes, etc.) on RV515 or RS690 boards, try setting:
    Option "DisplayPriority" "HIGH" in your config.
    - still no support for full display watermark programming yet
    
    Something similar might be useful in rhd as well.

commit b0378bb145c8a915c943bef7d17f2cdecfccc891
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 21 13:47:09 2008 -0400

    Interlaced mode fixups for AVIVO chips

commit c18fad622a3c4f9572051120d83af68b625b5686
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 21 10:36:48 2008 -0400

    Clear display priority bits before resetting them

commit dc231ff8e063313d2bcf5acccad67a9f8a7e3314
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 21 10:30:41 2008 -0400

    Clean up legacy display watermark setup
    
    - makes crtc1 and crtc2 watermark setup independant.
    - fixes the case where only crtc2 is active

commit f9034214f070fe3054cd9cefd7034252de234f38
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jul 21 09:09:02 2008 +0200

    Call DRM modeset ioctl after the IRQ has been initialized.
    
    This lets the DRM know it can safely disable the vblank interrupts.

commit ecb6347a3d7071890600c98c2addef3a8ca260ee
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Jul 19 11:34:16 2008 -0400

    Add oem quirk for external tmds setup on Dell Inspiron 8600
    
    Noticed by fnord42 on IRC.

commit df53d12a06fad41f00cff849458cb358ab5e2098
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Jul 17 14:37:05 2008 +1000

    Fix console switch on R500
    
    This patch fixes the console switch for me on R5xx.
    
    There are two aspects to it:
    
     - Fix the ordering of avivo_restore() to better match what's
    happening in the driver & ATOM, properly locking/unlocking and
    only enabling the CRTCs after everything has been properly
    programmed.
    
     - Don't ASIC_INIT if the card has any CRTC enabled. This is the
    best I came up with for avoiding spurrious ASIC_INIT on cards that
    -are- POSTed but don't have the BIOS coming from c0000 on x86. The
    problem with spurrious ASIC_INIT is that we do it before we do
    RADEONSave(), so that screws up the console switch.
    
    Note that I think we also should save/restore the palette, I don't think
    we do. right now, it's a minor issue for me because I fixed offb to be
    able to set it on AVIVO's but it might still have to be done in the long
    run.
    
    Tested with a VGA analog setup on DACA and a DVI setup on TMDS 0. I
    haven't tested any other combo but that should get us going.
    
    Cheers,
    Ben.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit e8c07270e1fc2ee455320370692aaf90abac2773
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jul 15 17:50:32 2008 -0400

    ATOM: fix for r4xx cards with no VRAM_Usage tables
    
    fixes bug 15954

commit da41e71efd41907d9347a902720bce60b32550e5
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Jul 14 13:21:38 2008 -0400

    ATOM: Add support for UpdateCRTC_DoubleBufferRegisters cmd table
    
    locks/unlocks the crtc/grph/mode regs before updating the crtc

commit a5e0cf13dc7ace6cf0e44e18b73b9a9266e740ab
Author: Julien Cristau <jcristau@debian.org>
Date:   Sun Jul 6 12:17:28 2008 +0200

    Link with -lpciaccess and -ldrm if needed
    
    This makes sure the driver ends up with a DT_NEEDED reference to
    the libraries it's using.

commit f8da849fd89322a54cc4d722767da755358eab70
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jul 13 11:31:03 2008 +0200

    Only declare local variable when it's used.

commit a6db4dc65aec560f3b1f37ff73ec6b0bd8207295
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 12 18:47:07 2008 +1000

    atombios: fix typo in mode conversion for panel

commit 19a0d5879851eff23a3e7d5cdea55bd784051115
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 12 17:04:25 2008 +1000

    atombios: use macro to get offset into table

commit a9746114369d516072d841ec356ec3ba3d0be71a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jul 12 10:46:36 2008 +1000

    pciid: add radeon HD3850.
    
    pci id from legume on #radeon

commit ab14f725676e4d4e45278c64b03fe2d328a3e439
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 11 19:05:00 2008 -0400

    R300: NUM_FPU adjustments for VAP_CNTL

commit 810c28cc2660b73e03e4d27be97988fc5321a06f
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 11 15:31:57 2008 -0400

    Make sure cursor offsets are properly aligned when using EXA

commit 7e67d0163579a44f104e8f354a929ac9b33e4c21
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 11 14:30:17 2008 -0400

    Fix cursor with multi-head and rotation

commit 9086d008fb8c3cde0633b90ce19ffbf4eded388d
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Tue Jul 8 09:57:04 2008 -0400

    Add quirk for Falcon NW laptop

commit 61f82ace0210251beb0bcc492218a75a193e1deb
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 8 21:58:43 2008 +1000

    atombios: add support for other endians.
    
    This is a cleaned up (in as much as atombios can be..) of benh's patch.
    
    airlied - removed benh's debugging for now, it might need to be put back later..

commit b4d1a47b5c6eafda5e274398eebe2701b030f22e
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jul 8 11:09:01 2008 +1000

    rv770 initial support
    
    adds pci ids and one register from AMD code

commit 7ae4cec8cc8c90aee5dc4fa7abcce22321d4f4eb
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Mon Jul 7 14:39:47 2008 -0400

    clamp tex coords (r100/r200) for textured video
    
    fixes bug 14904

commit 879f9a37856642b337e3c0233e38fd5443338eef
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Jul 4 13:54:49 2008 -0400

    Revert "rotate: fix rotation in conf file."
    
    This reverts commit 22c6ca0d5d226c725ba448e5db63fdba9e32332c.
    
    There seems to be an ordering issue in that causes a nasty hang
    if the DRI is enabled.  This needs more investigation.

commit 22c6ca0d5d226c725ba448e5db63fdba9e32332c
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 3 20:14:59 2008 +1000

    rotate: fix rotation in conf file.
    
    need to set modes after init accel architecture
    
    reported-by: Christoph Bartoschek <bartoschek@or.uni-bonn.de>

commit ce1a3edd52b647744cfa4433301befb437d211bb
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jul 3 20:05:54 2008 +1000

    radeon: drop all use of CPMode.
    
    We never test the other codepath and I don't think I've ever recommended it
    for anyone.

commit c037b4ce8769ad840a257e22b1e4ad58b8ed96fa
Author: Wolke Liu <wolke.lui@amd.com>
Date:   Tue Jul 1 10:45:39 2008 -0400

    Add pci id for FireMV 2400

commit 72992668ca96717bf69bcea95a5deeaf7c57e826
Author: Alex Deucher <alex@botchco.com>
Date:   Mon Jun 30 14:09:09 2008 -0400

    RS4xx: enable the DRI by default on all variants
    
    Some RS4xx chips had the DRI disabled by default.
    With the recent drm and ddx changes these chips have been
    reported to work now with the DRI.

commit 0378c8ed88c829f09b5c6d51314325eaf2685fdb
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Jun 28 14:06:45 2008 +0200

    Restore versioning of interface for Mesa DRI driver.
    
    This doesn't have anything to do with the package version.

commit cfaa23d925e3c062cf87ea844566ac11ea02d69e
Author: Alex Deucher <alex@botchco.com>
Date:   Fri Jun 27 20:36:54 2008 -0400

    RADEON: IGP VGA fixes take 2
    
    It seems only RS300/350/400/480 are missing the primary dac
    See bug 15708

commit 31c27ffcb3c4c5334cf726ecd4e293a678b2a1ea
Author: Alex Deucher <alex@botchco.com>
Date:   Fri Jun 27 20:29:04 2008 -0400

    Revert "IGP: attempt to fix VGA on IGP chips"
    
    This reverts commit e78e8a21b4040cd7f1983c241c860d9209398396.

commit af79a77e6d8206b18bba97cf4e0770921dc439a7
Author: Brice Goglin <Brice.Goglin@ens-lyon.org>
Date:   Fri Jun 27 17:09:13 2008 +0200

    use PACKAGE_VERSION_* for radeon version
    
    now radeon shows verion 6.9.0 instead of 4.3.0.
    
    RADEON_VERSION_MAJOR_TILED is dropped from ddxDriverMajorVersion
    since RADEON_VERSION_MAJOR is bigger now.

commit c83fbdfa076c107012b7dfbbfbbb2feede00542b
Author: Alex Deucher <alex@botchco.com>
Date:   Thu Jun 26 19:48:45 2008 -0400

    Bump for 6.9.0 release

commit 32e1d1daf4f68ea37624afaa2bc1ea7742e1163b
Author: Brad Smith <brad@comstyle.com>
Date:   Thu Jun 26 10:22:03 2008 -0400

    RADEON: sys/endian.h needs sys/types.h on BSDs
    
    See bug 16512

commit dca522355a9039eca6efaba3b36397b246800f94
Author: Brad Smith <brad@comstyle.com>
Date:   Thu Jun 26 10:13:59 2008 -0400

    RADEON: fix copy/paste error in accel code

commit f4292e110105910d0c19bf2db28e2682b27af2c7
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 20 15:31:43 2008 +1000

    Revert "Revert "ATOM: disable TV-out for now""
    
    Oops I really didn't mean to do this, I was testing something and it slipped
    past.
    
    This reverts commit dd18caa4b2efc430eaae0c4362b65641f9bef440.

commit bb1cfcbfbc1ace1f257fc3bf6401501f1a6da827
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Jun 25 15:50:16 2008 -0400

    RADEON: adjustments to Jerome's last commit
    
    - Flush caches and wait for idle after drawing
    - Make sure 3D is idle too (after composite or textured video)

commit 07be302f6dba61dd15918963fae66502230c74b7
Merge: 8c9b8de 5245974
Author: Jerome Glisse <glisse@freedesktop.org>
Date:   Wed Jun 25 10:30:45 2008 +0200

    Merge branch 'master' of git://anongit.freedesktop.org/xorg/driver/xf86-video-ati

commit 8c9b8de0373797cba6f0a27e6b6f461e1070fef9
Author: Jerome Glisse <glisse@freedesktop.org>
Date:   Wed Jun 25 10:28:26 2008 +0200

    radeon: flush & wait for 2d & dma idle after 2d blit
    
    This should help to avoid 2d & 3d engine to step on each
    other dma transaction.

commit 52459745ec05de88adbc087e9566fe6d97ef424b
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jun 25 17:09:11 2008 +1000

    ati: hopefully fix byteswap mess for those other OSes.

commit 67a6ac0001bc9d062aa426384a11a41fa7a1c09a
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jun 24 21:06:37 2008 -0400

    bump for rc release

commit bd68507d2d66e03d8bcde5f6e7ea9b2dbfe8b8a0
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jun 24 20:59:58 2008 -0400

    RADEON: warning fix

commit 8e534d69c9b19fc085f7c5ca9e18f5ea04f6fc12
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jun 24 20:08:35 2008 -0400

    RADEON: cleanups
    
    - fix some warnings
    - RS400 and RS480 are separate families now (update default tmds and dac2
    tables)

commit e78e8a21b4040cd7f1983c241c860d9209398396
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jun 24 19:53:28 2008 -0400

    IGP: attempt to fix VGA on IGP chips
    
    VGA has never worked on some IGP chips.  While the chip only has
    one DAC, it appears to use a mix of Primary DAC and TVDAC controls.
    
    See bug 15708

commit faa4b4b8dbe9b8a452cfa60d53874350bb04e0cb
Author: Jiří Paleček <jpalecek@web.de>
Date:   Tue Jun 24 19:20:50 2008 -0400

    RADEON: remove extraneous line from new pll code

commit 72feaa37ea07620f5f2ead438dbc72a1c8883cd3
Author: Jiří Paleček <jpalecek@web.de>
Date:   Mon Jun 23 15:53:58 2008 -0400

    RADEON: PLL tweaks
    
    Patch from Jiří Paleček (see debian bug 465864) with some tweaks
    by me.
    
    - abort rather than programming bad dividers if no pll dividers can be found
    - improve the pll selection algorithm
    - in general, prefer lower ref dividers
    
    I've tested this patch on a wide variety of chips (r1xx-r6xx) and clocks.

commit 9c2f909ea437a63a408d2398ecabe0b378dbb982
Author: Alex Deucher <alex@botch2.com>
Date:   Mon Jun 23 10:38:15 2008 -0400

    RADEON: adjust randr crtc/output prepare/commit ordering
    
    This fixes some occasional mode change problems with multiple heads active.
    It seems radeons generally like to turn on the whole output/crtc setup
    in one shot.

commit aea9bf75cf0774afd3e65fcf3fd3851f5fb21ca3
Author: Alex Deucher <alex@botch2.com>
Date:   Sat Jun 21 10:57:05 2008 -0400

    0x1002 0x5657 is actually RV410
    
    See bug 14289
    
    	com_bios_scratch.diff

commit 38ce8a984f96056b7345bcc06505ba27e0e6d5b4
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 20 14:16:22 2008 +1000

    legacy: use entity MMIO for dpms as this can crossover between zaphod infos

commit 1a7d9bc53512b0a5240176c949e6abf1ae2fb1fd
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jun 20 14:14:21 2008 +1000

    atombios: use MMIO from the entity not the info

commit ef624b88903b1a87ef5b6388e18291f75776b93d
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Jun 19 18:20:52 2008 -0400

    RADEON: fix read past the end of an array

commit cfe814a481d8cf2005d738a0ca9782f1ed4177f5
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jun 20 07:51:27 2008 +1000

    r600: don't add fb offset here to make shadowfb work.
    
    discovered on irc with wpwrak.

commit 5b323a2cbbc412b6dd4e782438b64ee996558d05
Merge: dd18caa eed2415
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jun 20 07:49:16 2008 +1000

    Merge branch 'master' of ssh://git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit eed241553748125e902c44dcc8cf8e0605be071b
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jun 17 17:42:31 2008 -0400

    radeon: X_ERROR -> X_WARNING for num gb pipes
    
    This just means your drm is old, not fatal or anything

commit dd18caa4b2efc430eaae0c4362b65641f9bef440
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 14 18:37:56 2008 +1000

    Revert "ATOM: disable TV-out for now"
    
    This reverts commit effa245914823371e052cd9aa1143a02350891e7.

commit b416e97a1f16ef700ba1aaca317dee82b7a3cf64
Author: Alex Deucher <alex@botch2.com>
Date:   Fri Jun 13 02:21:31 2008 -0400

    RADEON: man page updates

commit 88ce87d79069662de28ecb3c10c140919927d584
Author: Alex Deucher <alex@botchco.com>
Date:   Thu Jun 12 15:10:47 2008 -0400

    Bump for 6.9.0rc1 release

commit ada41723fdc8cbeeda12bb4ae2d16e8d1ba215de
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Jun 11 14:29:36 2008 -0400

    R3xx: use DSTCACHE_CTLSTAT rather than RB2D_DSTCACHE_CTLSTAT
    
    According to the hw guys, you should use DSTCACHE_CTLSTAT to
    flush the 2D dst cache rather than RB2D_DSTCACHE_CTLSTAT.

commit 3d70c398afa0831387af81559453b77c218a54f9
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jun 12 06:18:26 2008 +1000

    atom: fix another endian define

commit f1794e4c34d801371461afed37e7bb7d1fc79305
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Jun 12 06:10:30 2008 +1000

    atom: fixup includes in cd operations to get correct endian bits in atombios.h

commit f29976d12cc2020cd80c90fa3fd4b25c031559ba
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Wed Jun 11 19:33:02 2008 +1000

    radeon: add lots of endian bits into the atombios parser

commit 09eb220971b5d2bfd7d1ff6f552060967a133152
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Wed Jun 11 19:21:22 2008 +1000

    atombios: fixup atombios bitfields for endianness
    
    reverse the bits for big endian

commit b80a3e85bf9dbfc8d96a745876d75d38bea97c1a
Author: Alex Deucher <alex@botchco.com>
Date:   Mon Jun 9 20:29:47 2008 -0400

    R5xx: fix RADEONSetAgpBase() for R5xx chips
    
    Is there any reason to still do this in the ddx?
    Maybe real old drms?

commit ab7936708dfbee4d3676262f8010e001b73a4a38
Author: Alex Deucher <alex@botchco.com>
Date:   Mon Jun 9 17:05:04 2008 -0400

    RS4xx: RC410 chips are actually RS400 based

commit a54ca3c699c103e2e3df87101dca929a3eee4377
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 5 18:31:53 2008 +1000

    radeon: fix typo in memory calcs
    
    noticed by ghepeu on irc.

commit 6e4e6d2a8f29f92efc219dca24ea31d1f37d5a0f
Author: Alex Deucher <alex@botchco.com>
Date:   Tue Jun 3 20:32:20 2008 -0400

    RADEON: minor cleanups

commit 9d3afbf5fa4110928a9f965df2733c79db92ea99
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Jun 3 11:40:49 2008 +0200

    Call DRM_IOCTL_MODESET_CTL ioctl to avoid problems with DRM post vblank-rework.

commit effa245914823371e052cd9aa1143a02350891e7
Author: Alex Deucher <alex@botchco.com>
Date:   Sun Jun 1 20:47:50 2008 -0400

    ATOM: disable TV-out for now
    
    It only sort of works in NTSC mode and isn't handled correctly
    in all cases yet.  Until we sort out the remaining details leave it
    disabled.
    See bugs: 16186, 16178, 16185

commit 8504c6b0e40477ee544ad7f5366d569bdc53d6f0
Author: Alex Deucher <alex@botch2.com>
Date:   Fri May 30 11:19:03 2008 -0400

    RADEON: update RADEONGetVRAMType() for newer chips

commit 7cb695a329a9b543ad61af08c2d7d6eaf56de35e
Author: Alex Deucher <alex@botch2.com>
Date:   Fri May 30 10:10:56 2008 -0400

    RADEON: add Int10 option
    
    On some radeons you can't read the bios without initializing int10.
    On ATOM-based secondary cards, intitializing int10 tends to hang the card.

commit 714b2c63ec1c4a1410a6d521c03e9d1f90937c01
Author: Alex Deucher <alex@botch2.com>
Date:   Thu May 29 02:31:00 2008 -0400

    RADEON: don't enable legacy bios table based init yet
    
    Needs more work and we need to figure out how best to decide
    when to use it.

commit e20b08525a64888287ec4a369d8f7dbde95c655d
Author: Alex Deucher <alex@botch2.com>
Date:   Wed May 28 14:43:47 2008 -0400

    ATOM: fail of we are not able to get a bios image

commit d4fa17b426b0cafac3184b2ea9b675e2ff154ee9
Author: Alex Deucher <alex@botch2.com>
Date:   Wed May 28 09:50:02 2008 -0400

    R1xx: Gamma fixes for overlay

commit c7e6a50f60a04bbbf1c1ddbf4738a5f75c94f950
Author: Alex Deucher <alex@botchco.com>
Date:   Wed May 28 09:05:19 2008 -0400

    RADEON: only attempt to read vbios from legacy ISA space if it's primary

commit faea008806802ec0e045754ec1eca492ebae320e
Author: Alex Deucher <alex@botch2.com>
Date:   Tue May 27 18:36:01 2008 -0400

    R3/4/5xx: use get_param to get the num_gb_pipes from the drm

commit 965a5dbcd9dc4bf1cdd7f2bbdec15e9733b2e090
Author: Alex Deucher <alex@botch2.com>
Date:   Tue May 27 16:48:41 2008 -0400

    RADEON: improve support for secondary cards
    
    this should fix bugs 16115, 16035

commit 5f951a5573f0c7572230c9aa4d3f75d67f91ed71
Author: Alex Deucher <alex@botch2.com>
Date:   Wed May 21 00:35:14 2008 -0400

    ATOM: remove duplicate code

commit edce33e87fb79a540d8c285f205d4c3f2c2bc9f4
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed May 28 06:43:40 2008 +1000

    radeon: fix surface access on avivo chips.
    
    This should fix VT switch on vesafb

commit 307bd65a25ee425d8359dd30572b002ce2338f91
Author: Michael Babej <mbabej@redhat.com>
Date:   Tue May 27 19:13:49 2008 +1000

    r600: fix vt switch issue
    
    RH BZ 441492

commit bf48c9eb8ec592515be9d1732d60283af715674d
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat May 24 11:51:20 2008 +1000

    atombios: for LVDS set use ref div as per legacy

commit 04500c8419b1aeaeac7968492b82e1d7cad1d05b
Author: Alan Coopersmith <alan.coopersmith@sun.com>
Date:   Tue May 20 20:34:31 2008 -0700

    Strip ^M's from src/AtomBios/includes/ObjectID.h

commit 521a0488d1c414209c3534dc242000faa332a441
Author: Alan Coopersmith <alan.coopersmith@sun.com>
Date:   Tue May 20 20:33:37 2008 -0700

    On non-gcc compilers, use C99's __func__ instead of gcc's __FUNCTION__

commit b7c80d0c86646105d2bce5d4d59ba6c45aa7cafc
Author: Tobias Diedrich <ranma+freedesktop@tdiedrich.de>
Date:   Tue May 20 19:16:54 2008 -0400

    R200/R300: fix gamma setup for overlay
    
    More pending.  See bug 16001

commit 69423482e2e94637142a9ba675589a1449a346a8
Author: Alex Deucher <alex@botch2.com>
Date:   Tue May 20 18:57:13 2008 -0400

    RADEON: cleanup connection detection and remove duplicate code

commit 55e4469f59c82bb5762673de5f3f27d18b0bd9a3
Author: Alex Deucher <alex@botch2.com>
Date:   Tue May 20 17:46:58 2008 -0400

    RADEON: enable cloning on multi-crtc cards

commit 12f185634071980041aaac6265d89708b181b215
Author: Alex Deucher <alex@botch2.com>
Date:   Tue May 20 16:05:41 2008 -0400

    ATOM: Ignore invalid connector entries

commit 19e97f74e39fc2b35727708ac429de33d0b70162
Author: Egbert Eich <eich@freedesktop.org>
Date:   Tue May 20 11:16:15 2008 +0200

    Change RMX code to follow the programming algorithm suggested by ATI.
    
    ATI provides the following algorithm to calculate the RMX scaling ratios
    in its programming specs:
    when RMX_AUTO_RATIO_HORZ_INC set to 1,Horizontal auto ratio result trucated,
    and then incremented by 1.
    Horz_Ratio = ( ((Active display width in characters (including overscan) + 1)
    / (Panel width in characters)) x 4096 + 1 )
    else
    Horz_Ratio = ( ((Active display width in characters (including overscan))
    / (Panel width in characters)) x 4096 + 1 )
    
    when RMX_AUTO_RATIO_VERT_INC set to 1, Vertical auto ratio result trucated,
    and then incremented by 1.
    Vert_Ration = ( ((Active display width in characters (including overscan) + 1)
    / (Panel width in characters)) x 4096 + 1)
    else
    Vert_Ration = ( ((Active display width in characters (including overscan))
    / (Panel width in characters)) x 4096 + 1)
    
    This patch implements this behavor. Additionally it avoids the use of floats.

commit a4f3d0088ba763ed8eab1d331959b5ecde8262e8
Author: Alex Deucher <alex@botch2.com>
Date:   Tue May 20 11:42:53 2008 -0400

    R3/4/5xx: fixup logic from last commit
    
    Spotted by otaylor and MrCooper

commit 130e55738047f2a073bcc47e3e1400f7b694a81b
Author: Alex Deucher <alex@botch2.com>
Date:   Tue May 20 11:32:42 2008 -0400

    R3/4/5xx: fix EXA rotation
    
    xrandr uses PictOpSrc for rotation which we were falling back on since
    render semanties require alpha=0 for REPEAT_NONE when there is no alpha
    channel and there is a transform. If the dst has no alpha channel we
    should be ok I think.
    
    Otayler and I discussed this on IRC.  the more general fix would be
    to clip the dst to the src and mask for bounded ops like in/add/over
    in the pixel exact transform case.

commit cc9f510770700228e5d597c872e926a4e99bd950
Author: Corbin Simpson <MostAwesomeDude@gmail.com>
Date:   Wed May 14 16:49:01 2008 -0400

    RADEON: missing stdint.h includes

commit 71fa57f871dba03260dba2180ce1dab44048ac1a
Author: Alex Deucher <alex@cube.(none)>
Date:   Wed May 14 13:36:38 2008 -0400

    Add RS600 support

commit 582c1a1b2c7b1032e9f9f54ca36100c57f580c5c
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue May 13 20:50:25 2008 -0400

    RS4xx: Split out RS400 and RS480 as separate families
    
    RS400 (intel based IGP) and RS480 (AMD based IGP) have different
    MC setups and need to be handled differently

commit 708e7c98f636738fbcc47a597bc94b309a4dc1c4
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue May 13 11:00:38 2008 +0200

    Reinstate CARD* types that are part of external interfaces.
    
    The compiler pointed this out...

commit 908b7b940e3ef296836bc94680ebb8ab67650e31
Author: Matt Turner <mattst88@gmail.com>
Date:   Mon May 12 12:06:33 2008 -0400

    Replace CARD{8,16,32} with uint{8,16,32}_t
    
    As has been done with xf86-video-intel, replace all CARD* datatypes with
    uint*_t datatypes available from stdint.h.

commit 87e66ce76430890ab4939ffcd42f72b9288eb598
Author: Avi Rozen <avi.rozen@gmail.com>
Date:   Mon May 12 08:33:38 2008 -0400

    RADEON: fix lockup on start
    
    see debian bug 480312

commit 94bf8f01bd43cb103fffecfe04d04a214f892baf
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon May 12 20:02:51 2008 +1000

    radeon: fix set_cursor_colours remove fb offset

commit 1d0f1d31e2ed1d91ee87cb3e02ce48c8c07aa418
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon May 12 15:44:35 2008 +1000

    radeon: rs485 vs rs485m.. mobile? non-mobile? bi?
    
    So it appears we have in the wild two chipsets with the same PCI ID (0x1002:0x5974)
    that are mobile and non-mobile.
    
    the RH bug references is a desktop system.
    The Dell Vostro 1100 also has this chipset with LVDS bits.

commit 25e0c3945a51ae8c14b3a847ec75a256e1397f24
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon May 12 10:28:33 2008 +1000

    radeon: add initial support for cloning outputs. (single-CRTC cards only)
    
    airlied - This code was originally written by Alex, and I've modified it to
    only run on single-CRTC cards for now until we can test it some more.

commit 94405eb1c9e4e0ababc6aef03b753d6ed9eb7838
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 9 05:28:44 2008 -0400

    RADEON: fixup ifdef from last commit

commit 18e20bc22a55ecfee9798c01079d7b24d19f0051
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu May 8 08:45:51 2008 -0400

    RADEON: disable MMIO paths for EXA composite/texvid on IGP/R5xx
    
    The MMIO paths eventually lead to a hang on r5xx/IGP.  I haven't
    been able to find out why yet.

commit c3532268875fd24e6519bea2fb1b814d612bbdb4
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 7 02:37:18 2008 +1000

    radeon: fix zaphod EXA with texture video

commit ffc437f3606ab8ceba1ff152e4bb08988a58b54c
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 7 02:30:28 2008 +1000

    avivo: fix zaphod cursor in theory

commit e36ef14e3a1087e1fe41baa26ade2937f396001f
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 7 01:39:28 2008 +1000

    radeon: fix textured-xv on zaphod

commit 8fc19bee27c0f151d2ab3354f6ac0992b358436d
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 7 01:38:24 2008 +1000

    radeon: zaphod: fix render accel for EXA

commit fc41b9042a5220a8419cc7b69ca3850cae6b903c
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 7 01:32:23 2008 +1000

    radeon: fix EXA pixmap offset on zaphod

commit 4568cb820d567c6909a4be956d7e79b91232535e
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 7 01:19:39 2008 +1000

    radeon: zaphod fixes for pciaccess not allowing multiple MMIO maps

commit ca81fa086b21633a7fd926833fb6d1d4fa080646
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed May 7 01:12:01 2008 +1000

    radeon: zaphod fix for cursor on second head
    
    We don't need to add fbOffset here as the mmap we have of the framebuffer
    starts half way.

commit 24b60c8965f6a0b3f0c2bb1e7236b4d6642c5918
Author: Julien Cristau <jcristau@debian.org>
Date:   Fri May 2 15:30:45 2008 -0400

    Add a test for __GLIBC__ to CD_Common_Types.h.
    
    Atombios redefines the standard types but the definitions conflict
    with the ones from glibc (causes build failures on GNU/Hurd
    and GNU/kFreeBSD).

commit f051359ac09c6b9416e39b9ca7d9dc0880aa1557
Author: thegraze <thegraze@googlemail.com>
Date:   Fri May 2 14:02:16 2008 -0400

    ATOM: add support for DragonFlyBSD

commit 3d469cbc3225d890a895dac7cbc1ab7e08054b48
Author: Alex Deucher <alex@cube.(none)>
Date:   Wed Apr 30 18:33:04 2008 -0400

    RADEON: lock the cursors when updating
    
    this should fix occasional corruption seen when updating
    the cursor.

commit 445b71021843665ba32f37b2ce5c9d2857c07cc7
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Apr 29 21:01:41 2008 -0400

    RADEON: assorted fixes
    
    - free rotate pixmaps on VT switch
    - save crtc/output status so we only turn on
    crtcs/outputs if they are off
    - show/hide cursors when changing modes

commit 070cce5255a5c311f9d8b85ec54bd56655014933
Author: Stephan Wolf <stephan@letzte-bankreihe.de>
Date:   Mon Apr 28 11:26:37 2008 -0400

    R3xx+: further fix for IGP chips
    
    see bug 15538

commit 211e0041c7fc2df494b77428553943a2b526ee4e
Author: Alex Deucher <alex@cube.(none)>
Date:   Sun Apr 27 21:08:00 2008 -0400

    IGP: fix EXA composite corruption

commit 656b06bdde129ca4fc370f5a2cf7311c9179b0ff
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Apr 27 20:20:49 2008 -0400

    RADEON: remove duplicate register define
    
    Also add more bit defs to wait_until register

commit 8a9820a3aa49bc667f90ac291a27e4d7b4ae38b3
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Apr 27 19:02:22 2008 -0400

    RADEON: decrease crtc/output verbosity

commit c5d62fa0e8f52c3264ff9db3ff10cdf5a806bfc0
Author: Owen Taylor <otaylor@huygens.home.fishsoup.net>
Date:   Thu Apr 17 13:14:53 2008 +0200

    Emulate repeats by drawing in tiles
    
    When we can't turn on hardware repeats, because the texture
    is non-power-of-two, or has padding at the ends of lines,
    try to draw the image in multiple tiles rather than falling
    back to software. (We can only do this when there is no
    transform.)

commit eeb7b74bb6c813b0e3afa4b704f6ffb0d0aab92b
Author: Owen Taylor <otaylor@huygens.home.fishsoup.net>
Date:   Thu Apr 17 13:14:25 2008 +0200

    Turn on wrapping when repeating on R100 + R200
    
    Actually enable repeats for R100 and R200. This corresponds
    to a R300 change made in the patch in:
    http://bugs.freedesktop.org/show_bug.cgi?id=15333

commit e511f39dfef503006cf249b9f6934091eaade9b5
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Apr 17 05:04:34 2008 -0400

    R300+: move more common code into init3d()
    
    - pre-load r3xx tex instructions
    - setup RS instructions in init3d()

commit 99435b7c18d931ea620044d0fdb4cc93dfcc6331
Author: Owen Taylor <otaylor@redhat.com>
Date:   Thu Apr 17 02:46:11 2008 -0400

    Radeon: Omit mask coordinates
    
    Adapted from Owen's patch on bug 15546
    This fixes the slowness with aatext on r300
    and may speed up other chips marginally.

commit 37614e1db9a595fbe8a21d7a045895e11d272db9
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Apr 15 09:48:16 2008 -0400

    fix up some things from the last commit

commit 1286fe5ce1c77453d57817b9b26b1bdb32ca7bc8
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Apr 14 20:02:14 2008 -0400

    R300+: properly setup vap_cntl
    
    this fixes tcl/pvs on RV515 among other things

commit f72a4b805db26f10f69330b88459cbeae661189b
Author: Alex Deucher <alex@botch2.com>
Date:   Mon Apr 14 14:10:40 2008 -0400

    EXA: Don't wait for 3D idle after each Composite()
    
    wait in CompositeDone() instead

commit 4cd4acf1092aeb696b086a382a033aee471d2de9
Author: Alex Deucher <alex@botch2.com>
Date:   Mon Apr 14 11:50:59 2008 -0400

    R300: move more common code to init3d()

commit 3c523c9a07402e17dff588fad842224c57e98223
Author: Alex Deucher <alex@botch2.com>
Date:   Mon Apr 14 11:21:42 2008 -0400

    R3xx+: 3D engine documentation and minor cleanups
    
    - document the R300 exa/textured video code
    - minor cleanups of textured video code to clarify meaning

commit ce025bbb2496d4de94b8d4ac450c64441b64ee04
Author: Alex Deucher <alex@botch2.com>
Date:   Sat Apr 12 21:22:03 2008 -0400

    R300+: consolidate some tcl/non-tcl paths
    
    - Move more code to init3d()
    - MMIO textured video seems more reliable now on newer chips

commit 11b54a319c7c9dd52e3fb13372697059dafe1cd3
Author: Alex Deucher <alex@botch2.com>
Date:   Sat Apr 12 16:50:22 2008 -0400

    R3xx+: fix XAA + textured video on non-TCL path

commit dd15a2f5906725116b8cd9954243099055e88e37
Author: Alex Deucher <alex@botch2.com>
Date:   Sat Apr 12 16:49:03 2008 -0400

    R3xx+: more fixes to 2D/3D engine init

commit f3e68d4b7afd2e23675bf6361c496814c9cb4b94
Author: Alex Deucher <alex@botch2.com>
Date:   Fri Apr 11 10:59:07 2008 -0400

    Fix exa glyph corruption on newer chips

commit b59686d6427cbf8b35e36b020cbbc6a0c5149b22
Author: Alex Deucher <alex@botch2.com>
Date:   Fri Apr 11 10:15:25 2008 -0400

    R300+: pre-load vertex programs in init3D()

commit acc5833a35ad6c29a57f659607afb27eebdc2ea5
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 17:52:52 2008 -0400

    R3xx+: consolidate more tcl code

commit 6f8f75bd19ef1919c0291141675be2d0e29b3251
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 17:08:50 2008 -0400

    R3xx+: consolidate some common 3D code

commit 4b9234e1c4f7c7f419cb4245d64f3f9756c98bb6
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 16:58:22 2008 -0400

    R3xx+: tcl wip

commit 865c463e3afb4759758f569132be8bf1386da5cc
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 16:51:04 2008 -0400

    R300+: textured video tcl cleanup

commit 79c8d4ca36a1c3e5fe759d4ccc379c36af8f1676
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 16:28:18 2008 -0400

    RADEON: cleanup

commit c4821a287d29a65f3bcb7d60dc72ec13c0384008
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 16:20:17 2008 -0400

    Revert "R3xx/R5xx: move more VAP, etc. state setup into common init3d() function"
    
    This reverts commit 305a3310963a5dd07b3495015b06aa8c7c4e6b02.
    
    Conflicts:
    
    	src/radeon_commonfuncs.c
    	src/radeon_exa_render.c
    	src/radeon_textured_videofuncs.c

commit 0032c80bf30bab189204e3e6929e18a19d753138
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 14:35:00 2008 -0400

    RADEON: store tcl status in driver rec

commit 9e2ffe66d106abe34a670d2edc9905ed62c485e8
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 14:24:04 2008 -0400

    R3xx+: use the right register for engine flush

commit e1a9f26c2d2cbca9ad159e723ec95b95be1ef349
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 14:12:15 2008 -0400

    R3xx+: minor textured video fixes
    
    - set shader output swizzling correctly
    - flush the right cache register on r3xx+

commit d79040906cd25bd494feb5901f465bbd050aa923
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 10 13:59:58 2008 -0400

    R3xx+: EXA/textured video fixes
    
    - get pipe config based on GB_PIPE_SELECT where applicable
    (adapted from a similar patch from Dave)
    - only flush the dst cache after submitting vertices, freeing
    the cache lines stalls the pipe
    - no need to wait for 3D idle after submitting vertices
    - fix PURGE_CACHE() and PURGE_ZCACHE() for r3xx+
    - fix depth 16 with EXA composite

commit 0a96173cc38e506728d4c3f2dd383ba56e856578
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Apr 7 18:15:34 2008 +0200

    Increase default CP timeout.
    
    Helps avoid spurious timeouts causing problems, see
    http://bugs.freedesktop.org/show_bug.cgi?id=15203 .

commit 255fbf465f5e7db2609a5a151bfa810249db52a0
Author: Owen W. Taylor <otaylor@fishsoup.net>
Date:   Thu Apr 3 02:25:41 2008 -0400

    Fix rendering of transformed sources for REPEAT_NONE with EXA on >= R300.
    
    Use the border color when possible, otherwise fall back to software.

commit bc0407e53237d7968808110bc0243076377acf6e
Author: Alex Deucher <alex@cube.(none)>
Date:   Fri Apr 4 18:40:16 2008 -0400

    ATOMBIOS: Add support for DynamicClocks option
    
    This patch adds support for dynamic clock gating and static
    power management using the atom command tables.  In some cases
    the bios may already set this up during post, so YMMV.
    
    I was only able to test on desktop cards, so I haven't tested
    to see how much (if any) power this saves or how it affects the
    thermal footprint.

commit 5f5e21bb50555c56bd371576074c28c929307ff1
Author: Alex Deucher <alex@cube.(none)>
Date:   Fri Apr 4 14:29:45 2008 -0400

    RADEON: warning fixes

commit c8e9a973aaded24aad567a0e36d0c78a05d6b2fd
Author: Alex Deucher <alex@cube.(none)>
Date:   Fri Apr 4 14:26:19 2008 -0400

    RADEON: add some quirks

commit 091963a635b79884afe77c026eabb48972fbe175
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 3 22:35:16 2008 -0400

    Minor cleanup

commit 950e9860643c20acde0eca4e4ff26baacc1f2b69
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 3 22:11:48 2008 -0400

    Revert "RADEON: memmap rework 1"
    
    This reverts commit dd8ee1b444f4b973a1e0fadca5f943f2162b5e94.
    
    Conflicts:
    
    	src/radeon.h
    	src/radeon_driver.c
    
    This rework seems to have caused more trouble than it was worth.

commit 88a1fe4a94c5d11aff22734b21c89890e4428cd5
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Apr 3 22:04:43 2008 -0400

    Revert "RADEON: remove driver rec copies of mc info, use save rec directly"
    
    This reverts commit be0858a84fbdf74c0b844f462933a221d48c707d.
    
    Conflicts:
    
    	src/radeon_driver.c

commit c40a7aa3989576a8144213e2f31b892d21df8686
Author: Owen W. Taylor <otaylor@fishsoup.net>
Date:   Thu Apr 3 14:43:55 2008 -0400

    R3xx/R5xx: Fix pitch and clamp mode for repeating textures
    
         - We can always use TXPITCH on a R300 even when repeating,
           (previous check for pitch matching width was also wrong)
         - Fix clamp mode for repeating textures to be WRAP

commit a8593482c1f2e0f2dbac06c2e5325ba8c83ed9ff
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Apr 2 09:58:05 2008 +1000

    atombios: fix the dual-head hopefully.
    
    tested on r600 with DVI and VGA

commit 61d883d116fab3e9b513432d65e705afc5bb39f1
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Apr 2 09:57:38 2008 +1000

    Revert "Revert "atombios: fixup the width/height to use the mode values not the scrn ones""
    
    This reverts commit fc9af578997b6f22ee8b17e83f37d98689291b0e.
    
    I see your revert and raise you one...

commit fc9af578997b6f22ee8b17e83f37d98689291b0e
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Apr 1 09:25:45 2008 -0400

    Revert "atombios: fixup the width/height to use the mode values not the scrn ones"
    
    This reverts commit c2b1c8b706a6c7c1fd0af80091958473133d54e7.
    
    These registers hold surface size.  Using the mode values
    breaks dualhead.

commit 959509dd54de053f526b534e379a46934127231f
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Mar 31 14:29:44 2008 +1000

    radeon: use correct DDC interfaces so quirks get applied
    
    Radeon seemed to mess up applying certain quirks, hopefully this will fix it.

commit 18f5f1cd2f52afed89fc11ade0920f3dfea87306
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Mar 31 14:11:49 2008 +1000

    radeon: split quirks into separate function and new quirk for IBM RN50
    
    Add a connector table quirk for the IBM RN50.

commit c2b1c8b706a6c7c1fd0af80091958473133d54e7
Author: Dave Airlie <airlied@redhat.com>
Date:   Sun Mar 30 11:44:14 2008 +1000

    atombios: fixup the width/height to use the mode values not the scrn ones
    
    this fixes it properly, legacy appears to be okay.

commit c5edea3d8c9254d3a21e390b8309e39e4c9635db
Author: Dave Airlie <airlied@redhat.com>
Date:   Sun Mar 30 11:11:22 2008 +1000

    r500/r600: fix rotation to fill screen
    
    I'm not 100% sure this is the correct fix (maybe we shouldn't be using scrn
    virtualX/Y)... this will fix it for now until I get more time.

commit 9c62c820ba45ebc14d5f36f5d7885863800b6adb
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Mar 28 12:37:29 2008 +0100

    Include config.h, so FGL_LINUX can actually be defined when it's tested...

commit a00d9260a85b94a522c442aee24bc5ea4dc31c5c
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Mar 27 20:03:13 2008 -0400

    RADEON: fix lid issues on AVIVO chips for real this time :)

commit f0e89c09074b2c7e641f73692bb39b0bf68eb49c
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Mar 27 19:15:18 2008 -0400

    Revert "RADEON: attempt to fix lid issues"
    
    This reverts commit 9b4473c1d830b88866dd22e8174a07195bd6fcf4.
    This doesn't help.

commit 1442d396b938049b83f009a78ddabe2bf85641b6
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Mar 27 14:02:51 2008 +1000

    radeon: size bios to max of bar vs 64k.
    
    reported by dwmw2: rhbz 438299

commit de2f609ff0004ef8b74727bfebc2c74fb91205ea
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Mar 26 18:35:21 2008 -0400

    AVIVO: no need to call PreinitXv() on AVIVO chips as they have no overlay

commit 75884c257bc2bcfa5b498a77d4c403f09face036
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Mar 26 18:16:47 2008 -0400

    XAA: update message about render so as to not confuse users

commit 9b4473c1d830b88866dd22e8174a07195bd6fcf4
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Mar 26 18:01:29 2008 -0400

    RADEON: attempt to fix lid issues
    
    On some laptops the bios attempts to re-program the chip
    when a lid event comes in.  This should hopefully prevent
    the bios from doing that.

commit 8b144830fe9b4a0cee4745023de5e7d387070f60
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Mar 25 01:15:05 2008 -0400

    RV250: disable textured video due to HW bug
    
    The YUV->RGB conversion in the texture engine is broken
    on RV250 so the colors come out wrong.

commit 1789f11ab91633d3928f8b71988d51ff44bda9d1
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 24 19:03:30 2008 -0400

    R3xx/R5xx: flush PVS state before enabling pvs-bypass

commit 305a3310963a5dd07b3495015b06aa8c7c4e6b02
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 24 14:25:03 2008 -0400

    R3xx/R5xx: move more VAP, etc. state setup into common init3d() function
    
    Also some minor code cleanups

commit 399b1d405e602c62d6deebea6d7e1f38886cd8e2
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 24 13:04:57 2008 -0400

    R3xx/R5xx: use non VAP/TCP for textured video
    
    Just extra state to emit.

commit cd77ec18f32a7b36acb655c927bbfd7044019f97
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Mar 24 18:42:21 2008 +1000

    r300: don't bother with VAP/TCL for render.
    
    We just send more data to the card to process per transaction, without getting
    any actual gains, as we already pre-compute the vertices without needing
    any clipping or transforms from the card.
    
    Perhaps some stuff could be done on-card, but so far the code is a lot
    faster if we avoid sending this extra info.
    
    pre: 150000 glyphs/sec
    post: 185000 glyphs/sec

commit 301c6739b88676a0c78fc72194e993f894b8dc28
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Mar 23 11:14:02 2008 -0400

    RS4xx: Revert back to previous fifo settings for now
    
    Setup of these registers needs more investigation.

commit 9bea60b3eb378de5e1d44cc02a2763f4feae7882
Author: Alex Deucher <alex@botch2.com>
Date:   Sat Mar 22 11:46:15 2008 -0400

    RS4xx: more work on disp/disp2 fifo setup

commit 90f11c3986c28daa7b600b9662da145af325d264
Author: Alex Deucher <alex@botch2.com>
Date:   Sat Mar 22 11:29:51 2008 -0400

    RS4xx: missed this on the last commit.

commit 6d5066a451017a2683addc9e2496987626795dda
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Mar 21 16:21:54 2008 -0400

    RS4xx: attempt to set up disp/disp2 fifos correctly
    
    If you have an XPRESS chip, please test!!!

commit fb1cffac05ae20c8365b25a2042b0ae961880faf
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Mar 21 15:24:36 2008 -0400

    RS4xx: attempt to fix TMDS/DVO support
    
    XPRESS chips added a second set of FP control registers.
    I don't have the hw to test however.

commit 5e3b21284482df9974c9a58f248f0100def2bb0c
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Mar 19 19:15:05 2008 -0400

    Disable the setting of HARDWARE_CURSOR_BIT_ORDER_MSBFIRST
    
    See bug 11796

commit 17cd42ed31814ba329a6a68edd0d75390a7da40e
Author: Matt Turner <mattst88@gmail.com>
Date:   Wed Mar 19 18:17:10 2008 -0400

    Enable BSR in Log2 functions
    
    This patch edits RADEONLog2 and ATILog2 to use the x86 BSR instruction instead
    of looping through bits. It should provide a somewhat of a speed increase in
    this function on x86 and AMD64 architectures.
    
    Note: the BSR instruction was added with the 80386 CPU and is therefore not
    compatible with earlier CPUs, though I highly doubt it's even possible to use a
    286 in conjunction with a Radeon.
    
    The inline assembly also works with Intel's compiler (icc).

commit c83827b4d2b6f03c54429e757a756eb99ff8be6b
Author: Paulo Cesar Pereira de Andrade <pcpa@mandriva.com.br>
Date:   Wed Mar 19 17:58:34 2008 -0400

    [PATCH] Compile warning fixes.
    
      Minor changes to avoid declarations mixed with code.
      Ansified functions with empty prototype to specify they don't
    receive arguments.
      Added some prototypes to radeon.h, and major reorder on radeon.h
    adding prototypes in alphabetical order and specifying to file that
    defines it.

commit bed9754ad21d6c0a7f61067b04ba31c430a7cecb
Merge: 55e446b f71ac0e
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Mar 19 16:06:41 2008 -0400

    Merge branch 'master' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati into r3xx-render

commit 55e446b5bc091e6c7b3c2e9ae20b45130555c246
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Mar 19 13:15:32 2008 -0400

    R3xx/R5xx: Make sure to clamp the output of the FS

commit b6aa4279cbe68cc8e4523795e9714fb798b62d98
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Mar 19 12:45:01 2008 -0400

    R5xx: bump textured video limits to 4096

commit 4a445a3e8c4c5ecd9d4ef8daa26906c3ceaa94a1
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Mar 19 12:31:51 2008 -0400

    RADEON: add new macros to distinguish between R3xx and R5xx 3D

commit 85d0c9e8d22ccc72bec87b3fd44da5d7609293e0
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Mar 19 12:07:33 2008 -0400

    RADEON: fixed textured video with XAA and tiling

commit f5951db7b3522e0fe6af7f46a170c9c9a60a9bff
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Mar 19 12:01:50 2008 -0400

    RV515: fix textured video and EXA Composite
    
    There seems to be an issue with the PVS setup on RV515, but
    bypassing it seems to work fine.

commit 13573879fe56368ad06234712b677c23fabc56c6
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Mar 19 15:06:47 2008 +1000

    r500: make it work from startup.
    
    I'm not sure why this worked or what is going wrong here, really the
    VAP internal architecture escapes me :)

commit d331dd64d644a18ec99a2136cd0943b5edca1f03
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Mar 18 19:44:26 2008 -0400

    R3xx/R5xx: remove extra return after last commit

commit bc34df7a9c35cdd38c49d5c22471f3f487a33d6e
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Mar 18 19:39:47 2008 -0400

    R3xx/R5xx: switch an ErrorF() to RADEONFALLBACK()

commit 6f03f8fe0ecf4181dcf125049cf63bece0451fb2
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Mar 18 19:36:05 2008 -0400

    R3xx: we only use 2 temps, not 3

commit 8bb71ab4a3eb4fb6ef7f709e87c8df387cb70ee3
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Tue Mar 18 14:36:08 2008 -0400

    R3xx/R5xx: fix up a8-src-something_with_colors

commit c362591d9b496df30668543158e4de44de742dc3
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Mar 18 11:15:17 2008 -0400

    R3xx/R5xx: remove some cruft

commit 89fe6d2c7d7471e6088558130f6e49f46c31dd47
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Mar 18 09:43:43 2008 -0400

    R5xx: fix typ in r5xx render accel
    
    This gets render working on r5xx

commit 79b40ebcd8dedfc83e484c1024beeeaccc6124f3
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Mar 18 02:46:49 2008 -0400

    R5xx: first pass at render support (untested)

commit 71292c8f193230255d1d980c2e996bb01d04fab6
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Mar 18 00:45:37 2008 -0400

    R5xx: bump tex/dst limits to 4096

commit 30b52f8aa6a471455284f59b5b27252743892b13
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 17 23:20:10 2008 -0400

    R3xx/R5xx: whitespace cleanup and cruft removal

commit 9c9f1b538ed710c3066775fba0a8e936b63087b1
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 17 23:01:37 2008 -0400

    R3xx: get masks working and cleanup
    
    RS offset was wrong for mask texture

commit ef94febd74f8ee63081b61e42f093a5a2b8fbf1e
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 17 22:27:19 2008 -0400

    R3xx: minor adjustments

commit f71ac0e40b9d950bcb3bba42a75d41f45b6ed1bf
Author: Alban Browaeys <prahal@yahoo.com>
Date:   Mon Mar 17 20:48:48 2008 -0400

    RADEON: Revert to old behavior when resetting the memmap on VT switch
    
    Not sure why this needs to be done twice.  Should fix bug 14980
    Probably needs more investigation.

commit bedbbf196dc97ee5142e7dfae16fb6f317fca5a7
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 17 20:16:25 2008 -0400

    R3xx: some progress

commit af0e626c132de2dd9958fec657fcc85d4c0fe5e1
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Mar 17 18:07:12 2008 -0400

    R3xx: fix errant w

commit 29ea5bfc0eb3194e2454fc3ee863df54f0300880
Author: Alex Deucher <alex@cube.(none)>
Date:   Mon Mar 17 16:41:57 2008 -0400

    RADEON: fix typo in RADEONAdjustMemMapRegisters()

commit ab317e85c5ab1a249a510c34aeb3a908be1a66fc
Author: Alex Deucher <alex@cube.(none)>
Date:   Mon Mar 17 15:28:09 2008 -0400

    RADEON: make sure var is initialized properly in RADEONAdjustMemMapRegisters()

commit 208d307227e15f37a6af5194398ed23266ff743a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Mar 16 19:39:23 2008 +1000

    radeon: the 0x5974 appears to be a mobility chip...
    
    After debugging with partymola on #radeon, adding this allowed his
    Dell Vostro 1000 to work properly

commit 9bc7c2ec4048e1677547c1d60c51ccb954f7589a
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Mar 14 20:12:22 2008 -0400

    R3xx: odds and ends...
    
    still not working.
    - swizzle US output for BGR formats
    - no need to write to temps in ALU ops,
    write to output only
    - flush the PVS before updating

commit 96bea7906c4706fcd57a9cd8f1ce3feab6ac676d
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Mar 14 15:59:36 2008 -0400

    R3xx: theoretical support for component alpha
    
    masks are still broken so...

commit cffe3dcc8991cd7c457a9c1a9f41055aa9ea3436
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Mar 14 14:37:43 2008 -0400

    R3xx: VS WIP

commit b73f52a50dfd6ff8d92f04d6b510c39582c6ac67
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Mar 14 14:20:49 2008 -0400

    R3xx/R5xx: enable VS for mask texture

commit 569a14ca9be1e18fe9921edc816ac3dc32d6cca7
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Mar 14 13:32:12 2008 -0400

    R3xx/R5xx: Fix magic numbers in vertex shaders

commit 4878997529601d62e257aa1c9112bd460561de73
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 21:23:40 2008 -0400

    R3xx: make sure to set the FS code size correctly

commit 22f46b88ef05afb6a6b6d70007ac4980a446430e
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 20:25:33 2008 -0400

    R3xx: attempt to setup the rasterizer properly for mask texture
    
    Not working yet

commit 081fc9e892fa3d2e07b7db65b2e2719646255463
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 18:38:26 2008 -0400

    R3xx: more mask work

commit 2bf0236c03538ace3ce6d0e68f0829fc47d1385b
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 18:32:00 2008 -0400

    R3xx: enable composite for non-mask cases

commit 74286ba41302107d2fc626fee2181f7c4bc18164
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 18:25:32 2008 -0400

    R3xx: add basic mask support

commit a2bbe10d866567911b68f222b4758624bfe9bf84
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 18:16:53 2008 -0400

    R300: setup source selects and output swizzling

commit b9974ecce7d1932595226004858b08a7a6b188dc
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 17:35:38 2008 -0400

    R3xx: set the texture id and add some register info

commit 0ef700b7da5e554a0d0d166f3fde85ff45c9eb1f
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Mar 13 17:02:25 2008 -0400

    R3xx/R5xx: enable blending

commit b35c09a597c93a1d9f06ef0091c96822b0653f98
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Mar 13 18:42:29 2008 +1000

    xv: fixup XAA on r500 textured video
    
    the XAA area should never end up tiled. This may break with nooffscreen pixmaps

commit d4446461c3630caff166456c351ace34f57cc119
Author: Matt Turner <mattst88@gmail.com>
Date:   Tue Mar 11 21:20:53 2008 -0400

    Properly fix uninitialized variables warnings
    
    According to commit 9fd13e6773371c82b9799a5bda7c96ffa5cafe8c to
    xf86-video-intel by Kristian Høgsberg, there is a better way to fix the
    possibly initialized variables warnings. This patch will use Kristian's fix.

commit 20adfd7390d9b1f100e0c4a14f175377b8335c82
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 20:09:35 2008 -0400

    RADEON: enable output attributes that require a modeset immediately
    
    This should fix bug 14915

commit 53ba7f5771b0b53fb0d3bc29d64bdd3813756d10
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 19:12:40 2008 -0400

    RADEON: fix vblank interrupts after VT switch or suspend/resume

commit e946c097f0438afbea6f3dd37ee39d67d415708c
Author: Matt Turner <mattst88@gmail.com>
Date:   Tue Mar 11 19:07:58 2008 -0400

    [PATCH] Fix a few warnings

commit 8e160508520c0a24ca90aad182f296461ca0d9b6
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 18:11:13 2008 -0400

    DCE3: add support for PCIEPHY (untested)

commit fbded88a2925f9f049936dad0736721e7b84a6ee
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 14:10:31 2008 -0400

    ATOM: remove some cruft

commit 3263f6e4a410281d620c288a92bb4521f7b6fc06
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 14:05:48 2008 -0400

    DCE3: enable DPMS on DIG ports

commit eb90e235b58c94f3d4d75394725ab2fe246a42ff
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 13:53:54 2008 -0400

    DCE3: adjust PLL for DCE3 chips
    
    this fixes stability issues on digital outputs and certain modes.

commit 552615ccc5360baafb8bb41698c1ca27816fd4b2
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 13:38:29 2008 -0400

    ATOMBIOS: enable load detection by default on both DACs
    
    Load detection is reliable with atom, so enable it by default
    on both DACA and DACB, rather than just DACA.

commit 78b10487cf222c96f8944ba25e2ea970506b3535
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Mar 11 13:16:00 2008 -0400

    DCE3: add output attribute to enable/disable coherent mode
    
    Enabled by default.  The TMDS transmitter can be programmed
    slightly differently depending on the chips in the panel.  If you
    have problems with tmds on a particular panel, try disabling it.

commit d20be31c46fbec623af4c3628a7c603ceacf500f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Mar 10 21:05:43 2008 -0400

    RV550: MC setup is like RV515 not RV530

commit 38606b08b68842fbcc81c233009c1117269f3be9
Author: Matthieu Herrb <matthieu@bluenote.herrb.net>
Date:   Sat Mar 8 23:22:59 2008 +0100

    Makefile.am: nuke RCS Id

commit 9d710ee1a44cf2f3a948fbdbe17ef09521cbe744
Author: Alex Deucher <alex@cube.(none)>
Date:   Fri Mar 7 15:09:14 2008 -0500

    AVIVO: clean up some unused variables

commit c28c30c9f3d7bfebfd56a5c982c96f0090982054
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Mar 7 14:10:49 2008 -0500

    RADEON: Fix crash in last commit

commit c3a3635865e380c784a226c8ead069d4716d6b75
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Mar 6 20:17:45 2008 -0500

    RADEON: fix tiling/interlaced interaction with randr 1.2

commit df1b94dc4eb1f35b636dbf2ec0ab1c2da9937c0d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Mar 6 19:22:08 2008 -0500

    DCE3: Ignore outputs with DIN connectors for now

commit cb2dc19387c7b6494c47c76d683cf38a48700768
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 18:33:12 2008 -0500

    AVIVO: fix typo from a previous commit
    
    Leave tv dpms hook disabled or you may get bad interactions
    with the shared DAC

commit 77355de48057e5e7e0d5b3f3cf5a7a92220a53b1
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 17:46:00 2008 -0500

    AVIVO: don't add outputs for invalid connectors

commit 600dbe080997a01ceaf6be86723189d518bc1281
Merge: 594743a 5b7875d
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 17:31:37 2008 -0500

    Merge branch 'master' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 594743a99811a8b0f391412892414fcd158eeb56
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 17:30:21 2008 -0500

    AVIVO: fix up memsize detection for IGP chips

commit 5b7875d0cbfbdbcd1515c4e942d30de298b49dff
Author: Doug Chapman <doug.chapman@hp.com>
Date:   Thu Mar 6 14:31:06 2008 -0500

    Bug #14826: Fix a bogus check around xf86SetOperatingState.

commit 651fe23f4c650ed91843dec48db24e18e8b91219
Merge: 3de2dc8 766f464
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu Mar 6 14:28:27 2008 -0500

    Merge branch 'master' of git+ssh://git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 41171c25cd235bafad26bcbabced16ead4b8c54b
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 14:05:18 2008 -0500

    DCE3.0: add support for crtc memreq table

commit 766f464dfdfccadef23e4232f2bce5db22195513
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 13:35:43 2008 -0500

    RADEON: take 2 on proper pragma pack support for bsds
    
    See bug 14594.  Based on suggestion by Henry Zhao

commit a842ce9ca6494e724a7828cead9b61c9ef02b6aa
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 12:32:18 2008 -0500

    DCE3.0: Minor fixups

commit 8a1ba374033591c725a78923aa30829e4de2a5ae
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Mar 6 09:53:51 2008 -0500

    RADEON: option to override TVDAC adj values from bios with driver defaults
    
    If you have a washed out image on the tv dac, try this option.
    Option "DefaultTVDACAdj" "TRUE"

commit 0ed48f8f651a28e189f9fee8c6b593da0178d21c
Author: Alex Deucher <alex@cube.(none)>
Date:   Wed Mar 5 18:41:01 2008 -0500

    AVIVO: Initial support for DCE 3.0 using atombios
    
    DACs are working well, DIG support (DVI, HDMI, LVDS, etc.)
    still has some issues.

commit 2901e99f1942842856cd39c1dcc8b22f3cf7d9e3
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Mar 5 10:40:06 2008 -0500

    RADEON: fix fetching of dac2 adj values from newer bios tables

commit 74eb981287d76836327830bd51272f605a07e0cc
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Mar 3 12:02:44 2008 -0500

    ATOMBIOS: fix atombios parser support on *bsd
    
    bsd requires a different pragma pack than Linux.
    See bug 14594.

commit f7769ea86e265f347eb58c517ccb5ef8b35eec27
Author: Paulo Cesar Pereira de Andrade <pcpa@mandriva.com.br>
Date:   Sun Mar 2 14:49:21 2008 -0500

    [PATCH] Ensure symbols used by other modules are visible.
    
    The xf86-video-ati drivers are one of the cases where LoaderSymbol is
    widely used in some obscure ways. This patch fixes the problem, and
    allows compiling with -fvisibility=hidden.

commit a4398ac3ad77216f2c8aa628425bef5f2912a0a9
Author: Alex Deucher <alex@cube.(none)>
Date:   Sat Mar 1 18:52:26 2008 -0500

    RS6xx: change isIGP checks to CHIP_FAMILY_RS690
    
    these paths are only relevant on RS6xx chips

commit 67d4d04836c05293b844bc505f303cfb04c0f8a4
Author: Alex Deucher <alex@cube.(none)>
Date:   Sat Mar 1 18:33:18 2008 -0500

    RADEON: use xf86SetDesiredModes() in screeninit and enterVT
    
    this should restore the proper output state on VT switches

commit be0858a84fbdf74c0b844f462933a221d48c707d
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Sat Mar 1 18:11:58 2008 -0500

    RADEON: remove driver rec copies of mc info, use save rec directly
    
    info->mc_* were used and the immediately copied into info->ModeReg
    ones.  Just use the ModeReg copies directly.

commit dd8ee1b444f4b973a1e0fadca5f943f2162b5e94
Author: Alex Deucher <alex@cube.(none)>
Date:   Sat Mar 1 16:23:51 2008 -0500

    RADEON: memmap rework 1
    
    Don't restore memmap regs on every mode switch.
    Just do memmap save/restore/setup on server start and VT switch.

commit 1f6a23000001f3d1c21b5c04f94714a8caa7aa8b
Author: Alex Deucher <alex@cube.(none)>
Date:   Sat Mar 1 15:53:42 2008 -0500

    RADEON: only restore legacy dac regs on legacy radeons

commit dee6cef8e62d0651c00319e03eea92940fd24aa4
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Mar 1 14:39:32 2008 -0500

    RS4xx: enable exa render accel and textured video
    
    RS6xx paths seem to work fine on RS4xx

commit 129f737efe4e8d1a368e7db4b063bdcd9339cb09
Author: Alex Deucher <alex@cube.(none)>
Date:   Sat Mar 1 14:32:30 2008 -0500

    AVIVO: save/restore regs by block
    
    Save/Restore the entire block for each output.
    This should fix VT switch problems.

commit b069aadaa63a95d7a71b5cfbab83577b49501094
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Feb 29 22:36:02 2008 -0500

    AVIVO: LVDS panels need dithering enabled
    
    Fixes bug 14760

commit fe87bdee815372b4b4d7d4c705e34681625b90f2
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Feb 29 13:10:13 2008 -0500

    AVIVO: disable pageflipping on avivo chips until we have proper drm support

commit fb3678c7f511d539a51cd090cb8b5041d7d2ba26
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Feb 29 13:01:21 2008 -0500

    R5xx: fix register count when sending fragment program for textured video

commit a66d37d1a896ec934989592457c2beff8e6f1639
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Feb 29 04:07:05 2008 -0500

    fix off-by-one in last commit

commit e56062960be0c8d3947861dd5e0691fce6516b99
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Feb 28 19:16:39 2008 -0500

    AVIVO: save/restore scaler regs

commit ae1c39a9b3e666404d0931679c9078c2e125a8bc
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Feb 28 18:53:55 2008 -0500

    RS6xx: rework output parsing
    
    Turns out it's not as complex as I originially thought.
    IGP chips just have non-standard GPIO entires for DDC.

commit d8d6c9fe4ae7e1ab67dd041a251e901d97c29ed6
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Feb 28 17:01:14 2008 -0500

    RS6xx: fix typos in previous commit
    
    Noted by Maciej Cencora on IRC

commit 46547ae8bdbc5c10f1fd028b95ec4c5c31a5b318
Author: Alex Deucher <alex@cube.(none)>
Date:   Thu Feb 28 14:29:30 2008 -0500

    AVIVO: disable dithering on DFPs
    
    This should fix the color banding some people have noticed.
    Also save/restore DDIA regs on RS6xx

commit 72a53d6f20ac29b3baddb7d8af04f19b76d2e04f
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Feb 28 17:38:04 2008 +0100

    Handle EXA coordinate limits more cleverly.
    
    Generally set the 2D engine limits, and only enforce the 3D engine limits in the
    CheckComposite hook. This should still prevent useless migration of pixmaps the
    3D engine can't handle but allows for basic acceleration of bigger ones.
    
    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=14708 .

commit 5249f450a2487475a95531603cc8668db2c21c33
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Feb 28 12:23:58 2008 +0100

    Fix 16 bit packed YUV XVideo playback on big endian systems with DRI disabled.
    
    http://bugs.freedesktop.org/show_bug.cgi?id=14668

commit e40d75fd8b2aece9dae8076fac822a4a83025fb2
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Feb 27 22:53:10 2008 -0500

    R500: fragment program clean up and magic number conversion

commit 140dadba36b2191f0e18e41dd987785abd5f55d2
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Feb 27 22:21:12 2008 -0500

    R300: fix up magic numbers in fragment program

commit e521476bb5e2dfabc93747e43eb911a8a101357e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Feb 27 21:26:55 2008 -0500

    R300/R400: bump up the clip limits for textured video
    
    This allows up to 2560x2560 (hw limit)

commit 10db46f11d7e1c055c9ad6034c65ad163dad17dc
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Feb 27 15:28:50 2008 -0500

    AVIVO: make sure we select the right LUT for each crtc

commit ea944f38dcfd871b27345698afea1cb986ecb049
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Feb 27 14:37:52 2008 -0500

    R300+: update RADEONCP_REFRESH() to reflect new location of scissor regs

commit b865faf95666e2172c3eec143f77fe9c524e4983
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Feb 27 14:05:44 2008 -0500

    R100/R200: move r100/r200 specific 3D setup into appropriate blocks
    
    R3xx+ doesn't have these regs.

commit ee485ee0fc550414cd39cdb8fd2769fe0bc996a8
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Feb 27 18:41:31 2008 +0200

    radeon: pass distcheck

commit ff110c781299fb729e93572ba3d630ca59e8127d
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Feb 27 18:41:17 2008 +0200

    add warning for r128

commit b4a344f36332a12a51c9e896d93e9cb0672d31ef
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Feb 27 18:40:50 2008 +0200

    add warning for mach64

commit 81ce4097c12ab64a52d0992f981f588f5a297b7b
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Feb 27 18:40:23 2008 +0200

    drop r128

commit 873ff2033f1d0b84c91c48e829aa945f41b490b7
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Feb 27 18:40:09 2008 +0200

    drop r128 (build system)

commit 2b8b2676e7b2fd2952f5307a934ef0a11006f838
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Feb 27 18:39:49 2008 +0200

    drop mach64

commit 05bbbec11a04e7f6321b92c9dbec4ad4c0d130ff
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Feb 27 18:39:32 2008 +0200

    drop mach64 (build system)

commit 68888189cf8d460ef6f8f2f1431a6ffe9fcd8134
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Feb 27 03:09:28 2008 -0500

    RADEON: fix textured video uploads

commit 7cfad216a3f1486be194c972b9b6bcf070358586
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Feb 27 02:13:10 2008 -0500

    RADEON: fix clipping for textured video

commit a2dca1d68d751def34ef3c6f836574173737bf76
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Feb 26 16:38:29 2008 -0500

    RADEON: Convert textured video to use pipelined uploads

commit b4fa1ce9d2da04d94521a82d3c2e95f0fe985ccc
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Feb 26 14:45:25 2008 -0500

    R300/R500: fix up clipping
    
    Based on patch from Peter Zubaj.

commit 44e527a117ab0a363135ff066c7f7e0c12e3dc89
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Feb 26 14:33:24 2008 -0500

    R300: fix cordinate clamping in render code
    
    Based on Peter's fix for textured video

commit 00ec17ad53d7ad43f19c9b723794ac1b8ef86826
Author: Peter Zubaj <pzubaj at marticonet.sk>
Date:   Tue Feb 26 14:26:14 2008 -0500

    R300: Fix clamping and pitch for textured video

commit 4207793f9b6c891cb17ba715223d2002668885e3
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Feb 26 13:16:22 2008 -0500

    R300/R500: set the number graphics pipes properly
    
    This should fix the checkerboard issues on r300/r350 cards.

commit 823d8bf49e4c0a8c839354179942c5a1944c178d
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Feb 26 12:25:14 2008 -0500

    R300/R500: clean up magic numbers in textured video

commit 8ea75b268f11794f4a7e7bac52cb256490ed3fd2
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 26 16:29:19 2008 +1000

    regs: fix spelling properly

commit f2816064a6c2c4c35ccba74b9aa80547e25c012e
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 26 16:28:24 2008 +1000

    regs: fix spelling mistake
    
    pointed out by plaes on irc

commit 9d2ca30b90607085578dde1f314db663bd5f82ec
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Feb 25 17:34:00 2008 -0500

    R300/R500: clean up magic numbers in render code

commit 153ad6fcf704cbf9f811d9986cd4baf04e82c9d2
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Feb 25 07:10:48 2008 +1000

    fixup check for EXA composite pointed out by Alan Swanson

commit 85e470e64f629de72e361c77770e2e29998d1bf4
Merge: 27ddb39 1b84c76
Author: Alex Deucher <alex@samba.(none)>
Date:   Sun Feb 24 05:37:22 2008 -0500

    Merge master and fix conflicts
    
    Merge branch 'master' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati
    
    Conflicts:
    
    	src/radeon_commonfuncs.c

commit 27ddb39b12a0b54e099fd5274c4c91f08e2d2822
Author: Alex Deucher <alex@samba.(none)>
Date:   Sun Feb 24 05:30:11 2008 -0500

    R300: clean up magic numbers in RADEONInit3DEngine

commit d4c20f33ad6a1f88615cd7e09ad3638896873f9e
Author: Alex Deucher <alex@samba.(none)>
Date:   Sun Feb 24 04:46:10 2008 -0500

    R300: replace magic numbers in cache flush

commit e52f1c8d2647b81d891ec0728dd582941a76c83f
Author: Alex Deucher <alex@samba.(none)>
Date:   Sun Feb 24 04:43:18 2008 -0500

    R300: fill in some more 3D bitfields

commit 1b84c76f27c8d24cb42beae26abf000721901c1c
Author: Dave Airlie <airlied@redhat.com>
Date:   Sun Feb 24 19:20:36 2008 +1100

    rs690: initial textured video support

commit 68158124366db883a901e960fe5f05f8df5efa42
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Feb 19 19:51:18 2008 +1100

    rs690: initial rs690 rotate
    
    suffers same problem as r500 with clipping

commit e614bb6965588bf09dcb87f5e08e67120ec9847f
Author: Dave Airlie <airlied@redhat.com>
Date:   Sun Feb 24 01:46:05 2008 -0500

    r500: convert fragprog to use register values

commit 6ce9ee47c75620b2e5d211c5d59d17271a6a7b19
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Feb 23 22:49:34 2008 -0500

    r500: add textured video Xv adapter support

commit 9aaf8b33b22b6ba112869558ae54e021b9487ad2
Author: Dave Airlie <airlied@redhat.com>
Date:   Sat Feb 23 22:16:25 2008 -0500

    r500: initial rotate support - not fully working yet.
    
    Just an example of how to setup and run the r500 3D engine for rotation.
    this rotates for me but I get some strange clipping on the bottom of my screen

commit 05dc3e4fc19d056ce99a7b110665adab2ca1ea21
Author: Adam Jackson <ajax@redhat.com>
Date:   Sat Feb 23 20:29:51 2008 -0500

    Clarify R500 US setup.

commit 080606ad528972623e1ed1124d8efe7705a73446
Author: Adam Jackson <ajax@redhat.com>
Date:   Sat Feb 23 20:21:17 2008 -0500

    Add the R500 US index/data pair.

commit edfb3b6bbf0ee17ace8e6ba704a6f54e249fec63
Author: Alex Deucher <alex@samba.(none)>
Date:   Sat Feb 23 19:59:33 2008 -0500

    RADEON: no textured video yet on XPRESS chips
    
    Still need to sort out the VAP and PVS stuff

commit 4146bfe5d00e40a86d17826fac50d04b2469621d
Author: Alex Deucher <alex@samba.(none)>
Date:   Sat Feb 23 19:21:52 2008 -0500

    R500: fix typo in new r5xx regs

commit d9be9f34b0d3313e7b22b2a8bb0a8924ad3116bf
Author: Alex Deucher <alex@samba.(none)>
Date:   Sat Feb 23 19:06:30 2008 -0500

    RADEON: add textured video support for r1xx-r4xx radeons
    
    Based on the kdrive ati video code by Eric Anholt.
    R3xx/R4xx still have some clipping issues in certain situations

commit 9dc4acad79196e9d5d94dd710773bfa83456d47f
Author: Alex Deucher <alex@cube.(none)>
Date:   Sat Feb 23 18:29:00 2008 -0500

    RS6xx: gpio entry for DDIA varies depending on the number of DFP ports

commit ed0a93edf28155308e7ab9d8705581bb38455ea0
Author: Adam Jackson <ajax@redhat.com>
Date:   Sat Feb 23 15:02:17 2008 -0500

    Fix R500_US_CONFIG.

commit bc2bd6f841b51aeed3b6b4a47dbe758c200bc5a6
Author: Adam Jackson <ajax@redhat.com>
Date:   Sat Feb 23 14:34:18 2008 -0500

    Add R500 unified shader register block.

commit a7b5c3bb74fc4de5e38a75ac31656445ce823464
Author: Alex Deucher <alex@cube.(none)>
Date:   Fri Feb 22 19:35:11 2008 -0500

    RS6xx: fix DDC on DDIA output (usually HDMI port)

commit 3327a681e21101cc6f6e162f4e29f9937b69ccc3
Author: Alex Deucher <alex@cube.(none)>
Date:   Fri Feb 22 17:05:56 2008 -0500

    ATOM: properly set up DDIA output on RS6xx boards

commit 1d0e9ab8b9451101b1b91943546f6c5833c21b3f
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Wed Feb 20 10:21:49 2008 +0100

    radeon: Fix typo flagged by gcc -Wall.

commit b5bd442b60dbc72fe4c1e928ab864aeb0fd7a3cb
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Feb 19 20:47:40 2008 -0500

    R100: fix render accel for transforms
    
    Not sure why we had a separate broken path for r100 vertex
    submission.

commit a0a73208a21546ac120fb9a463261836c9ea7b55
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Feb 19 20:11:19 2008 -0500

    RADEON: restore clock gating and CP clock errata on VT switch
    
    This may help people with hangs on resume

commit b77e2aff7453a9f370beba37ca3c25b92b3f97ff
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Feb 19 19:55:41 2008 -0500

    RADEON: fix DDC types 5 and 6

commit af82172a82f2bdf96e571def659a1c70f92dfdbf
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Feb 19 19:39:35 2008 -0500

    RADEON: update man page with supported chips

commit 1302d1b019c8091986aaf9c86b25c1f36a037788
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Feb 19 00:34:31 2008 -0500

    Bump for 6.8 release

commit 830d29e8b280c11e798fb5bf5278bf24ecbac7bf
Author: Alex Deucher <alex@cube.(none)>
Date:   Mon Feb 18 21:17:12 2008 -0500

    ATOM: fix RS6xx connector table parsing and fix some warnings

commit 03aa4cc6d6e8c715a1c1d677cc1845223505b358
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Mon Feb 18 20:19:58 2008 -0500

    bring back to life planar-to-packed conversion for rs4xx
    
    Here's a patch to bring back the code for converting planar yuv to packed yuv,
    if a RS400 family chip is used (though I've no idea if they really all fail
    with planar yuv).
    
    fixes bug 12744

commit 66b0b3f43bb714bc007169d5ba6dabe34cfc008b
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Feb 18 10:33:59 2008 +0200

    r128/radeon: probably correct fix for non pci access code

commit d055b9e800ae50d08cca9db75fc666ce1da9ab52
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 16 09:13:43 2008 +1000

    r128/radeon: hopeful fix for non pci access code

commit c773bc6a314327da29e21e4ebac6fa7f3e98a0a7
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 16 09:05:07 2008 +1000

    r128/radeon: fix build without pciaccess

commit 690a52da5248f47a587a878d05fce9784957970b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Feb 16 08:33:36 2008 +1000

    mach64: fix non pciaccess build

commit fc85188fd95bf78b7f965cdde3e22b644c74ff81
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 15 18:36:10 2008 +0200

    ati: convert to pci probe
    
    add pciids for each subdriver, make no use of the match_data functionality.
    
    thanks to Alex Deucher for reviewing and testing.

commit 665bd7e2f61cac3e029bbad5024034e5136deec1
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 15 18:34:56 2008 +0200

    ati wrapper: translate Device lines

commit a596c1618f72179a45289a50a1f9e89462ce9667
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 15 18:34:31 2008 +0200

    r128: do not compile in PciChipsets twice

commit 99cd8ff9a7e15fc2b4e55f8bc020f584173a8c2d
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 15 18:33:51 2008 +0200

    ati: drop duplicate pci-id defines

commit 146b01b51069dc227d0b125babb3f6957c9b9de2
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 15 18:33:29 2008 +0200

    mach64: clean probe a little
    
    do not report I/O ports now, they are reported later.

commit f47d461331a032f9bdcf6f63336e848778cec6cc
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 15 18:32:56 2008 +0200

    mach64: minor cosmetic, I2C type

commit 2c66f2e812195167df9ca113044d46deece776ac
Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
Date:   Fri Feb 15 10:59:30 2008 +1000

    make distcheck pass

commit ed87f367ddab7366f84917b43b31d76df4ce1110
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Feb 13 12:53:46 2008 -0500

    RADEON: disable LVDS if panel size is 0x0
    
    if we can't get the panel size from the bios or edid
    or a user specified option, assume it's not connected.

commit 422d7f441fdbb318d22d44db661ac9bd61387bd2
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Feb 12 15:35:46 2008 -0500

    R6xx: when both crtcs are in use make sure they are both enabled
    
    sometimes setting a mode on one crtc can cuase a blank screen on the other.
    make sure they are both enabled if they should be.

commit 860f5af75274cb236f536e1da09da6bd9a579530
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Feb 12 14:46:49 2008 -0500

    R6xx: fix up use of bios scratch regs to reflect the new offsets

commit 32f2119b43a0faf6069d8cc0816f0d9f7914c07f
Author: Alex Deucher <alex@cube.(none)>
Date:   Tue Feb 12 14:20:02 2008 -0500

    R6xx: bios scratch regs moved.

commit 8d64be6ebd7f50d4bcb587afeee8252c1367dc77
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Feb 12 12:53:09 2008 -0500

    RADEON: make sure we always set up the FP crtc shadow registers for crtc0
    
    The behavior changed when I added rmx center mode support.  In cases where
    crtc0 drives a DAC this can lead to a blank screen.

commit 810d192ee046077a894e0fb5f2dfd6a7c0130766
Author: Alex Deucher <alex@cube.(none)>
Date:   Mon Feb 11 19:23:01 2008 -0500

    R6xx: add missing objects

commit 85043439426e534e561259ce98bebdd8508b36a9
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Feb 11 16:36:58 2008 -0500

    R6xx: make sure we set up the HDP base properly

commit 9ab5d2ec7c583c74f364d7cfbb54bcd2cd8ae2f5
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Feb 11 15:26:51 2008 -0500

    RADEON: always restore crtc1 before crtc0 when using both crtcs
    
    In some rare cases restoring crtc0 first will result in a blank screen
    on crtc1.  If you are having issues with a blank screen on crtc1
    that used to work on 6.6.3 or before, this should help.

commit e33edca75bd9df0aa19a33e74c38a6d02610befd
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Feb 11 00:33:12 2008 -0500

    RADEON: Implement proper (hopefully) BIOS/DRIVER interaction for ATOM bios
    
    Tested on atom-based Desktop cards.  It'd nice to get some testing
    on atom-based laptops.

commit 6524e33435a786f7de0064cdd1b04c1120d21593
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Feb 10 18:52:52 2008 -0500

    RADEON: Implement proper (hopefully) BIOS/DRIVER interaction for COM bios
    
    Tested on my M10-based laptop.

commit 8606c1bd175893c77e8c758246a1aed166c8be51
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 8 19:07:03 2008 +0200

    mach64: factor out BIOS panel info parsing

commit 9f33218c80f5a6d6d9464aa3db8ae25a4759f351
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 8 19:06:41 2008 +0200

    mach64: minor cosmetic, LCD panel id

commit 8cd5a465a03834b4b2f3a19f8d36fc9d2e18c6d4
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Feb 8 19:06:27 2008 +0200

    mach64: minor cosmetic, DAC type

commit 7f4db96123fdcba9874226352802d702c2a498bd
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Feb 8 10:47:10 2008 +1000

    add rv670 pciids

commit e8899b9978291c62a65f468c92f340f65ad5479d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Feb 7 19:27:38 2008 -0500

    R6xx: fix ddc after my i2c rework
    
    Seems r6xx does something different for its i2c table,
    revert to the old behavior for now.

commit 435de6c4e46ff2bebd4cee58888a66b936cd3fdf
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Feb 7 19:14:13 2008 -0500

    RADEON: sync up with latest upstream versions
    
    atombios.h
    ObjectID.h

commit 692789a293970f70b88ccb6adcf0676d8b495ae2
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Feb 7 18:03:37 2008 +0200

    mach64: factor out BIOS multimedia parsing

commit 933328ffd6d1d872a18d3de8624c4df845a64588
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Feb 7 18:03:03 2008 +0200

    mach64: complement hint for sparc

commit 956c8c81f3ff434930a0cb17b027b2f8e4eeabb2
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Feb 7 18:02:31 2008 +0200

    mach64: consolidate refclk #2

commit dce4cc26a8e2bf53805ec63763243f3ff6b4a6d3
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Feb 7 18:02:17 2008 +0200

    mach64: consolidate refclk #1

commit f7ed807f0d82a7446ebc4acdd4e94df44a675f19
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Feb 7 18:01:59 2008 +0200

    mach64: cosmetic

commit cda1cd198f33c26ef1b51532a2126468369743b8
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Feb 7 18:01:33 2008 +0200

    mach64: factor out BIOS clock parsing

commit 73ff279469be9c7cbf9f533b85fcb553694ff413
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Feb 7 18:00:55 2008 +0200

    mach64: BIOSBase is no longer used

commit caea326cc6f1932bb299f451be013651a5749ea7
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Feb 6 06:36:13 2008 +1000

    r300: move fragprog setup code to prepare composite for now

commit 470cd6a401c6a3e8fea981a8fe97c28be3cfb81d
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Feb 6 06:04:13 2008 +1000

    r300: remove r300 specific vertex emission
    
    Set the vertex and fragment engine to expect the mask coords.

commit f65e8dfac23adfa199026765fe3a1ea08cf4da67
Author: Alex Deucher <alex@cube.(none)>
Date:   Sun Feb 3 00:09:59 2008 -0500

    RADEON: rework i2c handling
    
    Split out clk, data, and lock regs and masks.  some cards use different
    regs and masks for each.  For cards with ATOMBIOS, use the i2c bios
    table to grab the i2c data.

commit a38a903debc0a50dbc73f59dc2741bbea76d2bd9
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Feb 1 02:59:07 2008 -0500

    RADEON: don't restore LVDS_PLL_CNTL for now
    
    seems to cause problems with resume for some users.
    this needs further investigation.
    see bug 12596

commit 5d7bea2b62c86868baf1960665a40249a43bafc5
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Feb 1 02:53:22 2008 -0500

    RADEON: remove redundant RADEONDisableDisplays()
    
    use RADEONBlank() instead

commit 73b437ce232c94c0067a0d2f70538b6e1e8c07a7
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Feb 1 02:47:06 2008 -0500

    RADEON: remove unused "aspect" scaler option

commit f1fb9e4daa29bc379f653f847254db1496b625fd
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Feb 1 02:39:18 2008 -0500

    RADEON: Implement "center" mode for RMX on legacy radeons

commit bcd590103e04bfdb4f12413beacebf344f07e88e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Jan 29 12:12:54 2008 -0500

    RADEON: update man page to reflect AGP 1x default revert

commit 09348a83d06ba9d3129499c4daedd44a68771530
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Jan 29 12:09:24 2008 -0500

    Seems the default is more reliable... we can't win.
    
    Revert "radeon: Default to 1x again with non-v3 AGP cards."
    
    This reverts commit b653e5a628bfa4dfb168e96f93f41eb910f409fb.

commit 0c26806245381b925b73ff9f3b747e3dcf0ebd6f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Jan 29 10:26:48 2008 -0500

    RADEON: Add new RV380 pci id
    
    bug 14289

commit ce77ed78a877023da72dbe51609aef9a07e250b1
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Mon Jan 28 19:02:56 2008 -0500

    RS690: Implement MC idle check

commit b7de4ff52cfbdd85ee65000613632e21b92af24e
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jan 26 19:28:05 2008 +0200

    mach64: add hint for sparc and minor cosmetic.

commit 09d713aa0ed6367b4457420b3c2832fe8eca9b00
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Jan 23 18:05:41 2008 -0500

    Revert "RADEON: adjust PAL mode hstart"
    
    This reverts commit 719a9a376e34d99032af75e3f7b002670ccb816b.
    
    This breaks TV out on some cards.

commit 719a9a376e34d99032af75e3f7b002670ccb816b
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Jan 20 18:40:53 2008 -0500

    RADEON: adjust PAL mode hstart
    
    Most people seem to get a more aligned picture with this setting

commit b2db8657fb888cff6d64c6dcb182caac389776ce
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Jan 20 18:33:22 2008 -0500

    RADEON: re-work i2c for DDC
    
    Unify the radeon/avivo paths and grab the data/clk masks from bios
    if available

commit a43003b24022a833e604f41b2873c0350b34181c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Jan 19 18:49:53 2008 -0500

    RADEON: get dac2 adj values from the bios tables

commit d4596c52ac9994be26e9ec2d7d57b3892c34abdb
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Jan 19 17:17:26 2008 -0500

    RADEON: grab pll_in_min/pll_in_max from bios tables if available

commit 9a0947c812d0d38d1bca6a91140ac210831a6cb4
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Jan 19 13:57:50 2008 -0500

    ATOM: Use LVDS edid from bios if available

commit 7238258c12def8ef273e5362f716d165f720c5a5
Author: Kusanagi Kouichi <slash@ma.neweb.ne.jp>
Date:   Sat Jan 19 15:04:21 2008 +0100

    radeon: Partial fix for XVideo RGB image distortions.

commit 32be3cf9d6c34e60ff8c3d6cfe9f73f1869c50e4
Author: Brice Goglin <Brice.Goglin@ens-lyon.org>
Date:   Fri Jan 18 14:42:14 2008 -0500

    RADEON: print the name of the output when printing the EDID

commit 4ba9430ee97dbce8f77db8de6ce9b753a75e453d
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Jan 18 18:18:18 2008 +0200

    mach64: workaround for corruption at upper-left
    
    commit possible workaround, it's reported multiple times ...

commit 12c00111b68c9cf4872a424258c6f8b7247aac47
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Jan 18 18:17:40 2008 +0200

    use stand-alone drivers for each chip family.
    
    Do not load the ati wrapper when the user specifies the sub-driver name in
    the Driver line of xorg.conf.  Also, for -configure cause the wrapper to fail
    and let each sub-driver speak for themselves.

commit 24c7d134cd450f9e2cca85e4a2fc3253d250be04
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Jan 18 09:50:38 2008 -0500

    RADEON: make sure EXA Composite is actually disabled on XPRESS chips.

commit eaf425436008092abe81208321a2b3b6698a5d79
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Jan 18 20:11:57 2008 +1000

    fixup register 6594 save/restore

commit 3de2dc88cf26ff5932f11cecdf975777b8aa2a4a
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Jan 16 14:55:05 2008 -0500

    Bump CRTC size limits on AVIVO chips so 30" displays work without tweaking.
    
    Note that the CRTC size limits we're using right now are _not_ the
    hardware limits, they're just heuristics until we can resize the front
    buffer properly.

commit 2a89a31481d71a56a9930073cf99d3ae7b4290e1
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Jan 17 15:08:17 2008 -0500

    RADEON: use radeon_output->Flags for tracking RMX rather than mode->Flags

commit 495e3119250ffb48489debbaabe560d23753cc43
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Jan 17 14:56:19 2008 -0500

    AVIVO: Add support for RMX
    
    Both centered and expansion modes are supported.  Select
    using output attributes.

commit 6bd510a211f25d52e74791e4a429cd2218ced541
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 16 18:09:49 2008 -0500

    RADEON: add a message about render accel on newer cards

commit 85bf3439fe2579aec48f5cd8d65a9d51b1ae8535
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 16 17:52:06 2008 -0500

    R300: only init3d on r3xx

commit dbb2ca471dfbff245b30c5055871dee0dc0e3d15
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 16 17:10:02 2008 -0500

    R300: only enable render accel on non-IGP r3xx/r4xx chips for now

commit 3c72b100bcfacee600644669b586e86cfd32754e
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 16 16:55:42 2008 -0500

    R300: First pass at render accel
    
    This first pass is pretty limited.  All it currently supports
    is transforms for rotation.  No blending yet.
    
    Based on inital implementation from Wolke Liu with
    additional lock-up fixes by Dave Airlie.

commit 2ba3562d2af911fdd90881049599e239d27260bc
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jan 12 17:11:59 2008 +0200

    ati wrapper: xf86PciInfo.h is enough

commit c2caeb11a97dad5379d70881c5c0fd834a8c3d54
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jan 12 16:18:34 2008 +0200

    ati wrapper: add DriverRec's and use them

commit 19e1b180fec6f83a474e125465bc60111c0f43e0
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jan 12 16:18:07 2008 +0200

    mach64: load for both "ati" and "mach64" as driver names
    
    similar to r128/radeon

commit 92f54400d5450b29b3a76d5ecc927cf0d73e156e
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jan 12 16:17:47 2008 +0200

    mach64: add version (need not match with ati)
    
    similar to r128/radeon

commit 311ec7b6c54a50a4b8a5a445f7283da2b0b2e0f5
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jan 12 16:17:21 2008 +0200

    atimisc: rename to mach64

commit 5244e235262290eab8a3546f449295c12ed8f6c7
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Jan 14 16:11:09 2008 -0500

    ATOMBIOS: disable the scaler by default on avivo cards
    
    Fixes bug 14001

commit 729da30c80d6545b75c8faea44754634f477cc09
Merge: 000741e 625a885
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Jan 14 10:05:01 2008 -0500

    Merge branch 'master' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 625a885a964488da2a35065eb597a17ee57b22a9
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Jan 9 17:39:56 2008 +0200

    ati wrapper: use pci ids

commit 48865200ca9f1daf87e52620b9f8175f88dd886f
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Jan 9 19:01:04 2008 +0200

    radeon: remove stray include

commit a5a6b873353611cb7e46e5e375f039957c7051a7
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Jan 9 13:03:32 2008 +0200

    radeon: remove stray _X_EXPORT

commit 80c9974b6cdc0147d777df6990b3f3aacd87969d
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Jan 8 18:15:47 2008 +0200

    r128: pci-rework conversion
    
    compile-tested only

commit cd4b39403d74f314e1c2cfa4cf0e4fe542891dc3
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Mar 10 23:12:15 2007 +0200

    Drop symbol lists from r128, radeon, theatre.
    
    compile-tested only

commit 63b4b8213fabc5a57f897b60b6eaa9f78d86e6ff
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Mar 21 20:24:22 2007 +0200

    [mach64] Drop symbol lists.
    
    egrep LOADER\|SymLists\|Symbols src/*.[hc]
    
    not needed after server commit bca9364f3f4a2376edbcf57a34f704ce28be21ba, i.e.
    xserver 1.2
    
    compile-tested only

commit 000741e250e54122b0adc91694eb4bfa320a70fb
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Jan 10 14:49:48 2008 -0500

    RADEON: clean up output handling

commit 10e7636c02478b8ffe183bb0c46229ca0d6584e1
Author: Kristian Høgsberg <krh@bitplanet.net>
Date:   Wed Jan 9 12:47:39 2008 -0500

    RADEON: fix crtc routing on r4xx cards when using atom to init DVO chip

commit 3af671f5963810dbfd63abc9889b1d46b68f404c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Jan 9 11:30:25 2008 -0500

    RADEON: restore FP2 regs before external encoders
    
    This may fix krh's dvi problem

commit 2a54c6bb09ade2ec8f998dfc1624017029d47fa3
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Jan 8 18:43:54 2008 -0500

    RADEON: Make default output actually work...

commit fa3e2055225c27e25465fc46786da1b7574fd3cc
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Jan 7 01:13:09 2008 -0500

    RADEON: add default outputs if no connected devices
    
    If no connected devices found at server startup, default
    to something so the server comes up.  LVDS on mobility chips,
    DAC or TMDS on others.

commit d972cc9237eb90b49b11f8d2bdc5b61f628911dc
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Jan 5 17:19:06 2008 -0500

    RADEON: Fix TVStandard option

commit 45656b9d5a426053da2a094de39c2690c0c6f799
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Jan 5 12:00:55 2008 -0500

    R128: Like powerpc, don't use VGA by default on sparc

commit b8e8db4675d07e45782de0d7c67ee0fd85eaedb3
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Jan 4 20:16:19 2008 -0500

    RADEON: fix tvdac load detection at server start up

commit 3ba7f393d0669df36848715799de8affc10a5534
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Jan 4 20:00:48 2008 -0500

    RADEON: further fixup for pScrn->pScreen issue
    
    the previous fix seems to cause the driver to hang on
    some cards.

commit a0de9c0844f9e066e0f02e8cd8045bdd278e6494
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Jan 4 19:48:30 2008 -0500

    RADEON: improve ntsc image centering

commit 03d2f25801c8a8ec15030f06008df112d07c1a2d
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Jan 4 18:19:54 2008 -0500

    RADEON: fix compile

commit 308848783ed9ae27aed7c7de6ee813d375ef495e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jan 5 09:11:55 2008 +1000

    i2c: a line mux of 0 is valid

commit 94d5a432f72801f821d1c4ce952baba17552659d
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jan 4 17:16:54 2008 +1000

    atombios: i2c lines are all done with sw so we can accept any of them.
    
    hch reported this working on his laptop with 0x7e60 as EDID for LVDS

commit 2e4473b63d65801ae8ac5a8391de232b2201d958
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Jan 3 15:47:50 2008 -0500

    RADEON: fix crash when setting rotation in the config file
    
    xf86CrtcRotate() accesses pScrn->pScreen which is not set
    during ScreenInit().  This should also be fixed in the server.
    See bug 12129

commit c652208861bffca94f06b7f67688ce220e050bfb
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jan 3 17:54:58 2008 +0100

    radeon: Adapt manpage to reality wrt AGP options.

commit ab451e4b7a5423d61b57cf0646599267d8504af4
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jan 3 17:52:39 2008 +0100

    radeon: Miscellaneous warning fixes.

commit 394c52273328e90518568b694ee79dc1a8dab651
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 3 18:56:16 2008 +1000

    r500: tvout avoid doing dpms here it makes my tv mode go all crappy
    
    need to investigate further

commit 1c647279f021d01e110980727b7c7dd7efae1642
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 3 11:55:28 2008 +1000

    r600: change devices list depending on connector

commit f36db6e10d32a68b32d20ae4ad02cfc0bfd1c9c3
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 3 11:27:47 2008 +1000

    r600: fixup crash on unknown output type
    
    not sure this is 100% the correct approach

commit 1accfdd590828e95e0d68a576c8ee05a06a86e43
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 2 19:48:28 2008 -0500

    RADEON: various avivo tv-out related clean-ups

commit ce34090c758ac91171cb6adb9b8a36e4adbf99cf
Merge: 2180f04 30cab1d
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 2 16:41:36 2008 -0500

    Merge branch 'master' of git+ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 2180f04b6fb94a638f6274cb4455d5688b324dbc
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 2 16:41:06 2008 -0500

    RADEON: preliminary support for ATOM RMX
    
    not functional yet.

commit dab4dc285154d40303aadaa849b85f8e251e578e
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Jan 2 16:27:19 2008 -0500

    RADEON: add support for ATOM component video table
    
    Component output is still not working.

commit 30cab1dbebb7bdb925f2fe9f91b84183312bbbfd
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Jan 2 15:41:01 2008 -0500

    RADEON: Make sure all old IGP chips have HasSingleDac set
    
    fix the csv file and re-gen the headers.

commit e8e585651215b011e3ad07c59d0eab9107ccd8c6
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Jan 2 10:14:46 2008 +1000

    PLL/r600: tweak pll to pick first one found instead of keeping going

commit 14aa4060ad27ecb3d40b2b17ee4cf7cc55a121dd
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Jan 2 09:49:44 2008 +1000

    r600: fix tv-out output naming

commit f65374f5e15bfd391a1838a686cd87d3bab8043d
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Mon Dec 31 09:44:34 2007 +1000

    atombios: initial rs690 patches

commit a674f683e6699c30664d9cd468a64de991c3fd7e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 30 17:43:17 2007 +1000

    atombios: enable TV-out detection code - tv out works for me with this

commit aa7c28cbd943bb525698515d444cb5097880e364
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 30 17:40:37 2007 +1000

    atombios: enable support for using tv timings
    
    enable support for the atombios tv timings selection by programming the crtc
    with the tv timings if a tv is detected on the output

commit 0bc3fd595a73e12a424571697d164a09a6a4c072
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 30 16:39:58 2007 +1000

    atombios: add support for reading tv standard from atombios
    
    fix typo in atombios header file

commit bfa22d676a6f333503104041f62222f4de9bb7d8
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Dec 26 12:29:47 2007 -0500

    RADEON: fix typo that broke tv load detection

commit 0c99554c6fab1192f5e8595469c21b5f33e1eb4f
Author: David Miller <davem@davemloft.net>
Date:   Wed Dec 26 02:19:12 2007 -0500

    [RADEON]: Add missing break in SCLK calculation.

commit 6e0d5cc1c62fbfc1962fa0d6333f0c0a8c6327bd
Author: David Miller <davem@davemloft.net>
Date:   Wed Dec 26 02:17:34 2007 -0500

    [RADEON]: Like powerpc, don't use VGA by default on sparc.

commit 2b1fae668ddabbc72e5fc31365302ea722174df1
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Dec 26 02:04:06 2007 -0500

    RADEON: fix PAL tv-out
    
    Many thanks to Andrew Randrianasulu for providing me with
    pll reg dumps

commit d736eb5732da573162c70712dc4e8b0114986702
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Dec 24 12:34:15 2007 -0500

    RADEON: default "IgnoreLidStatus" to TRUE
    
    Seems there are lots of busted ACPI lid status and people
    starting X with the lid closed.

commit 653da558148cc601bc1f80253e92ef98c75ef37a
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Dec 24 01:11:56 2007 -0500

    RADEON: restore crtc regs before VGA regs.
    
    It seems some radeons don't restore text console properly if
    the crtc regs are restored after the VGA regs.
    Thanks to Sverre Froyen for helping me track this down

commit ad3325f672a241449ca239c8ee3a24b6d7703d76
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Dec 23 17:18:42 2007 -0500

    RADEON: Add "IgnoreLidStatus" option
    
    Generally, users that start X with the laptop lid closed
    want to use one or more external monitors rather than the
    internal panel and do not want the internal panel to be on
    by default.  Others, it seems, want to always have the
    internal panel on, regardless of the lid.  I can't win.
    Enable this option to force the latter.

commit 20eedf348a527e1e0a5450bc22d7564895034a66
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Dec 23 11:27:55 2007 -0500

    RADEON: fix pll input setup on mac cards
    
    the function was exiting before the complete setup was finished.

commit 4f2e833e8ebaba3ad85ec5314fff8fa05395b679
Author: Arkadiusz Miskiewicz <arekm@maven.pl>
Date:   Fri Dec 21 18:56:34 2007 -0500

    configure.ac fixes

commit 2b6e8e2b8f74e94560de89693ecbc7260536591e
Author: Arkadiusz Miskiewicz <arekm@maven.pl>
Date:   Fri Dec 21 18:10:17 2007 -0500

    RADEON: various cleanups

commit 4c6f60e3b19ac55ab1255c79df03b1df5950864e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Dec 21 17:33:04 2007 -0500

    RADEON: clean up prototypes

commit 8c761afdcb9baf1649b93449692fb9ab67bc2c80
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Dec 21 16:24:49 2007 -0500

    RADEON: more re-org
    
    move save/restore routines into legacy_crtc/output

commit 910773d3a6c717f9d4762ea7b9ee6c3ae061781e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Dec 21 15:53:15 2007 -0500

    RADEON: more re-org.  move XAA Mem init to radeon_accel.c

commit 0631a23bd103f9b74e525da2c41304eab60c6f17
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Dec 21 15:40:18 2007 -0500

    RADEON: fix rn50 reversion from last merge

commit 5b917797a13c6caa80028d1842a284598e874288
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Dec 21 15:30:20 2007 -0500

    RADEON: remove no longer used radeon_display.c

commit bf14aa5f88fc3b4e69d71db5b23248b8bb2018d0
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Dec 21 15:29:47 2007 -0500

    RADEON: re-org legacy crtc/output code into separate files

commit be7f8fd338f5af8b632f16a83db41e15d00af469
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 21 10:03:49 2007 +1000

    fix mode bandwidth configure check

commit 3f9b597dedc45379b0bc0b631f3f924c403bca48
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 21 09:55:42 2007 +1000

    fixup clip test include handling

commit 9a5b501332c0a1f10af20845af48c9ddd2ce26a0
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 21 09:45:55 2007 +1000

    set ddc line correctly post-merge

commit 3c31b96afa20913ad947e68fe0c3a662e5eafbdd
Merge: eb99c3c f5e8c18
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 21 09:36:22 2007 +1000

    Merge remote branch 'origin/atombios-support'
    
    Conflicts:
    
    	src/radeon_display.c
    	src/radeon_driver.c

commit eb99c3c5c9a2249cb84920f0f225e525fc3a4144
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Dec 20 18:14:38 2007 -0500

    Bump for RC release

commit 8d49ff1da917b7f8240267953ef6ce4ff04daecb
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Dec 20 01:09:57 2007 -0500

    RADEON: check for xf86_crtc_clip_video_helper() in configure.ac
    
    use xf86_crtc_clip_video_helper() from the server if available.

commit fb7a4e24f2da3561ef81371ca4013a4f13806e91
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Dec 19 19:15:19 2007 -0500

    Fix RN50 mode filtering.
    
    The old code would attempt to limit the maximum pixel size of the screen
    by limiting the maximum PLL frequency.  This ends up confusing the PLL
    computation code since sometimes your maximum freq can be lower than your
    minimum freq.  More to the point it's just wrong, maximum PLL frequency
    isn't the same thing as maximum pixel clock, and even that isn't the same
    thing as maximum scanout pixels per second.
    
    The correct thing to do is filter by the mode's effective memory bandwidth.

commit c1b0b69cc50516c3b7e881b0eb46cb3cd2e9dce6
Merge: 0e66348 ce4fa1c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Dec 19 11:54:50 2007 -0500

    Merge branch 'master' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 0e6634870d1ab38ee8c83f6bda1ba60364997853
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Dec 19 11:54:27 2007 -0500

    RADEON: skip empty connectors when creating outputs

commit 6afbf718c151dc3c5c59bd3136b58a93a114d798
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Dec 19 11:48:38 2007 -0500

    RADEON: add support for legacy radeons with DVI and no connector table

commit f5e8c185001e62e744310667c2d1bd3fe6542a62
Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
Date:   Wed Dec 19 10:38:58 2007 +1000

    more endian related fixage

commit 98b247066d00db66abe91f518cd93b5c4da4cfb4
Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
Date:   Wed Dec 19 10:25:41 2007 +1000

    fix big endian build since zaphod fixups

commit ce4fa1cedec0cf56b9979dfaa12a8d3a7c643df4
Author: Arkadiusz Miskiewicz <arekm@maven.pl>
Date:   Tue Dec 18 15:34:14 2007 -0500

    RADEON: fix fd leak in lid detect code

commit 20568f66f9a9a60a33bd9a69ccc14a891c656836
Author: Arkadiusz Miskiewicz <arekm@maven.pl>
Date:   Tue Dec 18 15:32:10 2007 -0500

    RADEON: more cleanups and warning fixes

commit 1496194200adbcb044ec3977367a0908262e389c
Author: Arkadiusz Miskiewicz <arekm@maven.pl>
Date:   Tue Dec 18 15:29:53 2007 -0500

    RADEON: driver cleanups, warning fixes

commit bd7206fa120495037e3fea0c920d0031d7715bf6
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Dec 18 03:03:11 2007 -0500

    RADEON: fix another merge error
    
    this broken legacy radeons

commit 65a3ac7530e11bb7d818a988fd0cf1dde7688fa4
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Dec 18 00:15:38 2007 -0500

    RADEON: more PLL tweaks

commit d93a0e10b8bc6e3797a3cf6c1e28ca413a7c38e4
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Dec 17 20:32:45 2007 -0500

    RADEON: post div tweaks for legacy radeon

commit 03b8b49f6f502c45552b018fd8c44d366b2d576f
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Dec 17 20:20:04 2007 -0500

    RADEON: fix typo from merge

commit 19b9d3708852b7efe2b05249c8359dadb924dd94
Merge: cf685f3 29706ca
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Dec 17 20:07:32 2007 -0500

    Merge branch 'atombios-support' of git+ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support

commit cf685f37ec874f0aacd09e7c4eb0402c6daec1b0
Merge: 2a134af 44d07c4
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Dec 17 20:07:07 2007 -0500

    Merge branch 'master' of git+ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support
    
    merge master and fix conflicts

commit 29706ca585ebd9b7b3521521a17016322e9ecccb
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Dec 18 10:55:38 2007 +1000

    fixup shadow setup on !r600

commit 44d07c4ccce9acb5bd21a17acb082e91f7225764
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Dec 17 18:56:12 2007 -0500

    RADEON: typo from last commit

commit 4da3782239921eb377216d4de4a9cc5bb55e0e8a
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Dec 17 18:51:31 2007 -0500

    RADEON: add output enable masks
    
    add output enable masks for outputs that drive
    more than one connector.  Make sure we don't turn off
    an output that's driving another connector.

commit 5c5d2d19b2b032a06dd333b4ecc029aac342fb93
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Dec 17 18:15:55 2007 -0500

    RADEON: whitespace clean-ups

commit 9f1d8220315c8894a17f2cc328025dc682b0c6e0
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Dec 17 18:04:05 2007 -0500

    RADEON: more PLL fixes
    
    - reduce the calculation accuracy
    - certain LVDS panels seem to only like certain ref_divs
    - add pll flags to handle special cases
    - adjust the pll limits on legacy cards

commit 2a134af01bc85de758ad83a85b23d1bba4a1a0f5
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Dec 17 15:00:36 2007 +1000

    r600: add shadow support to r600 driver to at least make 2d useable

commit 614414611a9f246cbc74f579a79987fff97cf571
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Dec 17 11:10:14 2007 +1000

    radeon: cleanup pitch calculation and make r600 work again

commit 79a375dbc7f323e2f551490a35f44ec36bed877c
Author: George Wu <geo@flood.OCF.Berkeley.EDU>
Date:   Mon Dec 17 10:55:36 2007 +1000

    r600: might as well fix VT for R600

commit bc213ee723a45f2c396b4ed211a50f7642349973
Author: Alex Deucher <alex@samba.(none)>
Date:   Sun Dec 16 14:54:00 2007 -0500

    RADEON: fix sclock printout

commit 4747c1f3cd4167b6a51d4864a297719ea48b9346
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun Dec 16 14:07:29 2007 -0500

    RADEON: Make sure LVDS_EN bit is set when enabling LVDS

commit a9817b2cf436a536dbc43ad77abc3bdcc53d346d
Author: Alex Deucher <alex@samba.(none)>
Date:   Sat Dec 15 20:51:53 2007 -0500

    RADEON: clean up units in PLL calculation

commit b653e5a628bfa4dfb168e96f93f41eb910f409fb
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Dec 15 00:50:10 2007 +0100

    radeon: Default to 1x again with non-v3 AGP cards.
    
    Seems more reliable in general than what was set up by firmware - fingers
    crossed...

commit 6229825fa5d6715569098afbb21a40f7a2e7e6be
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Dec 15 00:48:26 2007 +0100

    radeon: Warning fixes.
    
    The lid detection code probably wouldn't work on other non-x86 platforms
    though...

commit 818ccf0fd4b5879171c5f20526d5a58638f8fde5
Author: Fredrik Höglund <fredrik@kde.org>
Date:   Fri Dec 14 23:56:12 2007 +0100

    RADEON: Fix the vertex coordinates for transformed pictures
    
    This partially fixes transformed pictures on R100/R200 based
    cards.  The texture still doesn't appear to be clamped correctly,
    but since that doesn't matter for rotations at perpendicular
    angles, I'm committing this now so randr rotation and reflection
    will work properly.

commit 3cfbcf4cafbdfdb33411d16e51fb1f77cd0f93dd
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Dec 14 17:11:00 2007 -0500

    RADEON: Fix PLL set up on certain notebooks
    
    Some LVDS panels require specific PLL dividers as
    specified in the bios tables.  Make sure to use them
    if the output is LVDS.

commit a84d446fd301d456bcea8f7abdc52e5a30776412
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Dec 14 02:17:14 2007 -0500

    RADEON: select fb_div0 for LVDS on RV410 (x700) mobility
    
    Fixes bug 8038
    I wonder if desktop RV410 need a similar fix.
    If your x700 laptop panel has problems after this let me know.

commit b3eed3d87f76779b5a62a3115f99a31484dc38e0
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Dec 14 00:20:10 2007 -0500

    RADEON: fix typo in previous cursor fix

commit 814c6c48aebba2e45ce257289b922cd7e92caf2a
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Dec 13 18:45:09 2007 -0500

    RADEON: rework PLL calculation
    
    - Take into account the limits from the bios tables
    - Unify the PLL calculation between legacy and avivo chips

commit f5ac34983411e4c4f41ab1817dce582830f398fd
Merge: f2b2e08 6ccf5b3
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Dec 12 22:37:44 2007 -0500

    Merge branch 'master' of git+ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support
    
    merge and fix conflicts

commit f2b2e0804183b52d9d3f56ad85b3552ece76c544
Author: Alex Deucher <alex@samba.(none)>
Date:   Wed Dec 12 22:18:37 2007 -0500

    RADEON: fix rotation on avivo chips
    
    There are still some issues, but this is better than before.

commit 6ccf5b33d27218ae1c45ab93c122438ed536d8ba
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Dec 12 20:12:06 2007 -0500

    RADEON: only enable vblanks if we want them
    
    should fix bug 13610

commit 1668f2056f56370f1b5681c13f1e14904e301216
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Dec 12 19:39:08 2007 -0500

    RADEON: use /proc/acpi to determine lid status
    
    Linux only

commit 33a39947f7f79533cd90007a17d57b20126642c6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Dec 12 18:50:18 2007 -0500

    RADEON: fix cursors when using rotation
    
    allocate separate cursor buffers for each crtc

commit 9e5efdecd12092031a4aebce58747cb4a6f48f28
Author: Arkadiusz Miskiewicz <arekm@maven.pl>
Date:   Tue Dec 11 23:53:03 2007 -0500

    sparse fixes and cleanups from arekm

commit 372bf41818fdafc6a9d2914aee3a8e359f668f02
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Dec 11 14:04:58 2007 -0500

    RADEON: handle HMDI properly (untested) and fix some merge leftovers

commit 3c22ad977c25d5ca2811821fcac6bb8ecd79994a
Merge: c9a0cee f3d2ec3
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Dec 11 13:11:15 2007 -0500

    Merge branch 'master' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support
    
    fix conflicts

commit f3d2ec3a5ae61215c792018320158750e7aa937c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Dec 11 11:57:27 2007 -0500

    RADEON: rewrite PLL computation
    
    Algorithm adapted from BeOS radeon driver with some tweaks by me.
    Actually calulate and use the reference divider rather than using the bios default.
    Also, always calculate the PLL, rather than falling back to bios dividers.
    This should fix bugs 12913, 13590, 13533, possibly others.

commit c9a0cee97ca69e8fe1e1937c7670fa903214cded
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Dec 11 06:03:46 2007 +1000

    more zaphod fixes - some other work maybe needed

commit 9b125312ab6edc585e4f5931a6a6de81e13b6acc
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Dec 10 13:53:15 2007 -0500

    RADEON: only update crtc values when RMX is active

commit 3a161e1b5d80361e318ced8da5c19e797749d693
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Dec 10 00:57:26 2007 -0500

    RADEON: bios PLL cleanup

commit 731830297f2fc4a416882aacfb0d9b5f8ed32520
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 10 15:50:38 2007 +1000

    fixup some warnings

commit 2818e2b02ca90c9dfa50905b5311b2ae83ac3b0c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 10 15:43:52 2007 +1000

    add more to configure.ac for using out-of-tree mode src

commit cc3c36100986f9d8060bc2d433373d4806f8e730
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 10 15:25:56 2007 +1000

    add support for building against legacy servers similiar to Intel codepaths

commit 9c278cb7fa7f18d13bde053fd75221cfba9da377
Merge: 6451ea2 cc167b9
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 10 15:18:03 2007 +1000

    Merge branch 'zaphod-lolz' of git://git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support
    
    Conflicts:
    
    	src/radeon.h
    	src/radeon_crtc.c
    	src/radeon_driver.c
    	src/radeon_output.c

commit 6451ea2dcc4fac762442f699935864f4a8d445f7
Merge: 0d89556 5896ca4
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 10 15:08:42 2007 +1000

    Merge branch 'master' into atombios-support

commit 5896ca4097d439f59f90f397939132c061c3c364
Author: LisaWu <liswu@ati.com>
Date:   Fri Dec 7 09:45:05 2007 +0100

    radeon: Use %u instead of %d for unsigned value.

commit df44f8380268c27d3978c4e91d736f093322b8b8
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Dec 7 09:41:47 2007 +0100

    radeon: Use gettimeofday instead of xf86getsecs.

commit cc167b9bb7f1c3b8579e51e7bc2fca2f8eba6bd1
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Dec 7 15:41:36 2007 +1000

    disable tiling for zaphod heads

commit 2ce8d192533a8c795714c5a9fb308ec74db40287
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Dec 7 15:35:21 2007 +1000

    don't add fboffset to info->FB it already is mapped at the offset

commit 0dcd926d3092100854b3e362d6659d4950508aeb
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Dec 7 14:45:04 2007 +1000

    radeon: bring back zaphod all is forgiven.
    
    You've whined, you've cried, you've nagged, and you're guilt trippin has
    made me do it... It actually wasn't as hard as I thought it would be.
    
    Still not perfect, couple of things to fix yet

commit bb5ede557bf32a42eef158ff0fbcfe1c6ede098a
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Dec 7 14:30:32 2007 +1000

    radeon: move savedreg/modereg into entity instead of info

commit 64ab1cdf343a9a69e7e9e64f0bba77c54a94e9d0
Author: James Cloos <cloos@jhcloos.com>
Date:   Thu Dec 6 15:51:12 2007 -0500

    Add missing PHONY line for automatic ChangeLog generation

commit 0d89556bfa41a3acbd6afe85b062e3a21f2ca057
Author: Dave Airlie <airlied@ppcg5.localdomain>
Date:   Thu Dec 6 19:23:06 2007 +1100

    powerpc: build fixes from last merge

commit dbe3d2608ecc9896db9c23b3a347b50748c51e13
Merge: 48e31cd 21ed435
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Dec 6 14:22:03 2007 +1000

    Merge branch 'master' into atombios-support
    
    Conflicts:
    
    	src/radeon_output.c

commit 21ed435398e4a398dd8a0a5d7c1d4cc45e916332
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Dec 4 17:08:58 2007 -0500

    RADEON: add MacModel imac-g5-isight for iMac G5 iSight
    
    Thanks to Étienne Bersac for helping to figure this out.

commit 54bfd522405d9fdfb69d3a59e111ac3d63483dbb
Author: Étienne Bersac <bersace03@laposte.net>
Date:   Tue Dec 4 14:22:42 2007 -0500

    RADEON: fix typo

commit 5022d006cfc06ca0395981526b2c2c94c6878567
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Dec 2 17:27:33 2007 +0100

    radeon: Further XVideo fixes.
    
    * Make sure pitch constraints are always met for DMA upload blits.
    * RGB24 is not affected by endianness.

commit 6ed55b70b23dfdc7b41103ea59c1df2bda5e41e6
Author: Kusanagi Kouichi <slash@ma.neweb.ne.jp>
Date:   Sun Dec 2 17:18:46 2007 +0100

    radeon: Fix crash with XVideo 24bit RGB images.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=13274 .

commit a697b590899bb7704ec4d7ae9a9c3cbbfcaef382
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Dec 2 17:11:20 2007 +0100

    Fix build against xserver master.
    
    (DE)ALLOCATE_LOCAL are gone.

commit 48e31cdaa0caa21573879af5b9267773fe89176a
Author: George Wu <geo@ocf.berkeley.edu>
Date:   Sun Dec 2 15:25:09 2007 +1000

    RADEON/R600: small code cleanup

commit 00b4480aa2c5d7f751e34fc964f431b90b14c8d2
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat Dec 1 14:18:40 2007 -0500

    RADEON: add options for force TV out as detected and to set TV standard
    
    Also fix a typo in internal tv-out parsing

commit 1e029fef5fe264f2ced445b80bf6070abcb84b82
Author: Alex Deucher <alex@samba.(none)>
Date:   Sat Dec 1 00:58:51 2007 -0500

    RADEON: move GPIO lookup to a separate function

commit dcbef1ba9dfcf35c28e058832a55adf00afb472e
Author: Alex Deucher <alex@samba.(none)>
Date:   Sat Dec 1 00:35:25 2007 -0500

    RADEON: fix typo in previous commit
    
    check gpio table revision before connector table revision

commit fdce0598a2228c48c84deae1d7bebb2d7b3e979b
Author: Alex Deucher <alex@samba.(none)>
Date:   Sat Dec 1 00:15:34 2007 -0500

    RADEON: convert atombios connector table parsing to use ATOM structs
    
    convert and add hpd info

commit e3d7de9cc956aec5f940ad6db09e826b3a69523a
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 30 20:14:42 2007 -0500

    RADEON: remove unused cruft from last atom import

commit d5d83411e8a884154d671aad440524507cce313e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 30 20:11:42 2007 -0500

    RADEON: save/restore avivo crtc cursor control
    
    this should prevent the cursor from showing up on in text
    mode or vesafb etc. after running the driver.

commit af0196f7bf0d1d5d211391149c18935d64ed2b06
Merge: d9858a2 0175b79
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 30 16:40:28 2007 -0500

    Merge branch 'master' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support
    
    merge master and fix conflicts

commit d9858a2b3744b99003cfb9f31b743a2d31b322e9
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Dec 1 06:49:59 2007 +1000

    radeon: add in pll spread spectrum workaround

commit 0175b79987ef4d7b0ce8238c3bdde989e504516a
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 30 15:37:42 2007 -0500

    RADEON: rework MacModel option
    
    this brings in some previous research from Michel Dänzer,
    Sjoerd Simons, and myself.  Hopefully, the driver will pick
    the correct MacModel in more cases.  This also changes the
    default connector table for desktop Macs to dual DVI rather
    than DVI+VGA as that seems to be the case more often than not.
    External TMDS chips are handled separately now as well.
    Eventually we should add an option to allow the user to specify
    what external TMDS chip they need, but we don't have enough info
    yet, so we'll rely on OF to init the external chip in most cases
    for now.

commit e1945f1f25a34310bd58ce128c8ff27ecc985618
Merge: b368b0f df7777b
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 30 14:30:55 2007 -0500

    Merge branch 'atombios-support' of ssh://agd5f@git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support

commit b368b0f22cd1d7ef9b4c65d82929c76f3b82d573
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 30 14:29:27 2007 -0500

    RADEON: disable atom pll set for r4xx cards
    
    the clocks do not get set correctly in all cases.  this needs
    further investigation.

commit 5af15739571c09260750bcfd3620e16fd7fec862
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 30 14:24:30 2007 -0500

    RADEON: small cleanup of pll code

commit df7777bff40c1feabcc12d2148ad6ac5213efbb3
Author: George Wu <geo@ocf.berkeley.edu>
Date:   Fri Nov 30 17:49:33 2007 +1000

    Add LVTMA PWRSEQ registers to fix VT switching for LVDS

commit 9840a0fd4fc8c980533fcd4a02c55cd0d5634b6d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Nov 29 13:27:37 2007 -0500

    RADEON: add MacModel "mini-internal" for minis with internal TMDS
    
    Some macs (minis and powerbooks) use internal tmds, others use external tmds
    and not just for dual-link TMDS, it shows up with single-link as well.
    Unforunately, there doesn't seem to be any good way to figure it out.

commit 017c939cf0a2b12fbdc1681cc70c28b23ae3b397
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Nov 29 02:52:14 2007 -0500

    RADEON: implement CLUT adjust support

commit 9963b0fe01feb6dd0cb555b874a48f6fa3b255cb
Author: Alex Deucher <alex@samba.(none)>
Date:   Thu Nov 29 00:46:23 2007 -0500

    RADEON: fix cursor offset on avivo chips

commit 6c56e3d7655b17e93e8823aefe34b05291104695
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 27 15:27:36 2007 -0500

    RADEON: switch r4xx to atombios load detection
    
    works great

commit 7561242e5b79bc2798ca3aace2b79e1a36949488
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 27 14:50:36 2007 -0500

    RADEON: re-org load detection for legacy chips

commit febdcc2dccd42acbcd68ae630b7811cae5c58e8a
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Nov 28 05:10:57 2007 +1000

    legacy: fix fb/agp read/writes

commit bb8545146959b748994be055d5b3de66ec66c8b2
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Nov 26 17:34:51 2007 -0500

    RADEON: first pass at TV/Component video
    
    Untested and not likely to work just yet.

commit e2bde646b864dca9056d9ecfe23a0d905647ea9a
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Nov 26 14:35:57 2007 -0500

    RADEON: move crtc output source selection into atombios_output.c
    
    The function fits better as an output function and should now
    work with clones as well.

commit 16c9be4107678a2a58d3418b7f1cc94d695ca8d6
Author: Alex Deucher <alex@samba.(none)>
Date:   Mon Nov 26 14:20:54 2007 -0500

    RADEON: add default connector table for avivo chips

commit 6f080d00e6f4f84d5e0d6b4eff302bf42c230e81
Author: Arkadiusz Miskiewicz <arekm@maven.pl>
Date:   Mon Nov 26 12:43:30 2007 -0500

    RADEON: fix backlight control on some laptops
    
    It seems the bios scratch regs are involved in backlight control
    on some laptops.  This patch fixes the problematic laptops and doesn't
    seem to break the previous bios lid and output control fixes.

commit dcf22aed87366f4625fb5042cb84fecccd9ceece
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 26 11:10:03 2007 -0500

    RADEON: only return status unknown for XPRESS chips
    
    this seems to cause more issues than it attempted to fix
    so limit it to XPRESS chips for now.

commit 206e280f02324641b4fe5a1986e26adf0e021fd4
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 26 09:39:27 2007 -0500

    RADEON: fix typo in man page

commit 4e792db655dc92d2864db36b4d8f6714908de8e8
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 15:44:44 2007 +1000

    r500: set default minimum pll freq

commit a13b4c69c105c096dd05e6de2c5c154c9a8bcc71
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 15:25:06 2007 +1000

    r5xx: cleanup pll code..
    
    Clean the PLL code to use the radeon pll structs.

commit 5d792b5673bbf4784eb0ec059221e9b57232a122
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 15:03:13 2007 +1000

    radeon: fix up memory mapping issues for vt switch

commit 558a2ef266c1ca517c7fb464b0ccfef83238c913
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 14:39:32 2007 +1000

    fix silly spaces

commit 1bda4424a7031de437acfca9c41d4b3668e36051
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 14:39:19 2007 +1000

    r600: add hi agp address for mc

commit 133234c31a294f24a3968a576aad2bb8b89d0f6a
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 14:15:18 2007 +1000

    atombios: use values from object header

commit dbf6eae7e7a4bd1bc60fefdc7ab6276ed3f097c4
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 11:55:05 2007 +1000

    atombios: add initial object header parsing for r600 cards

commit 6b103915c11fc79d2efc43c44fc2a00c3bc64ede
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 09:24:20 2007 +1000

    r500: make vt switch work again for me

commit d24208276aad7669feeed527dced60c76d39eae6
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Nov 23 08:50:25 2007 +1000

    avivo: fix typo in register saving

commit 197a62704742a4a19736c2637ac92d1dc5ab34ed
Author: Adam Jackson <ajackson@redhat.com>
Date:   Thu Nov 22 20:26:23 2007 +1000

    radeon: fix openoffice/render bug on r100 chips

commit 64010fc4eae8359c01e430f64252931242c91435
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Nov 22 20:25:31 2007 +1000

    Revert "Disable RENDER acceleration by default on some RV200 chips."
    
    This reverts commit 145da701bf4fb9c0ad9f95620b20914ae0126852.
    
    pull in fix from ajax next commit

commit 145da701bf4fb9c0ad9f95620b20914ae0126852
Author: Stefan Dirsch <sndirsch@suse.de>
Date:   Thu Nov 22 08:38:09 2007 +0100

    Disable RENDER acceleration by default on some RV200 chips.
    
    Novell Bug #341699: Render acceleration is known to be broken
    on at least "Radeon 7500 QW" and "Radeon Mobility M7 LW".

commit e810c3ae9908cd57e95b1b091cded87cbfc12fdc
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Thu Nov 22 02:37:55 2007 +0100

    really do not set up surface regs for depth buf on r100-class igps (bug #13080)
    
    fix the if condition testing for these chips...

commit 0cc7e94849c1525750fabd04cf58f2dee88372e0
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 17:06:17 2007 -0500

    RADEON: reorder crtc/pll setup

commit d56bde98efceaa8344e62f8e98db90c4bb642331
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 17:03:39 2007 -0500

    RADEON: fix crtc to output routing
    
    Thanks to AMD for the information

commit a12390c832abe423def60e39cd5a9118e5910339
Merge: d531792 e74dca1
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 02:24:48 2007 -0500

    Merge branch 'atombios-support' of git://git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support

commit d5317922f29a57b6c4127826a2fc126c5fd7c117
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 02:23:37 2007 -0500

    RADEON: attempt to fix crtc to output routing
    
    The output routing seems to be based on the output ids from the bios
    connector tables and the connected status in the bios scratch regs.
    I don't fully understand this yet, but this seems to work
    for the most part, however changing modes can sometimes
    lead to a blanked head.  This can be remedied by forcing
    a dpms off cycle.

commit 81ce299bffd75540925b4c8234adf11226147165
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 01:35:44 2007 -0500

    RADEON: provide clearer debugging info

commit e74dca19416b13f97db9d1fc06299b988057d6a4
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 21 16:24:25 2007 +1000

    re-enable mobility chips

commit 9c5b813dd6b3492cbc9833bc59792a5cec457e51
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 01:22:42 2007 -0500

    RADEON: major re-org and clean up of atom output control
    
    - use radeon_output->devices to determine output
    - clean up and simplify dpms and mode set

commit 7634cb6b96f938bc6615eb2c49ae75aaefd04cce
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 00:10:14 2007 -0500

    RADEON: make naming consistent and remove some cruft

commit 908748343fc9a6cdc38af0fc028c63a82766da3f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 21 00:05:42 2007 -0500

    RADEON: store devices ids from bios for each driver output

commit 3975da2ea8cb628f7f66c3f26c5dfa181cd1c532
Merge: e283aa3 295ce27
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 20 23:52:29 2007 -0500

    Merge branch 'atombios-support' of git://git.freedesktop.org/git/xorg/driver/xf86-video-ati into atombios-support

commit e283aa332adf0134243a4fa3d14263719cd8a3fd
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 20 23:35:46 2007 -0500

    RADEON: add LVDS atom support

commit e4bc3e1e7bb45571367d41b5328ff2590810b0f9
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 20 18:09:29 2007 -0500

    RADEON: enable/disable the right TMDS controller

commit 3e47683ffaa44a89cda9bcddf530643befb27efa
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 20 18:01:15 2007 -0500

    RADEON: fixup for bios tables with wrong connector types

commit 7412952eb1d1e9857cdab8417f7305f676900827
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 20 18:00:12 2007 -0500

    RADEON: switch to using ATOM defines for bios device table

commit 295ce277bb0a44b9539b3dba575e7aff279dc2d0
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 21 08:56:40 2007 +1000

    add missing files for make dist
    
    noted by ndim on #radeonhd

commit 20083b0695987b25e442ecbdec24f3cb6f1ac2ae
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 21 08:53:44 2007 +1000

    LVDS on r500/r600 needs some work disable mobile chips for now

commit e4b8a4479ddea9b083b3a763dc0b9302e7b9a82a
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 21 08:06:12 2007 +1000

    r600: add memory controller regs from AMD

commit aa88da974b97ea1e9bbb47b3494543575c09d912
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Nov 21 08:01:35 2007 +1000

    rs690 is !> r600

commit c8872603454e6a4ffed9fc7d9adc2c364a429608
Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
Date:   Tue Nov 20 22:33:39 2007 +1000

    radeon: restructure pci ids to avoid effort later
    
    This uses a single file with all the pciids and parameters for radeon
    family and setup in it. I don't run the perl script at build time to avoid
    a perl dependency on build but adding pci ids should be done via the csv file
    with openoffice or gnumeric if possible.

commit a5b34c2f1f7d5346c4489cb30e07291d1217026c
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 16:37:29 2007 +1000

    r600: use standard memory controller setup paths

commit 4a523da5221d53f2efa49da2326500e9b0b9f14d
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 15:31:11 2007 +1000

    r600: get r600 to work non-accelerated.
    
    DDC still not working yet

commit 80023441ba46882bc810ff3790c7148059f155f5
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 14:10:23 2007 +1000

    r600: block r600 startup due to lack of memory controller info

commit f6fbbacc17bf9b1073d3e993b225987fd9173182
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 13:41:55 2007 +1000

    atombios: add warnings for r500 and r600

commit 45a8b083c123b820c008f04ab857a64a8facec14
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 13:37:00 2007 +1000

    atombios: add all r5xx and r6xx pci ids

commit 5d023e2c3c2ab44ea57ffadc9607025d602c376c
Merge: 0d1e0c7 c887260
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 13:02:43 2007 +1000

    Merge branch 'master' into atombios-support
    
    Conflicts:
    
    	src/radeon_chipset.h
    	src/radeon_driver.c
    	src/radeon_probe.c

commit 0d1e0c7805b3d8e56ccb49465e6b144afb7bdc51
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 09:08:04 2007 +1000

    r5xx: add 71c5 for macbook pro

commit d5909b30595c103bb5f42cd1704330f944bba49c
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 08:15:58 2007 +1000

    r5xx: cleanups after last merge

commit fe2f7a09050fb7a345a1f52239f8f3c4f1053891
Merge: 744c8cb 49055d8
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 08:04:32 2007 +1000

    Merge branch 'master' into agd-atom-merge
    
    Conflicts:
    
    	src/radeon_cursor.c
    	src/radeon_output.c

commit 744c8cb6c293fcaa687566f52901644e699baace
Merge: e258fbe e530af7
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Nov 20 07:56:33 2007 +1000

    Merge branch 'agd-atom' of ssh://people.freedesktop.org/~agd5f/xf86-video-ati-atom into agd-atom

commit e258fbe411d255a1044b61d7ff738aee3fb5b7f4
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 16:35:05 2007 +1000

    makes 2-headed cursor work

commit e530af79adf51b3e95a0eca676c915a34dcbf4a7
Merge: 69e197f 52aba8d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 19 00:59:30 2007 -0500

    Merge branch 'agd-atom' of /home/alex/git/airlied/xf86-video-ati2 into agd-atom

commit 69e197f2c8002aacf2587754c8d3bd63c88f85b1
Merge: 5e8940f 862dcab
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 19 00:57:34 2007 -0500

    Merge branch 'agd-atom' of /home/alex/git/airlied/xf86-video-ati2 into agd-atom

commit fca47ad083449f4cf9063dd970cdcebea6a7f110
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 15:53:40 2007 +1000

    add z3ro's pciids

commit 5e8940fa6e33d09091aa4bcf04b0f9e79596e1b8
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 19 00:52:38 2007 -0500

    fix logic in connector table check for TVs and switch counter to symbolic names

commit c19123fd9483758eb6b286c3dffcb6d79d5b1ee5
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 15:46:58 2007 +1000

    add firegl card on ajaxs machine

commit f02f340e466a415b4e01648ca1e323f4ce125885
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 19 00:39:19 2007 -0500

    Don't assign a gpio for TV

commit 52aba8d73189ba959f19c0437499d5e7a8829827
Merge: 862dcab 5e8940f
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 15:30:46 2007 +1000

    Merge branch 'agd-atom' of ssh://people.freedesktop.org/~agd5f/xf86-video-ati-atom into agd-atom

commit 862dcabfe0c10751d815e5cdd7436c10c2c2db10
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 15:30:08 2007 +1000

    r520: nail i2c enable/disable issue

commit f3dd7f413b670eeb6b8639f6677d72050ad5fe04
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 19 00:19:39 2007 -0500

    Don't detect TV out for now

commit 94de0e22d7229ca71e18e1e849d8545d9ca7bafe
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 14:47:33 2007 +1000

    i2c: fix bus enable stuff

commit 3f1fc7eef13ea02fa5119e9b51d499841b801f2d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Nov 19 00:02:14 2007 -0500

    CRTs/DFPs may share a DVI port, but TV and CV don't

commit 8f84c5ad4c4af14612ea68fe6f24d0d527f00acc
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 18 23:43:06 2007 -0500

    fix typo in loop

commit 384cd8f52c89d089c6559e2eedbae45641fcd14e
Merge: f3f0e4e 234b607
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 14:02:55 2007 +1000

    Merge branch 'agd-atom' of ../xf86-video-ati into agd-atom

commit f3f0e4ec92c935c89ddb2f4241fe4335a521b439
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 18 23:14:01 2007 -0500

    RADEON: unify connectortype handling

commit 234b6073054ac7630e82781683e666b94b2f12de
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 14:02:09 2007 +1000

    restore avivo memory map registers at correct places

commit 459a30ba511fe2fa8051380a9741fcfd9bb401ef
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 13:44:38 2007 +1000

    fix type for r520 agp code

commit 760af92412ef0d5cc44e52e7cec11fd80c4aaaeb
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 18 22:34:59 2007 -0500

    RADEON: unify DDC line handling

commit e73bf6290da20dd61798ace775999ce1cb550934
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Nov 19 13:32:16 2007 +1000

    add x1900xt support

commit 2e37937bacd624d616b91c41006c113791ebe98d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 18 20:18:50 2007 -0500

    RADEON: step one in output rework
    
    re-organize the output type

commit 679e7a2e0d1b213524b8109193483bc9840fb116
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 18 17:56:51 2007 -0500

    Few fixes from the last commit.
    
    Update parser works fine on r4xx.

commit 1cd7cc3e6758ab1012f3ced6e958a1517f45557f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 18 17:44:36 2007 -0500

    WIP: new atom code comples.
    
    I commented out the object parsing for the time being as
    using it will require some thought as to new output
    related data structures.

commit b155fa872ee4ca5d801e942aee6e619cef104f35
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Nov 17 00:34:56 2007 -0500

    WIP: more new ATOM integration work

commit 67db114d97abed7a607467e5d67c7b4ffa2c347e
Merge: 7d06a87 ea15346
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 16 14:29:53 2007 -0500

    Merge branch 'agd-atom' of /home/alex/git/airlied/xf86-video-ati2 into agd-atom

commit ea1534659de87d3d75eb20d808d039cff22cb537
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 18:46:02 2007 +1000

    avivo: fixup some i2c stuff

commit 7d06a8791839ce6b22e2449646832b79cebf1b21
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 16 02:43:00 2007 -0500

    WIP: sync up with the latest ATOM bios code in rhd
    
    doesn't compile ATM

commit 3614d80ceb9a7b3615b0baab3cf2dd34ed4ab464
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 17:22:39 2007 +1000

    add missing hpd register

commit 9a2715fda97ac0ebcb45650a416e0652aab575b8
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 17:22:25 2007 +1000

    make i2c unlock/lock registers for gpios

commit 20dc549fff9a4137c93ebed449d05e0c437b6bc1
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 17:01:33 2007 +1000

    avivo i2c: consolidate the avivo i2c code

commit 3e62730f79a13883a65a568bc821bc56055a4ab7
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 15:19:00 2007 +1000

    atombios: fixup warnings in atombios files

commit cca7af3c4910983f7f090792986fcbfa0dc97cfb
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 15:04:01 2007 +1000

    remove avivo_reg.h

commit d39eb2077c6b2fc094ccd952772528eb9428c587
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 15:00:50 2007 +1000

    radeon: rename a large section of avivo regs to documented names

commit b7774c28dde72a205a40be78003df72eabfb9b1f
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 14:48:36 2007 +1000

    Add copyright headers

commit 3cfcd2164b400bd0d1cb4ede8eeb01abba9d75c8
Merge: efac14e 718bfd3
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Nov 15 23:25:39 2007 -0500

    Merge branch 'agd-atom' of /home/alex/git/airlied/xf86-video-ati2 into agd-atom

commit efac14e669a0c6184f8848191eb49ffb21934ee1
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Nov 15 23:17:25 2007 -0500

    r5xx: fix typo for crtc offset

commit e6db621c37ff615be286462f000d67a662c5c331
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Nov 15 23:15:56 2007 -0500

    fix INMC() and OUTMC() on !AVIVO chips
    
    WR_EN is bit 8 so don't use OUTREG8.

commit 52ba3fdd1ce05983fabedff234cfaf4c60fba38d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Nov 15 23:12:30 2007 -0500

    atombios_dac_detect() takes care of primary vs tv dac itself

commit 49055d8aff91ff12186feaf5343c8fd2f96bcba0
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Nov 15 22:56:09 2007 -0500

    RADEON: set proper defaults for tv dac BGADJ/DACADJ
    
    we should get these values from the bios tables, but for now use
    some reasonable defaults.  This should fix the washed out color
    problems on bugs 1082 and 12844.

commit 821acf38b716ab87c3d07263d6e4a139fe54803f
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Nov 15 22:28:42 2007 -0500

    RADEON: Make sure we set the MT properly for connected status unknown

commit a94123f33ec6584fbdfc4b9ecd543d1357de8814
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Nov 15 22:19:54 2007 -0500

    Revert "Portability fix from netbsd"
    
    This reverts commit c9264aa53bf1470ad9104d1e7c4a8ce13c49c270.
    This breaks damage support.  See bug 13244

commit 718bfd3b61879172eee819fdab7080d5d4c0a756
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Nov 16 10:37:04 2007 +1000

    r5xx: fix typo for crtc offset

commit e9d721c31372db045550f9562534b28f16121bb9
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Tue Nov 13 23:42:42 2007 +0100

    ignore sometime bogus agp_mode bit from chip (bug #13190)
    
    bit is wrong on at least X700 cards with rialto pcie-agp bridge chip,
    should be safe to use just the bit from the bridge hopefully to make
    agp setup work on these cards and not adversely affect others.

commit b865886d00907899297ae864358eb26d9980975d
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun Nov 11 20:38:41 2007 -0500

    bump for RC release

commit 7aeb35e5ad1aed6e78a3d8565fbfbfe66232ab45
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 11 19:29:30 2007 -0500

    fix from last commit

commit 2ea95900547165e86ad3f8a41ce3331a05bad60e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 11 18:43:03 2007 -0500

    Add full parsing support for atom bios connector table

commit 7ce730828c293f0810dfdc554df48dfd76e35c49
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 11 12:37:01 2007 -0500

    rework crtc output source setup

commit d61b6c78aa7810a2f9b9e2d9d95aab4295de80ce
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 11 11:58:17 2007 -0500

    make sure i2c bus exists before using it

commit 342e3e207efda42ba679731c30dfb9d5e9d5643f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 9 17:11:43 2007 -0500

    combine outputs based on id

commit 8078c299d5941460243944d55051547c1a4d3791
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 9 16:35:08 2007 -0500

    use atom to program plls on r4xx

commit 5febe2c96642f61d006abe6e8081e69d5b95adc0
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Nov 9 16:24:56 2007 -0500

    turn off vga control when using ext modes

commit 83f170c32c08c74a9e3466ffa0e0a0606c74427b
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Nov 8 19:33:13 2007 -0500

    add pci ids for X1550PRO

commit 5cdcaba0f6e9de2d15cfcc109ab97d9fd423e3bf
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Nov 8 19:28:03 2007 -0500

    make sure to assign gpio

commit 2dcb852778301b9284a2b4906dcf64f95ed638b7
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Nov 8 18:39:23 2007 -0500

    pull in another of Dave's fixes

commit 96273016a0bbdfa4d3a4e6275a3b09eeeadaa534
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 7 01:22:30 2007 -0500

    fix and move crtc source set up atombios_output.c
    
    it's really more output related.

commit 5c495c81cc3bcd4a38d06954243ed3bdc85bdc07
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 7 01:04:11 2007 -0500

    add support for initing external tmds via ATOM

commit 5c13d9355280e6de44ebbf8de7ea89a6b91c7388
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Nov 7 00:17:28 2007 -0500

    add avivo output stuff

commit 68e7f5c67e2e9d2162b469ce31f452f3f89756b5
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 6 23:43:29 2007 -0500

    more avivo updates

commit 303562dfb57e13c027b2aa9289d54e547c829ff1
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 6 23:06:46 2007 -0500

    add additional connector types

commit 0d3e0735f710cb7b9505e4330997aa332f73c102
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 6 22:59:25 2007 -0500

    First round of avivo support

commit 0abfe3150ce3eed4db93ccc2975bd4622dfa54a7
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 6 18:47:00 2007 -0500

    Add atombios files

commit 20f01950e42babc308b4470df6a3c6628c932003
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Nov 6 18:04:43 2007 -0500

    for r4xx ATOM cards, just use ATOM for PLL
    
    while crtc timing and pll seem to work fine, output setup
    and routing don't seem to work too reliably with atom.
    AMD claims ATOM was still pretty new with r4xx so
    it's probably better to stick with direct programming for
    some things.

commit 37af2f6b52c8f217b205486742a6b46a864da8ed
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Nov 5 10:58:25 2007 +0100

    radeon: Use indirect register access for (un)hiding the cursor.
    
    This avoids hangs that occur when touching these registers while the card is
    busy with some cards.

commit 5659e2f1b08e44d0c4f21a403e91b4801ef78f62
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Nov 5 10:32:04 2007 +0100

    radeon: Fix build warning on powerpc.

commit d41d73f5f9d8baee7137e94da2c7852ea0412180
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Nov 5 10:30:23 2007 +0100

    Revert "radeon: Reinstate sync in radeon_crtc_show/hide_cursor."
    
    This reverts commit 0241cac643fa1c08a45ea44f5c670b290e760ad8.
    
    Taking the DRI lock in paths called from the SIGIO handler isn't safe. For
    example, the SIGIO handler may be called while the lock is held by an AIGLX
    context, resulting in deadlock. See e.g.
    https://bugs.freedesktop.org/show_bug.cgi?id=13005 .

commit 78a3eabff382e8ebe33df2039076fb083bcc361b
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Nov 4 14:11:26 2007 -0500

    WIP: get ATOM crtc stuff working on r4xx

commit 5e9ebd8e496b72b051053d637c63b2956b7861d3
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Nov 3 20:46:17 2007 -0400

    Initial support for r4xx
    
    - add r3xx/r4xx MC access macros and functions

commit c106075ccb81ca2ee4894743e676fd37653c8dce
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Nov 3 18:29:20 2007 -0400

    More of Dave's ATOM init code.

commit e18f5d61806b445ad77d93e258fbce9422b52bb6
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Nov 3 18:20:55 2007 -0400

    Initial integration of Atom code and some of Dave's code.
    
    ATOM builds, but it's not hooked up yet.

commit aaafc6a8f33d4736c37c43d3fd5e43085a2590fb
Author: Brice Goglin <bgoglin@debian.org>
Date:   Sun Oct 28 21:10:32 2007 +0100

    Fix typo in 'disposing cursor'
    
    Bug #12984.

commit a5c55c418319c1315ad73c305ef48b44fe1d9580
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat Oct 27 19:46:11 2007 -0400

    RADEON: disable FP DETECT for DVI.
    
    These bits don't seem to be reliable or routed right
    in all cases.

commit 49cf7cb3db36ce7734f7e314a040a240191d6477
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 25 21:23:09 2007 -0400

    RADEON: Fix IgnoreEDID option

commit 70bbc0cfe699588f8ae4123efca0e1baffc91000
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 25 20:56:11 2007 -0400

    RADEON: clean up mode handling and improve reliability of DDC
    
    - Reduce the number of times we do DDC and don't
    skip the magical GPIO dance when doing DDC.
    - If no DDC modes are found, add the screen modes

commit 1a4f590c2ac071f0c348f38e9f26fa6093722453
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 25 19:25:36 2007 -0400

    RADEON: document DefaultTMDSPLL option

commit 2d26e0d0bcf25e210dc7771e76638dcfafcc2356
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 25 19:18:18 2007 -0400

    RADEON: Add driver option to force TV DAC load detection on

commit a9306b7986467c0794c91625ad2ece597b718462
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Oct 18 20:06:58 2007 -0400

    RADEON: fix possible crash in radeon_crtc_mode_set()
    
    when radeon_crtc_mode_set() is called during ScreenInit(),
    we don't have pScrn->pScreen yet.

commit 115b4b65ef679a46d90b7fc8ac22ace37038b3fc
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Oct 17 20:25:47 2007 -0400

    RADEON: Remove LVDSBiosNativeMode Option
    
    Shouldn't be needed any longer as I've finally sorted out
    the LVDS issues due to the crtc setup.

commit f2eb5c1cc69a4f7b0754ec6b2efde4fa1650ab6d
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Oct 16 18:54:28 2007 -0400

    RADEON: finish fixing LVDS/RMX
    
    For panels, both the mode and crtc values need to be updated based
    on the native mode timing.  This shoudl fix any remaining problems
    with RMX.

commit 93561688087493fccb7ac387d728feec61212180
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Oct 16 10:57:06 2007 +0200

    radeon: Handle 64 bit PCI resource bases better.

commit 08945fc8a14ba57e32350e85daa3354619e9e72e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Oct 15 21:12:46 2007 -0400

    RADEON: allow the user to set any tv standard
    
    allow the user to set any tv standard rather than
    limiting it to what the bios says is supported.

commit 571548b2b95ce289f26a77c11deb6266f0b18516
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Oct 15 20:33:56 2007 -0400

    RADEON: use native timing for RMX
    
    RMX should work again with native timings after the previous
    patch.

commit 2f87bff293a343b40c1be096933a5ae126632468
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Oct 15 20:06:28 2007 -0400

    RADEON: Fix subtle change in crtc reg init
    
    At some point we changed how hsync_wid and vsync_wid were clipped.
    Previously we used the field size as a mask when building the
    register.  This got changed to setting the value to the field
    size if it was greater.  this probably explains number stange
    mode bugs.

commit fd5bb7bb5e968127b87102320eccc1222f205e5a
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Oct 13 18:56:43 2007 +0200

    radeon: Improve detection of default value for Option "MacModel" on Linux.
    
    * Detect all PowerBooks with dual link DVI (according to developer.apple.com)
      and both Mac Mini G4 models. Other PowerBooks and iBooks should be covered
      by the 'detected as' line in /proc/cpuinfo.
    * Give specific instructions for overriding and reporting incorrect detection.
    * Only perform detection when Option "MacModel" isn't present with a valid
      value.
    * Close /proc/cpuinfo file handle when done with it.
    * Coding style cleanups.

commit fbf121add5584049627f07345fc502b2aefc88ce
Author: Eugen Dedu <Eugen.Dedu@pu-pm.univ-fcomte.fr>
Date:   Sat Oct 13 16:51:58 2007 +0200

    radeon: Derive default value of Option "MacModel" from /proc/cpuinfo on Linux.

commit 5db3afaa1fdb69d382ac769ef40191a4b964d28e
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 11 20:25:20 2007 -0400

    RADEON: return status unknown for flaky chip/connector combinations
    
    This should at least get something on the screen.
    XPRESS chips, I'm looking in your general direction...

commit 1148d332f52f3780897aae3fcd5d6a67687c42cd
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 11 19:09:45 2007 -0400

    RADEON: fix potential crash in mode handling

commit 905b19df33d6f912336b65895e97775ffec07728
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 11 18:55:08 2007 -0400

    RADEON: small cleanup from last commit

commit 7afd04c1e4ffa6e4e5ba08ae90ba002237dc282b
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Oct 11 00:16:45 2007 -0400

    RADEON: tell the bios not to muck with the hardware while the driver is active
    
    by toggling the appropriate bios scratch regs you can tell
    the bios not the touch the hw while the driver is active.
    This should prevent the bios from scrambling the hardware
    when users open the lid or toggle bios hotkeys.
    
    fixes bug 12567

commit 1b231d28fdda5cdc44bb9d2075d4edfd8f17e21f
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Oct 10 21:54:46 2007 -0400

    RADEON: attempt to detect lid status on legacy bios
    
    I'm not sure how reliable this is.  The lid closed
    bit only seems to be set if the lid is closed at boot
    so LVDS will default to on if you restart X with the
    lid closed after boot.

commit 47ef583b993607bc3a372dd125c6e5228c4ec7bf
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Oct 10 19:35:31 2007 -0400

    RADEON: more XPRESS connector table hacks
    
    Seems XPRESS desktop chips with DVI-D list a proprietary
    connector type rather than DVI-D.  try and do the right thing.
    Also, XPRESS chips seem to include connector type 8 and ddc
    type 8 which are unknown at this time.

commit c9264aa53bf1470ad9104d1e7c4a8ce13c49c270
Author: Joerg Sonnenberger <joerg@britannica.bec.de>
Date:   Tue Oct 9 23:18:29 2007 -0400

    Portability fix from netbsd

commit 80eee856938756e1222526b6c39cee8b5252b409
Author: Matthieu Herb <>
Date:   Tue Oct 9 16:17:50 2007 -0400

    RADEON: fix console restore on netbsd
    
      Include the mode restore bugfix from monolithic Xorg, that is derived
      from the version in xsrc which in turn was provided by Matthieu Herb
      over 3 years ago on the XFree86 lists. Suggested by various
      developers, hold-back due to the working state in xorg-server 1.1.1.
      Tracing down the exact change showed that the changed default color
      depth made this issue a lot more prominent again. Discussed with Eric
      Anholt.

commit 547fef4c6382f8a4951c086ee531b804cba31075
Author: Lars Weiler <pylon@gentoo.org>
Date:   Tue Oct 9 16:10:34 2007 -0400

    include stdint.h to fix the build on some platforms
    
    fixes bug 12733

commit ddec5783103045084a66a34d71326cc6e4a3f598
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Oct 9 13:27:27 2007 +0300

    theatre compiles with pci-rework.

commit 051435610a66735fd455bbb526fa294fcfe8c0b6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun Oct 7 19:39:47 2007 -0400

    RADEON: still more LVDS fixes
    
    Seems some laptops need the native mode from the bios for
    LVDS while others seem to prefer a CVT mode.  Add an option
    to pick the preferred mode.  The default it to use the bios
    table timing.

commit 0b03a73b7dcb4aa192c42f2a4c842d324c358122
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Oct 6 20:11:19 2007 +1000

    radeon: add support for DDC type 6
    
    thanks to arekm on xorg-devel for testing/feedback

commit 83d7506a603889b6c18736cff9b2cd3296c95c84
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Oct 5 20:25:04 2007 -0400

    Bump for RC release

commit fe66cc4e02a52e1d014ae5de192c65e8abd7f58a
Author: Tormod Volden <bugzi06.fdo.tormod@xoxy.net>
Date:   Fri Oct 5 20:10:55 2007 -0400

    RADEON: rename to PCI_CHIP_RS485_5975 everywhere
    
    RS482_5975 is actually RS485.  see bug 12048

commit 314e8fdbe5369e4c1786d176d03d0d2a046f25d5
Author: Tormod Volden <bugzi06.fdo.tormod@xoxy.net>
Date:   Fri Oct 5 20:05:54 2007 -0400

    RADEON: Disable DRI by default for RS482 cards
    
    fixes bug 12048

commit abbafe6db7c0d24efc61a05950d4214c00d3f043
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Oct 4 11:33:09 2007 +0200

    radeon: Fix compile warnings.

commit 1110957ba703475847b8e72023c6edcbd1068aef
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Oct 4 11:32:48 2007 +0200

    radeon: Fix for pci-rework.
    
    Surprisingly easy, thanks to George's pci-rework changes.

commit 7addf41885ec5658f531624a9c24ea5bd7d22d19
Merge: 3a958ba 78c6bd3
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Oct 4 11:06:08 2007 +0200

    Merge remote branch 'origin/pci-rework'

commit 3a958ba136c3fae5a4ddd56373ac7cd47046f10e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Oct 3 22:59:14 2007 -0400

    RADEON: remove some cruft

commit b6bda79f72df5e5bf9c6b71fa3298e765da506bd
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Oct 3 22:56:27 2007 -0400

    RADEON: more fixes for single crtc chips

commit 5f5c4e6ad61c45c24f1443b91b4bc5375efdebc0
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Oct 3 22:46:21 2007 -0400

    RADEON: remove RADEONSaveMode()
    
    It's only called by RADEONSave(), so just move its
    contents into RADEONSave().  this mirrors RADEONRestore().

commit bfede412b3a3cd11769a580b167c528734146096
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Oct 3 22:19:16 2007 -0400

    RADEON: minor fixes for external TMDS

commit 597dffce9bdc200003d0be880235258386a0bdd7
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Oct 3 21:43:08 2007 -0400

    RADEON: final fix for RMX/LVDS
    
    It seems that on quite a few laptops the LVDS H/V timing
    from the bios tables are way off or just doesn't work period.
    Either we are using it wrong or we need some additional checks
    when we parse it. Only the dot clock seems to really matter,
    so use cvt modes and update the dotclock.  This seems to work
    correctly in all cases.

commit cc0c2d8e61600652b1f9cb3dc49db2ef62b1e40d
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Oct 3 00:59:37 2007 -0400

    RADEON: Finally sort out LVDS modes
    
    - The panel timing from the bios tables is for the crtc,
    not the native panel mode, so add cvt modes for the panel
    and fix up the crtc values in mode_fixup().
    - rename and reconfigure RADEONValidateFPModes() to what it
    really does: add screen modes.  I suppose for backwards
    compatibility we ought to add the screen modes to every
    reasonable output, but everyone should really use xrandr
    or an output monitor section to add custom modes.  Hopefully
    this will go away at some point.

commit 0ca184c3c35032df39ea7ce5d2d4aba1a97b6426
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Oct 2 19:38:18 2007 -0400

    RADEON: fix RADEONInitDispBandwidth() on single crtc cards
    
    Should fix bug 12490

commit a5fb2a5d54cdd562a97881cdea1a4af35b483aab
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Oct 1 08:48:27 2007 +1000

    radeon: fix powerpc build

commit 22519fde1e002f28d6036d448fcd18452d00f1bb
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Sep 30 13:11:20 2007 -0400

    RADEON: add support for ext tmds table and ext tmds chip init
    
    This probably won't work on all chips as the various gpio lines
    seem to need special magic to to actually talk to the i2c slave
    chips.

commit dcc376e2d2a13329dd03f1bc4b471329757a6f5f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Sep 26 23:27:38 2007 -0400

    RADEON: remove cruft

commit 99ceaefa18c6e07b55106cca0ea8996fa73667be
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun Sep 30 12:02:54 2007 -0400

    RADEON: more work on LVDS mode validation and fixups
    
    Hopefully this will fix up the weird mode issues with LVDS and
    native and RMX modes, but I can't seem to get quite the right
    combo to fix everyone.

commit d808781d48adf01e80b5bb476bae2d2f599030f1
Author: Dave Airlie <airlied@redhat.com>
Date:   Fri Sep 28 14:50:42 2007 +1000

    rc410: disable DRI by default due to it not working

commit 4d9f944e40c6b9ac7e80428dff49c6e83fda1d8f
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Sep 27 17:50:15 2007 +0200

    radeon: Fix build on little endian platforms.
    
    This was accidentally broken when moving away from using pixmap data pointers
    directly.

commit 5902e913010a2fb0c17efe01f9aade73f9646f16
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Sep 27 12:53:34 2007 +0200

    radeon: EXA pitch fixes.
    
    The combined pitch/offset registers only support pitches up to 16320 bytes.
    
    With EXA >= 2.3, set the maxPitchBytes field accordingly. With older versions,
    limit maxX such that the pitch of 32bpp pixmaps doesn't exceed the limit.
    
    Also check the limit in RADEONGetOffsetPitch just in case.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=12551 .

commit ca728973bce504e03bf6228d18287906c35eaa3f
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Sep 27 11:14:21 2007 +0200

    radeon: Don't use pixmap data pointer directly with EXA.
    
    Fixes segfault with current xserver master without AccelDFS.

commit 21593d04d222b05dbba9abd31eaa3bfb91d999b6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Sep 24 23:01:20 2007 -0400

    RADEON: more clean up of mode code
    
    also print out LVDS mode info from bios for both
    legacy and atom bioses

commit 22cccb99d762567757d3fd38795f71e943f1faf9
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Sep 24 00:10:01 2007 -0400

    bump for RC release

commit fad9e7b00de051f632000eb2304ac23a524f7c8e
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun Sep 23 23:43:26 2007 -0400

    RADEON: Rework LVDS mode validation
    
    The old validation code wasn't really well suited to randr.
    This fixes several issues:
    - missing display size for panels with edid
    - broken duplicate modes

commit bf9674b9df351108e069d037ec10869a4154a881
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Sep 23 15:01:34 2007 -0400

    RADEON: properly set default RMX types

commit b27135bce8b41d69290613b440a338b0a7fe0200
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Sep 23 14:44:38 2007 -0400

    RADEON: fix up LVDS handling for r3xx and newer

commit d5cf268be2c9b3e320d7101f5213f7d5609b6308
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 22 18:31:51 2007 -0400

    RADEON: Fix crash when Xv window is outside of either crtc

commit 8aca0ca6be7122e0ece20985a1862553a1b225c0
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 22 17:56:50 2007 -0400

    Revert "RADEON: fix crash when Xv window is outside of either crtc"
    
    This reverts commit 9109e62e3be7f96b41b534ab517fdf1baf458806.
    
    This breaks ABI.  better fix to come.

commit d6e1d9be1cd5786a24ed4bb8e45fa7e04df56622
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 22 16:14:06 2007 -0400

    RADEON: Don't make the entity as shareable
    
    This should prevent people from mistakenly trying to run
    zaphod mode

commit 81114af1cdddc0b10d076f2e38c7a00c1223cc48
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 22 15:51:23 2007 -0400

    RADEON: preliminary support for mac mini
    
    Option "MacModel" "mini"
    may not be 100% correct yet

commit 6c482e453bc8156886294d0c1b8f3f1b3dcf4b36
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 22 15:11:20 2007 -0400

    RADEON: Fix RMX on LVDS
    
    LVDS + RMX doesn't seem to like having the crtc values tweaked.

commit 9109e62e3be7f96b41b534ab517fdf1baf458806
Author: Michel Dänzer <daenzer@debian.org>
Date:   Sat Sep 22 14:19:10 2007 -0400

    RADEON: fix crash when Xv window is outside of either crtc
    
    Should fix bug 12175

commit d2ce4a5003ce1291ea2327b2c00a0b24408fe26c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 22 10:41:55 2007 -0400

    RADEON: RMX updates
    
    - add option to turn off RMX
    - turn off RMX by default on DVI
    - add infrastructure to support more RMX modes

commit f95b9ab729376083bf0d12987ee260ec2aba721e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Sep 21 00:12:37 2007 -0400

    RADEON: remove more old cruft

commit 5a6f74103f0ec0d451d0e2573442efe5922848af
Author: Maciej Cencora <m.cencora@gmail.com>
Date:   Thu Sep 20 23:56:08 2007 -0400

    RADEON: fix video in on RV380 (tested on X600 VIVO)

commit c72a365386e19f9257db041d44b09ad499cc9f6a
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Sep 20 23:49:57 2007 -0400

    RADEON: fix up dvo support (still no external chip init)

commit 5e4d98470b6412a686883c554e7eb7badbe78c4d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Thu Sep 20 23:22:48 2007 -0400

    RADEON: round 3 on the PLLs.  should fix the LVDS issues

commit c5e2a2f09af807006c7ea493a8e90ff77abe207c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Sep 19 19:58:28 2007 -0400

    bump for RC release

commit 46ff78b9f010ca24178d4363761be00eb3ecb632
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Sep 19 19:49:58 2007 -0400

    RADEON: add default connector setup for single crtc chips

commit 509ca0cb0e1cde905b47db2bbac6f2a58523b279
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Sep 19 19:41:17 2007 -0400

    RADEON: fix external TMDS parsing in legacy bios connector table

commit 5a59547ef7e986c9613023d941c3354cd476faf1
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Sep 19 19:28:09 2007 -0400

    Revert "RADEON: initial pass at external TMDS support"
    
    This reverts commit 4000a710c93dd2d82891e4082bc7fa922ba9c5f4.
    
    This needs to be reworked and needs more soak time.  so revert
    for now.

commit dc333884c540d536bffe51a5ebfaf1822af6a91c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Sep 18 22:23:12 2007 -0400

    RADEON: fix plls again
    
    previous fix seemed to break other chips.  Lets see how
    this goes.

commit 271e541088f455d1cfedff87e88c9a4fdbdbe424
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Sep 18 22:12:31 2007 -0400

    RADEON: Remove more mergedfb cruft

commit 8ae69c496eba701e744cca0605f73242673f7b3f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Sep 18 20:12:21 2007 -0400

    RADEON: adjust pll restore
    
    some chips seem to be pickier than others. fixes bug 12467

commit 8a84dc8ee260716026fa661a6dced2000621efa2
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Sep 18 11:53:39 2007 +0200

    radeon: Remove declaration of unused variable.

commit 2fbbd9c5f0ec27e72780e8b054bc59502f1e5651
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Sep 18 00:45:56 2007 -0400

    RADEON: note that MergedFB support has been replaced with randr 1.2

commit 81b708dbd35c29bf2d67e8c655af97b60e61498b
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Sep 17 23:54:03 2007 -0400

    RADEON: turn off load detection on tv dac by default
    
    it's just too unreliable and even when it is most people
    don't want it.  enable it via output attribute or force
    the outputs on with xrandr

commit c3ab53159d42157985a25e9125eaa5362273b73d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Sep 17 23:28:51 2007 -0400

    RADEON: XPRESS connector tables are crap
    
    besides specifying the pimary DAC (which they don't have),
    most seem to specify DDC_CRT2 for DDC, which does not seem
    to ever work.  Some have reported success with DDC_MONID so
    lets give that a try.

commit 1fafa970fa78ddea29a8804b6cd0aea52e4fa2e1
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Sep 17 23:10:13 2007 -0400

    RADEON: ignore edid digital bit on analog ports
    
    Some monitors have this bit set even on analog ports

commit 4000a710c93dd2d82891e4082bc7fa922ba9c5f4
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Sep 17 23:04:17 2007 -0400

    RADEON: initial pass at external TMDS support
    
    - Based on Dave Airlie's initial work and the dvo support
    in the intel driver.
    - Only sil164 is supported at the moment.
    - Once we get some testing and such, we ought to move the dvo
    drivers out of the drivers so they can be shared among all drivers
    - Doesn't seem to work on my card (r4xx ATOM) card ATM
    - Legacy bios table programming sequence not implemented yet

commit 38515d402555eaa61c686d42973e59f659b07466
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 15 11:39:47 2007 -0400

    RADEON: don't restore bios scratch regs
    
    Leave them as programmed by the bios
    fixes bug 12424

commit 78c6bd305f2ea70629d1dda3c0c48c067451f5fb
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Sep 10 19:00:16 2007 +0300

    [mach64] Revert to multiple mappings per BAR.
    
    libpciaccess added subrange mappings and mtrr handling.
    
    compile-tested only.

commit 0241cac643fa1c08a45ea44f5c670b290e760ad8
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Sep 8 00:22:40 2007 +0200

    radeon: Reinstate sync in radeon_crtc_show/hide_cursor.
    
    Make sure the DRI lock is held though, as these can be called asynchronously.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=12245 .

commit 49933e2f7d590811f2bc8c0d51a09f3b7f14845e
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Sep 1 12:23:07 2007 -0400

    RADEON: automatically disable tiling if requested virtual desktop exceeds surface limits
    
    Also, tweak default desktop sizes and add some informational messages

commit d49a60bc939c9f3e9d57c23e44263f5bb52f09fb
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Aug 30 11:40:13 2007 +0200

    radeon: Fix Option "MacModel".

commit 2b860726fff058623e0e8e1b0aca092c246875ce
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 30 11:38:28 2007 +0200

    radeon: Don't build currently unused RADEONSavePalette.

commit 12187a6aa93049c002a4171344d03c713f7f3c5d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Wed Aug 29 23:11:30 2007 -0400

    RADEON: Add quirk and connector tables for apple laptops
    
    As far as I can tell there are three apple laptop variants:
    ibook              - LVDS, TVDAC drives TV or VGA via dongle
    powerbook-duallink - LVDS, TV, External TMDS/Primary DAC
    powerbook          - LVDS, TV, Internal TMDS/Primary DAC
    use Option "MacModel" "<string>"
    to enable the appropriate quirks where string is one of the above
    
    We can't yet init the external TMDS directly, but if OF inits it,
    it should work. This should also fix bug 9955.
    
    Please test!

commit 61c1fdaa8553581944f78a11e6f9aa76163a468a
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Aug 28 23:47:19 2007 -0400

    RADEON: add option to force tmds pll to default table
    
    Also rework the tmds pll output attribute handling a bit

commit 0d9087bc60bb95c770b899cfed29699c02bdac49
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Aug 28 23:08:20 2007 -0400

    RADEON: remove some cruft forgotten in a previous commit

commit 6ff0645ecfe65727e8ef5d5e6215b4e03078e1a5
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Aug 28 15:37:11 2007 +0300

    [mach64] Convert to pci-rework, keeping source-code compatibility.
    
    It still uses the old probe method though, this is due to the ati wrapper.

commit 7b38d9a1209f87255e5bb0aefe46a363ce4fb6ef
Merge: 2e3d43a 673f799
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Aug 28 16:01:12 2007 +0300

    Merge branch 'master' into pci-rework
    
    Conflicts:
    
    	src/ati.c

commit 673f799729824f4439dd5f681f75dd5aab50947f
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Aug 28 00:42:30 2007 -0400

    RADEON: Update tv attributes immediately

commit ad6f7ad1b2ccae0bc0a416b9b0ca22709c9d5199
Author: Alex Deucher <alex@botch2.(none)>
Date:   Tue Aug 28 00:08:41 2007 -0400

    RADEON: remove the "default" tv_standard option

commit 17e0f9e6cbfdb115034d327bd34d46339fd632b7
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Aug 27 23:59:03 2007 -0400

    RADEON: enable load detection for tvdac if output count for tvdac < 2

commit 42839fb5a8584196e7b18375bff6c426ed0347d9
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Aug 27 23:44:13 2007 -0400

    RADEON: make load detection an output attribute for analog outputs
    
    Since TV/VGA/DVI-I can share the TV DAC, we often get false detection
    of all inputs that share that DAC.  Make load detection an output
    attribute.  Enabled by default on primary dac and on cards where
    tv dac is (usually) dedicated to tv (non-IGP mobilities).

commit a5a1055d64ab4fa16bfb03a412ae6c4fe69ff65d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Mon Aug 27 22:42:22 2007 -0400

    RADEON: make tmds pll an output attribute
    
    sometimes the bios tmds plls are busted for certain
    monitors. sometimes the dirver tables are.  Let the user
    pick at run time.

commit a12e4aa01bf1c5723c3c791ff9bdc26eef21d5ea
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Aug 26 18:51:29 2007 -0400

    Bump for new release

commit d43596e5f5d7c60f96b57bc3e743a9b40eb7109d
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Aug 26 18:07:50 2007 -0400

    RADEON: Fix rotation.  works now

commit 47eb3327c258bb0cfd9a1d5677624b9988a39057
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Aug 26 15:43:22 2007 -0400

    RADEON: minor tweak to tv out

commit f36720377737210c985b196d9a988efdd767f1c7
Author: Alex Deucher <alex@samba.(none)>
Date:   Sun Aug 26 14:13:06 2007 -0400

    RADEON: fix depth 16 palette for real this time

commit f2b13f1457bf860b075310d3962254be0ed7bea3
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sun Aug 26 13:27:19 2007 -0400

    RADEON: Only update pixclks_cntl when updating tv routing
    
    No need to re-set all of the pll2 stuff

commit 5d044b9f74c7aa7e12f2822896fed881e2ca9d19
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Aug 25 21:03:08 2007 -0400

    RADEON: fix crtc clipping for Xv

commit 3fd2d22a02812d5f86cdc1c9503f48362b0c362b
Author: Alex Deucher <alex@botch2.(none)>
Date:   Sat Aug 25 17:37:35 2007 -0400

    RADEON: remove fbdev option
    
    FBDev support is currently broken, and it not really compatible
    with randr

commit 3469e1aa08792890fa6a5c72da52a1992a0b382c
Author: Alex Deucher <alex@botch2.(none)>
Date:   Fri Aug 24 20:42:13 2007 -0400

    RADEON: add extra green data in depth 16
    
    Apparently some radeons need this?

commit 71f650d1bc432514516f7ac64a5e8a54c5227881
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Aug 24 09:21:39 2007 +0200

    Require xorg-server >= 1.3 for RandR 1.2.

commit d7230939f523610c57f92bdfc72966bdbc6f1070
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Aug 24 09:21:14 2007 +0200

    64 bit warning fixes.
    
    For printf vs. CARD32, use %u or %x and and a cast to unsigned.

commit 91c45fedfd155a153dcd2c3f3e30986bfbd44e6f
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Fri Aug 24 15:05:01 2007 +1000

    radeon: don't disable dac if either tv or vga is using it
    
    On my rs480 I had to vt switch to get hotplug VGA working due to the tv-out
    code turning off the dac when the vga code was actually using it.

commit 056ca6bb5adf974290693b55de6cd6880d2132d1
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Aug 23 20:19:47 2007 -0400

    RADEON: NONE to None to match other port info

commit 13fd53286bdda2c55683bdb5f63e7d345f6c63ef
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Aug 23 20:17:51 2007 -0400

    RADEON: set (hopefully) reasonable default max desktop sizes
    
    Based on the amount of vram.  We really need ttm...

commit 53bad86ca48a9b6529c1f0989ee568d9d48841c6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Aug 23 19:24:59 2007 -0400

    RADEON: clean up the logic in crtc_mode_set()

commit 4712dedea225e9e07177aebda2ffc6290d1f53c7
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Aug 23 18:51:34 2007 -0400

    RADEON: Always assume LVDS is connected
    
    Not all bioses seem to set the right scratch bits.  If we have
    LVDS (via bios table or otherwise) assume it's connected.

commit b0f170c5f736ecba1a5899d602c4173fe9b9b1fa
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 23 12:55:40 2007 +0200

    radeon: Remove unnecessary #include <time.h>.

commit ac54c0e4360099697755d14b1030def73d8235b0
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Wed Aug 22 14:33:59 2007 +0200

    radeon: Warning fixes.

commit de26e406f52b3b13f03eee2b8023924ec6406f0a
Author: Alon Ziv <alonz@nolaviz.org>
Date:   Mon Jul 30 22:47:59 2007 +0300

    radeon: Sane handling of timeouts in WaitForVerticalSync(2).
    
    RADEONWaitForVerticalSync() and RADEONWaitForVerticalSync2() need to wait
    for a timeout specified in milliseconds; looping around usleep() causes
    the timeout to be unnecessarily long, as the OS may sleep longer than
    requested (on Linux the minimum actual sleep value may be several ms).
    
    The new logic uses gettimeofday() in the loop to see when the (absolute)
    timeout has arrived.
    
    Signed-off-by: Alon Ziv <alonz@nolaviz.org>

commit c66e5de26ae93caa368213f3cce139aacec955d2
Author: Sascha Sommer <saschasommer@freenet.de>
Date:   Thu Aug 23 12:11:51 2007 +0200

    radeon: Round down RMX stretch ratios.
    
    Fixes issues with RMX scaling, see
    https://bugs.freedesktop.org/show_bug.cgi?id=8983 .

commit 633c1fff10a3be4c9f48c1995e330d60bf6abbb2
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 23 12:11:41 2007 +0200

    radeon: Sync pages when enabling page flipping with EXA as well.
    
    Exclude the DRI window(s) though to avoid scribbling over 3D rendering.

commit 4f8010ce22043c0f8d60c0f49d270ce98c9d2466
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 23 12:11:12 2007 +0200

    radeon: Don't synchronize DRI windows between pages when possible.

commit 7b527054a7c81d1d1dbc79d41b9e53064dab68cb
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 23 12:10:33 2007 +0200

    radeon: Restore memmap registers even if only AGP location changed.

commit d7ba9f001c0ab645984526afd0e64d1c6a6d654a
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 23 11:39:54 2007 +0200

    radeon: Change a test to info->IsIGP from several IGP families.

commit 8c7c22e22b6076abc80e4e1aaa8d1f4cf2f3ed14
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 23 11:38:17 2007 +0200

    radeon: Wait for pending overlay flip to finish before emitting new one.

commit 92fa7cc00688d7bfc1fb72e645ac30c6d92669c6
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Aug 23 11:38:16 2007 +0200

    radeon: Don't call RADEONDRIRefreshArea when the damaged region is empty.

commit 5cb20c2dc5eca9d7d7d78e9924ea1b90076e7253
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Aug 23 18:46:41 2007 +1000

    radeon: bug 11899 + debian 435040 - test for usefbdev before calling int10
    (cherry picked from commit 3334c247540b113f9c4a5ce1879d8648a45a959a)

commit 9d6261c024c697a211da4b6300420153eb72a264
Author: Roland Bär <roland@verifysoft.de>
Date:   Thu Aug 23 18:33:34 2007 +1000

    radeon: bug 11860 fix some mem leaks

commit 7bc1f862bc5f992f213143fbafef52459ba7db4a
Author: Roland Bär <roland@verifysoft.de>
Date:   Thu Aug 23 18:37:35 2007 +1000

    radeon: bug 11861 - dead code removal in radeon_video.c
    (cherry picked from commit 8e3a6f83016cd8c4cfd43ceee4cbf0a8dc018b2a)

commit 9d38c8aa1a7d6fb1af41ee8abdb4a95f94843538
Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
Date:   Thu Aug 23 20:10:24 2007 +1000

    radeon: cleanup some warnings

commit e4c8969b48a6c8dcc4e7f9852479d24a0204fc0d
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Aug 23 19:56:21 2007 +1000

    updated release numbering for randr 1.2

commit 81a8093f2ffdce59d4e8a44f65f3d5c771fd6425
Merge: c08e6ec 53a67e3
Author: Dave Airlie <airlied@redhat.com>
Date:   Thu Aug 23 19:51:47 2007 +1000

    Merge remote branch 'origin/randr-1.2'

commit c08e6ec9e7ac06caee53689b0ec50ef6a7a0ba37
Merge: 5793e87 a0d0fcd
Author: Dave Airlie <airlied@clockmaker.usersys.redhat.com>
Date:   Thu Aug 23 19:42:19 2007 +1000

    Merge branch 'master' into randr-merge
    
    Conflicts:
    
    	src/radeon.h
    	src/radeon_bios.c
    	src/radeon_display.c
    	src/radeon_dri.c
    	src/radeon_driver.c
    	src/radeon_modes.c
    	src/radeon_probe.h
    	src/radeon_video.c

commit 53a67e31904bec9a3aa1bd24de8034dcafea1d2a
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 21 21:20:41 2007 -0400

    RADEON: Fix color problem on pre-R3xx chips tv-out

commit e9719e8e02eef46717ae9b4d8c7998466dac30cb
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 21 21:17:20 2007 -0400

    RADEON: more tv out fixes and clean up

commit 36c22a49580d86a6518b67f31a78bd53d39491af
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 21 20:28:39 2007 -0400

    RADEON: fix tv-out on R3xx
    
    R3xx apparently needs the tv clock forced on.

commit 9470bd67731059f26859ed5f0bea3ade09e2c80c
Author: Alex Deucher <alex@botch2.com>
Date:   Mon Aug 20 20:54:06 2007 -0400

    RADEON: Add DefaultConnectorTable option
    
    This option skips the parsing the BIOS connector table
    and falls back to chip specific defaults.
    Also remove man page section for the now gone bioshotkeys
    option.

commit a0d0fcd3bab765b4db25e04884fd8a342abb9c66
Author: iLisa Wu <liswu@ati.com>
Date:   Mon Aug 20 15:44:07 2007 +0200

    Fix crash with no valid mode in xorg.conf's modelist and empty Virtual
    
    If the resolution defined in xorg.conf failed to find a matching mode in the
    supported modelist, and no virtual desktop dimensions are defined the xorg.conf
    either, virtual X and Y dimension will be set to 0 which will cause Xserver
    crash.
    
    (Novell bugzilla #296856, closed)

commit b275febdb0918e8cebdffbb433b0eeb3ff4d3746
Author: Alex Deucher <alex@samba.(none)>
Date:   Sun Aug 19 20:55:32 2007 -0400

    RADEON: turn off TVCLK when blanking tv encoder

commit a90d675832ddb02c81ace010ccbf02619b70edac
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Aug 16 21:55:14 2007 -0400

    RADEON: fix Xv clipping and overlay sourcing
    
    - Basically just copied from the intel driver.  I'm planning to push
    this to the server soon, but add it now to get things working
    and to provide compat for older servers.
    
    - Overlay crtc source control attribute now called XV_CRTC
    The old attribute XV_SWITCHCRT has been removed.  If anyone cares,
    we can add it back as an alias to XV_CRTC
    XV_CRTC: -1 auto, 0 crtc0, 1 crtc1

commit 5793e8753d11432bf95c7c6dd80c811e16aba058
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Aug 15 19:26:36 2007 -0400

    RADEON: Remove RADEONRestoreMode()
    
    Since we no longer use it to write modes all it did
    was restore some of the regs for a console restore.
    Just move the relevant bits into RADEONRestore() and
    remove it.

commit 6f011aaabaf18d66ffc255ad76aaf938b2396302
Author: Lisa Wu <Lisa.Wu@amd.com>
Date:   Wed Aug 15 19:17:51 2007 -0400

    RADEON: fix console restore on r3xx and r4xx
    
    When restoring the console we need to:
    1) we need to restore DAC registers after all other registers are
     restored and CRTCs are enabled.
    2) we need to enable CRTC2 registers before CRTC1 registers

commit c8dad98abb042c6abbbee18f9ae4db72084bc513
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed Aug 15 00:55:24 2007 -0400

    RADEON: make sure crtc routing is correct in r300_detect_tv()
    
    Also remove some unused variable

commit f8cd74435f0072dbf5f6e83d67d2d5e1f4e82c91
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 14 23:50:57 2007 -0400

    RADEON: minor cleanup

commit 6f398cd07ea734dd66a8eac71b629e59123d75b8
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 14 23:42:32 2007 -0400

    RADEON: Implement improved tv load detection for r300
    
    The previous implementation resulted in false positives
    on occasion.  This method works much more reliably.
    Based on beos code by Thomas Kurschel

commit 366a1d4c240ac93622caff97b652696db99bf2e6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 14 23:25:37 2007 -0400

    RADEON: Turn off tv encoder in disableoutputs()

commit 5b4a04c23e3f1ec2490418b111f417c16463c709
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 14 23:11:52 2007 -0400

    RADEON: Make sure RMX is always programmed for crtc1
    
    If the RMX registers are left as programmed by the bios
    this can lead to a blank screen when crtc1 is feeding a
    DAC.  Fix found and reported by Lisa Wu <liswu@ati.com>
    Fixes bug 11985

commit db2a828b2f21b92cd654b309d137204334975b89
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Aug 14 22:47:29 2007 -0400

    RADEON: Add load detection
    
    Based on the beos driver by Thomas Kurschel and the
    existing load detection code in this driver.

commit 6fc3ddbbb6fbbee1f6076c776e5b46c0c772b6d4
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 12 12:00:20 2007 -0400

    RADEON: order the VGA and DVI ports correctly

commit b7738d2ef82e1759adf78e5db1291f8739b4166f
Author: Alex Deucher <alex@botch2.com>
Date:   Sat Aug 11 17:50:42 2007 -0400

    RADEON: fix connector setup when there's no bios tables

commit d0895f67e327bb268fd59fcfd8fc22678d804f57
Author: Luc Verhaegen <libv@skynet.be>
Date:   Thu Aug 9 12:11:40 2007 +0200

    AGPFastWrite risk reduction.
    
    Actively warn the user in the log about the effects of AGPFastWrite and
    sanitise AGPFastWrite handling while we're here.

commit c01000bc684f6a23a38a52f0808182cefaa686bb
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Aug 8 00:07:16 2007 -0400

    RADEON: fix typo in comment

commit 5c3f49e651c36f3bd14fa29359e24825d8f7f77f
Author: Lisa Wu <liswu@ati.com>
Date:   Wed Aug 8 00:05:47 2007 -0400

    RADEON: make sure RADEON_CRTC2_CRT2_ON bit state is properly accounted for
    
    - when the TV DAC is used for crtc1 make sure to keep this bit set when
    initializing crtc2.
    - fixes bug 11894

commit 08fe7ad00fba523775e95b5e6295fe23a5119d60
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Aug 7 23:16:05 2007 -0400

    RADEON: fix ConnectorTable option after connector table re-work
    
    We may want to add the possiblity of more connectors to this option

commit f56b90a60393ed187c0e39e149b2a3a32331ea52
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Aug 7 23:08:02 2007 -0400

    RADEON: Make sure the default TV standard is supported

commit a88a0e77eec514325b4d07bf7be9fb04e6f8e244
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Aug 7 00:43:20 2007 -0400

    RADEON: minor fix to legacy bios connector table

commit 3752808d6c08a9727370ef8d79088e787791e131
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 16:13:39 2007 -0400

    RADEON: Always set MonType in radeon_detect()
    
    - Always set the the MonType in radeon detect even if no
    monitor is detected so users can still force disconnected
    outputs on.  For DVI-I users will have to set the
    dvi_monitor_type attribute to force digital or analog,
    everything else should just work.

commit b4ec3e436afb5bc99ec755cbd96eee9a1ec492a5
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 15:37:04 2007 -0400

    RADEON: add tv out properties

commit 1fc2a1120e7c05938e2bd72d3c7837ecff8bc9da
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 14:41:57 2007 -0400

    RADEON: switch DVI-I monitor type attribute to string

commit 7d8eb3751d74bd8a1fb9fa2d2fcb9c4c895f6ba4
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 14:31:18 2007 -0400

    RADEON: make backlight attribute lower case

commit e71bb88bc9052af8866fb6945dbc06dbb0e6d1c0
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 14:26:15 2007 -0400

    RADEON: switch RMX attribute to string type
    
    Still not actually hooked up.

commit 284323135ec04635dfa9cabd5790a35b953abca2
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 04:35:24 2007 -0400

    RADEON: typo

commit d1abdad167aa24ac970c69422435df443c82ebd6
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 03:45:02 2007 -0400

    RADEON: fixes
    
    - fix output ordering
    - set tv-out to return un-connected for now in radeon_detect()

commit 0cca25d8d6a0cb0d29b68e6cd9c699d1390aede1
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 03:19:24 2007 -0400

    RADEON: Fix DVI-I support in ATOM bios connector table parsing

commit ba5496ae7973786802962bf649dd91c219531749
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 02:27:32 2007 -0400

    RADEON: refactor output init to handle multiple DVI or VGA
    
    - refactor output init to handle multiple DVI or VGA with the new
    bios table parsing

commit 2ec22783ddf4c522df9e5fd1b2003854486d7a2b
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 01:39:35 2007 -0400

    RADEON: attempt to do the right thing for standards other than PAL or NTSC

commit cc8e1d95f1b90a259beea4e8cc4d7e29af660919
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Aug 5 01:14:36 2007 -0400

    RADEON: Major rework of BIOS table parsing
    
    - greatly simplify ATOM and legacy connector table parsing
    - use bios tables to detect LVDS and TV outputs
    - add support for TV table parsing (legacy only)

commit 1de52d91ff3a04b9b587b858e1e5be40d3a7fd0a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 4 17:58:58 2007 +1000

    update configure.ac for 6.6.193 release

commit 371001c0433db1d17e468f3ea99ea57f922145a3
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 4 17:51:19 2007 +1000

    radeon: remove unused variables

commit 90946c53d7a4b23d03270ad6da0450759a11de3d
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 4 17:51:06 2007 +1000

    ati: add -Wall for gcc
    
    As per luc's "suggestion" in Novell bug.
    
    This may generate warnings on 64-bit until we get rid of CARD32

commit e30a145934df8f6a7f71290d6c75e4239f9d52f7
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 4 17:44:46 2007 +1000

    radeon: cleanup some pieces of the dpms/blank register programming

commit a156db5e8b037ed12a448f70045453baf9d0c504
Author: Luc Verhaegen <libv@skynet.be>
Date:   Sat Aug 4 17:37:18 2007 +1000

    Clean up PortInfo to CRTC mapping
    
    Also sanitise blanking and DPMS functions
    
    Fixes from Novell Bug 264720, and fd.o 10772

commit b61a49f2a5401560f85e11bcdd005287433cad12
Author: Alex Deucher <alex@botch2.com>
Date:   Fri Aug 3 19:27:59 2007 -0400

    RADEON: Change indexing of TV constants table in preparation for standard re-work

commit 288fa627274cb399059262d4f8bd844fc220a042
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Aug 2 02:37:16 2007 -0400

    RADEON: avoid a divide by 0 and only save tv out regs if the chip has them

commit b66a1bc7994b33d349c1519761e431959311c85f
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Aug 2 02:11:20 2007 -0400

    RADEON: fix tv-out enable/disable

commit d86592c8d5ce45d81d8a726c263e870e94fbcf11
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Aug 2 00:50:51 2007 -0400

    RADEON: add missing break

commit 971feb34843225030fff05b3f9d3801534fbf2d4
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Aug 2 00:50:04 2007 -0400

    RADEON: move tv dac enable to enabledisplay()

commit 98d7e00437bea78e03180eb30ff30de3455d9d1a
Author: Alex Deucher <alex@botch2.com>
Date:   Thu Aug 2 00:20:50 2007 -0400

    RADEON: limit tv modes to the only one we can program at the moment

commit 5c549c1d42f7bbc556942af13aff2661fae856f2
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Aug 1 23:45:07 2007 -0400

    RADEON: remove unused elements

commit b03978028fd975eb6946503d3a56a49c5a67f339
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Aug 1 22:39:16 2007 -0400

    RADEON: convert hard coded tv out values to calculations

commit cf54222f1fa37366b2c2b39c82f8afc02f32e63c
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jul 31 02:01:49 2007 -0400

    RADEON: more fixes...

commit 22d460d3ad991223aa1fbd7e5edeb45e36c65dc0
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jul 31 01:28:05 2007 -0400

    RADEON: fix name of tv output

commit 4822a2b837334f408f962646ab5ea4f8b0335ac9
Author: Alex Deucher <alex@botch2.com>
Date:   Tue Jul 31 01:18:40 2007 -0400

    RADEON: tv-out fixes.  works now.  tested on rv350.
    
    VT siwtch is busted, and xrandr doesn't play nice yet.
    uncomment code in radeon_output.c to test.

commit fe494c9db2995bb8ce7a028ecf9626e0cb0cf506
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Jul 29 15:26:34 2007 -0400

    RADEON: add info about tv out code and authorship

commit 6b9b7a7bdc290d07de9b226691ec8025af8db896
Author: Alex Deucher <alex@botch2.com>
Date:   Sun Jul 29 15:23:14 2007 -0400

    RADEON: Initial pass at integrated tv out support
    
    Based on the GATOS tv-out support by Federico Ulivi <fulivi@lycos.com>
    and information from ati with substantial rework by myself.
    
    Code is not actually hooked up yet.

commit 8d043db1817d94edeb72ab208dfea60026715d48
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Jul 25 20:37:58 2007 -0400

    RADEON: Compute PLL VCO gain

commit 62f06d89da3f7160d5e4df8d7ce6fe1a94e9d07c
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Jul 25 20:22:25 2007 -0400

    RADEON: write out saved vclk and pixclk values

commit 165a07cbbfcd94e3d1fac434b8fada8d29428a09
Author: Brice Goglin <Brice.Goglin@ens-lyon.org>
Date:   Wed Jul 25 19:01:02 2007 +0200

    Minor fixes in the manpages
    
    - ati.man
      . add references to radeon and r128 manpages in SEE ALSO
        (Xavier Bestel in Debian bug #386001).
      . remove the manpage suffix from atimisc reference in the text
        since there is no such manpage for now.
    - radeon.man
      . typo in "specifying" (reported by A. Costa in Debian bug #432059).
      . replace a non-ascii character with the corresponding groff escape
        sequence so that it works whatever the locale (Julien Cristau).

commit 9cc3ab8320162f371bba15dc131f23c5de2013fc
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Jul 25 02:24:14 2007 -0400

    RADEON: hack around console restore hang on r4xx
    
    r4xx seems to hang when unblanking the crtc(s) when
    restoring the console.  This needs to be investigated
    further.

commit 193d58b0ea9de3e326017e50b88e2f3726854506
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Jul 25 01:27:58 2007 -0400

    RADEON: fix randr on r4xx
    
    Seems the way we parse the ATOM connector table results
    in reversed connectors.

commit 262e32bd9ea4123b116362b33b5798753b2568fe
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jul 19 23:48:57 2007 -0400

    RADEON: fix palette when depth != 24

commit 18b00b47a483e7854727e99126808ddf361e7a4a
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jul 19 19:01:42 2007 -0400

    R128: don't clip modes to panel on laptops when only using the CRT port
    
    fixes bug 5832

commit 882fe7631586b0a7919f808588a2ea4fb555f7e8
Author: Brice Goglin <brice.goglin@ens-lyon.org>
Date:   Thu Jul 19 18:44:27 2007 -0400

    MACH64: avoid crash in Xv code
    
    fixes bug 11054

commit 7b3e22e96cfc98621bd20fa76317e6d8f7242165
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jul 5 20:37:10 2007 -0400

    RADEON: set default values for crtc_offset_cntls

commit 2a35ccfb8ffee9f0ef6f8d4f0eeb80a471543caa
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jul 5 20:04:04 2007 -0400

    RADEON: Fix tiling on r1xx and r2xx
    
    spotted by Andrew Randrianasulu <randrik@mail.ru>
    fixes bug 11357

commit ac9cbaf32176cf144bc694ac879e7c9e2920f762
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jul 2 10:06:02 2007 +0200

    radeon: Fully zero-initialize info->CRT2pScrn->monitor.
    
    This prevents modes from getting rejected due to the uninitialized maxPixClock
    value.
    
    Fixes http://bugs.freedesktop.org/show_bug.cgi?id=9816 .

commit bdcae622100c81a4d9a53938542b64908bacd195
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Jun 29 01:15:57 2007 -0400

    RADEON: save crtc on/off state for console restore
    
    - prevents a possible hang if console is only using 1 crtc

commit 21be0d3a1f4700572c6425800596785d6850626f
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Jun 29 00:38:50 2007 -0400

    RADEON: simplify console restore
    
    - still need to track crtcs for blank/unblank when restoring text console

commit d9bf28b55d98fea2d285c9c46362aaf2175d0a46
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jun 28 23:52:28 2007 -0400

    RADEON: factor out surface_cntl init into one function

commit 9f193985627be8e6ea1418a424e825ddbc4957b2
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jun 28 23:43:13 2007 -0400

    RADEON: move crtc base setups to new functions

commit 0f361e9e80a29d287fa42436c32c657e3c102539
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jun 28 23:08:07 2007 -0400

    RADEON: fix corruption after 3D apps run

commit 1d4630067d293d26284d5fe230debef3913ec6cf
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jun 28 22:24:04 2007 -0400

    RADEON: set info->CurrentLayout.displayWidth in RADEONSetPitch()

commit 2754d1ba01fc3367019487e0c0f59d74c950aaa7
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jun 28 22:15:22 2007 -0400

    RADEON: Switch cursor back to memcpy()

commit 7901bcafa92dccd319ddb5de4627d806a39f15f9
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 25 18:39:14 2007 -0400

    RADEON: make sure we unblank in RADEONRestore()
    
    reported by Andrew Randrianasulu (bugs 11357, 11146)

commit 6a3599d6155d073a3116c4b13bdf04b44bb9e087
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 25 18:20:54 2007 -0400

    RADEON: make sure we set the stride properly

commit 771c37fcac8104b894120cc3fc0154b31b0318d1
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 25 17:53:26 2007 -0400

    RADEON: attempt to fix cursor on big endian (only tested on x86)

commit 5b5b90c2cea7e36895354f5872acd3fc769653f9
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 25 16:27:54 2007 -0400

    RADEON: fix possible segfault on mobility chips with MM tables
    
    spotted by Stefan Buehler

commit 01bd5eb713500d3e3d4351865d460c8d1e476454
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 25 16:16:18 2007 -0400

    RADEON: fix possible segfault on mobility chips with MM tables
    
    reported by Stefan Buehler

commit 52cc1dc1491559a9055f3ba6dd54064bb382ad86
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 25 15:49:19 2007 -0400

    RADEON: tiling and FB size fixes
    
    - fix tiling on older radeons
    - allow the user to specify FB size using Virtual line in config
    Current default is 1600x1200
    - reset ecp_div for Xv in randr crtc mode set

commit 3bb46c03fddd3bd79bdab887366aeeced0290a3a
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri Jun 22 01:12:38 2007 -0400

    RADEON: bump crtc max to 1200 so 1600x1200 will work out of the box
    
    - a better fix will be forthcoming...

commit b9fac5695bf8f123b391e3b162c4865258a685dd
Author: Andrew Randrianasulu <randrik@mail.ru>
Date:   Fri Jun 22 01:01:14 2007 -0400

    RADEON: Fix VT switch hangs
    
    - re-order DRI resume functions in EnterVT()
    - fixes bug 11287

commit 92e65d5e0d6817ff4c9a08020a0a9b3a8c3c98b0
Author: Andrew Randrianasulu <randrik@mail.ru>
Date:   Fri Jun 22 00:55:00 2007 -0400

    RADEON: Fix VT switch hangs
    
    - reorder RADEONDRISetVBlankInterrupt() and RADEONDRIResume()
    - see bug 11287

commit ec1fd2c388ec2c4033644776ee8588405a3d25f1
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Jun 19 00:39:59 2007 -0400

    RADEON: Split FP reg restore to only touch regs relevant to the output
    
    - only restore output specific regs
    - restore fp2_gen_cntl on R200 DAC restore as R200 DAC2 is connected via
    DVO

commit 0f5a92667281ca3f80218bc67d4031125a5e4793
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 18 23:35:21 2007 -0400

    RADEON: only touch LVDS on mobility chips

commit b72ff160f908bf3aa9f64705377e92d80360a4f7
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 18 21:51:45 2007 -0400

    RADEON: only touch LVDS on mobility chips

commit 80313621ffa8c409ae63fc1b28c15fc4abdc3a7b
Author: Henry Zhao <henryz@localhost.localdomain>
Date:   Fri Jun 15 17:00:05 2007 -0700

    Update CRT2pScrn->monitor->Last to reflect the
    last mode of CRT2pScrn. See bug 11278.

commit 5868af53204e8fc210735e68e891e15085285629
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Jun 12 23:53:48 2007 -0400

    RADEON: yet another LVDS...

commit f19a6f7ee5bf4ec632e7813359f167599c08e823
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Jun 12 23:44:41 2007 -0400

    RADEON: additional LVDS off fix (missed in previous commit)

commit 4f2a1ba9c2fc20042d67132f986a86a9783a245e
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Jun 12 23:41:24 2007 -0400

    RADEON: additional LVDS off fix (missed in previous commit)

commit 9fc416ce08cc5d74faa7b184e80ce43ed2f4fbee
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Jun 12 23:35:09 2007 -0400

    radeon: Fix panel size detection from registers with stretched mode programmed.

commit c4045cbc5e6975520efef422ce9df2a7d99a7ff4
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Jun 12 23:32:18 2007 -0400

    RADEON: make sure to clear RADEON_LVDS_ON when turning LVDS off
    
    - fixes bug 3483

commit 090888d3baf61a70640d28e99afdce20952cdea0
Author: Tormod Volden <bugzi06.fdo.tormod@xoxy.net>
Date:   Tue Jun 12 23:30:18 2007 -0400

    RADEON: limit PanelPwrDly to 2000 ms on ATOM bios as per legacy bios
    
    - fixes bug 11238

commit 44748a826b52924a6e050215d8d62755e0ac7fb2
Author: Tormod Volden <bugzi06.fdo.tormod@xoxy.net>
Date:   Tue Jun 12 23:23:49 2007 -0400

    RADEON: limit PanelPwrDly to 2000 ms on ATOM bios as per legacy bios
    
    - fixes bug 11238

commit c292fc64499ff4cc135c07deda99cf4169f8fef4
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Jun 12 23:20:18 2007 -0400

    RADEON: make sure RADEON_LVDS_ON is cleared when turning LVDS off
    
    - fixes bug 3483

commit c6a3286d6f6ddda89115d98d45665dadd78bf41d
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jun 11 09:39:38 2007 +0200

    radeon: Fix panel size detection from registers with stretched mode programmed.

commit 7a6b3c0f77c69019268f585c51c3dcbcc99014d4
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jun 11 09:39:38 2007 +0200

    radeon: Don't loop indefinitely if no mode matches detected panel size.

commit f31fd9ce598841c505a0b5ed32bf124f49fea332
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jun 11 09:39:38 2007 +0200

    radeon: Fix some more ErrorFs when setting mode.

commit 9dd9f09a9021653e5590d27bd7aa0e7af85416ad
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu Jun 7 15:32:31 2007 -0400

    RADEON: fix some issues with bios table init code
    
    - fix some issues with bios table init code
    - re-org preinit to better handle bios table init of cards

commit 9ad311eeb0ac2b70a862dbb9de278154ba9142ec
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Thu Jun 7 11:03:02 2007 +0200

    Fixed 'make dist'.

commit 2527f2b69aa7dffa3ba4359c45955e3185bdf0e6
Author: Alex Deucher <alex@botch2.com>
Date:   Wed Jun 6 00:08:45 2007 -0400

    RADEON: implement support for posting cards based on x86 bios tables (untested)
    
    This is based on the netbsd radeonfb driver by Garrett D'Amore.
    The code is not hooked up yet, but should allow you to post cards
    without needing to execute bios code.  This should be useful on
    non-x86 platforms, for posting secndary cards, and for suspend/resume.
    Works on legacy bioses only (no ATOM support).

commit e67d1420bf65055ecb6fdfe6b1b1f53aae83854a
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue Jun 5 22:31:50 2007 -0400

    RADEON: fixup RADEONDisplayVideo() to better handle the crtc being used

commit 7886405308e3288d5c86b6f2c7dbfa8ff865139c
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 4 21:16:56 2007 -0400

    RADEON: fix indenting

commit f54ad565a69deb52547fd04e123f56fc1294cd0a
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 4 21:13:16 2007 -0400

    RADEON: no need to go through all the crtcs, we've got what we need

commit 687879bff716ad01f9f158860deb8ba770faab99
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 4 21:08:40 2007 -0400

    RADEON: add support for RMX on DVI, make sure RMX is only enabled on crtc1

commit e6161e472ff266f69547704a61040228a8704b06
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 4 20:32:55 2007 -0400

    RADEON: remove some cruft

commit be0ce38232ea4f5679c5829ab663939144c6e617
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon Jun 4 20:22:15 2007 -0400

    RADEON: number the outputs if there are more than one of the same

commit 8ec617f6493dd0aea5d11f92e3d58c3feef8c8fd
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jun 3 17:32:43 2007 +1000

    radeon: disable irqs at server start until 3D app starts

commit 2d40fa55e8d7a1cfb204d66ca4a4d95a3b13d5b5
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jun 3 17:32:43 2007 +1000

    radeon: disable irqs at server start until 3D app starts

commit dcb64a4d3947e5a9fbda4b72e29a5b6102370f07
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jun 3 17:10:49 2007 +1000

    radeon: disable vbl interrupts when no 3d is running on a new enough drm

commit 73d8e3ec8536b4777490b7ba457566f02233811f
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jun 3 17:07:59 2007 +1000

    randr-1.2 increase dri minor version for mesa to know we can do vbl on both

commit 63f0d4ed0a98830ecbe18c6e4174689111a59b68
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jun 3 16:49:14 2007 +1000

    randr-1.2: add support for vblank on both heads
    
    Also disable vbl when 3D isn't running

commit d7775c1b38b5bdc439a27ec2c3c3a03a5b24cf57
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jun 3 12:46:31 2007 +1000

    randr-1.2: make native mode preferred
    
    If we have a native mode from the BIOS make it preferred mode

commit 5a9516fe4f17854acd4fbf3a8eadf5139081dbd4
Author: Paul TBBle Hampson <Paul.Hampson@pobox.com>
Date:   Sat Jun 2 14:28:18 2007 -0400

    RADEONProbePLLParameters sets pll->reference_div, and
    RADEONGetPanelInfoFromReg uses it.
    
    This ensures that the former is called before the latter.
    (this should fix randr on ppc)

commit 802804461ebdca9a951e7e562ec68fd08d8eae01
Author: Matthieu Herrb <matthieu@deville.herrb.com>
Date:   Thu May 31 22:23:57 2007 -0600

    Fix build whithout XF86DRI

commit 0e0946e0aa2527794e07473199e851bbfbc47cb1
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Wed May 30 18:56:53 2007 +0200

    radeon: Lots of warning fixes.
    
    Move code where it's used, remove unused variables, etc.

commit 31c1be420d5277dd15505bd73e6144827a0580cd
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Wed May 30 17:49:01 2007 +1000

    remove these syncs, at least on rs480 it doesn't break
    
    probably requires testing on other r300 based cards, with the syncs in
    we hang when moving the cursor into the second CRTC.

commit 7fc02657c4d740941fbda5a8823cf45de3eca3f8
Merge: 800bf53 4c61c0e
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Wed May 30 17:27:22 2007 +1000

    Merge branch 'origin' into randr-1.2-test
    
    Conflicts:
    
    	src/radeon_cursor.c
    	src/radeon_display.c
    	src/radeon_driver.c

commit 800bf53279e2c2bf854682bbfd6fa16d03afed00
Author: Matthieu Herrb <matthieu@deville.herrb.com>
Date:   Tue May 29 23:31:13 2007 -0600

    Fix build without XF86DRI

commit 4c61c0ee91a2ffeefce30972a584486f1df1d1ae
Author: Matthieu Herrb <matthieu@deville.herrb.com>
Date:   Tue May 29 21:35:35 2007 -0600

    Fix build without XF86DRI

commit 5337e7bd0069a3f2c4ab22b21a19471427ad3d81
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Wed May 30 08:10:44 2007 +1000

    radeon: add bios quirk for nx6125 monid

commit bff809dc8ed07ac39e9b576a87916486a5e37156
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Wed May 30 08:02:26 2007 +1000

    rs480: more unknown regs
    
    Hardcode the values from a working fglrx run, this works for me now
    
    I've no idea what it might do for anyone else

commit 104105fee5c3945d3f210e6a4cb73ab492c61543
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Tue May 29 19:09:33 2007 +1000

    rs480: make second crtc work with magic number in magic register.
    
    I've no idea why or what this does.

commit 5aa603bcabbb077dec169c48438c2e2ebe1195d7
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Tue May 29 07:23:24 2007 +1000

    rs480: only has single dac

commit c52322354fe64725733842b3356798c50e7735d5
Merge: dd6a966 975da59
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Tue May 29 07:21:48 2007 +1000

    Merge branch 'origin'

commit c2637a01f9aca4032262c66ade305f5fe2c54294
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 18:26:35 2007 -0400

    RADEON: remove some dead code from the last commit

commit bbb769c4107bfcae682e46d026e54cbfb67d62cd
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 18:25:06 2007 -0400

    RADEON: more rotation work (still not there)
    
    - once again borrowed heavily from intel

commit a69f90be9384244744fabfa76469ede9cd26ac98
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 17:54:48 2007 -0400

    RADEON: first pass at rotation (not working yet)
    
    - based heavily on intel

commit 3b619d88a65a5801c85d120f2d39704194433f10
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 17:06:18 2007 -0400

    RADEON: clean up and add comment regarding clones

commit 089ae4afd23322bf602d340c531c36a4c8b461ed
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 15:49:11 2007 -0400

    RADEON: Switch SetOutputType() to use names rather than numbers

commit c4cef0c9481257a744ac99dfc7beb988ce51a8ee
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 13:12:37 2007 -0400

    RADEON: make sure we have the lock when SYNCing

commit 899c62e987d5c7524817ba85675e39a8a28e0232
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 12:54:01 2007 -0400

    RADEON: Make sure LVDS and FP2 routing info gets written

commit 18857184ffa6847815d349c020b003f8401e36ee
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 12:27:00 2007 -0400

    RADEON: fix handling of DRI lock

commit 3a61453efb4f04492cef823b6dd1273b55c6a785
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sat May 26 01:38:09 2007 -0400

    RADEON: implement backlight control for LVDS
    
    This code is currently disabled as I'm not sure which
    laptops actually use this method for backlight control.
    My laptop seems to use another method as adjusting the
    backlight level doesn't seem to touch LVDS_GEN_CNTL.
    Maybe just macs?

commit ceec3f62257bafe4771e75d3c4f1d2a517d7acf8
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 25 23:29:51 2007 -0400

    RADEON: implement auto/analog/digital output property for DVI-I (untested)

commit e3e9c608651e7cbb9851489274815f47d2a8dbbb
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 25 19:26:24 2007 -0400

    RADEON: more clean of last commits

commit a7d2c9c0f6155c4e65a2e73f3832c0d8ca7af5fc
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 25 19:09:11 2007 -0400

    RADEON: fixup last commit and add support for ext TMDS detect

commit e50ca35ce2ea79dadb38ce14e459eed836452ff7
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 25 18:56:32 2007 -0400

    RADEON: clean up non-DDC probe, add detect for DVI

commit abb9b57e7b4162ab6c21fd1e809d24f13f7e1ea1
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 23 21:37:58 2007 -0400

    RADEON: clean up some logic

commit 679236defd28bea8874004377436347950ff7bec
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 23 21:18:40 2007 -0400

    RADEON: add output properties (not functional yet)

commit 975da595f032c145ad74079ff8edeaead779dc7b
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue May 22 10:56:47 2007 +0200

    radeon: Provide new DRI texOffsetStart hook when available with EXA.

commit e38cad5633c974467f6417051eda8d487ac3686e
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue May 22 00:09:46 2007 -0400

    RADEON: Only add valid connectors

commit 8275151baac22c34149cef0b7d922771d24abc3e
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon May 21 10:25:48 2007 +0200

    radeon: HW cursor cleanup.
    
    Don't needlessly turn the HW cursor on/off in RADEONLoadCursor*().
    
    Besides cleaning up the code, this semms to avoid some HW cursor related 3D
    lockups, see https://bugs.freedesktop.org/show_bug.cgi?id=10815 . My best
    guess is that this is because the engine is now always idled before touching
    the CRTC registers.

commit 137e3fc1899078af0f72303ab0a4e6cf35804a7b
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon May 21 10:25:48 2007 +0200

    radeon: Suppress debugging output by default.
    
    It can be enabled at runtime by increasing the log verbosity level.
    
    Also change the prefix from (**) to (II) to make grepping the log file for
    defaults overridden by xorg.conf more useful again.
    
    Turn some MC related debugging output into normal informational output as it's
    useful for recognizing corner cases that can cause stability issues.

commit aed193a47a939451d9a6d05b02653b1d73e1d523
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 20 21:13:59 2007 -0400

    RADEON: fix crtc1 (un)blanking code after last commit
    
    - crtc1 MC control is on CRTC_GEN_CNTL
    - fix indenting

commit 870c8043068a0f44b53d1148371b2cc1e3970a7b
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 20 21:03:10 2007 -0400

    RADEON: several updates
    
    - move output init from InitCrtc() functions to the output mode_set()
    - take the crtc off the MC when blanking
    - move EnableDisplay() to output commit()
    - clean up some dead code
    - don't enable dacs in initcrtc() functions, this is taken care of in EnableDisplay()

commit 09bfc8ed000f95ede5b73f2bad69edc1a4d9bac6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 20 18:06:22 2007 -0400

    update to 6.6.192 for rc release

commit 764cb73e8dec4040cdd418d249fc504399fca3ee
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 20 17:26:26 2007 -0400

    Fix regular/"xinerama"/zaphod dualhead mode
    
    - logic in RADEONUnblank() was wrong
    - Calling RADEONSetupConnectors() on second instance screwed up the port info
    - still seem to be HW cursor issues with zaphod mode

commit 9a147fef8e0e2ede2a0008c4ecfbd9b00c8dc5f6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 18 23:45:11 2007 -0400

    RADEON: if connector is VGA set TMDS to none

commit bbd6faff4c6acb48970d774375c8a61861405f96
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 18 23:30:19 2007 -0400

    RADEON: Change default LVDS i2c line for powerpc

commit 7940ec364f3cbf02ba64b92c74cbaad4555baf38
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 18 00:23:08 2007 -0400

    RADEON: cleanup

commit f71bfde7352ef858c1041037d7dc77c237e315a4
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 18 00:12:03 2007 -0400

    RADEON: more cleanup

commit f711e266d6927dec648f6ff26f15c6f48643f78c
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu May 17 23:59:07 2007 -0400

    RADEON: turn off all outputs in screeninit().  We'll turn on the ones we want later

commit bfc1c372d7475b7fa6bffb8a79dec1dc2f11ec59
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu May 17 23:45:29 2007 -0400

    RADEON: More cleanup

commit c60b3bc9e3e7463bdb42e2478be8cc3f22c63c68
Author: Paul TBBle Hampson <Paul.Hampson@pobox.com>
Date:   Thu May 17 23:26:54 2007 -0400

    Fix for infinite loop in RADEONGetLVDSInfo

commit 11289f8206cab1a94bd64a3938cf9af50f19497e
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue May 15 00:48:31 2007 -0400

    RADEON: remove some debugging code

commit fba1a11e287ebf04cf311645d31299896bad7283
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue May 15 00:44:29 2007 -0400

    RADEON: Move DAC regs to their own Save() function

commit 9ed00e959fcdab2739a7e64ca1e303a6faf28f15
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue May 15 00:36:05 2007 -0400

    RADEON: Lots of small fixes
    
    - remove extra crtc2_base set
    - remove some debugging code
    - clean up RestoreMode()
    - make sure a DDC reg gets assigned for LCD_DDC
    - make sure we adjust the right frame in AdjustFrame()
    - rename RADEONMapControllers() to RADEONPrintPortMap() to
    reflect what it actually does now
    - make i2c bus name match the DDC port
    - remove or comment out un-needed code

commit 5106c8fe5f74865cac8b00937739a4efde9fc254
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 21:48:26 2007 -0400

    RADEON: Further cleanup

commit 224a73e41e9be344d5644203e7ebd5a3a8272604
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 21:41:59 2007 -0400

    RADEON: remove remnants of "old" multi-head support
    
    The old screen based multi-head code is broken at this point
    and I have no intention of fixing it, so to clean things up
    I've removed it.

commit 9c2f20a83a5fed14225f4c3ebcd8ca41e9d4bd48
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 21:13:23 2007 -0400

    RADEON: additional cleanups

commit e187321ab8dd58d2b2fe92c062d070ba4820a2bf
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 19:49:10 2007 -0400

    RADEON: add new ConnectorTable option and re-add PanelSize option

commit e60a7bcaf5611ad4706b1d1442ce4cae49145f42
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 18:14:29 2007 -0400

    RADEON: remove mergedfb, etc. cruft from man page

commit 51caa5dccc4a2e14d1b41bb7868ad20468dd4cfe
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 18:10:02 2007 -0400

    RADEON: remove old mergedfb and dualhead options that are no longer used

commit c5da9d4040cb08598d171d20f84d3f6c20a033e0
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 18:05:38 2007 -0400

    RADEON: remove more dead code

commit e776fa9ecc53d63f916a5447a76fb2bb3b824167
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 15:43:39 2007 -0400

    RADEON: re-org randr code
    
    - move crtc stuff to radeon_crtc.c
    - move output stuff to radeon_output.c

commit 58ce388452b7bc790c438d75c9cf4a0f69f0d7b2
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 15:05:01 2007 -0400

    RADEON: Remove dead code

commit 66e8e6c8348d007930730e90295588efe8108844
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 14:25:03 2007 -0400

    RADEON: several fixes
    
    - give better DDC names
    - disable DAC if connector is DVI-D
    - fix indentation in ProbeDDCModes()

commit 1c16c2ce9c5b02b03d23da965127d82eea4c4039
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 13:54:04 2007 -0400

    RADEON: fix VT switch

commit 7c66e903368f77ecc4d3bd1c9f08d2adbd85e83c
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 13:37:59 2007 -0400

    RADEON: move crtc offset handling into init/save/restore functions

commit aec078eb0740651fba8ec602e8239bd679efc8ad
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 11:57:57 2007 -0400

    RADEON: fix up DDCConnected()

commit 0550c37ecc434b8075fb3c367d100ff27625bb64
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 11:44:50 2007 -0400

    RADEON: don't need to pass pScrn to EnableDisplay()

commit 117220527de9fd3158f600645bcfcaf46847f45f
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Sun May 13 11:37:35 2007 -0400

    RADEON: remove hardcoded output limit and PortInfo stuff

commit 7e5c29961ac2a9e9dbe5d6d2d73d11cd018d62b5
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 11 18:00:40 2007 +0200

    RADEON: Fix RMX after the last commit

commit ab5603edd8fc3ef0560bdfb6a6d9c6af2a49d1e5
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 11 17:34:35 2007 +0200

    RADEON: Move LVDS, TMDS, DAC properties to the output rec

commit 94eb0681de0641e490f06486468617a727fefe86
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 11 14:39:48 2007 +0200

    RADEON: switch output dpms to use RADEONEnableDisplay()

commit 673ede5578d5d9caf2adf0445fe1e684b034eea5
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 11 14:28:17 2007 +0200

    RADEON: re-arrange output mode setting

commit 0070a7d787adaae99f7bc2659be4b0f49f439db5
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Fri May 11 13:06:15 2007 +0200

    RADEON: more re-org
    
    - move crtc mode setting around
    - add dri lock/unlock to crtc lock/unlock calls

commit bba456232ac9a6218aa7fbd504d6093fa72860cf
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu May 10 15:33:51 2007 +0200

    RADEON: fix VT switch

commit 1779a12a947401e5c6bcf784b47e9b3c80d37204
Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
Date:   Thu May 10 06:22:35 2007 -0700

    Add cscope files to .gitignore

commit 0cb23277666db3b30438c6f88840d861e04df414
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Thu May 10 15:20:56 2007 +0200

    RADEON: randr driver re-org checkpoint
    
    - split the mode setting per-crtc
    - reduce start up flicker

commit 33c370b1d8350945f80ac12097d3e91243a400f2
Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
Date:   Wed May 9 16:16:39 2007 -0700

    RADEON:
      - fix an ugly modesetting bug:  if we happened to set the mode on
        CRTC1 before CRTC2, CRTC2's RestoreMode function would clobber
        CRTC1's CRTC_OFFSET register since we never updated
        ModeReg.crtc_offset...  so make AdjustFrame use ModeReg and pull
        the call to it up before RestoreMode, seems to work ok here.

commit 6263248a0044777a352e4ee7380b4b8f9afd091b
Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
Date:   Wed May 9 14:52:00 2007 -0700

    RADEON:
      - use fixup_mode hook to set RADEON_USE_RMX flag so panel scaling
        works
      - use valid_mode hook to prune invalid default modes from list
      - use adjusted_mode in crtc_mode_set (using adjusted_mode from
        fixup hook)

commit d2497009e395800fbde5777465f3087a54b94418
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 9 22:23:45 2007 +0200

    randr checkpoint
    
    - server still hangs if you start with external monitor connected
    - RMX not working
    - more than 2 outputs now possible (untested)

commit 4488f0737d5268168eab41440b7a3b5732efb15e
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 9 16:41:13 2007 +0200

    more randr re-work
    
    - remove RADEONQueryConnectedDisplays(); randr takes care of this now
    - print edid after randr detection

commit 4d992386e2ab9d8c50f0484445564325dfb42930
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 9 16:12:21 2007 +0200

    enable all outputs on each crtc on mode restore

commit 2618cf2aa8ed76411b943eb90c95869814c2f151
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 9 15:48:40 2007 +0200

    More re-org to allow more than 2 outputs
    
    - Move radeon output crtc map into crtc_set_mode
    - in modeinit, set up all outputs attached to crtc

commit 61b9e79cbeee6f735a4c82ec8a802aee85d8b890
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 9 15:11:23 2007 +0200

    start to clean up MapControllers

commit 6a724dd798c1a7b461672993c02be83a7bccded6
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Wed May 9 14:48:17 2007 +0200

    minor cleanup

commit 03860fed24b4f76cc7f1f4210ec8f8040fa04777
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue May 8 19:27:48 2007 +0200

    remove some old mergedfb cruft

commit 76670f665ebec7cdf40a04bf9379cb3ad4417507
Merge: 83f81ed a3ee422
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Tue May 8 18:41:25 2007 +0200

    Merge branch 'master' into randr-1.2 and fix conflicts

commit 83f81ed5e3c33c94c80500316c37a7cbfc51f41f
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon May 7 22:54:16 2007 +0200

    RADEON: Fix cursor handling for randr

commit 5fc21cd34436919300018d8d4850fc67db284eb3
Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
Date:   Mon May 7 13:31:20 2007 -0700

    - fix randr 1.2 on pre-RV350 chips by enabling DAC_MACRO_CNTL writes
    - set dac_cntl on non-primary crtcs
    - set XCRT_CNT_EN in CRTC_EXT_CNTL just because
    - fix warnings in calls to xf86PrintModeline (wants screen index not
      pScrnInfo)

commit 99b3df154317f0209618e532282a3e7ad091c00f
Author: Alex Deucher <alex@t41p.hsd1.va.comcast.net>
Date:   Mon May 7 19:02:35 2007 +0200

    RADEON - update randr cursor handling, LVDS setup fix
    
    - quick fix for the cursor handling to update to the latest
    server bits
    - make sure connector type is CONNECTOR_PROPRIETARY for LVDS.

commit a3ee42207aab77d93655a82fdcb32be38268b85f
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Apr 25 09:52:22 2007 +1000

    radeon: another attempt at fixing the mergedfb refresh rate
    
    This attempts to keep it inside the 32-bit limit when multiplying things out
    later in the randr tree.
    
    Let me know if I screwed this up..

commit 3828237200fc16d4d32664fb8358950c213d4897
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Sun Apr 22 11:36:00 2007 +1000

    radeon: add support for DDC on some laptop chipsets
    
    I noticed fglrx has DDC for the panel in the rs480 laptop, however radeon
    didn't pick it up, so I valgrinded fglrx and spotted 0x1a0/0x1a4 accesses
    I actually noticed this before from the BIOS but never figured it out.
    
    So now I get DDC from the LCD on this laptop.

commit dd6a966e862b774a8e8b9e1a085309219673efad
Author: Dave Airlie <airlied@nx6125b.(none)>
Date:   Sun Apr 22 11:36:00 2007 +1000

    radeon: add support for DDC on some laptop chipsets
    
    I noticed fglrx has DDC for the panel in the rs480 laptop, however radeon
    didn't pick it up, so I valgrinded fglrx and spotted 0x1a0/0x1a4 accesses
    I actually noticed this before from the BIOS but never figured it out.
    
    So now I get DDC from the LCD on this laptop.

commit c81ed9bd7b37c9d02141d10f6c7bad3d0c57032f
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 21 18:58:40 2007 +1000

    radeon: fix build on older server

commit 406eec71116a58d42288a7f1c809a92d5bda7350
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Apr 21 18:56:28 2007 +1000

    radeon: fix build since patches for IBM don't actually build

commit ad119960095b4b64f4c6793f65950c9967ce4989
Author: Matthias Hopf <mhopf@suse.de>
Date:   Thu Apr 19 11:54:46 2007 +0200

    Disable RMX for IBM Lewis server.
    
    Due to the hardware layout RMX ddc_mode has to be set.
    If ddc_mode is set, RADEONValdiateFPModes() shouldn't be called.
    Bugzilla #10620 (3).

commit 16ef77df4ebaf5ea13baa82972aaf98e71ac32ee
Author: Matthias Hopf <mhopf@suse.de>
Date:   Wed Apr 18 17:36:15 2007 +0200

    Set sync polarity restriction flags even for non-"digital separate" monitors.
    
    According to Lisa Wu, this is correct regarding the VESA EEDID standard.
    Bugzilla #10620 (2), original patch by Lisa Wu @ATI

commit 0abce69f0d826a7ca1a41d963cd4730b6e01c145
Author: Matthias Hopf <mhopf@suse.de>
Date:   Wed Apr 18 17:32:52 2007 +0200

    Fix inconsistent use of Mode lists.
    
    Some scans used to only check every second entry, some stopped at the entry
    before the last entry.
    Bugzilla #10620 (1), original patch by Lisa Wu @ATI

commit aea801cf9a5ce519a53d6fffd9a3a2e526ec79ea
Author: Matthias Hopf <mhopf@suse.de>
Date:   Fri Apr 13 16:16:05 2007 +0200

    Fix crash if MergedFB and secondary head not found
    
    If the secondary head isn't found (Monitor unplugged etc.) but MergedFB
    is configured, the driver segfaults because it tries to access the mode
    list private structures, which are not filled in.

commit 07ddffb32e6293c77b32c94b87ec468caef3d6f5
Author: Matthias Hopf <mhopf@suse.de>
Date:   Wed Apr 11 14:36:51 2007 +0200

    Fixed typo in mode list generation.

commit 4effa67ea75736a31b9e78a7b35acf74b067c43e
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 9 22:08:31 2007 +1000

    radeon: add support for enabling direct rendering on RS480
    
    Thanks to Matthew Garrett and Ubuntu for the hw loan to get this working.
    
    Still no 3D driver support but at least you should get CP acceleration for
    2D now.

commit 6b25a4c48796e022a093f3072574ffe9709ecaf4
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Wed Apr 4 10:47:29 2007 +0200

    radeon: Link nearest modes by default for clone mode.
    
    This makes sure all modes of both CRTCs will be available by default with
    MergedFB.

commit 3c892f163ec1fa9be6e733aab091c9b718f41efc
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Wed Apr 4 09:52:37 2007 +0200

    radeon: Always sort modes when adding to list.
    
    This makes sure mode lists will always be sorted from larger to smaller.

commit 3a8190ccc79969925257e7b980b78d79053d208d
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Wed Apr 4 09:47:07 2007 +0200

    radeon: Don't shrink virtual size based on secondary modes.

commit 9b1e97284ce185d358ca756a235d2cee346fa53f
Author: Henry Zhao <henryz@localhost.localdomain>
Date:   Sat Mar 31 23:01:52 2007 -0800

    10205: Radeon driver's own mode validation code does not work properly

commit 9c2dcd19be8fc2cc29e637d1e9748e66196e3900
Author: Henry Zhao <henryz@localhost.localdomain>
Date:   Sat Mar 31 20:10:03 2007 -0800

    9337: EDID modes do not participate in validation for CRT monitor

commit 1acd6d6fa42acec07fb11aeb189f492ddb021cb4
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Mar 30 11:06:10 2007 +0200

    radeon: Guard some MergedFB specific code with info->MergedFB tests.
    
    Fixes https://bugs.freedesktop.org/show_bug.cgi?id=10442 .

commit 1a71106c0e4fe5f650239dc694163fdf52d33663
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Mar 27 10:13:21 2007 +0200

    radeon: Fix typo.

commit f87e57d4d773a019d1cc8a10425c57480430f6a4
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Mar 27 18:08:54 2007 +1000

    radeon: fix up crtc debug dereference problem

commit 66b4a571a4e7960da6807d3f30955aa08e89ccc6
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Mar 27 17:00:37 2007 +1000

    update number to 6.6.191 for rc release

commit fca30a6b581cb6c1466ab1bc316df8fed5d82b60
Author: Alex Deucher <alex@botch2.com>
Date:   Mon Mar 26 23:26:51 2007 -0400

    fix NULL dereference
    
    when IsSecondary is true, crtc1 is NULL
    Noticed by Sverre Froyen.

commit 97d8d1ed10d069343f2b3172ba64ca421821a602
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Mar 24 20:02:12 2007 +0200

    Move atichip.c from ati to atimisc.

commit aa8f5b02ebc9be60df48722588261627d6a457e8
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Mar 24 19:53:02 2007 +0200

    [mach64] Use Mach64Chipsets[] instead of ATIChipNames[].
    
    atimisc is PCI-only now, we can get the chip name with xf86TokenToString().

commit 39e896a1e688ea2d2d21f88c1c5d34c5810aac1c
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Mar 24 19:47:18 2007 +0200

    [mach64] Set pATI->ChipRevision correctly, instead of overriding.
    
    There is no need to override pATI->ChipRevision for GX/CX, as it is only
    reported with a printf.

commit f046a910ca117279fbabc6281b2e23439ec9ea4e
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Mar 23 22:19:17 2007 +0200

    Drop probing by driver name from "Device" section.
    
    atimisc is PCI-only now, so we only need to scan the PCI space.

commit 9cd175d9cd4ed710fccb303664c77519ecaf1e21
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Mar 23 22:12:48 2007 +0200

    Fold FillIn() back to Probe().

commit d7a8cd0e476034796fc38e25a28cd28d05ea4a13
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Mar 23 22:10:03 2007 +0200

    Drop now unneeded _X_EXPORT's.

commit 58626d8b78f26f0d9c480033d3c3a12e541342b1
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Fri Mar 23 21:30:19 2007 +0200

    Move {atimach64,r128,radeon}_probe.c from ati to subdrivers.
    
    Subdrivers are now loaded from the wrapper Probe function rather than at screen
    creation time.
    
    The wrapper Identify callback only prints chip families now, chip lists are
    printed when a subdriver is loaded. This also avoids duplication of subdriver
    Identify callbacks.
    
    Unknown radeons should still get a list of known radeon and then probe fails...
    
    Probe for atimisc last to avoid needless loading in most cases (r128, radeon).

commit 2e3d43af1e5077cc61dd8668551a6291368d9ed2
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Mar 19 19:05:04 2007 +0200

    [mach64] Compute MMIO address once for each case (PIO, MMIO).
    
    For an MMIO-only driver, the extra MMIO address probing is not needed since we
    already compute the MMIO address during probe and do not make any BIOS calls.
    
    For a PIO driver, this extra probing could even result in a wrong MMIO address
    since the checking is done by reading through PIO, not MMIO. The MMIO address
    is later corrected but having the extra probe there is useless.

commit e7defc0e930f1b2d83623a769b2bfdb05c66a5fe
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Mar 19 19:04:10 2007 +0200

    [mach64] Move setting of PIO and MMIO addresses up, after BIOS init.
    
    Partially revert "Minor refactoring of pATI->Block0Base computation."
    
    This parially reverts commit 2c8b33b761e4411451aea1eea3a89d629aeea40d.

commit 3dfdba195f1ff794ab00585ab80e7ea6ac92fcf4
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Mar 18 16:40:07 2007 +0200

    [mach64] Make mapping code friendlier to pci-rework source-code compatibility.

commit 321db6d87c9110654ab386e5ec270116eca1e04f
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Mar 18 16:15:20 2007 +0200

    [mach64] Add macros for pci-rework source-code compatibilty.

commit dfd07b6e99020d1db43d7ce0cae4423d8c6b1f05
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Mar 18 16:38:26 2007 +0200

    [mach64] Drop checking that BAR base + size fits in 32 bit.
    
    I can't see how these tests could fail on 32-bit. OTOH they are potentially
    problematic with 64-bit PCI addresses.

commit e674338a98c50800637b8ebc01adf3aec2a3eb38
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Mar 18 15:50:41 2007 +0200

    [mach64] Single mapping per BAR.
    
    - We reset write-combining of the FB when MMIO registers fall in the linear
      aperture.
    
    - We set MMIOInLinear in all three aperture mappings since the mapping code
      depends on it.
    
    - We map the linear aperture in its entirety for MMIOInLinear also.
      This simplifies mapping of HW cursor and the LE aperture on BE archs, as
      they always fall in the linear aperture.
    
    - I assumed that BAR[2] is page-aligned (we know it's 4K-aligned for sure).

commit e7969de8ec572d8801806f9525a9a081a58a03f1
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Mar 18 15:35:25 2007 +0200

    [mach64] Drop poking the VGA MMIO aperture.
    
    We will not be able to handle this when we do mappings for PCI BARs only and
    it should be handled with a CPIO driver anyway.

commit 166c760a86165330175023e07c4b2bd6891633c5
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Mar 20 09:16:02 2007 +0100

    Fix advertised minimum minor version of the DRI module.
    
    We don't automatically require bumped minor versions.

commit 1bdd376dbd57de8925244f0808f974d6d8cff39d
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Mar 20 09:14:39 2007 +0100

    radeon: Only sync to hardware when really necessary with EXA.
    
    In particular, don't sync again after accelerated DownloadFromScreen, which
    syncs implicitly. This avoids calling into the kernel when it's not necessary,
    which can be relevant in some situations.

commit 3cfa3a5c8daf03aaad6fc30d275709f6eb717d29
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Mar 20 09:13:24 2007 +0100

    radeon: Unify code to release the CP.

commit e174d8df8c801fad95e5f79cff69187c200bee6e
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Mar 20 09:12:51 2007 +0100

    radeon: Minor BlockHandler cleanups.
    
    Don't flush indirect buffer in BlockHandler; it's done in LeaveServer.
    
    Also set the EXA engine mode to unknown only at the end.

commit 113fb4b61e709a9b54fc2ef73efce06011e771c1
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Mar 20 09:12:09 2007 +0100

    radeon: Disable CP line acceleration on RV280s.
    
    There have been several reports of stability issues with things like the
    xscreensaver hack hypercube.

commit 4651d00b183cb498879d605c4b93cd3a0c63cb33
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Mar 20 09:10:19 2007 +0100

    radeon: Make sure 3D clients will re-upload textures to video RAM after LeaveVT.
    
    Walk the SAREA texList and bump the age of every active object, so their owners
    will consider them kicked out when they grab the HW lock next time.

commit 2d2fb54ba370c1df9ef5102e83c17a7ff5c55403
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Mar 15 17:26:56 2007 +0100

    atimisc: Fix strict aliasing violation flagged by -Wall.

commit cfb82631fb683a0dc9bbc8f2d214646a8f1bca0b
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Mar 15 17:12:43 2007 +0100

    radeon: Fix build warnings.

commit 50a524445ed1ea3c4fab56de772921ba86a21d35
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Mar 8 17:43:48 2007 +0200

    Move atioption.c from ati to atimisc.

commit 52684241ba1ffb393cb655ecc09cbd0cef5b1717
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Mar 8 07:07:02 2007 +0200

    Move atiprobe.c from ati to atimisc.

commit 2a1cd107a593630001799d6cd9e72c64222553b2
Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
Date:   Tue Mar 6 14:35:50 2007 -0800

    Add prepare/commit hooks to output and crtc func table

commit 703c6fc0142ffc600285c13fe6dafecf988c0a1d
Author: Jesse Barnes <jbarnes@jbarnes-mobile.amr.corp.intel.com>
Date:   Tue Mar 6 10:12:42 2007 -0800

    Update for new CRTC resize hooks.

commit 1e270b411cf691c69194932b864ee2c9db292263
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Mar 4 18:21:49 2007 +0200

    [mach64] Bug 5586: overlay scaler limited to 720 pixels on ATI Rage Pro.

commit 54f9b8c1d01ecb97e2d4d247918f0efc86ed6037
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Mar 4 18:16:40 2007 +0200

    [mach64] Xv: use single surface and encoding structs.

commit e1e55b533d3ae528c8da37dcb77ed906d05697fb
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Mar 4 19:11:34 2007 +1100

    radeon: add option to set pci aperture size from config file
    
    This requires a drm > 1.26 to work

commit 58ee31d015cf8bec0edca62a46faec0b3505be8c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Feb 25 23:29:09 2007 +1100

    fix typo

commit 3cfe94d5438961b869766dacbcd13fde8b770ca2
Merge: 31c018c 3b43788
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Feb 25 23:27:19 2007 +1100

    Merge branch 'radeon-randrv12-v4'
    
    Conflicts:
    
    	src/radeon_display.c
    	src/radeon_driver.c

commit 3b43788c45f51ad2d3e8e64383c412f4ddd97207
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Feb 25 23:17:31 2007 +1100

    cleanup radeon code against master server

commit 24c6fa7cfac5602ba9e6e2f331bcac52fab258e5
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Feb 25 21:43:54 2007 +1100

    make radeon randr build against master server

commit 4374895d393bf170134ccffc188521fe515d5a77
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Feb 24 21:25:13 2007 +0200

    [mach64] Consolidate adjustments of mode timings, part 3.
    
    Cosmetic.

commit 8b9a4ec8af90b2f9f0d0a3a7f6627061df7e01b3
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Feb 24 21:22:49 2007 +0200

    [mach64] Consolidate adjustments of mode timings, part 2.
    
    Factor out to seperate function.

commit bb226c9e7218d2a65c056fe74cb7eece0550670f
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Feb 24 21:20:53 2007 +0200

    [mach64] Consolidate adjustments of mode timings, part 1.
    
    Move LCD block from atimode.c to atimach64.c .

commit 31c018ca4a18ce426b29006f103f56eee7f985fa
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Wed Feb 21 13:47:37 2007 +0100

    add missing part of last commit...

commit df07fa14da73e92d1a6ee0173468ab5c075d1cbb
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Wed Feb 21 13:05:42 2007 +0100

    fix alignment issues with planar yuv and a bug with packed uyvy
    
    respect that all source planar yuv planes are already dword aligned.
    Some attempts to fix up odd widths and odd heights (which are a bit strange
    for 4:2:0 formats). They still don't quite work 100% correctly (at the borders)
    but neither do they with packed yuv formats.
    While here, fix totally broken packed UYVY format by inserting missing break...
    Both bugs reported by Felipe Contreras.

commit dfcb431adfbbaaee0d262d32735585555a0cbde4
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Feb 20 21:20:28 2007 +1100

    radeon: move some i2c registers out into common register file
    
    These regs are more useful than just multimedia

commit 7a25512415bb40b772491bb4a773dfe02ac8b71a
Author: Alex Deucher <alex@botch2.com>
Date:   Fri Feb 16 00:44:11 2007 -0500

    Add "DRI" option
    
    This option allows you to disable the DRI per card.  It also
    removes the "RN50Force3D" option as it is now covered by this
    option. RN50 users should set this to TRUE if they want to force
    the DRI on.

commit fa30ec6d5cd9bf4eb1a960592ca7311175219e4b
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Feb 13 15:35:32 2007 +0200

    [mach64] PreInit: maxPitch, minor cosmetic.

commit 1777dcc1956d910073e13322767d9a3de41a949b
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Feb 13 15:03:40 2007 +0200

    [mach64] PreInit: pitchInc is local.

commit 9cdf4fcc3a93a4e20244286392dc31a0b8e6a10a
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Feb 13 11:53:42 2007 +0200

    [mach64] PreInit: Use goto bail.
    
    Match ATILock - ATIUnlock.

commit 482b85144fee42b6543dcc97a75899e363e05e9e
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Feb 12 14:27:37 2007 +0200

    [mach64] Enable RENDER acceleration on the Pro variants.

commit 63248f0b4308a4487cda3aa22daa36e3e0d38d14
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Feb 12 19:37:36 2007 +1100

    fix LVDS by moving bios reading around

commit 6a25f620d40cbb063de94aa6b5267296cd5a0670
Author: David Airlie <airlied@asimov.stargames.com.au>
Date:   Mon Feb 12 15:59:43 2007 +1100

    remove assignments to pOutput before it is created

commit 9234d8045c5fefbd1a781209409e55a13e3e5370
Author: David Airlie <airlied@asimov.stargames.com.au>
Date:   Mon Feb 5 11:53:18 2007 +1100

    remove all the locking glxgears runs fine over screen changes without it

commit eda9fb15e8bc042661a91a3d8c921006dfb3ddd9
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Nov 21 04:02:41 2006 +0200

    Consolidate atixv.c w/ atimach64xv.c, part 2.
    
    Move {Initialize,Close}XVideo from atixv.c to atimach64xv.c .

commit 67b240ddd4a6549a23885afc723b6efa7c52db4c
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Oct 31 16:44:10 2006 +0200

    Consolidate atixv.c w/ atimach64xv.c, part 1.
    
    Merge ATIXVInitializeAdaptor() in ATIMach64XVInitialiseAdaptor().

commit 4dac7896549392f7378cad9620618cec28f41a16
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Oct 29 03:55:39 2006 +0200

    Consolidate aticursor.c w/ atimach64cursor.c

commit 23b12b9ff55224e8c3c45eb58ea5fbf2f747d82e
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Oct 31 16:10:07 2006 +0200

    Consolidate atiaccel.c w/ atimach64accel.c, part 2.
    
    Merge ATIInitializeAcceleration() in ATIMach64AccelInit().

commit bc3b222b57d7edf7bdce00a53e8abd9047c314a4
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Oct 28 19:29:12 2006 +0300

    Consolidate atiaccel.c w/ atimach64accel.c, part 1.
    
    Move ATIResizeOffscreenLinear() from atiaccel.c to atimach64xv.c and make it
    static. It is only used by XV memory management functions.

commit d876889add41c8052d4f3feaa21ddf384f5a7054
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Nov 21 04:47:06 2006 +0200

    Drop non-PCI support from atividmem.c
    
    - we require a PCI device (pVideo != NULL)
    - map the VGA framebuffer with xf86MapDomainMemory()

commit 2c8b33b761e4411451aea1eea3a89d629aeea40d
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Nov 21 04:51:02 2006 +0200

    Minor refactoring of pATI->Block0Base computation.

commit a659b7235332e19659c56cc9d7af362bd8885a29
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Feb 4 11:28:54 2007 +0200

    Cleanup checks for pATI->PCIInfo.
    
    Fixes a bug where shadowfb would not be enabled by default in the non-accel
    case because pATI->PCIInfo is now set after ATIProcessOptions() is called.

commit 9d77aabdff919360f0c9333105436c31f1f5749a
Merge: ff8ea19 57822be
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Feb 5 19:16:51 2007 +0200

    Merge branch 'mach64-pci-1'

commit d7317604c843e21c1df048a9253ed55a1957cccd
Author: David Airlie <airlied@linux.ie>
Date:   Fri Feb 2 14:54:00 2007 +1100

    get rid of mergetype and displaytype from radeon.h

commit 15c68ac19ff9971ae02cf52036ba36ddea1a6759
Author: David Airlie <airlied@linux.ie>
Date:   Fri Feb 2 14:30:16 2007 +1100

    rename some variables to output from connector

commit 72ef23ef7dd159d827e8e122482a58928d532268
Author: David Airlie <airlied@linux.ie>
Date:   Fri Feb 2 14:26:29 2007 +1100

    fixup mode probing a bit neater

commit 96acf6b2b242454345cc4b9cfc7ca07e0b597b43
Author: David Airlie <airlied@linux.ie>
Date:   Fri Feb 2 14:26:19 2007 +1100

    bring over setproperty from intel code

commit 76bc53f9b153880730ab61dcd2b6e4e7717e4058
Author: David Airlie <airlied@linux.ie>
Date:   Fri Feb 2 14:15:03 2007 +1100

    move i2c buses into outputs

commit 47fb9ce657f018177a35b449a4d716dc03be9327
Author: David Airlie <airlied@linux.ie>
Date:   Fri Feb 2 11:45:40 2007 +1100

    fixup callers to crtcsetmode fixes my cursors

commit 720730b1b0de632488d3b9818210ec5e9c7f07ae
Author: David Airlie <airlied@linux.ie>
Date:   Thu Feb 1 16:43:38 2007 +1100

    add locks for crtcs and some missing lines from intel update

commit 6748732658850ea506f623a3622aa7135513ffd0
Author: David Airlie <airlied@linux.ie>
Date:   Thu Feb 1 16:26:31 2007 +1100

    update to latest intel codebase modulo using their mode set
    
    and it breaks my cursor

commit a77f08298dc7e097025e3f7f92e3665c0ef30095
Author: David Airlie <airlied@linux.ie>
Date:   Mon Jan 29 16:12:24 2007 +1100

    radeon: always reset cursor regs

commit ff8ea19fcdce099732f9359e53cd62b9a04bfa6d
Author: Alex Deucher <alex@botch2.hsd1.va.comcast.net>
Date:   Tue Jan 30 21:11:09 2007 -0500

    add option to force the DRI on for RN50 chips
    
    Allow user to force the DRI on for RN50 chips.
    3D is not guaranteed to work on these chips,
    however in some cases it does.
    fixes bug 9802.

commit 57822be75740f339445f2375d44632560f4bbe57
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Nov 21 03:08:26 2006 +0200

    Drop pATI->Chipset, no longer used.

commit 8b7c88e9ed549777413136c0f2ccc61747b010d8
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Dec 28 14:46:10 2006 +0200

    Add option "probe_sparse" to force probing sparse I/O bases.

commit 3654b786f1ad1f4e6bfb2fff5ff057254958f7c0
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Dec 27 17:59:14 2006 +0200

    Sane probe, based on work by Luc Verhaegen <libv@skynet.be>.

commit 0117c9bde0d0bbb487bc259cf55e8066ebd63f6a
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Dec 27 17:49:45 2006 +0200

    Drop checking of sparse I/O bases conflicts
    
    This will be handled with an option somehow.

commit 87cf2f1874ca8a7cc492d2e2b6918ba69a8aa713
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Aug 14 17:55:14 2006 +0300

    Minor refactoring of module (un)loading for TV_OUT.

commit 0b31333c9147af21c50493872779da12a3668e5d
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Nov 20 22:08:49 2006 +0200

    Drop support for non-programmable clocks.
    
    From README.ati:
    
    Clocks for supported programmable clock generators:
    
      The driver currently supports all programmable clock generators known
      to exist on Mach64 adapters.
    
    Clocks for unsupported programmable clock generators:
    
      This case is unlikely to occur, but is documented for the sake of
      completeness.
    
    Thus:
    
    - check for (pATI->ProgrammableClock > ATI_CLOCK_FIXED) &&
                (pATI->ProgrammableClock < ATI_CLOCK_MAX)
    
    - drop "probe_clocks" option
    
    - pATIHW->ClockUnmap is no longer used
    
    - pATIHW->ClockMap is only used with NewHW.crtc which is always ATI_CRTC_MACH64
      and has the identity map, so drop it
    
    - (pATI->ProgrammableClock != ATI_CLOCK_INTERNAL) => (pATI->depth <= 8)

commit c9a9ea5ebd1c27881c1fac19842cfa3af55c126e
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Nov 20 15:09:41 2006 +0200

    Banked memory is no longer needed.
    
    - (pATI->BankInfo.BankSize = 0) in all cases, cull pATI->BankInfo
    
    - only keep the minimal pATIHW.SetBank interface for save/restore
    
    - clean ATISwap() a little, (NewHW.crtc != ATI_CRTC_VGA)
    
    - (UseSmallApertures == TRUE) <=> pATI->VGAAdapter

commit 383e963e275d351ea3631c352f5795340162d69f
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Jan 28 00:44:31 2007 +0200

    Always use the linear aperture.
    
    - drop (pATI->OptionLinear == FALSE)
    
    - AcceleratorVideoRAM is always set, i.e. VGAVideoRAM is not used
    
    - pATI->LinearBase is always set
    
    - xf86LinearVidMem() is now checked in atipreinit() for both CPIO and MMIO

commit 9b126f45db27496c1ad16db65a61fe641a018983
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Nov 20 20:38:59 2006 +0200

    We always use the accelerator CRTC within the xserver.
    
    - cull (pATI->NewHW.crtc != ATI_CRTC_MACH64).

commit 0abcb2b2c84a50e64bb6aa9e94760659ecf33add
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Jan 28 00:19:15 2007 +0200

    Clean pATI->Adapter and pATI->VGAAdapter.
    
    - cull (pATI->Adapter != ATI_ADAPTER_MACH64)
    
    - treat pATI->VGAAdapter as Bool

commit 817b4b5338dba4d8eb862f1f79ef0edb75aad7f4
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Dec 27 21:16:18 2006 +0200

    Keep PCI mach64 only, drop:
    
    - Chip < ATI_CHIP_88800GXC
    - Chipset != ATI_CHIPSET_ATI
    - Adapter != ATI_ADAPTER_MACH64
    
    - depth < 8

commit d350860e29f043e98bfb1da74b26280f1755ab6f
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Dec 27 20:56:45 2006 +0200

    Keep PCI mach64 only (atipreinit.c, atimode.c), drop:
    
    - Chip < ATI_CHIP_88800GXC
    - Chipset != ATI_CHIPSET_ATI
    - Adapter != ATI_ADAPTER_MACH64
    
    - depth < 8
    
    atimode.c only:
    
    - NewHW.crtc != ATI_CRTC_MACH64
    
      This allows to drop VGACalculate(), VGAWonderCalculate() cruft early.

commit 5fa77f2d122e7267911a15235338d8d3f9eece2e
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Wed Dec 27 14:50:48 2006 +0200

    Drop probing for VGA, VGAWonder, 8514, Mach32.
    
    - ChipHasSUBSYS_CNTL
    - Coprocessor
    - SharedAccelerator
    - SharedVGA <=> (VGAAdapter != ATI_ADAPTER_NONE)

commit 1b2a9e1735da63bbb8cb41939668f789cee22579
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Nov 20 02:35:56 2006 +0200

    Drop AVOID_NON_PCI.
    
    This was not set anyway, because configure.ac would compute ATIMISC_NON_PCI and
    then test ATI_AVOID_NON_PCI to set AVOID_NON_PCI...

commit 2fb84dd2fc1a663c7b9d77e706189439ffe08381
Author: Alex Deucher <alex@botch2.hsd1.va.comcast.net>
Date:   Thu Jan 25 02:01:42 2007 -0500

    I think we can say r300 support is not experimental

commit e155659f4b006edff31f1fda88b32bf608dbeece
Author: Alex Deucher <alex@botch2.hsd1.va.comcast.net>
Date:   Thu Jan 25 01:59:27 2007 -0500

    update man page.  fixes bug 6457
    
    Most cards support 2D and 3D now

commit fa12fe1cc90dd745f3eea35a07d4f3efd652e7b4
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jan 23 19:37:51 2007 +1100

    remove unused restore palette function

commit 4d3649b84a3325043c38cece4499de0095cebd71
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Jan 23 19:37:21 2007 +1100

    remove isused and isactive

commit 9149e763865598c307cbefc753ff6ebdeeaf32ae
Author: David Airlie <airlied@asimov.stargames.com.au>
Date:   Tue Jan 23 15:20:11 2007 +1100

    radeon: fixup problem with cursor not going off
    
    Also fixup secondary dac detect to return unknown for now

commit 2a13a3b641d9acf4f50472e1c8ba07633c3b78d6
Author: David Airlie <airlied@asimov.stargames.com.au>
Date:   Tue Jan 23 10:36:06 2007 +1100

    fixup init disp bandwidth
    
    This probably break old-style dualhead badly

commit cbd84bed13582e82f8b2e84aa152602474c09cd4
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 22 22:19:46 2007 +1100

    removed even more  mergedfb remains

commit 6296882135b183425a219efb75374d3b172de370
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 22 22:14:48 2007 +1100

    remove more mergedfb relics

commit 26e1bab2c7a4ad52710746265b3da495b54dab36
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 22 22:11:55 2007 +1100

    radeon: fixup some of the video code after randr
    
    This may not be complete, I need to test on dual-head system later

commit 9008e1caa45e4a18e6f3289c7b17036730fe578a
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 22 21:16:47 2007 +1100

    remove unused merged code

commit e29a32d711553fcb4ca9928122ac285fe0b0c1a7
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 22 21:09:53 2007 +1100

    add back overlay CRTC chooser this may not work yet

commit aa9d04ba94a3cd60b248231da517e2817591fc69
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 21 20:29:56 2007 +1100

    remove alot more mergedfb support

commit e8be0056e8ff666f63a294691661f5dab289203e
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 18 16:41:25 2007 +1100

    remove mergedfb

commit a648050a3cc60f92b1ca0b3d707aadf93d076d91
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jan 17 17:28:07 2007 +1100

    move some cursor code around for show/hide

commit d2ecfb507282726122bb8b0d17fd3637d0ae7d46
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jan 17 17:16:27 2007 +1100

    make dri work again

commit 369f7c85ceff983defb7657b80ec9cd3e5440b07
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Jan 17 11:14:09 2007 +1100

    comment out unblanking on VT switch

commit bdb66a2042f02c4b57bd3c0181a00b39fcbdb232
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 14 21:07:05 2007 +1100

    radeon: get randr-1.2 mode switching mostly working on my laptop
    
    The main change is to fix the dac macro + cntl register writes for rv350 and
    above, this still has a problem with resetting the same mode after connect
    disconnect cycle, need to talk to keithp

commit aa0e7337815d4daca4df0671768621330b759011
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 14 19:17:32 2007 +1100

    use more randr-ish names for variables

commit 9d37f23aea43b74a7ec640e6b03617c8392e2572
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 14 19:10:11 2007 +1100

    radeon: move blank/unblank to use randr

commit 6bd4fe42789c38e7e804826715214ce6badcca6a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 14 18:38:59 2007 +1100

    disable dpms on/off as it was writing regs before we wanted to

commit 3949288ed26a91e180b178f4796f2f7e1bdc8ed6
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jan 14 16:26:39 2007 +1100

    radeon: destroy and fixup LVDS crtc

commit f5ffb9fb3bdd7cec020240c5831ae92ee744972c
Author: Timo Jyrinki <timo.jyrinki@hut.fi>
Date:   Fri Jan 12 23:08:50 2007 +1100

    ati: fix detection of some newer radeons using ati wrapper
    
    This is mainly due to the cards having a different resource 1.
    Fixes 6796

commit 1e690c57ad1dfaeb760ef6e799faa6398e9a0551
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jan 12 23:03:10 2007 +1100

    always create a second CRTC I think this should solve any problems

commit 25b36a4c56422ad8e25a4a1c55055c2f062213ca
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jan 5 16:13:16 2007 +1100

    minor randr1.2 fixups

commit abe8791e4f9fa3e88273897b351387cd33822734
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jan 5 15:09:43 2007 +1100

    hook up DPMS through xf86

commit 8a9c68c2234b91ed38555f892afdad30b9e4b455
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jan 5 15:09:15 2007 +1100

    set binding for new heads

commit d6a2b8aeb5a97ee907fd45b574bc6e4ab4b3aede
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jan 5 09:33:54 2007 +1100

    fix LUT

commit ef1d36e56dec1fec37cee2dfd9cb5bf8ce2c485c
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Wed Jan 3 15:56:23 2007 +0100

    fix uninitialized mode regs (bug 9495)
    
    Since the reorganization of the mode setting code, the mode registers relying
    on state already set (by bios) were not read, thus clearing out all bits the
    driver does not touch. At the very least, this could lead to completely
    nonfunctional to misbehaving dvi output (see bug 9495). Fix this by using the
    SavedReg values, which also makes it more obvious that those are bits which
    were not set by the driver previously, but come from register readback.
    (cherry picked from 9506f7015a1e442f4ca0bd3bfae555ec7e8a5f37 commit)

commit 55aa832157bdebcba2d58896777942d108c352b0
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 17:57:31 2007 +1100

    fix cursor handling

commit 4f8a7cafdc77e98dc44f9eced876560b1ee01117
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 16:23:39 2007 +1100

    hook up crtc modesetting

commit 52f749c8a613ee316044abe82156ee270412ced8
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 16:23:26 2007 +1100

    fix typo

commit d7ff61c6822cbede7f5b59b411048d33dbae9ee4
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 13:38:26 2007 +1100

    hook up detection of output

commit 50439d7e9f4f6f9933bacd59f8bb3e655a35dbc2
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 13:21:57 2007 +1100

    fixup some function calls

commit e067bfee92f2b0877108355619b2fb9188a9d15a
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 13:21:45 2007 +1100

    add more files for back compat

commit f1f34627ffbe2136ac3e023c01c0430412919ded
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 12:50:03 2007 +1100

    make restore mode non-static

commit 249ec67c296b34d0c7c1d78602628d2f7ce6a045
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 12:43:03 2007 +1100

    more minor fixes to get radeon up to speed

commit a43c1d55f5f855d9e6ae939dd4eec1c607b6d514
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 12:29:51 2007 +1100

    bring radeon randr code inline with intel randr code

commit c54a31565e3ea50f1af7b81b1bf0c0e437099f47
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 10:39:01 2007 +1100

    radeon: fixup fastwrites to be always off
    
    My 8500 in i845 doesn't work with fastwrites even setup by the firmware.

commit dda2bbfdc2e0da6e8b9cb8d1bf78b91f1bb8131f
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jan 4 10:29:54 2007 +1100

    radeon: don't touch Controller[1] on single CRTC cards.
    
    This might fix bug 9371

commit 9506f7015a1e442f4ca0bd3bfae555ec7e8a5f37
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Wed Jan 3 15:56:23 2007 +0100

    fix uninitialized mode regs (bug 9495)
    
    Since the reorganization of the mode setting code, the mode registers relying
    on state already set (by bios) were not read, thus clearing out all bits the
    driver does not touch. At the very least, this could lead to completely
    nonfunctional to misbehaving dvi output (see bug 9495). Fix this by using the
    SavedReg values, which also makes it more obvious that those are bits which
    were not set by the driver previously, but come from register readback.

commit d5c6306385cbc7b13a132ae72ed04e04e24d9886
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Dec 19 09:45:24 2006 +0200

    Use portable XORG_RELEASE_VERSION macro.

commit 97df0a32b14e34f22dce9cd3b375c1ac5fb1c5eb
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Dec 19 11:28:21 2006 +0100

    radeon: Advertise 2D engine limits to EXA when we're not using the 3D engine.
    
    Also round up to the maximum width and height, as that's what EXA compares.

commit 295823d0879a5b574bb79843a6acd43adb9259e5
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Tue Dec 19 11:19:20 2006 +0100

    radeon: Default to leaving AGP transfer mode and fast writes unchanged.
    
    Based on the assumption that firmware should have set up the card and host
    bridge appropriately for these settings, this may actually be safer, at least
    for the transfer rate; leaving fast writes enabled is hopefully safe as well,
    it certainly is on my sytem.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=9284 .

commit 81f3b4070b70483d6da4f7587e52a64ac69c8ca0
Author: Eamon Walsh <ewalsh@tycho.nsa.gov>
Date:   Mon Dec 18 14:06:15 2006 -0500

    Revert "Convert callers of LookupWindow() to dixLookupWindow()."
    
    This reverts commit 48ff33a1770f3684cd50184db8f1944a456d9974.

commit 87592ffb717da1f0a1767a38918d16d60953599c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 20:10:58 2006 +1100

    add setdpi call

commit 41cd50487bc85708a3f791dfa70bf85223d91a65
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 20:08:07 2006 +1100

    add displayWidth set

commit 555e0f988c571aa47bc62ec6d9612a71f1a1f59b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 19:59:19 2006 +1100

    add randr pre init

commit 3e2c72d7ac80ed874bcf2887a5253dac1c9bb02c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 19:49:08 2006 +1100

    fixup even more remnants of old code

commit 4356b031886e00b3ed5ac1dbceeadebd7fc29fc2
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 19:47:45 2006 +1100

    fix remnant of old code

commit 17d39502a8dbea395051007aebffdf23644e9ee1
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 19:44:39 2006 +1100

    use getddcmodes properly

commit bf0b364cbd8682f297e2d110ece1f72e7151340d
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 17:31:08 2006 +1100

    fix up output namings

commit 4962a5430844114de864418d803f3182b90792ff
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 17 16:58:07 2006 +1100

    remove some code that moved into server

commit b47013f41249516ae82e22bd75caf573da2cc13c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Dec 16 12:02:37 2006 +1100

    hook up mode detect to new randr code

commit 48ff33a1770f3684cd50184db8f1944a456d9974
Author: Eamon Walsh <ewalsh@tycho.nsa.gov>
Date:   Fri Dec 15 17:43:39 2006 -0500

    Convert callers of LookupWindow() to dixLookupWindow().

commit 62a5e7565b66d7b7d65609c034f34b55bd266617
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Dec 15 19:48:42 2006 +1100

    bring over latest code from Intel git repo.
    
    this code doesn't work yet just realigns with intel work

commit 29124400c7f193317d41d8cfd748371a239cfea1
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 10 18:00:17 2006 +1100

    hook up randr crtc setting

commit 120c854f185c1e7711cf0dee19303fdb8894d49d
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Fri Dec 8 02:51:52 2006 +0100

    radeon: avoid unnecessary OUTPLL/INPLL calls when displaying video
    
    It is not necessary to always emit a OUTPLL/INPLL pair when we display
    a video frame. On some chips there are erratas for which the workarounds
    cause a 10ms delay by those calls. This is related to #5876 though those
    affected may suffer from other slowness issues too.

commit ccd37b3e88cdcfe03b7c707b6082339eb8f11e6b
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Dec 7 18:41:48 2006 +0100

    radeon: Move Xv option handling code into RADEONPreInitXv().
    
    This unclutters RADEONPreInit() somewhat, but more importantly moves comparison
    against info->ChipFamily after that's initialized.

commit 02be8c04a268eaa71bdfe891331758715fef4e71
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Dec 7 18:31:58 2006 +0100

    radeon: Make cache flushing for R300 series less invasive.
    
    Instead of calling the DRM CP idle ioctl, just emit the cache flush commands
    into the CP stream.

commit be46f7b6f7a729695a0affe2328077666283af12
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Dec 7 16:27:10 2006 +0100

    Fix radeon compile warnings.

commit 59c5b4f69c97fb233144677ab18095f88aed006b
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Wed Dec 6 18:48:55 2006 +0200

    Makefile.am: re-add ChangeLog to CLEANFILES

commit 7611f14dc697b75cd7bb6493bb65b3a7ead379b8
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Wed Dec 6 18:47:33 2006 +0200

    Makefile.am: fix changelog hook
    Make changelog hook safe for all situations.

commit f2a9d2d61addc4e3d5e128d8078a04c9a136be6a
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Wed Dec 6 00:16:41 2006 +0100

    radeon: fix up packed yuv broken by planar yuv patch
    
    fix the forgotten leftuv value for packed yuv which is
    needed to get correct uv starting pixel (fixes broken clipping /
    non-null src start pixel as tvtime uses)

commit d2aa57a4bdd4a0deb2c659bb07f3f57d1116f0d1
Author: Roland Scheidegger <sroland@tungstengraphics.com>
Date:   Tue Dec 5 01:30:13 2006 +0100

    radeon: use overlay scaler native planar yuv capability.
    
    Radeons can do planar yuv just fine, there is no need to convert all data
    to packed yuv manually. This saves some cpu cycles as well as some
    (graphic card) ram.

commit 5d5fa1b86e5179b061f0db47fe0227d1b84c37f8
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Dec 4 18:53:33 2006 +1100

    update radeon driver to Intel driver xf86Crtc interfaces

commit 51d1cf19e71dd5de47f2c6467f4a1685eefd9e1e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 3 16:30:01 2006 +1100

    Add radeon randr 1.2 initial attempt at support
    
    This doesn't do a huge amount yet

commit eb17c9aed2144701ad7bd1042b2905446e4d708a
Author: airlied <airlied@optimus.localdomain>
Date:   Sat Nov 18 15:48:02 2006 +1100

    move radeon over to not using X's mode management like the intel driver.
    
    this builds and at least seems to pick a mode.. might be near to hooking
    up randr1.2 soon

commit 941b5120916ebff69ec0ee4ca7a46105d5306e5d
Author: airlied <airlied@optimus.localdomain>
Date:   Sat Nov 18 10:41:12 2006 +1100

    make radeon modes use generic code

commit 608427283ea59cdfe3d85e1cf32719bc3809dc16
Author: airlied <airlied@optimus.localdomain>
Date:   Sat Nov 18 10:35:31 2006 +1100

    add more functions from i830 driver
    
    This adds more generic functions from the i830 driver to the radeon

commit d5b8cafc185b7d9fb909cb18a08615f81d89eaf8
Author: airlied <airlied@optimus.localdomain>
Date:   Sat Nov 18 10:22:38 2006 +1100

    add generic mode handling code from Intel driver

commit 9cfa82e1670ad85746926995972a535ddf03ee07
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 3 15:56:38 2006 +1100

    move monitor detection into single function

commit 032a00d155ecdcdcab3ca0d047f552fe6b338a97
Author: airlied <airlied@optimus.localdomain>
Date:   Sat Nov 18 10:23:12 2006 +1100

    make DDC function more generic

commit 2632ae24b3b50c69567e92611ce7c2cd2ee98baa
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 3 15:22:38 2006 +1100

    re-program bios 4 scratch so we know if the LCD panel is there post startup

commit ddec94e8f2f5746bad0e998d15303e771803d22b
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 3 11:07:23 2006 +1100

    move crtc to connector mapping to a connector to crtc mapping.
    
    Still not allowing any clone modes, but heading in the correct direction
    I hope... there is a chance this will regress something from superpatch..

commit 218cb7f8db35d0ce8f9fc4ece72bd5ec3f52106f
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Dec 3 09:53:35 2006 +1100

    radeon: dynamically allocate connectors

commit f22fd02bc7f7ef67e33c9bd93eae2d7488669b5e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Dec 2 19:48:00 2006 +1100

    make CRTCs malloc'ed rather than part of Ent
    
    This is leading towards randr-1.2 believe me :-)

commit 13efd1f75fbd29a4d1f69d7d5a5bb2b8d90ad820
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Dec 2 19:16:41 2006 +1100

    move HasCRTC2 to pRADEONEnt from info

commit 3933b86390eb2f4198d490acd4914fb470c40f47
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Dec 1 18:00:17 2006 +0100

    Make log file output clear about origin of used overlay scaler buffer width.

commit 563dfb52f5b24d2f765fae0394e599c11dcf0b5b
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Dec 1 17:56:19 2006 +0100

    Increase default overlay scaler buffer width for RV350.
    
    Works with 1920x1080 video on my M10.

commit 984ea3d9b7c27d8183ca94ad9d7905f03613fe10
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Fri Dec 1 17:42:23 2006 +0100

    Fix build warning.

commit 9f5ea3981449f29ff204eb154166e8fc813205fa
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Nov 29 16:46:57 2006 +0100

    radeon: bug #1462, predownscale to make HD video work.
    
    Use the overlay scaler's predownscale capability to make videos with large
    horizontal resolution work if it exceeds the scaler buffer width. Make the
    scaler buffer width user-configurable since we don't know it for all chips,
    and using predownscaling may otherwise reduce quality even if it wouldn't
    be needed. This should fix bug #1462.

commit 35a5eaf5adf103ef57f8d4590dae25b0c50bd780
Author: airlied <airlied@optimus.localdomain>
Date:   Tue Nov 28 17:31:05 2006 +1100

    fixup EXA after previous commit

commit ba047ae863aac869595a31ea94f102084636fd29
Author: airlied <airlied@optimus.localdomain>
Date:   Tue Nov 28 17:26:10 2006 +1100

    radeon: initial move framebuffer away from zero prep.
    
    In theory the driver should be able to handle the front buffer not at VRAM 0
    In practice it didn't.. this is cleanup for at least XAA parts of the driver
    to allow for the frontbuffer to move. It has to re-organise a large part of ScreenInit so things happen in the correct order otherwise some things get setup in-correctly. (not sure EXA with fb not at 0 works yet...)

commit 0d42cab2d889070ab6de05990e2b19724595f7af
Author: Alex Deucher <alex@t41p.(none)>
Date:   Wed Nov 22 13:44:49 2006 -0500

    clean up previous VIP commit.

commit 8e0f57571228729cc40ed59266484ecc43819f44
Author: Alex Deucher <alex@t41p.(none)>
Date:   Wed Nov 22 13:38:01 2006 -0500

    Don't mess with the VIP bus on mobility chips.  Seems to cause fan
    problems on asus laptops (see bug 7463).  We don't support video-in
    on any laptops at the moment anyway.

commit e4850610596a08082a528c38186268b72012e78c
Author: Alain Péteut <alain.peteut@gmx.ch>
Date:   Wed Nov 22 12:54:55 2006 -0500

    enable i2c for PCI_CHIP_RV250_If.  allows AIW fuctionality to work.
    patch and testing from Alain Péteut

commit ff38c2c9cf0c6acbdaf53b681ec721487cf411f8
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Nov 19 17:11:46 2006 +0100

    radeon: Bug #8989: Fix page flipping artifacts with XAA.
    
    We still have to force-sync the pages on enabling page flipping with XAA as the
    second page may have been clobbered by the offscreen pixmap cache since they
    were last synced.

commit 2dd0892817090709b2fb7ffba920595ada00fcad
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Nov 19 17:09:11 2006 +0100

    Fix compile warnings.

commit 8c1b9269aaac746989bdb9be02915722bcf6fec0
Author: airlied <airlied@optimus.localdomain>
Date:   Fri Nov 17 18:47:50 2006 +1100

    forgot SetPitch function is called

commit 3a0338bb487739a1740ddfb4d36d53cfa7f798c6
Author: airlied <airlied@optimus.localdomain>
Date:   Fri Nov 17 18:37:00 2006 +1100

    split mode handling code into separate modes source file

commit 13e0a95564220d42ad8060b43b0aaaba3002157a
Author: David Airlie <airlied@asimov.stargames.com.au>
Date:   Mon Nov 13 09:35:18 2006 +1100

    fix up issue with bindings and mergedfb

commit 63444770ff30afeb134befed5bb3a5c28b7bc4e9
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Nov 9 22:01:28 2006 +0200

    [mach64] Prefer double-buffered visuals for GLX.
    
    So that 3D apps apropriately fail in DRI...

commit 0411f68d71c75cda38ad46ad5c0f5cc3cda64464
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Nov 9 22:00:56 2006 +0200

    [mach64] Use asynchronous DMA mode by default.

commit 8dd668db05e8f1282fa0e29a91e38c7cbdc97aa1
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 12 16:33:21 2006 +1100

    radeon: abstract init display bandwidth from mergedfb

commit 45a9f434b77ad892efcdba267a935135b972dd42
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 12 16:12:56 2006 +1100

    add radeon Init2 function, to abstract some mergedfb mode setting

commit d0828804aec0852afaca44ee41c4792edc40dbb4
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Nov 12 15:59:02 2006 +1100

    add initial controller binding, remove uses of mergedfb test

commit 78061ca460c9d6fd338ccf273bbfa152f471622e
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Oct 23 16:49:59 2006 +1000

    radeon: separate static controller setup from non-static

commit f917f65e8d2b13d8b9bfc4320f4a935f5a5c4bff
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Nov 2 21:16:53 2006 +0200

    Officially require libdrm 2.2.0
    
    Note that this is only for the headers at compile-time. The driver still
    uses libdrm 1.2.0 from Xserver at run-time.

commit ca8c148942371c9445f32985625ce38eabc016e1
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Oct 26 15:40:46 2006 +0300

    Handle .99 in version patch level.

commit 23cec754158c94b43225b2070fc0a0b003e7bd25
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Thu Oct 26 15:39:49 2006 +0300

    [mach64] EXA: reserve DRI buffers only when DRI is active.

commit 9cd78af1d06f753e7bd7e1acaff25398bde45f6e
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Oct 23 16:52:07 2006 +1000

    radeon: set preferred modes

commit 914a5f0117ccb76292bdd81ea4a2a79d33319550
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Oct 23 10:13:24 2006 +0200

    radeon: Pitch doesn't matter when height == 1.

commit 2bcb51d66edaa944379cf8c8ca1ba91fffdc20a8
Author: Michel Daenzer <michel@tungstengraphics.com>
Date:   Sun Oct 22 17:26:28 2006 +0200

    Bug #6756: Attempt to fix repeat picture acceleration.
    
    Always use normalized texture coordinates on R200 and fall back if a POT
    texture pitch doesn't match the HW's implicit pitch.

commit dabffb8335027b60ca1fc554423e196dfb9acd6d
Author: Henry Zhao <henry.zhao@sun.com>
Date:   Tue Oct 17 21:17:47 2006 -0400

    improved results for mergedfb xrandr refresh rates - bug 6966

commit 831fc4a009841f68fe161b6e0db5b212d7d8079b
Author: Henry Zhao <henry.zhao@sun.com>
Date:   Sun Oct 15 17:12:06 2006 -0400

    fix bug 6966 (Henry Zhao, Shem Multinymous)

commit 5425be996692425e57884e5a4c159fc79510e89f
Author: Alex Deucher <alex@t41p.(none)>
Date:   Sun Oct 15 16:49:24 2006 -0400

    clean up magic number

commit 457178f418983041ea59df703a17513a47d17044
Author: Alex Deucher <alex@t41p.(none)>
Date:   Sun Oct 15 16:40:08 2006 -0400

    Disable all ouputs on initial mode set.  The ones we want will get
    enabled by RADEONEnableDisplay().

commit 3fb3f410931a13542fdd4c51c4c9ecada7b37d76
Author: Alex Deucher <alex@t41p.(none)>
Date:   Sun Oct 15 13:29:48 2006 -0400

    Rework the output init code.  Divide into separate functions
    for each output.

commit 45e13f3c8786e75276cce85de4af653713d9b4d8
Author: Alex Deucher <alex@t41p.(none)>
Date:   Sun Oct 15 13:18:01 2006 -0400

    Remove paneloff option.  This is already covered by monitorlayout and
    shouldn't be needed with xrandr++.
    Also remove commented out Bioshotkey code.

commit 4abb5b7afea8d37e95461335e52b16168e555dab
Author: Alex Deucher <alex@t41p.(none)>
Date:   Sun Oct 15 13:10:22 2006 -0400

    Remove Bioshotkeys option.  Leave the bios as configured at boot.
    Most distros enable this option by defalt anyway, and with xrandr++
    it won't be an issue anyway.

commit 2933140b5f1f8a6e270460d8918a14943bd0f174
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Oct 15 17:05:02 2006 +0200

    radeon: Use xf86XVFillKeyHelperDrawable() when available.

commit 4edbfb9eb952f9b3f5f597749192c17baf15cdce
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Oct 15 17:03:13 2006 +0200

    radeon: Track screen damage all the time for page flipping.
    
    This way we don't ever have to forcedly synchronize the pages so we hopefully
    never clobber one page's contents when we shouldn't.

commit c9c2ac2b42398f5bfad909f3289e2545bb7b3888
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Oct 14 15:49:22 2006 +0200

    radeon: Don't try to synchronize pages when the CP isn't running.
    
    Also move the DamageEmpty() call into RADEONDRIRefreshArea().

commit c19915a401ccf69046bed03c8d5067f2e72a094e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Oct 6 09:55:40 2006 +1000

    always turn on DAC for scanning the CRT connect.
    
    Ubuntu 63994 - myself and BenH discussed this as a good idea on irc

commit b8547aa89f93a7fefbefb1c0d2743999930ac785
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Oct 4 01:44:24 2006 +1000

    update version number to 6.6.99 in preparation for a 6.7 branch at some stage

commit 23a6f97e08fd49e1cae03cd97cae67a5f06b7634
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Oct 3 13:48:09 2006 -0400

    FP timing regs required for both internal and external TMDS

commit 829be884702043fe4c9e349488d2585bf0561ae9
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Oct 3 13:41:21 2006 -0400

    remove bogus registers

commit cd900580dbc8928ebc28514162b4c1dbfe9fd5ae
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Tue Oct 3 00:32:22 2006 +0300

    [mach64] Fix build for !defined(USE_EXA).

commit 22860a3c0685a25f982983654303ad02aedc02ec
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sun Jul 16 19:23:56 2006 +0300

    Bug 6242: [mach64] Use private DMA buffers.
    
    Map the DMA buffers read-only. This eliminates a security problem where a
    client can alter the contents of the DMA buffer after submission to the DRM.

commit cb53fe7c1e45937746e43437ae6adb0355306ae9
Author: Alex Deucher <alex@t41p.(none)>
Date:   Sun Oct 1 18:46:05 2006 -0400

    fix LVDS plus internal TMDS

commit 145c716de6d42778e447581578f3e4db13c9a653
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Oct 1 18:22:14 2006 +0200

    Fix radeon vs fbdev pitch calculation.
    
    Fetch the correct displayWidth from fbdevhw after setting the mode.

commit d43ad88fa3913437f6987ab5ab46a38f0cb555a8
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Sep 30 19:25:20 2006 +0200

    radeon: Add support for page flipping with EXA.
    
    Also use the damage layer directly instead of via shadowfb and blit dirty
    rectangles to the second page in LeaveServer in order to try and improve the
    tradeoff between performance and correctness.

commit 146ea328b7962f56c6ab47fbe2adc7561b36189c
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Sep 30 19:22:26 2006 +0200

    radeon: Fix function name typo which could probably lead to an unresolved symbol.
    
    Also remove declaration of an unused variable.

commit 6671c1b01bf29d8f1cacf9306ef658b967d8a3cf
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Sep 30 18:29:45 2006 +0200

    radeon: Always call RADEONGetAccessibleVRAM().
    
    This fixes issues with Option "UseFBDev" and the new memmap code.
    
    OTOH, there is potential for this to break IGPs, but that's what Bugzilla and
    git-bisect are for...

commit c979c7f87fc449cc9631820101edff82c3013e66
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Sat Sep 30 15:14:42 2006 +0200

    radeon: Check ROM more thoroughly before treating it as an x86 BIOS.
    
    This prevents the ROMs on some Mac cards getting treated as x86 BIOSen,
    resulting in garbage values.

commit 37c114acbabe35881c39642e293519e2635907aa
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Sep 30 15:11:42 2006 +0200

    Remove some dead code.
    
    Fix two compile warnings.

commit 6d7b0763173f56050411d7bdf9a583b9bfc050c4
Author: Adam Jackson <ajax@benzedrine.nwnk.net>
Date:   Fri Sep 29 18:50:44 2006 -0400

    Undo unintended configure.ac change.
    
    Dammit, git, grow a sensible UI already.

commit f96ddd32d3a9e64dc0adec5c50386d6db5b182ee
Author: Ronald Wahl <rwahl@gmx.de>
Date:   Fri Sep 29 17:51:42 2006 -0400

    Hook up DFP power to DPMS events.

commit f6b42149c5a3fee663575fe6bbe78b62695bdbc8
Author: Alex Deucher <alex@samba.(none)>
Date:   Fri Sep 29 00:44:36 2006 -0400

    tvdac handling was reversed between r200 and other chips

commit c0660495080719c052d6393ede707755929102cd
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Sep 27 18:12:52 2006 +1000

    radeon: check DDC info for both connectors not just the pScrn one.
    
    Otherwise we disable DDC before we've checked the CRT if LVDS is in use

commit 5b98545618141e86164f3ce66469f9e16b1cf6d4
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Sep 27 18:10:30 2006 +1000

    radeon: don't move connectors around if LVDS connector is connector 1
    
    On my laptop this allow me to plug or not plug a monitor without affecting
    my lvds

commit 74c725bd86348b5bf9bba0c50e8a6a7885d7ff7b
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 25 11:35:32 2006 +1000

    radeon: cleanup some bits from superpatch

commit 9827afaa40720a58e2fc029c0bf92ad2fe223d11
Merge: 10b4b46 ad8259c
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 25 11:25:17 2006 +1000

    Merge branch 'radeon-sp'

commit ad8259c814629e741ed5567923f40879cc0c7051
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 25 11:25:03 2006 +1000

    radeon : add back tv-dac register write

commit 10b4b46c16ff3748856b732f9a39de40ba197112
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 25 09:08:47 2006 +1000

    remove all CVS annotations from the ATI driver files

commit 976dec04786e9b050945c290840b4cdc978c0b23
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 25 09:00:21 2006 +1000

    radeon: put back in reverseddc code
    
    BenH claims it is needed, agd5f can fix it up later if it isn't.

commit 980fb2f6bd7641c8c57769b0c67e3561903e89a9
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 08:31:56 2006 +1000

    radeon: add some missing bits of superpatch for crtc registers

commit 1ba4f36821e60289cad937abbb0edb273c88436c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 08:25:42 2006 +1000

    radeon: finish radeon_driver.c import for register changes

commit 547543bbefe605a453bfa5ae6d063ae02c5f040e
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Sep 23 08:21:59 2006 +1000

    radeon: re-organise FP and CRTC register setting routines

commit fd978140bcb7670f28c684c06c2b6c611c26bef4
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 08:09:57 2006 +1000

    radeon: initial CRTC register setting alignment

commit 406f4911e7ce821002c111d6bcdec35f5b56c943
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 07:59:24 2006 +1000

    radeon: setup the radeon init function to use secondary

commit 452f0f8079d65679905ed5178a256534ef0db0e4
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 07:41:57 2006 +1000

    radeon: bring over final set of changes for radeon_display.c from susperpatch
    
    This brings over Alex's final set of changes...
    
    i'm unsure about the disappearance of reverseddc - alex to review

commit a8b9aa69259a0706d0688d2656ece5a292799242
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 07:38:25 2006 +1000

    radeon: align tabs and make display detection like superpatch

commit 8d4ae98c528a2309dc3c545893dbba2e7f76916c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 07:26:44 2006 +1000

    radeon: align some output with superpatch

commit 65b54847c5e79b2ec3cb1a08b265229443c9deb9
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 07:22:31 2006 +1000

    radeon: change function name to Displays rather than Monitors

commit 7e16d9fff96dcdff8c25dbbe2a51be0023b7985a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 07:21:15 2006 +1000

    radeon: make GetConnectedMonitors a static void

commit 6f63b3dc8b3e2299f5f02abc1c565176d2d46cee
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 23 07:19:43 2006 +1000

    radeon: some minor alignments and cleanups for info->

commit c9f3ced3b1c194cacf1ab9436ee6c2d4efd3a8e9
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Sat Sep 23 07:16:10 2006 +1000

    radeon: add reverse display option to switch displays on non-mobility cards

commit e752443c540d9a94522050c61ef7c33d912fece5
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 22 07:10:10 2006 +1000

    radeon: flesh out mapcontrollers

commit 7a0e4eb47655c4701fc3a4b33b6c8e9f378ccc9e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 22 07:05:56 2006 +1000

    radeon: add some info to the map controllers

commit 75bf69c868be6164d0041a32f52244f1ef83e050
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 22 07:03:52 2006 +1000

    radeon: add simple map controllers call

commit 8ba5abd1329347c7fbf4b4d09c95da0d23b4884a
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 22 06:58:41 2006 +1000

    radeon: move comment

commit e8d77b7c36fa791a2350a6f4b15728b15d8f3de0
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 22 06:55:51 2006 +1000

    radeon: refactor blank/unblank

commit 8534723f5710e2916b4a22efe22a6b7365cc8db6
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Fri Sep 22 06:36:03 2006 +1000

    radeon: make DVI_I default connector

commit d7fc79fd9f094ac462de0883af7e6030cb6195a6
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 22 06:35:34 2006 +1000

    radeon: add enable display function

commit 4a54886d510f26b29d27e5c9a73647554291b1a6
Merge: 70264d6 9fa176c
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Sep 22 06:00:04 2006 +1000

    Merge branch 'master' into radeon-spm1
    
    Conflicts:
    
    	src/radeon_driver.c

commit 9fa176c7989030e7340cc9b85d0b6a7b34303091
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Sep 19 13:58:17 2006 -0400

    Provide all resolutions (instead only the largest one) in MergedFB clone
    mode without config file (Henry Zhao)

commit e742aeb28c7d9d6e75932c408bcc7c44af52e303
Author: Alex Deucher <alex@samba.(none)>
Date:   Tue Sep 19 13:45:33 2006 -0400

    fix large negative refresh rates with mergedfb (Henry Zhao)
    fixes bug 6966

commit 9c0c805704f1df1b66adc2a6b9313597ae5b86cc
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 18 19:41:21 2006 +1000

    radeon: fix rn50 memmap
    
    This should fixup the rn50/m6/m7 memory map problem that has been reported
    since BenH's memory mapping changes

commit 70264d645724718a48ca229fedc04e33681b7d31
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 09:56:25 2006 +1000

    radeon; put back old TV DAC code for now

commit 53eb843ad8ec5a292dff0844330ecfa9b7b2a0cb
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 07:55:21 2006 +1000

    radeon: move code around in InitCrtcRegisters

commit bcae4352079109a9dd16117bf9ec19dd215180bf
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 07:33:48 2006 +1000

    radeon: cleanup DPMS set on/off code to use new controller structure

commit 87622f56b3dd7e2d2f00ad71e5b569eac31fb2b1
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 07:15:54 2006 +1000

    radeon: cleanup DacPowerSet

commit a417fa081926b2f84e2cbdc355cc7462d1ebdfad
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 07:15:41 2006 +1000

    radeon: fixup InitFPRegisters function call to not pass info

commit 8bff57a938e92dfc8729e40f7aa9ad9a96262131
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 07:02:35 2006 +1000

    radeon: copy of overupdated bios hotkeys code from Alex

commit 76352c684d5e840c9f7ac0781e3ecb32951b32db
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 06:54:28 2006 +1000

    radeon: minor cleanup of masking for crtc registers

commit a7b97697ed13ac25844890439ffba31524e03a16
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 06:53:23 2006 +1000

    radeon: initialise controller structures

commit 362ee3778764633cb4c9388aa329c5b715885038
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 06:41:14 2006 +1000

    radeon: move InitFPRegisters up to align with superpatch

commit 11fb9a14741746c752b0001c1b1d39a54e69657a
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 06:35:50 2006 +1000

    radeon: add tv dac adj lookup

commit a15ac59c4d1a15380910be2a7438111b09161c81
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 06:35:28 2006 +1000

    radeon: re-add ATI patch for rn50 modes

commit d80ea2d67b63ea2f2ce0277952af186b69b19e7d
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 06:30:30 2006 +1000

    radeon: re-add DAC power on/off code around detect

commit 0a93936f9f048b8837f1c765fea7ccb61f072697
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Mon Sep 18 06:25:15 2006 +1000

    radeon: restore secondary head behaviour

commit 6da5a0bfdedb2062ec835f45514c22917abdcf4c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Sep 18 06:16:58 2006 +1000

    radeon: move to using Alex's controller structure

commit cd1bc1d1febf0a79d835c7dc8b353123278dec51
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Sep 18 02:44:09 2006 +1000

    radeon: add save/restore of some new registers
    
    move some registers about

commit 9b5c4cf8a98b0c20bb821f5003495481fbd0c10c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Sep 18 02:28:32 2006 +1000

    radeon: add pre init controller function

commit 311e776c4429485d29aaf11d350cab8e6fe7564b
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Sep 18 02:21:49 2006 +1000

    radeon: add missing tv-out registers to register list

commit 65cb77c79c2c5cb536494200d4fba6815d7e771c
Author: Alex Deucher <alexdeucher@gmail.com>
Date:   Mon Sep 18 02:21:29 2006 +1000

    radeon: restructure files along lines of Alex's superpatch

commit 25fa71ca0a24190cc8be2e80769443e0e09303b3
Author: Henry Zhao <henryz@ati.com>
Date:   Mon Sep 18 03:15:54 2006 +1000

    Power up DAC around check for CRT connectedness

commit 39fcac431eba60adf2d4e357cfc811dbae36a4e1
Author: Henry Zhao <henryz@ati.com>
Date:   Mon Sep 18 03:09:43 2006 +1000

    Bump up clock rate for ES1000 to allow higher resolutions

commit 7d9e2b450f0fa42553156f57572a6dab70a0ea13
Author: Dave Airlie <airlied@starflyer-ubuntu.(none)>
Date:   Tue Sep 12 07:04:23 2006 +1000

    radeon: this stops mergedfb working on my ATI M7 development board
    
    I've no idea what this is for, it came from an ATI codedrop and it may
    fix some laptop or production system, but it looks to me more like a dirty
    hack than a true fix, as I have an M7 which I need to specify CRT for the
    second head and it breaks mergedfb for me.

commit ad1778eb1eb59de14ec309b99131931cbccf64e9
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Sep 10 23:32:44 2006 +0200

    Revert "* [ Bug 6966 ] large negative refresh rates reported"
    
    This reverts caaed927a07ffbac68b08246185ef93c1e7bb98c commit.
    
    See https://bugs.freedesktop.org/show_bug.cgi?id=8137 .

commit 6e92981b024b59c2237f949321f6b2591dada519
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Sun Sep 3 21:11:10 2006 +0200

    Removed the warning re. the r300 DRI driver status.

commit caaed927a07ffbac68b08246185ef93c1e7bb98c
Author: Henry Zhao <henryz@localhost.localdomain>
Date:   Thu Aug 31 13:27:45 2006 -0700

    * [ Bug 6966 ] large negative refresh rates reported
    * [ Bug 6309 ] radeon/r128 fails to read hsync/vsync rates when rang
    *              descriptor is missing
    * [ Bug 5473 ] Blank screen with Radeon Mobility X700 (Acer Ferrari 4005)
    * Reboot should not be needed for external CRT to function when connected
      later on Ferrari 4000
    * Modes need to be sorted, and sorted correctly
    * Provide all resolutions (instead only the largest one) in MergedFB clone
      mode without config file
    * Bump up clock rate for ES1000 to allow higher resolution

commit 6d2028b84ff2b82c849b74776258f8e52c952e36
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 25 10:05:44 2006 +1000

    and of course it takes two commits to do a simple commit

commit e90c6feddbcd719fda3bbc3d48fd55045e9d5adc
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 25 09:59:58 2006 +1000

    add changelog hook from nv driver

commit 1e06212f792d1ed1f7545e16824b86fbd34fa284
Author: Adam Jackson <ajax@benzedrine.nwnk.net>
Date:   Thu Aug 24 19:52:30 2006 -0400

    Enable CPIO in the atimisc driver on ia64 platforms.
    
    This fixes many mach64s, but potentially breaks mach32.  Mach64 is widespread
    on ia64 machines but PCI mach32's are quite rare on any platform.

commit dfa47b09b5b8d7eeaa3f8ae629ebb3c7efb51511
Author: Adam Jackson <ajax@benzedrine.nwnk.net>
Date:   Thu Aug 24 19:50:46 2006 -0400

    Disable DRI on xpress 200{,m} since we know it's broken.

commit 1dcd9b1f75ba2307beb42556aa7f2f945171d5fb
Author: Adam Jackson <ajax@benzedrine.nwnk.net>
Date:   Thu Aug 24 19:42:26 2006 -0400

    Disable DRI on RN50 in a more pleasant way.
    
    Rather than publish a non-existant driver name for RN50, just don't bother
    initializing it in the first place.

commit 64b18e246586b1043a12f381a9d4c834464ed9b5
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 25 09:40:04 2006 +1000

    update version numbers for release

commit be229d97e1f0282f2099c7ace7cb257a2738a58f
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Aug 25 09:39:46 2006 +1000

    make colortiling default to on all cards

commit 750ed51bc3d5119e2d2a91a05ae5a971dcd3b88a
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Mon Aug 7 17:09:02 2006 +0300

    [mach64] RENDER support: drop caching DP_WRITE_MASK.
    
    Caching DP_WRITE_MASK causes artifacts, e.g. with evas_xrender_x11_test.

commit b2beea2fa8949874d3d57fb9b43fe85cc08a8bff
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Aug 5 18:36:24 2006 +0300

    [mach64] RENDER support: save/restore, cache texture registers.

commit 43aaed99950640c3695b3c2b91faabf00c6338a7
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Aug 12 22:12:07 2006 +0300

    [mach64] RENDER support (bug #6877).
    
    RENDER accleration is disabled by default. It is strongly recommended that the
    patch from bug #6772 and the 'exa-damagetrack branch' are merged in the xserver
    before enabling RENDER acceleration. To enable RENDER acceleration, add the
    following in xorg.conf:
    
    Section "Device"
            [...]
    
            Option          "AccelMethod"           "exa"
            Option          "RenderAccel"           "true"
    EndSection

commit d113f40fd97408661193895ff3aa82262f100143
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Aug 12 17:16:33 2006 +1000

    radeon: make some local data static
    
    This is inspired by a patch in XFree86 from David Dawes, it isn't the
    same as we have different gamma curves.

commit a1da2b5e0a38feae01107676a76bdc5c185ad34b
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Aug 5 03:18:34 2006 +0300

    [mach64] Halve max w/h for hardware-accelerated operations.
    
    EXA hits these limits for some operations on offscreen pixmaps and GTPRO seems
    to support the reduced limits.

commit a66c8d2f9855caa10142b39f155dd8232b1f2389
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Aug 5 03:16:56 2006 +0300

    [mach64] EXA: add memcpy-based UTS/DFS.
    
    EXA hits more optimized paths when it does not have to fallback because of
    missing UTS/DFS.

commit 0fb8503d60cf646c91a806f9ed322f9ceff18baa
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Aug 5 03:16:15 2006 +0300

    [mach64] XAA: minor refactoring of memory manager setup.
    
    - DRI: factor out to separate function and add comments on layout
    - no DRI: factor out to separate function, maxScanlines is always equal to
      ATIMach64MaxY

commit e203d86643d5d70bf18248712d05b72b79aee705
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Aug 5 03:15:42 2006 +0300

    [mach64] EXA support.

commit dc1e289a611a17090e6dc7ae8a8d3f26d20df4eb
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Date:   Sat Jul 29 01:05:35 2006 +0300

    Bug #6623: Fix I2C bus Mach64 initialisation failure.

commit b377f403e0cd5253402ef3945e5944d1a2763a94
Author: Marc Aurele La France <tsi@xfree86.org>
Date:   Sat Jul 29 01:03:34 2006 +0300

    Fix warnings for Option:1 bit fields.

commit 91b8b0ca41ad0b9659f0982a05148cab8558e9d5
Author: Marc Aurele La France <tsi@xfree86.org>
Date:   Sat Jul 29 01:02:48 2006 +0300

    Bug #807: copy throttling.
    
    Fix corruption associated with the engine randomly not waiting for a copy
    operation to commit its results.

commit 7800407a2db4b7307192bf3b43fffb9c4748b9c0
Author: Marc Aurele La France <tsi@xfree86.org>
Date:   Sat Jul 29 01:00:56 2006 +0300

    Bug #807: invalidate read-back cache.
    
    Fix corruption when scaling 1-pixel wide pixmaps, in which case the first CPU
    read of the framebuffer will return stale data.
    
    This bug always manifests itself in mach64 EXA (to be committed soon), with
    this patch mach64 EXA passes rendercheck.

commit 49b11c540d37152eee4907ab30353ede01e4fb56
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jul 29 00:52:28 2006 +0300

    Bug #807: split out TestRegisterCaching block for DP regs.

commit 290c5aaa580428bc4748a47e4b9bcc22b90fc8d4
Author: George Sapountzis <gsap7@yahoo.gr>
Date:   Sat Jul 29 00:51:53 2006 +0300

    Bug #807: split out TestRegisterCaching block for DP regs.

commit fba8c839b47e2c8d6a6d65950c3431ff5b870aa0
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jul 23 18:51:47 2006 +0200

    Bug #6819: Fix broken rendering with *8b8g8r8 source formats.
    
    Use the corresponding texture formats with R200 family.
    
    Unfortunately, it looks like the R100 family can't accelerate these source
    formats, so we have to fall back for them.

commit 60ebe97e2d5d27c2bf4213e201cef74503809cb6
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Mon Jul 3 19:37:28 2006 +0200

    Move variable declarations before statements to be C89 compatible

commit 6900ff3c5e574881b1470e2363b200e99ab8bf3e
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Mon Jul 3 13:09:47 2006 +0200

    Bug #6872: Disable digital output while reading ROM with Radeon 7000.
    
    This is a workaround for ATI Radeon 7000 erratum F1.

commit 920ac1f56fad6f48a30e65836ce054815f270738
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jul 3 01:21:18 2006 +0200

    Do even less cache flushing when the previous engine mode is known.
    
    OTOH, flush everything when the previous engine mode is unknown, and mark the
    engine mode as unknown in a couple more cases.

commit dd0dd4bab76907b4b1b6d814f24e73e57d71f587
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Jul 3 01:10:10 2006 +0200

    Bug #6762: Remove gratuitous cache flushing.

commit 22f165f290f57e638d198f24a37f62fc16b72bae
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jul 3 00:39:45 2006 +0200

    Build and warning fixes for !defined(USE_XAA).

commit ea5105230c7c3519730b8d3c250e9ba9a4e4374a
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Mon Jul 3 00:03:22 2006 +0200

    Reserve HW cursor memory statically instead of from EXA offscreen.
    
    As a result, quite a bit of code can be removed that attempted to deal with the
    EXA offscreen memory disappearing, with varying success. Because the HW cursor
    memory is now always immediately after the front buffer and before the back
    buffer, this also fixes bug #6808.
    
    As the HW cursor memory is now reserved statically with EXA and XAA, change
    RADEONUseHWCursor() to check info->cursor instead of info->cursor_offset, for
    which 0 might become valid with HW cursor enabled in the future.
    
    Change info->cursor_offset from unsigned long to CARD32 as the corresponding
    register is 32 bits wide, and to avoid issues with printf.

commit 66586f905857ea5bf37cb5d34949cd450a9ed067
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jul 2 23:38:20 2006 +0200

    Clean up some redundant code.

commit 1159c85861dc507ebf323aca82e32fcc67726420
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jul 2 18:24:28 2006 +0200

    Bug #6548: Fix playback of interlaced video with more than 1023 lines.
    
    This will still break with 2048 lines...

commit 11bedb7c845fc6074383890d5525315aebe05f2c
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jul 2 17:03:23 2006 +0200

    Bug #6939: Disable RENDER acceleration by default on RN50.
    
    Based on patch from Weixing Zhang, but still allows enabling it with Option
    "RenderAccel".

commit 4a0c22e32901a510c7aad070be25c31519c284e3
Author: Weixing Zhang <anzhang@ati.com>
Date:   Sun Jul 2 16:55:25 2006 +0200

    Bug #6939: Disable 3D acceleration on RN50 by setting invalid ClientDriverName.

commit 9c4a1e3300d30b23806988aa9328fc6ef92e2663
Author: Frank Gevaerts <frank@gevaerts.be>
Date:   Thu Jun 29 18:21:22 2006 +0200

    Fix build for !defined(USE_EXA).

commit ee0544b670567491b7770f469a64a6cd85519ba1
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 29 18:19:58 2006 +0200

    Remove unused variables.

commit 15c556f5a8c9069d3dd00ce139d46c39b7298951
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 29 18:18:21 2006 +0200

    Don't declare unused variables on __powerpc__ and __alpha__.

commit 055ac2836ec0afd51cf554d043a59068c36a07d3
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 29 18:14:45 2006 +0200

    Fix strict aliasing violation flagged by gcc -Wall.

commit 4b1904017caa976c138594a86e75feaf470e72b5
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jun 26 20:34:34 2006 +1000

    radeon: force CP and VIP clocks on some r300 and rv100 chips.
    
    fglrx appears to do this on r300 and Jerome Glisse has spent most of his
    life tracking down what caused the 9800 to lockup. This is my attempt to
    fix this. Please report if it works for you.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit c5d8c8db3e75976687bfb364f0a7b235c7ae8793
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sat Jun 24 16:01:19 2006 +0200

    Bug #7274: Fix corruption with 'small' accelerated DownloadFromScreen transfers.

commit f25ba3dc0e7850f0b1b78f54c0e7211bf2e81b3a
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Fri Jun 16 11:38:18 2006 +0200

    Remove obsolete FIXME.

commit 764013ec61b9043f1487513658e374569f7154a9
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Fri Jun 16 10:56:02 2006 +0200

    Use AC_CHECK_HEADER() to check for exa.h

commit 3c701d49b3eb7adb82267cec53163e475913aca3
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Fri Jun 16 09:59:29 2006 +0200

    Use AC_MSG_RESULT() instead of echo for check results.

commit dbef62615f38aebf4cdc579e3b26a7e7c719abc4
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Fri Jun 16 08:50:49 2006 +0200

    conditionally declare pPCI and PciReg, too

commit a01c01787cfbe3706ae7747cde1657abd79ecdaa
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Wed Jun 21 09:38:47 2006 +0200

    Bug #7283: Build fixes for !defined(XF86DRI).
    
    Thanks to Matthieu Herrb for pointing out some of these.

commit 79d1c573133e64ddf4446b6bb0eaab4a5a6c73ab
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jun 18 17:39:09 2006 +0200

    Implement accelerated EXA DownloadFromScreen hook.
    
    x11perf -getimage numbers only increase by about 20-30% on my PowerBook with an
    M9, but by about 100 times(!) with a PCIe X550. I suspect the former could
    perform better with PCI as opposed to AGP transfers, which would also remove
    the need to disable this by default with AGP.

commit 2bcdc7cfd013bd457d35f927390e5cc3544f30f1
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jun 18 16:01:00 2006 +0200

    Remove #include <fbdevhw.h>, not used here.

commit 25a5ccb63a9e3074b4c8eaf48844877d84ff76bb
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jun 18 15:26:55 2006 +0200

    Prefer visuals with stencil when it's hardware acclerated.
    
    Also make the formatting of the if statements consistent.

commit 8fcc436f19f9c1371295af2d0c45608fb43c584b
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jun 18 15:16:08 2006 +0200

    Take part of the blame for the radeon driver.

commit c8366d7b457565a06acdf6b40c5448c7f13f1641
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Sun Jun 18 14:24:14 2006 +0200

    Add Option "DepthBits".
    
    This allows getting higher depth buffer precision and stencil hardware
    acceleration in depth 16 or saving some video RAM at the cost of these features
    in depth 24.

commit 23a21d00db6f3b88b54c44648f968018a03677d3
Author: Tilman Sauerbeck <tilman@code-monkey.de>
Date:   Fri Jun 16 16:37:07 2006 +1000

    [PATCH] move the declaration of pMach64 into the correct ifndef statement
    Signed-off-by: Tilman Sauerbeck <tilman@code-monkey.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit c6b33db9d2c751e34c2152b0bb7e0e84a812589f
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Jun 16 16:22:03 2006 +1000

    ati: prepare for release
    
    Update some versions for release

commit 9c534b5330534fc6cf392936a9b200a5128c787c
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 16:09:55 2006 +0200

    Some more ignores.

commit 3d68698647fb17a6f5ae9a225f552cb0130fa946
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 16:07:15 2006 +0200

    Fix semantic glitches pointed out by gcc -Wall.
    
    The radeon driver builds warning-free with gcc -Wall here now.

commit ab2b48e0df328fd08a2412911126b3184a601aea
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 16:06:13 2006 +0200

    Remove another unused variable.

commit 56bd5a370472663af5607cd327f757367b238db0
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 15:35:05 2006 +0200

    Fix some more cosmetic warnings.

commit ec93e08b24f7c0e583970d08bfe18ad142e6b047
Merge: 051c49d 6ca9862
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 15:03:27 2006 +0200

    Merge branch 'master' of ssh+git://git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit 6ca986242c80bcfe7ca2d435a772bbdf034892c4
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 21:24:46 2006 +1000

    remove unused variable

commit 9a5f5bc0d3f5e62b79355993ca6246382394daee
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 21:24:16 2006 +1000

    remove all printf specifier warnings on Linux

commit 051c49d0f002c72d1d8f15f6df264d8b093d4e95
Merge: a840afc dfac819
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 13:10:44 2006 +0200

    Merge branch 'master' of ssh+git://git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit dfac8191dbda29ef7f6ce33d7356fee89c17d59b
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 21:05:16 2006 +1000

    fix last ati*.[ch] format specifiers

commit 33525540f3a9d6760c6edcfe765d2a004a6b894f
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 21:03:01 2006 +1000

    fix more printf formats

commit 6bcf6f29af24b6725e097dd72af8e8b9f6d0676c
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 20:59:33 2006 +1000

    some more unused variable cleanups

commit a840afc75a0453b4694e3f987ebdbddc6844a169
Merge: c90c49d d511ef4
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 12:46:58 2006 +0200

    Merge branch 'master' of ssh+git://git.freedesktop.org/git/xorg/driver/xf86-video-ati

commit d511ef486a15b582e5d1708a17a00701f5cf1ccd
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 20:39:22 2006 +1000

    ati/r128: add includes to get C function decls
    
    Also fix a void pointer cast

commit f46c3bebe821ee0031770d98d04bd406d1abb9ed
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 20:34:56 2006 +1000

    fix some more unused variables and bad parameter passing

commit 6c3f81683abab8ff6b8f2fcaf01a2a1a63af5ef6
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 20:25:00 2006 +1000

    ati: fix -Wall in atidri.c
    
    atidri.c has some parameter passing bugs, fixed those and cleaned other
    warnings.

commit 58c6aac0669101481ef6b8217e5cede4573ece42
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 19:58:11 2006 +1000

    theatre: fix all -Wall warnings in theatre*
    
    This fixes all the warnings, it doesn't clean up the horrible mess that is
    theatre*.[ch].

commit c90c49da3844f93d2d29070b15bb7def72b98b0f
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 10:29:46 2006 +0200

    Collapse .gitignore files into single toplevel file, sorted with LC_ALL=C.
    
    Suggested by Keith Packard.

commit b7a3e4c9b33f72ae447f99c0c765f24fce988142
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 09:45:12 2006 +0200

    Fix some implicit function declarations.

commit 556ddc9c41020271e92389a3900d097ec443c625
Author: Michel Dänzer <michel@tungstengraphics.com>
Date:   Thu Jun 15 09:30:43 2006 +0200

    .cvsignore -> .gitignore

commit 4708327969a21fc171dcd80a1b506028cc8e4f90
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Jun 15 07:37:03 2006 +1000

    ati: remove Changelog from ATI driver.

commit ecbec8379c24bd6c16ced674d5e6affcd3985e46
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Jun 8 17:29:12 2006 +0000

    Bug #5678: Fix setting of transfer mode for AGPv3 devices (Tilman
        Sauerbeck).

commit 874ff105bc63c4fc242fbabaec04fde2cb81fdd4
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Sat Jun 3 10:50:33 2006 +0000

    Bug #1889: Stop the CCE before an engine reset. (Conn)

commit f9db5595fe4d62c54b3a501b2af64b4e2b7035cd
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sun May 21 14:33:34 2006 +0000

    Derive ATI_VERSION_{MAJOR,MINOR,PATCH} from package version in order to
        hopefully confuse bug triagers a little less.

commit 25ba85cab8b3d831da646fef19f01769410fc958
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Wed May 10 02:46:37 2006 +0000

    - remove obsolete option "OverlayOnCRT2" (bug 6488)

commit ede75fe2b1850a4d9f03c724b7c1d1ed65e60f2f
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue May 9 14:40:23 2006 +0000

    Drop support for radeon DRM <= 1.7. The 2.4 kernel has version 1.7, and
        various problems up to system hangs on X server startup have been
        reported with that and DRI enabled.

commit bc93a46c4fe499f23b9c0ff52e2e36b4c587f7d6
Author: Michel Daenzer <michel@daenzer.net>
Date:   Mon May 8 09:29:34 2006 +0000

    Bugzilla #4640 <https://bugs.freedesktop.org/show_bug.cgi?id=4640> Patch
        #5273 <https://bugs.freedesktop.org/attachment.cgi?id=5273>:
    Add cases for FOURCC_RGBA32 and FOURCC_RGB24. This prevents clients from
        receiving incorrect data sizes with these formats. (Jan Schmidt)

commit 2b0cdd9448a24ea067b0d78f319b99c1041df2e0
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed May 3 04:25:27 2006 +0000

    Enable decoding of version 4 TMDS PLL config tables, they actually work,
        the problem in the comment only concerned pre-production cards that Hui
        tested apparently. Also set back the default value to what it was
        initially, fixes some more cards that don't have a proper table (Mac
        Mini for example)

commit 36c04b88416905b9ae305583e8e34fefdbfafc50
Author: Michel Daenzer <michel@daenzer.net>
Date:   Mon May 1 17:49:41 2006 +0000

    Bugzilla #6755 <https://bugs.freedesktop.org/show_bug.cgi?id=6755> Patch
        #5536 <https://bugs.freedesktop.org/attachment.cgi?id=5536>:
    Change HostDataBlit interface to take dst_offset_pitch and coordinates
        instead of just a destination pointer, as the latter is not sufficient
        with tiling. Also, use HW clipping to avoid overwriting destination
        data outside of the specified width.
    Adapt to new HostDataBlit interface. This fixes corruption with
        UploadToScreen to the front buffer (from exaPutImage).

commit b90d3710e67caad0686efab491c2b76ae877920c
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Apr 29 21:30:23 2006 +0000

    Bugzilla #1992 <https://bugs.freedesktop.org/show_bug.cgi?id=1992> Patch
        #4988 <https://bugs.freedesktop.org/attachment.cgi?id=4988>: Fix Option
        "DisplayPriority" "HIGH" for R300 family.

commit 30f3ce5c5ba205a23748def11de019ee727897f3
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Apr 29 20:34:57 2006 +0000

    Properly de-initialize EXA driver data, so EXA can be initialized again in
        the next generation.

commit d705429c230c9cc1645ae540a51dba62cae9f23e
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Apr 29 20:18:48 2006 +0000

    Fix tests for (un)forcing HW cursor. The broken tests caused problems when
        switching to console with 3D clients running.

commit 6142cb079d4a5844e4863c800baf4ae19c636af5
Author: Michel Daenzer <michel@daenzer.net>
Date:   Sat Apr 29 20:12:38 2006 +0000

    Prefer double-buffered visuals. As a consequence, the root window's visual
        is double-buffered by default, which is desirable in a number of
        situations, in particular when running a GLX compositing manager with
        AIGLX.

commit eb841974d041b19461b7fb726687df8938b2e39b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Apr 28 02:55:08 2006 +0000

    Bug #6761: Fix font rendering in non-DRI mode by replacing RB2D_DSTCACHE_*
        with RB3D_DSTCACHE_*. The RB2D versions are read-only mirrors of the
        RB3D. This is masked when DRI is enabled because the DRM uses the right
        registers in its flushing.

commit 85e2ee6de6fd347aad66785ec7119f92013cd994
Author: Dave Airlie <airlied@linux.ie>
Date:   Wed Apr 26 08:38:47 2006 +0000

    Make the ATI driver use the PCI BAR size to determine the MMIO register
        aperture size. Otherwise it tries to overmap things if they are up near
        the end of memory.

commit 13b19edf5accb7427436d3f0b1c9a9efb4fe98fa
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Apr 26 07:26:15 2006 +0000

    Add support for some component-alpha operations (InReverse, OutReverse)
        necessary for testing upcoming general component alpha acceleration
        assistance in EXA. Tested with rendercheck on an r100.

commit 44a45bcb82d49349f4fdfae3e4b8f24f98d99b46
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 25 23:31:56 2006 +0000

    Use a CPPFLAGS with XORG_CFLAGS so that the exa test can actually find its
        headers and not fail. Also correct some nearby spelling.

commit cc1825b503ce7e785cbb4611fd177477a1081b6e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Apr 24 07:44:52 2006 +0000

    Fix enabling of external VGA output on some cards with dual entity setup
        instead of MergedFB. This was broken due to bogus manipulations of a
        register between the 2 entities. This fix is a big "violent" in that it
        always enables the analog output regardless of what is plugged. It
        should work though (at the expense of some additional power
        consumption). A proper fix should be easy to do once Alex gets his
        output mapping rework in.

commit a66145bc9d487f7e19237cf292f12750cb959f61
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Apr 21 00:38:44 2006 +0000

    Bugzilla 6672: fix interrupts on radeon since memmap changes

commit f1f057df9aaba42986d9e20afe6f609a90318333
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Apr 21 00:34:43 2006 +0000

    Add support for backing up the PCIE GART table on VT switch. This makes
        suspend/resume work a lot better on PCIE cards.

commit 31396df3b0101571bb85a4a66b67f5a8b0c992a9
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Apr 8 01:19:17 2006 +0000

    Bump to 6.6.0 and release. This module's versioning is completely screwed,
        so until we split out mach64/r128/radeon please just increment the
        package number whenever you make significant changes.

commit d706f494ed22afd369991e8c75a2d4f5aed15305
Author: Aaron Plattner <aplattner@nvidia.com>
Date:   Fri Apr 7 23:06:02 2006 +0000

    Add a DrawablePtr argument to the XV functions to pave the way for
        redirected video.

commit f94685aec26b65f60c00a4b1bcd8f26bd80eb6e4
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Apr 4 07:42:36 2006 +0000

    Bug #5632: Fix up ati.4 to explain that it is a wrapper driver for the
        other three. While here, touch up radeon.4, and add an authors list
        gleaned from checking copyright headers.

commit 58c9b1d84f514755945e7a0d25fd5530af34ce95
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Apr 2 21:45:12 2006 +0000

    Add missing .cvsignore lines.

commit f1ce6170ef21e1f9769337c3138cd8d65c33e40a
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sat Apr 1 23:02:40 2006 +0000

    - Fix dpi when switching from clone to dualhead with MergedFB.
    - Add ConstantDPI option to force a particlar dpi across mode changes Both
        based on Thomas Winischhofer's sis code.

commit 607f18cfbfc2a7b5509f8b567bf510fce31b361e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Mar 27 06:12:57 2006 +0000

    Fix a regression of my latest fix that broke color tiling on some setups.
        RADEONRestoreMemMapRegisters() must not clear CRTC_OFFSET_CNTL and
        friends unconditionally but only when there is a map change or it will
        clear them after the DRI updates the AGP location, thus turning tiling
        back off on the CRTC. Also remove a duplicate call to
        RADEONInitCommonRegisters().

commit bf1c4471137f10b7de9d79519ca2240058997e18
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Thu Mar 23 18:04:17 2006 +0000

    commit the actual changes instead of just the Changelog...

commit aa5fff9bae4818bbf99e8d9caa8f2ce9905294ca
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Thu Mar 23 17:59:25 2006 +0000

    Use programmable tap coefficients for (hopefully) better video image
        quality when downscaling. Remove unnecessary code programming the tap
        coefficients twice. Disable some code which is supposed to improve
        filtering quality but causes very visible image quality problems at
        least with rv250 when upscaling. Fix potentially broken FOURCC_RGB16T
        format (untested if it was broken, untested if it works now...). Change
        some magic numbers to (new) macro defines.

commit 17c52ff15ebe2cf220d5988ee13b599c41799886
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 23 01:37:15 2006 +0000

    Call RADEONRestoreCommonRegisters() before RADEONRestoreCrtc2Registers()
        instead of after. I can't find any good reason why we did it backward
        until now and it definitely causes problems as the workaround for VT
        switch in RADEONRestoreCommonRegisters() will break output to the
        secondary head in various situations. Also does an unrelated minor
        update to a comment.

commit 673e4d7501861066fdd0874919a4524b820b944b
Author: Kristian Høgsberg <krh@redhat.com>
Date:   Thu Mar 23 00:06:56 2006 +0000

    Add atipciids.h.

commit 5dcb4152dca6ac1fe9342f44eb48c0198b15772e
Author: Kristian Høgsberg <krh@redhat.com>
Date:   Wed Mar 22 22:30:14 2006 +0000

    Convert use of xf86fopen() and other xf86 wrapped libc symbols to use libc
        symbols directly. The xf86* versions aren't supposed to be used
        directly.
    Drop libc wrapper; don't include xf86_ansic.h and add includes now missing.

commit 21acdf371e3cf913c5affbd3e86641cfb115311c
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Mar 18 00:08:24 2006 +0000

    Clear the offsets when updating the memory map instead of when enabling the
        CRTCs and try to make that code more reliable. Doesn't disable the
        CRTCs beforehand.

commit 323ecb92e40d71c5ef994b41b6d8dedba6dd6203
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Fri Mar 17 03:00:53 2006 +0000

    Fix various small cosmetic issues. Change a driver message, get the order
        right for requesting drm versions, replace the use of some numbers with
        the respective macro defines in radeon_video.c, and add some more macro
        defines. None of that really matters.

commit dc552edf191e14249421f8b27146874f16b80c1a
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 16 21:53:58 2006 +0000

    Add missing return statement (the driver would not start randomly), add
        RV410 to the list of new generation cards for the memory map setup and
        fix a bogus message.

commit 901409f47cc990721c1648b1c08e23450e6a4452
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 16 04:32:22 2006 +0000

    Fix incorrect CRTC2_OFFSET values when using old-style dual head (not
        MergedFB). Fixes Xinerama for me.

commit 4d6656062129da0489eb4bc898871379ba891d8f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 16 03:09:34 2006 +0000

    Add various workarounds that seem to fix some remaning lockup scenarios I'm
        experiencing with the driver when setting the memory map. Some of the
        magic delays are a bit dodgy but they seem to work, I suppose I can't
        do better now without help from ATI. Also removed some really too noisy
        debug messages.

commit 36799e3ea7ddde5fce528e8bc17ea942933a9111
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 15 04:03:37 2006 +0000

    Fix various issues with DRI & server recycle by putting DRICloseSreen in
        the normal CloseScreen callback chain at a spot that matches the call
        to DRIFinishScreenInit in order to unwrap at the right time.

commit 50923b6a9325592edc8b02b17646f96b9b8c4a01
Author: Luc Verhaegen <libv@skynet.be>
Date:   Wed Mar 15 00:46:33 2006 +0000

    Add some autoconf to keep this driver from building EXA when a slightly
        older server with older exa is installed.
    The way in which this problem was treated by the actually related
        developers explains a lot about this driver.

commit 74f4ed4275866475b3c182fae962df2fc0946b85
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Mar 13 02:57:17 2006 +0000

    Fix typo in the function setting the color space transformation factors for
        old radeon

commit 65625c6c2053792cd14b54c904bf46f360ef1565
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Mar 13 00:09:44 2006 +0000

    Earliest fix introduced a bug due to another chicken & egg problem in card
        detection. Now split PreInitConfig into PreInitChipType and PreInitVRAM
        so that PreInitDRI can be done just in between. Restores proper AGPx4
        functionality (when enabled)

commit 3a290115af41b0ecb94eb201d7e7abb42ebbfec6
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Mar 12 06:53:27 2006 +0000

    Stop using xf86PciInfo.h, instead use a local copy of the PCI IDs we need
        in atipciids.h so we can update the ATI driver independently of the
        server when new chips are added

commit d6b8f0a5eeb332563ec3ec7082f03be1797d26d8
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Sat Mar 11 04:19:47 2006 +0000

    Add #ifdef XF86DRI guards around references to info->allowPageFlip and
        info->depthMoves, since they are only defined if building with DRI.

commit 69fe90bc501df9bd9e74b894bfca79a4025725bd
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Fri Mar 10 13:00:49 2006 +0000

    Use "FBTexPercent" option for XAA too (only for increasing memory reserved
        for textures).

commit 8033d7423267fc1b3725df6a077dd910b586daaf
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 9 23:26:27 2006 +0000

    More memory map fixes !!! This time, we add a way to get the DRM kernel
        module version early, in order to properly limit the framebuffer size
        when a module that doesn't support the new map is loaded. That will
        improve backward compatibility. I also made the minimum required kernel
        module version 1.3 which hopefully shouldn't be a problem for anybody,
        and cleaned up the ordering in which we test for DRM version to enable
        features

commit c637939d3c4ce5cdddbc5200d5ffbca4c3927050
Author: Michel Daenzer <michel@daenzer.net>
Date:   Thu Mar 9 15:41:16 2006 +0000

    RN50: Skip modes that exceed memory bandwidth.
    Bugzilla #5766 <https://bugs.freedesktop.org/show_bug.cgi?id=5766> Patch
        #4636 <https://bugs.freedesktop.org/attachment.cgi?id=4636>
    - Acknowledge that RN50 only has one CRTC, and use this to distinguish it
        from RV100.
    - Fix detection of RN50 memory type and bus width.
    - Model RN50 memory bandwidth limits by capping the pixel clock range based
        on memory clock, bpp and memory bus width. (ATI Technologies Inc.)

commit 890b95a3ddad7634f3aea635cb236b221e902acc
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Mar 9 06:06:25 2006 +0000

    Update drivers that support EXA for the new EXA ABI. This consists of
        moving all the accel and card members into the driver ptr, filling in
        the exa_major/ exa_minor fields, and always using LoadSubModule so we
        can check the module version up front. Only tested on ATI.

commit e19ccfa18fee046c54d7a9401e4e0098b2300598
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Mar 3 16:41:41 2006 +0000

    Add Option "FBTexPercent" to override the amount of video RAM reserved for
        OpenGL textures with EXA.

commit ca00035eccb6e3495b27f8e64f2d016d8d2a9ce2
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Mar 2 02:05:17 2006 +0000

    Fix the fix ... I didn't interpret PciInfo->size properly and forgot that
        the function works in Kb not bytes... Ooops.

commit b2145aea36bb035bff048366c607b967d70fff49
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 1 21:35:14 2006 +0000

    Extend the alignement workaround to post-rv280 chips as well (thanks Hui)
        and also limit the CPU accessible memory to the size of the PCI BAR
        size (yeah, it was passed to the driver, I just got blind for a while
        it seems)

commit 163581a82fe9395672c31b41cd67aa44158f5201
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Feb 28 23:34:03 2006 +0000

    Workaround for rv280 bug which needs the framebuffer memory mapping to be
        aligned to its own size. Also add back limit of 128Mb of mapped fb
        space for now until I fully sort out what's up with dual function
        cards. I would really need to access the PCI BAR sizes here but that
        information seem to be missing from the PCI info passed to the driver.

commit 5ff8fb2bea1fe7d14db53c19ff3a3a56668ec417
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Feb 28 00:52:53 2006 +0000

    Add the newly added (and tons of previously forgotten ones) pci ids to the
        ati wrapper too (probably not required for it to work as everything
        should default to radeon anyway there).

commit 1574b41a0f894f9b6e30d3ee94e596695a4c64f0
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Feb 26 10:01:32 2006 +0000

    Fix page flipping with XAA. The new code ended up calling ShadowFBInit()
        before XAAInit(), which breaks ShadowFB.

commit 1f43a584a684af8078631425886cce236500e0e6
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Sat Feb 25 01:57:05 2006 +0000

    Add pci ids known to exist (see #4284 for instance). There are still
        entries which probably don't really exist (cancelled cards and such),
        leave them as-is. Fix the name of some entries, mostly based on the
        .inf file of the newest catalyst driver. Use own family id for rv410
        and rs400, though there is no different code (yet?).

commit 5c141bb15d1163e04c012a0cdf0699d534f0be37
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Feb 16 23:27:44 2006 +0000

    Memory map and misc fixes. This completely reworks the way the driver
        detects available & accessible video memory and initializes the card
        internal memory map. Along the way, I re-ordered some of the stuffs in
        pre-init in order to remove some dodgy codepath, fixed various init,
        exit and vt switch issues, and overall made the driver more robust. The
        full memory map fix requires an updated DRM. The X driver no longer
        tries to position the AGP aperture, this becomes entirely DRM
        responsibility.

commit 8c6e5a6eb50d371fd4ec700c26aa628cb5f45731
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Feb 15 23:36:55 2006 +0000

    The engine setup would trigger a bogus line write before the proper
        addresses are setup, thus causing the card to try to bus master over
        the system bus to some stale location (usually 0 but could depend on
        whatever was used before X). Remove that useless init bit, and always
        setup some good enough engine source & destination pointers in case we
        have some other spurrious engine activity going on.

commit d4ec0223029d8fe03a836a5a6e9a7cc8897b4c90
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Feb 13 05:30:13 2006 +0000

    Fix EXA acceleration of textures with byteswap or tiling From John Clemens
        <john@deater.net>

commit 79c60ebbc34aaf0ac0b0723898d5b63015547178
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Feb 7 04:39:59 2006 +0000

    Fix a copy'n'paste-o in the EXA render implementation that resulted in
        [ax]8b8g8r8 pict formats not being supported on r200, but no other
        issues.

commit 8d74f3d49e73626f5d658ba6586a7c1487dae141
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Thu Jan 19 14:20:37 2006 +0000

    Bug #5656: Set all Radeon XPRESS 200 R[CS]4xx-based chips to have IsIGP =
        1, fixing modesetting issues.

commit e490f4b86e6bba70f7c884fca3cf41d159323689
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Fri Jan 13 01:37:43 2006 +0000

    XF86_VERSION_CURRENT -> XORG_VERSION_CURRENT

commit ac296d9137b02753bc79a9930d168855adea9c95
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Fri Jan 13 01:02:01 2006 +0000

    When failing to parse MetaModes, reset CRT2pScrn to NULL after free'ing it
        so we don't crash when trying to use it later (such as in
        RADEONFreeRec).

commit dd98ce78407c9eddd7adaad1d73d6910e6949b87
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Jan 8 19:02:16 2006 +0000

    Bug #5523: Make radeon compile without USE_XAA. (Tilman Sauerbeck)

commit a99429b2bc6407ff2a094e6ee30ce2032f734966
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Dec 21 02:29:59 2005 +0000

    Update package version for X11R7 release.

commit 96e225b950c74e64f3f788be8a8489c5075ea55a
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Dec 19 16:25:52 2005 +0000

    Stub COPYING files

commit 6bea785ea0bdf01673a6ddc45765ae7372fdd371
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Mon Dec 19 09:07:50 2005 +0000

    Typo fixes, mailing list & url updates, and other changes to prepare for
        X11R6.9 & 7.0 releases.

commit 07d5cf8fc37eb72dbb344081ff07d59dbf568e9c
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Thu Dec 15 23:15:37 2005 +0000

    Bugzilla #5238 <https://bugs.freedesktop.org/show_bug.cgi?id=5238> Patch
        #3978 <https://bugs.freedesktop.org/attachment.cgi?id=3978> r128 man
        page dualhead note update (Alex Deucher)

commit 6db5cbfbf6d405d9871892d1255dd7442e4539e9
Author: Kevin E Martin <kem@kem.org>
Date:   Thu Dec 15 00:21:32 2005 +0000

    Update package version number for final X11R7 release candidate. Bump
        driver version number.

commit 726fd3a81dfbd1b0c8e4ede104a48523daecab92
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Dec 14 19:41:28 2005 +0000

    Bug #1760: Fix ati wrapper multihead to be dlloader friendly.

commit 328a2d74dabe32ce35e879799412666feedb0eef
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Dec 9 18:25:02 2005 +0000

    Bug #3869: Don\'t walk off the end of an array in connector detection.
        (Eric Anholt)

commit 03961a05438e916b6725f4e547f23a84ead13c5e
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Dec 9 18:15:31 2005 +0000

    Bug #1106: Fix memory allocation for Render. (Michel Daenzer)

commit 091e5c584124f9b849c0f46802b2f0d8b0cc2388
Author: Kevin E Martin <kem@kem.org>
Date:   Thu Dec 8 17:55:18 2005 +0000

    Add configure options to allow hard-coded paths to be changed.

commit e38e2df15c9a4b08dee6386a225e98827bb35aad
Author: Kevin E Martin <kem@kem.org>
Date:   Thu Dec 8 17:54:40 2005 +0000

    Allow hard-coded paths to be configurable.

commit b8203604bf9bd3813668313a1c8c17040b9d93ce
Author: Kevin E Martin <kem@kem.org>
Date:   Tue Dec 6 22:48:33 2005 +0000

    Change *man_SOURCES ==> *man_PRE to fix autotools warnings.

commit a86920e812bfd40ec9facfc234220e83066dd263
Author: Kevin E Martin <kem@kem.org>
Date:   Sat Dec 3 05:49:32 2005 +0000

    Update package version number for X11R7 RC3 release.

commit 010adc8988846e6f76f111a9fd32eca021d12fbc
Author: Kevin E Martin <kem@kem.org>
Date:   Sat Dec 3 05:45:17 2005 +0000

    Bump version numbers for X11R6.9/X11R7 RC3.

commit a5efa6724e7fd8318e262060b084630632dfcb44
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Dec 2 02:16:07 2005 +0000

    Remove extraneous AC_MSG_RESULT.

commit feeef3cba1f4736a96daf3002ec902ced2874198
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Nov 30 18:51:22 2005 +0000

    Bump libdrm dep to 2.0.

commit 7ca2b3fa30fedd07951f7c6e73ed4d2a6f6606ea
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Nov 29 23:29:58 2005 +0000

    Only build dlloader modules by default.

commit e167e5151e32d54919e96cbfdcf932e16b1cab2a
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Mon Nov 28 22:04:08 2005 +0000

    Change *mandir targets to use new *_MAN_DIR variables set by xorg-macros.m4
        update to fix bug #5167 (Linux prefers *.1x man pages in man1 subdir)

commit 0015b1a007bed61aaf389f8f927e4ae0568d7da7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Mon Nov 21 10:49:09 2005 +0000

    Add .cvsignores for drivers.

commit 00b8f6ccfbb5163c47e9def0e4ecc6ac7be7e8af
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Nov 11 11:05:42 2005 +0000

    Bug #1028: Don't (incorrectly) mark the 24/8 z/stencil case as slow, which
        resulted in whining at runtime about the visual not being supported.

commit 33326847ccc9cf4cd6a23a257e5392e348e6dd22
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Nov 9 21:31:20 2005 +0000

    Bump version numbers for X11R6.9/X11R7 RC2.

commit 68e11246bd6f6a641807230834dce4e7fd6911af
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Nov 9 21:15:14 2005 +0000

    Update package version number for X11R7 RC2 release.

commit 1582d3b34643babcbb794d2df8d7c9a755d569c9
Author: Matthias Hopf <mhopf@suse.de>
Date:   Wed Nov 9 17:42:57 2005 +0000

    Bug #4998: Add ';' and ',' as valid separators for MetaModes as well.

commit 2d22d78d157e07e6ec6a3e2d03fc17f102f6e00e
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Nov 9 07:30:03 2005 +0000

    Fix DoLoadableServer NO build.

commit 999f67763a5ea9fef7b7b576262f0da079efcfee
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Nov 8 16:30:48 2005 +0000

    bugzilla #988 (https://bugs.freedesktop.org/show_bug.cgi?id=988) Fix typo
        which may or may not have had a negative impact on stability with R300
        class cards.

commit 5aa401efa0b8d81da418eafeb857142a33f85da9
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Nov 8 14:05:00 2005 +0000

    bugzilla #4494 (https://bugs.freedesktop.org/show_bug.cgi?id=4494) Call
        RADEONDGAInit() even if EXA is enabled; the problematic DGA
        acceleration hooks are already disabled in that case.
    This fixes DGA issues such as DGA mouse (typically used by games in
        fullscreen mode) not working.
    Fix suggested by Eric Anholt.

commit 345180131a7b2752773dc2a3ee1221ad1e05c815
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Nov 8 13:35:23 2005 +0000

    bugzilla #4916 (https://bugs.freedesktop.org/show_bug.cgi?id=4916) Fix
        segfault with MergedFB and EXA enabled and HW cursor temporarily
        disabled.

commit 23911421ffa7bdd2e191a72c41bf1f26c92c1a67
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Nov 8 09:44:41 2005 +0000

    bugzilla #4951 (https://bugs.freedesktop.org/show_bug.cgi?id=4951)
        attachment #3689 (http://bugs.freedesktop.org/attachment.cgi?id=3689)
        Fix HW cursor getting silently disabled with EXA.

commit e1259c0117a190cf4c6e7be07d5aa83e03afb3a0
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Mon Nov 7 19:28:40 2005 +0000

    Replaced the variadic macros(gcc) by macros according to C99 standard

commit 67bdaae04ab37f38a6d0c8dc4b6328c3ba3b3393
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Sun Nov 6 07:41:29 2005 +0000

    Sun bug #6325220: Xorg dumps core in dual monitor configuration with radeon
        driver if CRT2Position not specified in xorg.conf
        <http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=6325220>
        (Stuart Krietman - Sun Microsystems)

commit 733ebf6e4a7c7b2f1a861077d43da2a853e4c0d7
Author: Kevin E Martin <kem@kem.org>
Date:   Tue Nov 1 15:08:52 2005 +0000

    Update pkgcheck depedencies to work with separate build roots.

commit dd0eb76337bfdaec8f456380a6ced9e0487e190f
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Oct 21 18:40:18 2005 +0000

    Bug #4829: Remove some useless DRI symbol checks.

commit e6c1859e3a7c84b882e0c30d0783255ed1258d9e
Author: Donnie Berkholz <spyderous@gentoo.org>
Date:   Thu Oct 20 23:01:58 2005 +0000

    Bug #4831 <https://bugs.freedesktop.org/show_bug.cgi?id=4831>. Check for
        x86_64 in addition to amd64 in host_cpu.

commit 33460fb393c9591babcc43b30a73eef3971765c2
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Oct 19 02:48:02 2005 +0000

    Update package version number for RC1 release.

commit 77d5c3549db4f6a7ff9f969f885d7a4e58ab2b16
Author: Kevin E Martin <kem@kem.org>
Date:   Tue Oct 18 15:46:37 2005 +0000

    Do the following to make the drivers pass distcheck:
    - Only define EXTRA_DIST when there are actually man pages to be processed
    - Add missing man pages to keyboard and ati drivers EXTRA_DIST

commit 35e717078c840414b0d6a0e37b3ffed0a7b102aa
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Tue Oct 18 00:01:52 2005 +0000

    Use @DRIVER_MAN_SUFFIX@ instead of $(DRIVER_MAN_SUFFIX) in macro
        substitutions to work better with BSD make

commit ff6e5b0412fe347575992c83bb7cb47b6f96f390
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Oct 17 22:57:32 2005 +0000

    More 1.7 braindamage: define EXTRA_DIST in terms of @DRIVER_NAME@ instead
        of indirectly

commit a2e7c55850d383e3af948d445b1645d8a47811cf
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Mon Oct 17 00:09:01 2005 +0000

    Use sed & cpp to substitute variables in driver man pages

commit 524fb1440760a14c53fb3f238aad6c3cdb7e6a08
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Oct 9 10:36:50 2005 +0000

    Secure the Radeon PCIE GART tables in framebuffer memory by not allowing
        the clients to get access to a secure area of framebuffer.

commit e526211b86ec5343002978debfcf78f74a10c69e
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Tue Oct 4 20:01:03 2005 +0000

    Check in generated README files

commit 431d0e144ae4c294e1f6110fc3db497ce9bd9cfd
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Mon Oct 3 21:22:07 2005 +0000

    - For all drivers that have a <driver>.sgml file, add code in their build
        system to build the README file at make dist time
    - in util/macros/xorg-macros.m4, add a new XORG_CHECK_LINUXDOC macro that
        will check if the required tools and files exist, and if so set a
        conditional.
    - util/modular/symlink.sh
    - Link all the <driver>.sgml to xf86-video-<driver>/README.sgml
    - Add all the README.<driver> to the list of excluded files
    - xc/programs/Xserver/hw/xfree86/doc/sgml/SiS.sgml: Various changes to make
        it spew less warnings when the text file is built.

commit 9147c20e5ff662ac511a19e7623b406dffee2242
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Oct 3 06:14:58 2005 +0000

    Bug #4001: Don't crash when PanelSize is unset. (Alan Coopersmith)

commit 7e2090e3ebf0bd699d66d336353c097d658a86ae
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Sat Oct 1 20:42:06 2005 +0000

    missed one missing return value.

commit a843e4281134de1545d538cb8970179b1d6977f6
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Sat Oct 1 17:09:48 2005 +0000

    add missing return value on success in RADEONSetupMemXAA().

commit 98f7d043f894c73fecaf14440c1a24b6c2fc4b06
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Wed Sep 28 15:10:38 2005 +0000

    Make ati driver distcheck
    radeon_commonfuncs.c \
    radeon_exa_render.c \
    radeon_exa_funcs.c \

commit e7b1af5d1677e53820dd1c0926cc8b5a4284901e
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Sep 27 23:55:15 2005 +0000

    Move the RADEONEnablePageFlip/RADEONChangeSurfaces calls back to the end of
        the function (the code above will cause pixmap cache to be freed and
        copied around, and these functions must be called after that otherwise
        pixmap damage will occur). May be related to #4440, #4456 (unclear if
        these setups involve 3d apps)

commit bc3c26fe365347c427e04385c1df95a5eec14f28
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Sep 27 23:34:11 2005 +0000

    Fix Radeon MMIO Render acceleration with EXA by writing out floating- point
        coordinates rather than integers.

commit 58dfb95c446b73fbc34784f0894cf89152dab043
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Sep 24 18:45:45 2005 +0000

    Disable the {Open,Close}FullScreen DRI protocol. Remove empty FullScreen
        stubs from drivers, comment the non-empty ones.

commit 65b5f0017e29903565aff0b7527d955ed016c9a6
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Tue Sep 20 16:53:34 2005 +0000

    Only include radeon_dri.h & radeon_sarea.h if XF86DRI is defined.
    Include "compiler.h" to define __inline__ on non-gcc compilers

commit 0b7441b19a1a5df91aca6b1a02944afb636bc523
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 18 02:32:23 2005 +0000

    Break EXA ABI while we still can. Add coordinates to the UploadToScreen
        hook so we can upload a subset of a pixmap, and convert the current
        drivers to respect that. Use this support to directly UploadToScreen in
        exaGlyphs, providing a 47.4% +/-2.4% decrease in wall time for ls -lR
        programs/Xserver in an antialiased gnome-terminal on an M6 (n=3, caches
        hot). I would have bumped major version, only I can't tell what the
        EXA_VERSION_* is supposed to be doing as opposed to the module version.

commit 64e7db2698ee48af92594c16d72e33c16372c9d7
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sat Sep 17 20:02:01 2005 +0000

    - Don't try to upload 0 byte-per-pixel (PICT_a1) data using
        RADEONHostDataBlit.
    - Disable the shortcut for switching from 3d to 3d in radeon_exa.c. It
        appears that we do need the cache flush here, thought it's not clear
        why. Disable the 2d to 2d shortcut while here, since I'm unsure of what
        we're doing. Exposed by the following bit:
    - Bug #4485: Add a new routine, exaGlyphs, to handle font drawing. Glyphs
        were being accumulated in from non-migratable scratch pixmaps, causing
        the destination pixmap to move towards screen but the migration
        necessary for source never to happen, leading to abysmal performance.
        Instead, copy the scratch glyph data into a real pixmap first, then
        composite from that into the destination, allowing for migration. time
        ls -lR from programs/Xserver showed 26.9% (+/- 6.3%) decrease in wall
        time (n=3).
    - Create exaDrawableUse* wrapping exaPixmapUse*, but which are aware of
        windows needing backing store. Makes migration code prettier, and
        ensures that composited windows will be migrated as normal when we turn
        off cw for EXA. (issue brought up by keithp)

commit 3c71198a088e71a105e274f176c8ceb503615d46
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Sep 17 07:47:51 2005 +0000

    Switch radeon driver to using a card type rather than having a IsPCI flag,
        allow for PCI/AGP/PCIE cards. Set PCI gart allocation to only happen on
        PCIE cards. Add Radeon PCIE card detection using capability bits.

commit 10cf3523f236a017a1ca7e5ee57e02176b924059
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Sep 14 22:06:41 2005 +0000

    Bug #2573: Remove the disabling of automatic cache flushing on non-r300
        cards. It has been implicated in hanging at least r300s and some r100s,
        and seemed to be the cause of some bad rendering for me.

commit d68894a463a3bb08c97e91ff6fc4b65b29183ff6
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Sep 13 22:04:12 2005 +0000

    Remove the hardcoded USE_EXA/USE_XAA defines now that they've been
        hardcoded in configure.ac (config.h).

commit baa9b5b6e19cf9794bf810e3c582bf1d7f808663
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 12 09:27:07 2005 +0000

    Fix Radeon EXA for when RENDER isn't defined

commit 8c89610389197dc94d3bceaf44d9d2ea91848f1b
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Sep 12 09:17:42 2005 +0000

    Move GART offset/size outside XAA

commit eba44d9747adde8385f2a242dee5a8e73ce5a205
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Mon Sep 12 09:04:36 2005 +0000

    Define USE_XAA and USE_EXA for the time being.

commit a255e7b0984890daad98b74ace0c572965fe61f5
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 11 21:00:44 2005 +0000

    Attempt to fix up the modular pieces for EXA support. (untested)

commit 3e0d9c945a6a71cc476d27341ef18618529a91a8
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Sep 11 20:58:53 2005 +0000

    Add support for EXA to the radeon driver. Building EXA and XAA support is
        controlled at compile time, plus the runtime option of Option
        "AccelMethod" "EXA" or "XAA". The XAA support appears to remain as
        before, while the EXA pieces need just a little more polishing. Notable
        features:
    - Render acceleration working on Radeon 100 and 200-series with DRI on.
    - DRI works with EXA Notable issues:
    - DGA disabled in the EXA case.
    - Backbuffer moves disabled in the EXA case.
    - No textured XVideo.
    - MMIO render acceleration is close but still has some issues.
    - Memory pressure while using Composite is really troublesome with DRI on.
        This patch is based on an initial patch by Zack Rusin, with significant
        work by Benjamin Herrenschmidt and myself.

commit fd62082b68ac3aadd8ffc441352d75d88334904e
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Sep 11 08:51:38 2005 +0000

    Add support for allocating PCI GART table in framebuffer memory. This is
        needed to support PCIE Radeons using a new DRM.

commit cb63f8d9c0563fb0eff28e2be6d4adf5666540d2
Author: Dave Airlie <airlied@linux.ie>
Date:   Tue Sep 6 10:03:19 2005 +0000

    Handle VIP timeouts more gracefully -- impose a hard limit of 10ms on
        waiting for VIP_BUSY so we don't lock up hard, spinning.

commit dbd83cf18e1bf5e7e31e1ac150227bd27e8b1739
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Aug 28 20:51:14 2005 +0000

    Bug #4148: Bump required DRM version for r300 to 1.17.

commit ce0589ff3b9fcf8c6bab64da4dba40ba540a6a03
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Aug 28 18:10:34 2005 +0000

    Bug #1109: Fix VGA init on Rage Mobility 7500 (Marc Le France)

commit 250c8732a54924eeb459880f2905f8e59d038e60
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Aug 28 18:00:23 2005 +0000

    Modified the licens type from GPL to a X/MIT one

commit 94c0196652c3cfa0558f61b55f5df9bf50f9ac49
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Fri Aug 26 20:04:01 2005 +0000

    #include "extensions/dpms.h" -> <X11/extensions/dpms.h>

commit 107e42cabe1cc41fe86b0218c3229b5f34b2df84
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Fri Aug 26 07:00:24 2005 +0000

    Fix 'ugly' warning in r128. (Branden Robinson, Debian #069)

commit d3f5911c85ccfaaf50c05ce80d56dac13fd15701
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Fri Aug 26 05:30:52 2005 +0000

    Only use vgahw symbols if we're building vgahw for this architecture. TODO:
        Fix this for the modular tree (maybe an unconditional yes?). Define
        that we're using a DPMS server and include DPMS headers. (Debian #024b)

commit 879213455740d2d653d38c712275f07610e4dc9c
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Fri Aug 26 02:11:24 2005 +0000

    - fix pitch increment (Aapo Tahkola, Roland Scheidegger)

commit 6519cc71e4387ef979de90be517145611511ff1a
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Thu Aug 25 03:34:58 2005 +0000

    Fix bug in Radeon connector table parsing -- parse all entries, not just
        the first. (Ben Herrenschmidt)

commit 8734a5d0bafb60f5e38b2cee10587f01fc016379
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Thu Aug 25 03:07:50 2005 +0000

    Blacklist Radeon M300 from multimedia I2C code. Handle I2C timeouts more
        gracefully -- impose a hard limit of 10ms on waiting for I2C_GO so we
        don't lock up hard, spinning.

commit 578564b4f7fce1f02d056c2b12ffb7803d268829
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Aug 22 03:05:52 2005 +0000

    Explicit license statement.

commit c9005c91bf6aaf4728a6606284f5d24e0b4a8282
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Thu Aug 18 09:03:46 2005 +0000

    Update autogen.sh to one that does objdir != srcdir.

commit 508a7421a1386b5b783a867d860b858a55f216d3
Author: Alan Hourihane <alanh@fairlite.demon.co.uk>
Date:   Mon Aug 15 07:30:05 2005 +0000

    Egbert's 64bit fixes for mixed 32/64bit clients

commit 204290412fbe8b4ac1a0f4f97bc7aec2847a1df7
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Sun Aug 14 16:14:51 2005 +0000

    Make DGA, CPIO, non-PCI, and TV-Out support detected per-platform, using
        the same semantics as in drivers/ati/Imakefile.

commit adb093bdf3cea8108a40bcd72f09924b416de0c1
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Mon Aug 8 23:42:36 2005 +0000

    - radeon XPRESS chips are actually RV3xx based

commit 9c11018beb186b4b303524685fb62629b9ca863e
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Aug 7 14:46:55 2005 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    Update warning about DRI support on R300 and later cards.

commit a28b2c76c7df2fe65a93eed34bc85c2cf5afb314
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Aug 7 14:40:58 2005 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    Properly configure fbLocation and related registers for R300 cards. (Dave
        Airlie)

commit 692fb0f8b51abeccaf70b51fc1defc62132b15e9
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sat Aug 6 17:23:16 2005 +0000

    - missing line in mergedfb option parsing. Spotted by Christoph Bauer

commit 14e77a39320a7a074b5c2eeeea9750b469abc978
Author: Ian Romanick <idr@us.ibm.com>
Date:   Fri Aug 5 23:04:32 2005 +0000

    I have resolved this by making all the "Direct rendering disabled" messages
        X_WARNING and all the "Direct rendering enabled" messages X_INFO.
        Ideally, we need to factor some of this stuff out to common code. There
        is a *LOT* of duplication among the *_dri.c files under
        programs/Xserver/hw/xfree86/drivers.
    I'm trying to clean up as much low hanging fruit as I can and got tired of
        waiting for ajax. :P

commit 8e88d36f78c13025847310b411402f1d46a2e0cd
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Jul 31 17:19:27 2005 +0000

    Post-merge fixups:
    - Disable building the gamma driver
    - Fix numerous Imakefiles to get header paths and subdirs right
    - Symlink client-side GLX lib source from Mesa
    - Add new shader subdirs to the Mesa core build
    - Tweak the DDX drivers to not ask for "xf86dri.h"; they don't need it,
        since they don't generate protocol, and it was breaking the build.

commit fb9f712fd1044feb8ce6a99aabaeb5966123e268
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Jul 29 21:22:42 2005 +0000

    Various changes preparing packages for RC0:
    - Verify and update package version numbers as needed
    - Implement versioning scheme
    - Change bug address to point to bugzilla bug entry form
    - Disable loadable i18n in libX11 by default (use --enable-loadable-i18n to
        reenable it)
    - Fix makedepend to use pkgconfig and pass distcheck
    - Update build script to build macros first
    - Update modular Xorg version

commit ee45e1fb5da793fa14770b28fd662e69d52b2c6a
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Jul 29 19:45:14 2005 +0000

    bugzilla #3911 (https://bugs.freedesktop.org/show_bug.cgi?id=3911)
        attachment #3191 (http://bugs.freedesktop.org/attachment.cgi?id=3191)
        Disable bus mastering while updating MC_FB_LOCATION and friends to
        prevent the X server from hanging on startup every now and then under
        some circumstances. (ATI Technologies Inc.)

commit 44a66ec5a01c3b4dfa046a66b80a3b7e9dfff537
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Fri Jul 15 15:02:47 2005 +0000

    Install theathre drivers in @moduledir@/multimedia

commit dbcf104689ca368523715eb5945bcd800985799b
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Jul 15 03:39:58 2005 +0000

    Fix filename typo

commit 2256fabf1cd69c950639f236f61e59e68cc8e6fa
Author: Kevin E Martin <kem@kem.org>
Date:   Thu Jul 14 22:30:47 2005 +0000

    Fix check for headers. Use {XORG,DRI}_CFLAGS subst instead of replacing
        CFLAGS.

commit 520317863ffb365eca17c96b4d545adb554bbbd6
Author: Kevin E Martin <kem@kem.org>
Date:   Thu Jul 14 19:35:48 2005 +0000

    Make compiling with DRI support configurable/autodetecable. Autodetect DRI
        sdk headers. Expand help string for xorg-module-dir option.

commit ab5264838ae34bb29791bc08d5a4f853a995faf1
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Thu Jul 14 17:10:01 2005 +0000

    fuck you cvs

commit a608c4422665ce1e933483b7c2a25ab2daae5930
Author: Søren Sandmann Pedersen <sandmann@daimi.au.dk>
Date:   Thu Jul 14 16:03:36 2005 +0000

    Try adding build system for ATI driver again. Who knows, maybe CVS works
        today.

commit d715561d28d82591adf5c7504068c1818eb2245c
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Jul 11 02:29:45 2005 +0000

    Prep for modular builds by adding guarded #include "config.h" everywhere.

commit 5b37b695019b7a4522a96a63f1f6b035160e6a25
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Mon Jul 4 23:44:59 2005 +0000

    Bug #2604: Disable workaround for horrible flickering when scrolling
        vertically in a virtual screen when color tiling and page flip are both
        enabled, as it potentially does more harm than good. The flickering
        still needs fixing probably though.

commit 08b886850f115f404187acd619aa2c2ca18ae3c7
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Fri Jul 1 22:43:11 2005 +0000

    Change all misc.h and os.h references to <X11/foo.h>.

commit 1c7c3372776d6d116facabbf055f27af3e96f59f
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Fri Jul 1 04:16:42 2005 +0000

    - fix depth tiling for r3/4xx chips (Aapo Tahkola)
    - adjust limits for tiled surfaces on r3/4xx

commit e8c2574557950bfa150806432d566cd38c47158f
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Fri Jul 1 02:56:04 2005 +0000

    - Fix Support for Philips FM1236/F tuner on ATI AIW 9600 XT (Jeff Smith)
        Bug 3401

commit d258e1c1566d005693260230712c9d78f1447dba
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Jun 30 04:46:11 2005 +0000

    - change back part of a comment I seem to have accidently changed.

commit 6d9c02d58eae1966e8fa8d7d305849c6e57434ad
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Jun 30 02:02:10 2005 +0000

    - small mergedfb fix from Thomas Winischhofer

commit 85365b791542cab221c37c9b3b4593ea0c6c9e2d
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Jun 30 01:40:17 2005 +0000

    - add support for colortiling on r3/4xx hardware (disabled by default). In
        order for pageflipping to work on r3/4xx we will need to update the the
        sarea and drm so that the crtc1/2 xytiling regs get updated. Initially
        worked out by Aapo Tahkola.

commit 3ec99c9cd821aeacdd57a9bbc20c4e4ec4711790
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Jun 30 00:56:01 2005 +0000

    - Increase the priority of display 0/1 in the memory controller for r3/4xx
        hardware when displaypriority is set to HIGH. Fixes display problems in
        high res modes. Originally reported by Aapo Tahkola.

commit a7523e6c0be7a600963e9de10cf0060d16117bf6
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Jun 30 00:33:36 2005 +0000

    - fix some OUTREGs that should be OUTPLLs in dynamicclocks code

commit c7e1d31c6aec3a99061c77c4d6f57e2e874e37f1
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sun Jun 26 04:38:12 2005 +0000

    Bug #3628: Fix video driver submodule visibility.

commit 1beca962ecee5b5c51eb2fb8451fcc2a2ed4b97c
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Jun 25 21:16:53 2005 +0000

    Bug #3626: _X_EXPORT tags for video and input drivers.

commit 9a4895c4c2fd9614d83adfe3967f4f46dc4dfff6
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 22 22:50:49 2005 +0000

    Add missing detection of the PCI ID for 0x5b62, Radeon X600 (Vladimir
        Kushnir).

commit 43e3cc7c21160f4536ed860f97d02545c267dfbc
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Wed Jun 15 23:40:50 2005 +0000

    Sync up radeon mergedfb with Thomas' latest sis mergedfb changes:
    - non-rectangular mergedfb desktops
    - screen offsets

commit b67f9f5c875efaa41bded7ed2f38b2a5fbd17597
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Sat Jun 4 20:26:28 2005 +0000

    Sync with 6.8.2 branch: Bug #591
        (https://bugs.freedesktop.org/show_bug.cgi?id=591) attachment #308
        (https://bugs.freedesktop.org/attachment.cgi?id=308): Fix video timing
        problems with Sony PCG-C1VN Vaio Picturebook notebook && co. Patch by
        Marc Aurele La France

commit daae70d9083e9c15358f160f0df3176e344f1cb9
Author: Alan Coopersmith <Alan.Coopersmith@sun.com>
Date:   Sat Jun 4 20:04:36 2005 +0000

    Sync with 6.8.2 branch: Bugzilla #1306
        (https://bugs.freedesktop.org/show_bug.cgi?id=1306) attachment #1291
        (https://bugs.freedesktop.org/attachment.cgi?id=1291): Fix SEGV in
        "radeon" driver. Patch by Kevin E. Martin <kem@freedesktop.org>

commit c27c193f192b117232dbe39575d3d5ab7c6a1b1e
Author: Felix Kuehling <fxkuehl@gmx.de>
Date:   Fri May 27 22:33:23 2005 +0000

    Fix for bugzilla https://bugs.freedesktop.org/show_bug.cgi?id=3414 (patch
        https://bugs.freedesktop.org/attachment.cgi?id=2782): Don't use RMX if
        we are Dell Server.

commit 3b674815e0a6d19b0719e71261c0909b92173aed
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue May 24 23:26:50 2005 +0000

    Typo fix from bug #3163 commit

commit 0845d1db801ae74688464bd4c41a7e40e4b50186
Author: Egbert Eich <eich@suse.de>
Date:   Mon May 23 09:50:20 2005 +0000

    Explicitely disable DPMS power states during close screen. Fix macro that
        takes a value and a mask of bits to modify to be behave evquvalently if
        the bits that should remain unchanged are set or unset in the value
        (Bugzilla #3369).

commit 74b86b036def72e5180a46871b8452ba9eea9bb1
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed May 18 17:47:35 2005 +0000

    Bug #3163: Create new DRIINFO_*_VERSION macros to indicate the version
        number of the DRIInfoRec, disambiguating it from the XF86DRI protocol
        version number. Modify DRIQueryVersion to return the libdri version
        number, which all DDXes were requesting implicitly. Fix the DDXes to
        check for the DRIINFO version they were compiled against.

commit 0f4a8fc6aa5157a8b48beb49f30511665cfa4b63
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Wed Apr 20 21:07:44 2005 +0000

    programs/Xserver/hw/xfree86/drivers/ati/theatre.h Build fix for
        DoLoadableServer = NO systems.

commit 3355d12f832909b05e8b022fad784c9f7af7341f
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Wed Apr 20 12:25:22 2005 +0000

    Fix includes right throughout the Xserver tree:
    change "foo.h" to <X11/foo.h> for core headers, e.g. X.h, Xpoll.h;
    change "foo.h", "extensions/foo.h" and "X11/foo.h" to
        <X11/extensions/foo.h> for extension headers, e.g. Xv.h;
    change "foo.[ch]" to <X11/Xtrans/foo.[ch]> for Xtrans files.

commit 31cb4758eae4703d4de31a0b291847cefa855fc3
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:28:09 2005 +0000

    Added fifo_read and fifo_write in tge generic bus definition

commit 2b363e02c7c122f07e6fc406fb8ee52d97b55cad
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:26:36 2005 +0000

    Added new options for the ATI driver: RageTheatreMicrocPath and
        RageTheatreMicrocType

commit 6286efeba564c63ec198c091e4bba22027586901
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:23:45 2005 +0000

    Addeded support for FI1216ME (PAL) version of the tuner, detection of
        UDA1380 sound processor

commit 9a63c216e90622cd96d4555155df06dd66c3235b
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:18:26 2005 +0000

    Use the theatre_detect to determine the chip ID and then load the
        coresponding theatre module

commit 247057762813f12f171b1fa05f31c5ace4c245a7
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:15:31 2005 +0000

    Added functions that access the FIFO on RT200

commit bcccf9259784f21d84d52c526aa68df0787118b4
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:13:45 2005 +0000

    Added RT200 registers

commit da9d27f8c8cccf2f40a244b25ffe0d3162c41a63
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:09:28 2005 +0000

    This is the theatre chip detection module

commit e4623bbce161c41ccac65210fd2539211e8af715
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:07:54 2005 +0000

    Now the detection of the theatre chip is in other module called
        theatre_detect

commit 405b4dcb067346fce7fd9f6d8a6507a58c740ac7
Author: Bogdan Diaconescu <b_diaconescu@yahoo.com>
Date:   Sun Apr 17 23:06:17 2005 +0000

    Added the RageTheatre200 video demodulator support

commit 310eb24a45b145efbd47196a1c3ec750cf004154
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Mon Apr 4 23:07:08 2005 +0000

    Release SDA/SDL I2C lines from an asserted-low state after a DDC probe,
        which caused Apple Studio Display monitors to shut off after a second
        or so (Ben Herrenschmidt).

commit a416667f980a8679352be897af2fb3215da2d000
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Mar 31 23:18:10 2005 +0000

    - Add new Radeon pci ids (ATI devrel), bug 2827

commit 2e7365ffb767099faf3f191dc65341dbb3ef6247
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Thu Mar 31 18:26:05 2005 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c
    Patch from Antti Ajanki - provide VBI capture support for PAL and SECAM
        (You need GATOS km module to actually get at the data, the change
        merely configures the hardware to handle it correctly).

commit 9a3c1c8e4cba2885b707db0f855e11dc6e640b49
Author: Michel Daenzer <michel@daenzer.net>
Date:   Tue Mar 29 06:14:34 2005 +0000

    bugzilla #2844 (https://bugs.freedesktop.org/show_bug.cgi?id=2844)
        attachment #2230 (http://bugs.freedesktop.org/attachment.cgi?id=2230)
        Wait for idle before uploading HW cursor data to the framebuffer to
        avoid lockups when moving the mouse on some machines.

commit 97863f112850be5206ea555297354c1c104fcdbe
Author: Kevin E Martin <kem@kem.org>
Date:   Tue Mar 29 03:49:04 2005 +0000

    bugzilla #2840 (https://bugs.freedesktop.org/show_bug.cgi?id=2840)
        attachment #2227 (https://bugs.freedesktop.org/attachment.cgi?id=2227)
        Fix build problems introduced by previous Radeon PLL errata
        workarounds.

commit 04cbb8d174cc5e3c7ecdd4e171170213ecb3c7ed
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Mar 26 00:53:01 2005 +0000

    bugzilla #2057 (https://bugs.freedesktop.org/show_bug.cgi?id=2057)
        attachment #1516 (https://bugs.freedesktop.org/attachment.cgi?id=1516)
        Add TVOUT Support for Mach64 (Leif Delgass, fixed up for Xorg by me).

commit 5be4bf9000bdf58584a10a6b8e285d0f173304fa
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Mar 24 06:45:52 2005 +0000

    - radeon PLL access errata workarounds (Benjamin Herrenschmidt, acked by
        Hui Yu)

commit 34af3da80304a13b6407dcc0f4db54d6c8bb7a41
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Mar 18 22:36:47 2005 +0000

    Add support for production version of ATI RN50/ES1000. (ATI Technologies
        Inc.)

commit b56a5f96048b920a7751318dde211e881f53b2bb
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Thu Mar 17 03:36:25 2005 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_mergedfb.c Back out
        RadeonWaitForIdleMMIO that I put in earlier.
    From discussion on dri-devel we do not need to be as careful with INREG()
        access on Radeons as we are on mach64 chips.
    The fix is backed out due to:
    it breaks DRI on SMP systems (due to absense of the lock in mouse handling
        functions)
    I am no longer able to reproduce the lockup I saw before

commit 01a9c1157cdfbc5f74b035383e060b8419979563
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Mar 8 23:41:37 2005 +0000

    Fix accidentally removed depth pitch adjustment if displayWidth is not a
        multiple of 32 pixels (bug #788)

commit 9b994b40710103b263364153429ebdb9ea3f58ed
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Fri Mar 4 22:21:40 2005 +0000

    programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c Let through all chips
        R300 and above - presumably the filtering should take place at the DRM
        driver level. Correct cut'n'paste position misprint. Big thanks for
        Michel Danzer for pointing out both improvements.

commit 7d37a9f1f9fffe98067c3b5bc4749cc799fb0c77
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Fri Mar 4 05:48:31 2005 +0000

    programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c Turns out Radeon R420
        chips work fine with R300 microcode. Thanks go to Rune Petersen for
        careful investigation.

commit f1edbb7852d85f660188498f578a0a697c2094fe
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Tue Feb 22 00:39:15 2005 +0000

    Fix building radeon driver with BuildXF86DRI set to NO, the breakage was
        caused by the tiling support (bug #2481)

commit b853dbb50fb7c46fb5a70f349a3f264f0bb94e8c
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sat Feb 19 16:00:12 2005 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c
    Fix an INREG without WaitForIdleMMIO. This one should be unlikely to
        trigger, but we should still do this in the name of correctness.

commit 84290849b4aee336e9db0779d93fc2d7ed8881b1
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sat Feb 19 00:57:23 2005 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_mergedfb.c
    Add a call to RADEONWaitForIdleMMIO() within RADEONChooseCursorCRTC() as
        this function uses OUTREGP() which, internally, calls INREG().
    Thus (due to SilkenMouse) INREG() could be called while CP engine was busy.
        I have observed this lockup on RV350 + R300 3d driver and have no idea
        why no issues were reported for R200 cards. Perhaps, few of them have
        enough memory to run merged fb and 3d simultaneously ?
    This fix is the right thing to do, however, we might also need to put fifo
        management calls into other cursor handling functions (in particular
        those that write cursor image directly to video memory).

commit 60070063e2130af0b9d5d34eed7adbae0c0fa67b
Author: Michel Daenzer <michel@daenzer.net>
Date:   Fri Feb 18 19:55:35 2005 +0000

    Bug #2576: Add support for ATI RN50/ES1000. (ATI Technologies Inc.)

commit 32032cdc78097840b7e2685fdec11bc0816aa0ac
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Feb 18 16:42:11 2005 +0000

    Bug #2567: Fix reversed memset arguments. (David Krause)

commit d5fadd6d86ae2a2f8c1bb55e36ab3d6d49649b46
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Feb 9 02:22:39 2005 +0000

    do not enable color tiling on r300 chips and newer, since it doesn't work
        (yet) (Bugzilla #2504)

commit 5ff35300e66a81ecc17c4e9396eb6d158f5c8e1b
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Feb 2 21:35:30 2005 +0000

    fix error with color tiling and hw scrolling, it looks like rv100 doesn't
        need the special treatment, after all (reported by Stephane Marchesin)

commit 7a9031683914bb1d17d223634e5dbf2e18955651
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Mon Jan 31 20:10:28 2005 +0000

    change option EnableColorTiling to ColorTiling

commit a2b123f7672ea678290798786ecb408a86d8c683
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Jan 26 18:23:41 2005 +0000

    (Stephane Marchesin, me) Add support for color (framebuffer) tiling.
        Convert all XAA accel code to use explicit dst and src offset pitch
        control to make it work. Use the new drm surface ioctls to set up the
        tiled surfaces (if dri is enabled).

commit e0df1e41724cd009fe7c833d2f9555f5d87e3202
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Jan 26 17:39:56 2005 +0000

    fix issues with mergedfb + pageflip (fix up sarea frame values)

commit aeb01807263c47f49abaf00031d8505e8ebda82c
Author: Egbert Eich <eich@suse.de>
Date:   Mon Jan 24 15:40:21 2005 +0000

    Don't exclude 'RADEONInfoPtr info = ...' declaration even when not building
        with DRI support (Bugzilla #2370)

commit c6c30cfa354eb456638f10771a7cb02271696af2
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Thu Jan 13 17:35:49 2005 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    Some of the newer Radeons (R420 for example) have MM_TABLE's with size 0x33
        (instead of 0x0c that we know). Furthermore, they lockup during access
        of I2C bus !
    Add a check to validate MM_TABLE. Note: the check is not more stringent as
        other card manufacturers (like Asus or Tekram) might make cards with
        slightly different MM_TABLE.

commit 414c035a965b9db15656058c0e9cfeb3acf0158f
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Fri Dec 24 18:26:19 2004 +0000

    - Fix MCLK / SCLK calculation (Benjamin Herrenschmidt) bug 2144
    - formatting cleanup

commit 7c7b278883676412f5709cf812587b1408628133
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Dec 19 19:49:33 2004 +0000

    - Add support for Dualhead on M3/M4 (bug 1760)

commit 08a45118b53129f3b9c30004404b906c7d7690be
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Dec 19 19:29:10 2004 +0000

    - Make dualhead ram allocation cleaner and related messages clearer

commit 97cfd7b1489a9510cd233d6dc7154c210f32b9f5
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Dec 19 06:56:37 2004 +0000

    - Add DRI resume support (Micha Feigin) bug 2063

commit 5b8577ae3200d967b4316156f16028cbcfd21983
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Dec 19 06:11:06 2004 +0000

    - fix warnings (Ronny V. Vindenes)

commit 447124a663a24a7fffb0cd241d18dd896a43098b
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sat Dec 18 21:37:48 2004 +0000

    - fix warning and potential error in radeon_driver.c

commit ac6166158a58b377e7383950c169956f78b62093
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Fri Dec 17 19:19:32 2004 +0000

    - Add VGAAccess option to r128 driver. Based on Benh's radeon patch. r128
        should now work on ppcs without usefbdev. To use this on ppc make sure
        you set "usefbdev" to false. (bug 2089)
    - Apply Benjamin Herrenschmidt's radeon patches (bug 2064)

commit ac860ed6bbed84f6fc39a9acf53ee87646cfc8dc
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Fri Dec 17 16:50:36 2004 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_accel.c
    programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c
    Move DMA robustness fix into radeon_dri.c::RADEONEnterServer() as per
        suggestion by Michel Dnzer.
    I could not trigger a lockup, even with r300_demo (possibly it has code
        that flushes cache inside ?), so this must be good enough..

commit 3ba5b525c4d6390184fdf79b28c954d5caadc6a4
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Thu Dec 16 16:26:56 2004 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_accel.c
    Add DMA robustness fix from Nicolai Haehnle.
    TODO: move this fix into DRM driver or other parts of Xserver when R300
        support is more stable.
    This fix affects only R300 and later variants and results in small slowdown
        when using CP acceleration in comparison to the previous version of the
        driver.
    We are still a lot faster in CP mode than using MMIO register access.

commit c7b5f4a9eb49c0edd690c972be1015c98408ffaf
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Dec 15 19:35:33 2004 +0000

    Bug #2008: Fix gcc4 compile problem.

commit 8c1969f22fba2e1c9ed34d5ca77bee3a9f577640
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Dec 12 20:42:29 2004 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_render.c
    programs/Xserver/hw/xfree86/drivers/ati/radeon_accel.c
    Make DMA blitting code more robust.

commit 8a9077bc70fd800983f138a224b95301992a2296
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Dec 12 19:28:37 2004 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c
    Enable DRM support permanently, allowing its use for any CHIP_FAMILY >
        R300. Fix bug in naming Mesa3d driver (it was defaulting to r200)

commit 845df6dd96785b59c44c670009c4fcdb20e147ab
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Dec 12 17:29:45 2004 +0000

    - missing diff from agp 8x support

commit 36b92808e4ff1311f91543388c18cbe8e9eb4aab
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Dec 12 16:05:35 2004 +0000

    Modified:
    programs/Xserver/hw/xfree86/drivers/ati/radeon_accel.c
    programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c
    programs/Xserver/hw/xfree86/drivers/ati/radeon_common.h
    programs/Xserver/hw/xfree86/drivers/ati/radeon_version.h Add R300 (and
        later) DRM support, protected by X_R300_DRM option.
    Note: at the moment this is for 2d support only, if enabled running
        glxgears locks up my machine, but DMAForXv=yes works fine.

commit 68ea67ce98b8f3ad4c17f987e0e2b92f79a96fbf
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Dec 12 02:00:48 2004 +0000

    - add AGP 8x support (Hui Yu, Michel Daenzer) bug 1819

commit 93675d288d5ebb35d4724ebbfc455a703e25a311
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Dec 12 00:14:32 2004 +0000

    - only mess with Dynamicclocks on mobility chips (Benh, me) bug 1912
    - fix display detection (Hui Yu) bug 1559
    - Add new option "BIOSHotkeys" to allow the bios to control output
        switching (off by default) bug 2000
    - update the savage man page to document the "CrtOnly" option

commit ed217003127028483fd2956851d438977169d154
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Mon Dec 6 13:27:56 2004 +0000

    Apply Debian patch to re-POST via VBE if driver thinks it has no video
        memory (a symptom of incompletely coming up from D3 power state), which
        fixes some Dell laptops (closes: #1890).

commit 2b8ab42b05b32710fa4f71a25e2f84192e637fbd
Author: Michel Daenzer <michel@daenzer.net>
Date:   Mon Dec 6 06:27:53 2004 +0000

    When direct rendering is enabled, use hostdata blits to transfer data from
        system memory to video RAM, which should reduce CPU usage especially
        with larger videos. Can be disabled via Option "DMAForXv" if there
        should be any stability issues, but it's been stable for me during a
        week of testing. Based on a patch by Nikolaus Meine
        <meine@tnt.uni-hannover.de>. Probably fix endianness issues in some
        newer XVideo code, untested.
    Also use hostdata blits to transfer RENDER image data to video RAM to avoid
        idling the accelerator engine. Increases RENDER performance
        significantly for me.
    These changes were only tested on an M9 in a Titanium PowerBook but should
        work with all Radeons where direct rendering is supported.

commit 960d15ae3a44efe7c02a3d6d0acbabe63e07be74
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Sat Dec 4 22:34:54 2004 +0000

    Disable interrupt handling after the DRM handler has been removed,
        preventing lockups (closes: #1886).
    Allow pitches with a granularity of 32, rather than 64, because some
        clamshell iBooks have 800-byte pitches. Change Xv allocation
        granularity to 8 bytes, rather than 16 bytes, also (closes: #1888).

commit 4706dfb7804a46e3cc5aafc3644f5a1134ab3d19
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Sat Dec 4 22:24:06 2004 +0000

    Retry CCE idle commands until the (higher) timeout is reached, and properly
        stop the engine if we totally fail -- gets rid of serious performance
        issues and lockups with r128 DRI.

commit bce508a288d6b95708dbbfc6b235e2d95b6b96ad
Author: Markus Kuhn <Markus.Kuhn@cl.cam.ac.uk>
Date:   Sat Dec 4 00:42:59 2004 +0000

    Encoding of numerous files changed to UTF-8

commit e9c9fd279ed43cc0d779266efcea69a67541c794
Author: Egbert Eich <eich@suse.de>
Date:   Tue Nov 30 08:38:44 2004 +0000

    Make Xorg the default server to install.
    Avoid PIO access on IA64. Some IA64 machine check if legacy ports outside
        the VGA range are accessed. The ATi driver however does this to probe
        for ISA Mach8/32/64. Since no IA64 has ISA slots this restriction
        should not be relevant to the user.
    Avoid recursive calls of xf86scanpci(). This function normally detects that
        it has been called before by checking if the PCI structure is filled
        out. So far if this was not the case (because PCI probing has failed
        for some reason) the function is traversed again. With the chipset
        specific PCI bus probing this can lead to an endless recursive loop as
        the post-probing code calls xf86scanpci() from within this function.
    The OS specific PCI code for Linux worked only if bus 0 was populated as it
        checked for the presence of /proc/bus/pci/00. Fixed to check for
        /proc/bus/pci/<bus_to_look_for> instead.

commit fffbcb761c178e025e3d55d428a803b1284481e0
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Sat Nov 27 15:14:15 2004 +0000

    xc/programs/Xserver/hw/xfree86/driver/ati/radeon.man
    xc/programs/Xserver/hw/xfree86/driver/voodoo/voodo.man
    xc/programs/Xserver/hw/xfree86/driver/wsfb/wsfb.man XF86Config ->
        __xconfigfile__

commit ad6347d187f9afa053c755aa3a2da9d821916cb2
Author: Daniel Stone <daniel@fooishbar.org>
Date:   Tue Nov 23 21:27:43 2004 +0000

    Use fp_horz_stretch instead of fp_vert_stretch for horizontal stretch
        factor calculation in panel size derivation in the Radeon driver
        (closes: #1881).

commit ac054e427c6ce8cd5b89459dd3f16ca20e6b2d6a
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Oct 24 18:17:36 2004 +0000

    Add registers to facilitate work with stereo 3d.

commit 445ed4b9b61347c866ee67dc0cb110904d667b84
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Fri Oct 22 03:51:58 2004 +0000

    - make the overlay work on crtc2 again
    - make PutVideo() MergedFB aware

commit 54cffc3fe273cf3c9ed2a8aef833d4bd337a8a09
Author: Egbert Eich <eich@suse.de>
Date:   Mon Oct 18 15:19:44 2004 +0000

    Fixing one of the infamous 'control reaches end of non void function
        problems'.

commit 7a97d363327e0b2c8646d961e00d05f99766b54f
Author: Egbert Eich <eich@suse.de>
Date:   Mon Oct 18 14:21:45 2004 +0000

    Made handling of DevelDrivers for x86-64 more conformant to other
        platforms.
    Compress all font encodings (Stefan Dirsch).
    Fixed warnings.
    Turn on forwarding XNSpotLocation event to XIM server in OffTheSpot and
        Root mode (bugzilla #1580, James Su).
    Added another compose key combination for the Euro symbol (Stefan Dirsch).
    Added support for UTF-8 in ja_JP, ko_KR and zh_TW locales (Mike Fabian).
    Changed default encoding for ru from KOI8-R to ISO8859-5 (Mike Fabian).
        This is the encoding that is also used by glibc. We may break other
        libcs - lets see who complains.
    Added explanation for DESTDIR to install to a different directory than /.
    Added some early bailouts to atiprobe if PCI structure pointer is NULL to
        prevent sig11.
    XV support doesn't depend on 2D acceleration any more. This patch removes
        this limitation from the NSC driver. This is a patch that I have
        committed to XFree86 a while ago but never ported over to X.Org.
        Matthieu Herrb contributed some build fixes.
    Fixing SetDPMSTimers() so that DPMS*Time == 0 disables the appropriate
        timer. This takes advantage of the fact that TimerSet() with a timeout
        argument 0 behaves like TimerCanel().
    Use /dev/xconsole (named pipe) or devpts for system logger (Werner Fink).
    Create missing links for backward compatibility to XFree86 (Stefan Dirsch).
    Changed comment to mention xorg.
    Changed cursor for the 'kill' action from XC_draped_box to XC_Pirate. If
        you don't like it we can change it back (original author unkown).
    Added 'pic' to the man page rendering command pipeline (Werner Fink).
    Added missing return value (Stefan Dirsch, Roland Mainz)

commit c7ab340fecb94a89c25d6bc7f686b7c97cd3067f
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Oct 17 22:45:57 2004 +0000

    - Fix DFP detection in r128 driver (bug 1386, Klaus Kusche)
    - Fix EmulateWheelInertia defaults (bug 1115, Andrew Pimlott)

commit ace6e1b7933cb415b8efc41dffa335938f9c89b5
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Oct 17 17:57:33 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c On my Inspiron
        8600 both internal and external ports are marked DAC_PRIMARY in BIOS.
        So be extra careful - only swap when the first port is not DAC_PRIMARY

commit 22405e81b812c239b5d8653b402b5f846e6e10b1
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Sun Oct 17 16:52:02 2004 +0000

    - Add Thomas' latest sis MergedFB enhancements to the radeon driver

commit 186efa31b2cb7285717678bb1c4df4cd9e182395
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Wed Oct 13 23:02:42 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c
    xc/programs/Xserver/hw/xfree86/drivers/i2c/fi1236.h Squash annoying warning
        about fi1236_dump_status

commit 43b24861e36023613a99627c57ac44721ed1a548
Author: Egbert Eich <eich@suse.de>
Date:   Tue Oct 12 19:13:43 2004 +0000

    Set fbdev mode as the default mode on PPC (Olaf Hering).
    Added support for IBM space saver keyboard (Stefan Dirsch). Added support
        for Cherry CyMotion Master XPress (Marcus Schaefer).
    Change order of SetDisplayDevice(), HWRestore(), UnbindGART() and
        RestoreBIOSMemSize() to be exactly opposite to the Save procedure in
        EnterVT() (Matthias Hopf, Alan Hourihane).
    Fix text mode restauration by removing the assumption that the register
        which determines which head is programmed is set. to the active head by
        the BIOS (Mark Vojkovich).
    When I wrote the resource code 5 years ago I made some assumptions which
        turned out to be false: I've assumed that the bus number of the PCI
        hostbridge would be the PCI bus the bridge links to. This is not
        correct. Fixing this assumption is not easy. However I hope that the
        attached patch will make the system work regardless as it 'ignores'
        host bridges from which the target bus is not known. This should not
        matter at all as we really don't care about host bridges (unless we
        have bridge specific code which retrieves information about the
        bridge).
    Fixed server crash on reset when a structure allocated in PreInit() was
        freed on CloseScreen().
    Fixed ring buffer lock ups that happened because the structure that
        contained ringbuffer data was not zeroed after allocation.
    Fixed numerous warnings due to signed unsigned comparisons.
        programs/Xserver/hw/xfree86/drivers/nv/nv_driver.c:
        (NVBacklightEnable): Changed the order in which the sequencer registers
        and the backlight control registers are written. The sequencer control
        register need to be written first otherwise DPMS screen blanking
        produces vertical bars on a mobile device. lib/Xau/Imakefile: Build
        libXau static library PIC so it can be linked into toolkits that would
        like to wrap its functionality.

commit 515b7c4b748f70c17aee149a33ee1b41632daa1a
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Mon Oct 11 23:20:26 2004 +0000

    - fix resume on radeons (bug 1220)
    - clean up some old cruft in the savage i2c code

commit 07e1aaee862c4835601c704e14fcb12e28f4e78e
Author: Egbert Eich <eich@suse.de>
Date:   Mon Oct 11 09:58:04 2004 +0000

    Improving DPMS handling on VT swich and server termination/abort: previous
        version called the driver directly and too late.
    Unblank secondary screen explicitely. Don't rely on the value read during
        register save as the BIOS have blanked the secondary head.
    Checking if server isn't switched away before calling sync. Sanity check
        for possible bugs in aother areas of the code.
    Fixing default amount of of allocated video memory from AGP for i810: Use
        16MB if less than 192MB are installed else use 24MB (Matthias Hopf).

commit a8c77480e7f4ddf8c45bea3ecec7b6564c0d6452
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Fri Oct 8 00:56:05 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c Remove redundant
        and incorrect line.

commit ec831d4fba23dc5f4d0a1450aa63efe5ff5937a2
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Tue Oct 5 01:16:01 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/theatre.h Patch from Matthieu
        Herrb - fix compilation with DoLoadableServer=NO

commit f1dadde8f642b332a2dcd2e2a5779f25fec7a3de
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Oct 4 21:52:47 2004 +0000

    Correct radeon man page, IGP is supported for 3D but R400 is not.

commit e3dba9841521466629828501c4fdccbba3d6af89
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Mon Oct 4 15:24:34 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c Do not probe for
        Rage Theatre if no multimedia table is present and no parameters have
        been specified.

commit 4aadb784928ebbd60dce172c9a9a80e8d84e943f
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Mon Oct 4 14:53:11 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c This is really
        embarassing - I found a part of code that had <cr> at the end of the
        lines. I am certain I never saw it before - talk about code rot !

commit db5a27081d9d3ab4cc1481a7d110d11103b3de19
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Oct 3 23:54:40 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_mm_i2c.c Remove debugging
        statement that cause loading of DLL modules to fail.

commit 37a8d8a53f12f829783011c1e077fefb5729e618
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Oct 3 14:41:45 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c Fix compilation
        with gcc 3.4.x (patch by Ronny V. Vindenes)

commit 6dbcd503fe21c6dec27c2b97adc0f39ba0a7ab2a
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Oct 3 03:07:17 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.[c,h]
    xc/programs/Xserver/hw/xfree86/drivers/ati/theatre.c
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_reg.h Port the rest of
        GATOS Radeon-specific code. Remove "checkpoint" noise from logs. Test
        with AIW Radeon 7500

commit 7cb911291d459f08f54444d09081d3378fe73b8b
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sun Oct 3 00:01:14 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon.h
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.[c,h]
    xc/programs/Xserver/hw/xfree86/drivers/ati/theatre.c Detect and initialize
        Rage Theatre (RT100)

commit 6c1996174b9f7afc8f4e33c35e4864b31696d4d6
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sat Oct 2 20:55:42 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/Imakefile
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_reg.h
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.[c,h]
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_vip.c Add VIP bus access
        code, hook it into initialization system.

commit 136649a1c2065624a9cf17386054c6595aa6d85e
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sat Oct 2 20:35:04 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/theatre*
    xc/programs/Xserver/hw/xfree86/drivers/ati/generic_bus.h Add Rage Theatre
        (RT100) module code and hook it into the build system

commit 7a17b1c294fa8c7af0b1cdea0618cb6060479356
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sat Oct 2 01:59:13 2004 +0000

    Modified:
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon.h
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.c
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_video.h
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_mm_i2c.c Add code to
        access and initialize multimedia i2c bus. Hook it up.

commit e0123e24b6895dde7b385528da24c4e6e9d5a4cb
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sat Oct 2 01:36:43 2004 +0000

    Add more multimedia registers.

commit 576f53be4f0fa54bde7167872b7508b98e5c9454
Author: Vladimir Dergachev <volodya@mindspring.com>
Date:   Sat Oct 2 00:43:08 2004 +0000

    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    xc/programs/Xserver/hw/xfree86/drivers/ati/radeon.h Add TV-in specific
        options. Add TV-in specific fields to radeon per-screen structure, add
        code to initialize them. Preserve MM_TABLE (instead of whole VBIOS as
        was done in GATOS drivers)

commit 9a9ba82172428b09312fdd6e11da04b21c8529fc
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Sep 22 04:38:03 2004 +0000

    Bug #1252, #1253, #1255, #1256: Various typo fixes from Dave Jones.

commit 700b0dc5148d0170c9223765d208ccef447242df
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Sep 21 18:10:34 2004 +0000

    Convert the ATI drivers to ANSI function prototypes.

commit 17e5f3c1169066be1004306d12b5398cf01cbd35
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Sep 17 05:16:45 2004 +0000

    Bugzilla #1170: Fix an overcounting of DMA in BEGIN_RING that wasn't
        harmful. Bugzilla #1169: Add counting for
        BEGIN_RING/OUT_RING/ADVANCE_RING to avoid these sorts of problems in
        the future.

commit 29bbee6b8a8dd1b883e07547691ff8e1289459ce
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Sep 17 03:04:50 2004 +0000

    Bug #1192: Remove cfb support from drivers where its use is an option.
        Delete xf24_32bpp, as s3virge was the last user. Fix up some comments
        to refer to fb rather than cfb.

commit cec06d4126f5f31d14ace73798c71ec75e544c45
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Thu Sep 16 22:15:05 2004 +0000

    Update comment

commit dbeb8d28ac3469f4a7d7d8dae979ae876d4cdcba
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Sep 3 23:26:19 2004 +0000

    Updated release notes for bug #999.
    Update Radeon man page to note that RenderAccel is now enabled by default
        on certain chips.

commit c829f667c8a79bbdd40e1f924d57638e7bd425dc
Author: Michel Daenzer <michel@daenzer.net>
Date:   Mon Aug 30 04:31:50 2004 +0000

    Hotfix for Eric Anholt's fix for bug #1156 : Clear the
        RADEON_NONSURF_AP0_SWP_16BPP bit for 4 bpp data, otherwise it breaks at
        depth 16.

commit 677246740b5b538e73a7fbde661ec6a97319430b
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Aug 27 20:31:26 2004 +0000

    Back out my last change, dupe.

commit a8eaa15264ff0db1596d653e91260c9a39a8b5ee
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Aug 27 18:32:40 2004 +0000

    Bug #1061 (documentation-only update): Document the RenderAccel option in
        the radeon manpage.

commit 360dab062f895c19e1784146e6684f75a20c5b24
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 27 03:36:28 2004 +0000

    Bug #1156: Fix the build on PPC by splitting the byte-order-setting code
        into a separate routine. While here, fix the byte swapping in the 32bpp
        case. (Michel Daenzer)

commit 9b19bbb4d37b79c97365aa492cd93931d492b3a8
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Aug 27 03:23:47 2004 +0000

    Bug #1157: Fix Radeon line acceleration in the DMA case (Michel Daenzer).

commit 838488b6b46359334e5e781589dbee3832909628
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Aug 27 02:38:56 2004 +0000

    Fix Radeon compilation without Xinerama (Bug #1179, Simon Schubert).

commit 5f54d4f45e2adc6b15e98152db88743c243aa128
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Aug 25 00:30:41 2004 +0000

    Fix hangs during startup with Radeon driver (Bug #1007, Sjoerd Simons).
    Fix i810 driver startup on Sony VAIO laptop (Bug #1084, Dave Airlie).
    Fix several library build problem (Bug #1147).
    Fix build problems (Bugs #1148 and #1149).

commit dde880e876f455f1fd66efbcc055e177886397c9
Author: Eric Anholt <anholt@freebsd.org>
Date:   Tue Aug 17 20:22:55 2004 +0000

    Reenable Radeon Render acceleration now that interactions with 3D clients
        should be resolved.

commit 279efef503fdbd442a9bd00f0073d9f6006d9e61
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Aug 15 00:44:57 2004 +0000

    Fix unresolved symbol warnings in r128 driver (Adam Jackson)

commit 955f2b89f94aaa20b5eafd045b01e3eeef3d29ad
Author: Kevin E Martin <kem@kem.org>
Date:   Thu Aug 12 05:00:22 2004 +0000

    Fix context switching on Radeons and build problem when XF86DRI is not
        defined (Bug #922, Eric Anholt).

commit 8f3ea53f26493a5f02410297a587d1d95c067094
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Aug 12 02:23:46 2004 +0000

    oops, these didn't added somehow.

commit 6ec74414bd33e9d8dfd5119058d15f3a6206e9d9
Author: Adam Jackson <ajax@nwnk.net>
Date:   Thu Aug 12 01:03:06 2004 +0000

    Factor out R{128,ADEON}Chipsets into their own headers so they can be
        sanely included in both the ati core and the r128/radeon submodules;
        r128 and radeon can now be directly loaded under dlloader. Teach imstt
        about the dlloader- frendly way to talk to fbdevhw. (Partial for bugs
        #393 and #400.)

commit a5b1e4dd7adacd17b63582e477df3a585efb249a
Author: Adam Jackson <ajax@nwnk.net>
Date:   Wed Aug 11 01:20:28 2004 +0000

    Bug #978: Silence more unresolved symbol warnings from the ati driver.
        Patch from Stefan Dirsch.

commit 1356884132491010a2e41eb2b5be4a227b9b8138
Author: Kevin E Martin <kem@kem.org>
Date:   Wed Aug 11 01:14:14 2004 +0000

    Fix Radeon build problem with #define DoLoadableServer NO

commit f5c93cb015e334975c2797a23b68798372a284c9
Author: Adam Jackson <ajax@nwnk.net>
Date:   Tue Aug 10 04:01:42 2004 +0000

    Bug #978: Silence unresolved symbol warnings from the ati driver. Reported
        by Michel Daenzer.

commit a2da1caf5848a78b10afd99811fd1a5677af6786
Author: Kevin E Martin <kem@kem.org>
Date:   Mon Aug 9 22:37:22 2004 +0000

    Fix install problem on platforms not using xorg.cf/xfree86.cf (Bug #339,
        Harold L. Hunt II, Alexander Gottwald).
    Fix crash when using X core font in zh_CN.UTF-8 locale (Bug #368, Yu Shao,
        David Dawes).
    Fix glXMakeCurrent(Dpy, None, NULL) crash (Bug #719, Adam Jackson).
    HP-PA build fix (Bug #828, Guy Martin, Paul Anderson).
    Fix SDK build for GATOS and Wacom driver (Bug #829, Bryan Stine).
    Fix attempt to read video ROM before enabling it (Bug #843, Ivan
        Kokshaysky, Mike A. Harris).
    Fix detection of primary adapter (Bug #843, Ivan Kokshaysky, Mike A.
        Harris).
    Clarify xset man page description of how to use the keyboard repeat rate
        settings (Bug #846, Mike A. Harris).
    Fix problem where print-screen key would get remapped to sys-req in certain
        keymaps, which broke GNOME printscreen functionality (Bug #847, Owen
        Taylor).
    Fix several render problems:
    - MMIO mode support
    - Hang on IGP chips
    - VT switching hang
    - 3D render corruption (Bug #922, Hui Yu).

commit 3171664c6a02424736864204b731249097fa7aae
Author: Kevin E Martin <kem@kem.org>
Date:   Fri Aug 6 20:07:35 2004 +0000

    Disable Render acceleration in Radeon driver temporarily until it no longer
        conflicts with the 3D code.

commit 27ef7adf3c1f6c3ca79b42b468d08b8542348cdd
Author: Michel Daenzer <michel@daenzer.net>
Date:   Wed Aug 4 13:17:31 2004 +0000

    Use info->ModeReg.surface_cntl to restore byte swapping for the framebuffer
        aperture on big endian machines, remove superfluous local variables and
        register reads.
    Adapt framebuffer aperture byte swapping to texture format before copying
        data to offscreen area and restore it afterwards on big endian
        machines, fixes Render acceleration there.
    reviewed by: Hui Yu <hyu@ati.com>, Kevin E. Martin <kem@freedesktop.org>

commit 2efdc9f847fa9ff3096667b16df84817fc65605d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Aug 4 10:05:37 2004 +0000

    - Add two new XAA hooks, SetupForCPUToScreenTexture2 and
        SetupForCPUToScreenAlphaTexture2. These add a dstFormat argument after
        the previous format argument, which the driver needs to use to properly
        set up the destination format. Two new arrays are added for the list of
        destination formats supported that correspond to the previous format
        arrays for sources.
    - Make Render acceleration only occur when the new hook for that
        acceleration type is supplied and the dst format list is set, along
        with the src format list being set. Without knowing the destination
        format, the Render acceleration couldn't properly support all the
        destinations it might encounter.
    - Bump XAA module minor version.
    - Update the Radeon Render acceleration to use the new hooks when the XAA
        module is sufficiently new. Fix a bug in the src/dst alpha booleans for
        ops, and use them to set blend_cntl to support destinations without
        alpha. Add missing PICT_a1r5g5b5 texture format, and add list
        terminator. (!)

commit 1e16c66551eed750330bb74a92208c45a7112cd0
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Tue Aug 3 09:42:20 2004 +0000

    programs/Xserver/hw/xfree86/drivers/ati/radeon_merged_fb.c Add missing
        argument to xf86DrvMsg().

commit fd440a1e2110e05d116207800c123c281fbf5e19
Author: Matthieu Herrb <matthieu.herrb@laas.fr>
Date:   Tue Aug 3 09:38:03 2004 +0000

    programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c
    programs/Xserver/hw/xfree86/drivers/ati/r128_probe.h
    programs/Xserver/hw/xfree86/drivers/ati/radeon_driver.c
    programs/Xserver/hw/xfree86/drivers/ati/radeon_probe.h Fix Constification
        problems.

commit dd0f86c4cb046c79a65144f767e97fd99e7f61c9
Author: Kevin E Martin <kem@kem.org>
Date:   Sun Aug 1 23:22:01 2004 +0000

    Fix Radeon crash on server exit or generation

commit c64f90b673f5c487dfe059f1636b04a1c2ab7dc2
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Jul 31 01:21:18 2004 +0000

    Change several LoaderSymbol calls introduced by the bug #400 patch to
    *Weak() resolver functions.

commit b091b4b074cd61c9067ba95ef016f7a29a38c38d
Author: Hui YU <hyu@ati.com>
Date:   Fri Jul 30 22:20:21 2004 +0000

    Support for New radeon chips: R420/M18, R423, RV370/M22, RV380/M24, RS300.
        Add special handlings for DELL triple-head server (RV100). Misc. bug
        fixes for flat panel, host aperture, etc (Bug #946)

commit d04f61bfaf6952e832d52e1cd6014e86435aebd9
Author: Adam Jackson <ajax@nwnk.net>
Date:   Fri Jul 30 20:30:51 2004 +0000

    Bug #400 (partial): Driver fixes for the dlloader. When using dlloader, all
        framebuffer formats except cfb and the overlay modes should work, and
        r128 and radeon need to be loaded from the ati driver (both issues to
        be fixed soon). Tested on i740, s3virge, mach64, tdfx, vesa, and vga
        drivers. elfloader users shouldn't be affected.

commit 6dcb78bb818c3c1c7fe406bee5379f9bef023f4b
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Wed Jul 28 02:35:30 2004 +0000

    - add gamma correction support to the radeon video overlay

commit 26029dc9378bbd95835d397402bfc9e6b4f1a478
Author: Alex Deucher <agd5f@yahoo.com>
Date:   Mon Jul 26 23:14:37 2004 +0000

    - Add Radeon DynamicClocks option
    - Add small fixes and clean ups from ati's last code drop (typo_fixes,
        remove_fudge, laptop, xvfix)
    - fix possible segfault in mga_dri.c (Ryan Underwood)
    - Add Xv support to pre-nm2160 neomagic chipsets

commit 9f251b16e702da486f824307e72a6f80c6987b5d
Author: Adam Jackson <ajax@nwnk.net>
Date:   Mon Jul 26 19:14:58 2004 +0000

    Bug #848: Clean up gatos notice messages.

commit 6f1e01ecdb11913fd768b9918f516b8379b7858f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jul 23 05:36:14 2004 +0000

    - Add a new option, BuildDevelDRIDrivers, which controls whether
        DevelDRIDrivers is non-empty. DevelDRIDrivers contains those drivers
        aren't built by default either due to being unusable on that
        architecture (but buildable for testing) or due to security concerns,
        as in the mach64 and savage cases.
    - Merge the Mach64 DDX's DRI support, under the XF86DRI_DEVEL define, which
        is set only when BuildDevelDRIDrivers is set.
    - Fix up of the sets of DRI drivers built for various architectures.
    - Fix build of unichrome DRI driver, which is now enabled on x86.

commit b68322f467b7e524092af15e33ab872abb99b6a2
Author: Eric Anholt <anholt@freebsd.org>
Date:   Thu Jul 22 07:03:04 2004 +0000

    Merge and resolve conflicts from DRI/DRM/Mesa 20040721 imports.

commit 57de5e285d6271fc4b2bc8a951a98be6308d649d
Author: Eric Anholt <anholt@freebsd.org>
Date:   Fri Jul 16 04:38:54 2004 +0000

    Bugzilla #803,804: Fix build in the !XF86DRI case after DRI and Radeon
        Render acceleration merges.

commit 9b0ec803bd588d9af778bfd307ee6d958e4a1e73
Author: Adam Jackson <ajax@nwnk.net>
Date:   Sat Jul 10 14:22:35 2004 +0000

    Bugzilla #849: Fix DRI pagesize assumptions in radeon and r128 drivers.
    from mharris@, reviewed and applied to DRI by airlied@.

commit ccd95bfb291a0c70272fab6822ef379b83dc298d
Author: Egbert Eich <eich@suse.de>
Date:   Tue Jul 6 14:37:47 2004 +0000

    Separated Intel drivers from default DriDrivers to avoid building them on
        IA64 (Egbert Eich).
    Fixed wrong function prototype (Egbert Eich).
    Don't test for generic VGA on IA64 (Egbert Eich).
    Fixed a segfault when accessing a structure before verifying the pointer
        exists (Egbert Eich).
    Added a showcache option for debugging (Egbert Eich).
    Increase default video RAM size to 16MB when DRI is enabled and more than
        128MB are available (Egbert Eich). Fixed lockups during mode switch.
        Problem was introduced when attempting to copy the behavior during
        LeaveVT()/EnterVT() but but forgetting to call I810DRILeave() before
        I810DRIEnter(). The entire DRILeave()/Enter() scenario has been
        commented out as it didn't seem to be necessary (Egbert Eich).
    Fix TweakMemorySize() (tested with i855/i865) (Egbert Eich).
    increased MAX_DEVICES to 128 (Egbert Eich).
    Use OS provided PCI config space access as default method (Egbert Eich).
    Added support for Linux 2.6 proc file format.
    Fixed unaligned accesses to pieces of the VBE info block. VESA did not
        align elements to size (Egbert Eich).

commit 6bdf3d36ea3086432af5157540fde4e0aa0c44dc
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Jun 20 07:34:55 2004 +0000

    Add file missed in last commit: Bug #748:
    - Add Render acceleration for Radeon 100 and 200-series cards, enabled by
        default. Notable performance gains include 27fps in cairogears instead
        of 6fps (compared to 50 with glitz), and my disks are now the
        bottleneck in an ls -lR in gnome-terminal. Only supported in DRI mode
        because the MMIO submission hangs the card so far, but the code is left
        in because it may be supportable soon.
    - Add xorg.conf options to disable Render acceleration and to force the
        subpixel order in the server (Hui Yu).
    Many thanks to Hui Yu at ATI for the code this was based off of, Michel
        Daenzer for bugfixes and suggestions, and LinuxFund for sponsoring the
        work.

commit 8c1b37420ea890f76edb97aed61ee427a871cd3f
Author: Eric Anholt <anholt@freebsd.org>
Date:   Sun Jun 20 07:26:08 2004 +0000

    Bug #748:
    - Add Render acceleration for Radeon 100 and 200-series cards, enabled by
        default. Notable performance gains include 27fps in cairogears instead
        of 6fps (compared to 50 with glitz), and my disks are now the
        bottleneck in an ls -lR in gnome-terminal. Only supported in DRI mode
        because the MMIO submission hangs the card so far, but the code is left
        in because it may be supportable soon.
    - Add xorg.conf options to disable Render acceleration and to force the
        subpixel order in the server (Hui Yu).
    Many thanks to Hui Yu at ATI for the code this was based off of, Michel
        Daenzer for bugfixes and suggestions, and LinuxFund for sponsoring the
        work.

commit 6ecf374d500afe6da494dfdd6566396ec65b6d6a
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 16 09:43:59 2004 +0000

    Merge DRI-trunk-20040613 changes in programs/Xserver/hw/xfree86/drivers,
        with the following notes:
    - Savage and Mach64 (= ati/ati*.[ch] changes) DRI not merged due to
        insecurity.
    - VIA driver converted to new drmContext and drmHandle names.
    - Radeon driver merge conflicted in many places, and MergedFB at least
        could probably use some checking at this point.

commit bea8085e04136b0ef513c17bb65c54069ec531e1
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 16 09:25:58 2004 +0000

    DRI trunk-20040613 import

commit 7b588cda922992a8ee2d04853ba1533cf43592a3
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 16 09:25:58 2004 +0000

    Initial revision

commit 6cbb5bbff43d65a762d432659793333868837f0b
Author: Eric Anholt <anholt@freebsd.org>
Date:   Wed Jun 16 09:22:56 2004 +0000

    DRI XFree86-4_3_99_12-merge import

commit 3586c3c7955365a2af0b8a286ea0d0488ddfd137
Author: Egbert Eich <eich@suse.de>
Date:   Fri Apr 23 19:26:46 2004 +0000

    Merging XORG-CURRENT into trunk

commit 538768e0f472026325be9dd37dc4bfe7ea7d3b75
Author: Egbert Eich <eich@suse.de>
Date:   Sun Mar 14 08:33:20 2004 +0000

    Importing vendor version xf86-4_4_99_1 on Sun Mar 14 00:26:39 PST 2004

commit 5f179e796d1cd310790d06eebb474ad67114ec84
Author: Egbert Eich <eich@suse.de>
Date:   Wed Mar 3 12:12:18 2004 +0000

    Importing vendor version xf86-4_4_0 on Wed Mar 3 04:09:24 PST 2004

commit 493c44580191beff63575c4032f772fbbf1b06eb
Author: Egbert Eich <eich@suse.de>
Date:   Thu Feb 26 13:35:52 2004 +0000

    readding XFree86's cvs IDs

commit 942a47fd3c5e8df85642672c01072bf97285bc30
Author: Egbert Eich <eich@suse.de>
Date:   Thu Feb 26 09:23:18 2004 +0000

    Importing vendor version xf86-4_3_99_903 on Wed Feb 26 01:21:00 PST 2004

commit dda79b5ee3eb49f924a3213592d93ba981c99394
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Mon Feb 23 20:35:02 2004 +0000

    Import most of XFree86 4.4RC3. This import excludes files which have the
        new license. If we want to, later we can import 4.4RC3 again and pick
        up the files that have the new license, but for now the vendor branch
        is "pure."

commit 08104f18ac497561c969694ff709da6c361ccea7
Author: Egbert Eich <eich@suse.de>
Date:   Thu Jan 29 08:08:34 2004 +0000

    Importing vendor version xf86-012804-2330 on Thu Jan 29 00:06:33 PST 2004

commit 162d76b9c48ed17d6e645057db58c9f13436f25f
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Dec 19 20:55:06 2003 +0000

    XFree86 4.3.99.902 (RC 2)

commit 195772ec74f7a9b7d5bf294b3bc2c3b960e08a31
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Thu Dec 4 22:03:16 2003 +0000

    XFree86 4.3.99.901 (RC 1)

commit 73105e438e90f950249cb265ba99001d4db3dc60
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Tue Nov 25 19:28:36 2003 +0000

    XFree86 4.3.99.16 Bring the tree up to date for the Cygwin folks

commit 0a53864f9581196604d04fd28b4e94a9b0b73d18
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Tue Nov 25 19:28:36 2003 +0000

    Initial revision

commit c56aaef79028261e0a3be0c86ffd3f16b6bdd9ba
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Nov 14 16:48:55 2003 +0000

    XFree86 4.3.0.1

commit d09f463a5d1ce73e0b65d5276fbcca393fa2da46
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Nov 14 16:48:55 2003 +0000

    Initial revision

commit d9af6dc32652502d84ea8da5d57a5ab45429c4ad
Author: Kaleb Keithley <kaleb@freedesktop.org>
Date:   Fri Nov 14 15:54:49 2003 +0000

    R6.6 is the Xorg base-line
